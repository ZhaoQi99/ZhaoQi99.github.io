"use strict";var e,t=function(){var e,t,n=!1,a="data-font-name";function r(){let e=document.querySelectorAll(`span[${a}]`);for(let t of e)t.className="debuggerHideText"}function i(e,t){let n=document.querySelectorAll(`span[${a}=${e}]`);for(let a of n)a.className=t?"debuggerShowText":"debuggerHideText"}function d(e){if(e.target.dataset.fontName&&"SPAN"===e.target.tagName.toUpperCase())for(var t=e.target.dataset.fontName,n=document.getElementsByTagName("input"),a=0;a<n.length;++a){var r=n[a];r.dataset.fontName===t&&(r.checked=!r.checked,i(t,r.checked),r.scrollIntoView())}}return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function(n){var a=this.panel;a.setAttribute("style","padding: 5px;");var i=document.createElement("button");i.addEventListener("click",r),i.textContent="Refresh",a.appendChild(i),e=document.createElement("div"),a.appendChild(e),t=n.createObjectURL},cleanup:function(){e.textContent=""},enabled:!1,get active(){return n},set active(e){(n=e)?(document.body.addEventListener("click",d,!0),r()):(document.body.removeEventListener("click",d,!0),function(){let e=document.querySelectorAll(`span[${a}]`);for(let t of e)t.className=""}())},fontAdded:function(n,a){var d=function(e,t){for(var n=document.createElement("table"),a=0;a<t.length;a++){var r=document.createElement("tr"),i=document.createElement("td");i.textContent=t[a],r.appendChild(i);var d=document.createElement("td");d.textContent=e[t[a]].toString(),r.appendChild(d),n.appendChild(r)}return n}(n,["name","type"]),l=n.loadedName,o=document.createElement("div"),s=document.createElement("span");s.textContent=l;var c=document.createElement("a");a?(a=/url\(['"]?([^\)"']+)/.exec(a),c.href=a[1]):n.data&&(c.href=t(n.data,n.mimeType)),c.textContent="Download";var p=document.createElement("a");p.href="",p.textContent="Log",p.addEventListener("click",(function(e){e.preventDefault(),console.log(n)}));var u=document.createElement("input");u.setAttribute("type","checkbox"),u.dataset.fontName=l,u.addEventListener("click",function(e,t){return function(){i(t,e.checked)}}(u,l)),o.appendChild(u),o.appendChild(s),o.appendChild(document.createTextNode(" ")),o.appendChild(c),o.appendChild(document.createTextNode(" ")),o.appendChild(p),o.appendChild(d),e.appendChild(o),setTimeout((()=>{this.active&&r()}),2e3)}}}(),n=function(){var t=[],n=null,r=null,i=null,d=Object.create(null);return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function(t){var a=this;for(var l in this.panel.setAttribute("style","padding: 5px;"),r=document.createElement("div"),(i=document.createElement("select")).addEventListener("change",(function(e){a.selectStepper(this.value)})),r.appendChild(i),n=document.createElement("div"),this.panel.appendChild(r),this.panel.appendChild(n),sessionStorage.getItem("pdfjsBreakPoints")&&(d=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))),e=Object.create(null),t.OPS)e[t.OPS[l]]=l},cleanup:function(){i.textContent="",n.textContent="",t=[]},enabled:!1,active:!1,create:function(e){var r=document.createElement("div");r.id="stepper"+e,r.setAttribute("hidden",!0),r.className="stepper",n.appendChild(r);var l=document.createElement("option");l.textContent="Page "+(e+1),l.value=e,i.appendChild(l);var o=d[e]||[],s=new a(r,e,o);return t.push(s),1===t.length&&this.selectStepper(e,!1),s},selectStepper:function(e,n){var a;for(e|=0,n&&this.manager.selectPanel(this),a=0;a<t.length;++a){var r=t[a];r.pageIndex===e?r.panel.removeAttribute("hidden"):r.panel.setAttribute("hidden",!0)}var d=i.options;for(a=0;a<d.length;++a){var l=d[a];l.selected=(0|l.value)===e}},saveBreakPoints:function(e,t){d[e]=t,sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(d))}}}(),a=function(){function t(e,t){var n=document.createElement(e);return t&&(n.textContent=t),n}function a(e){if("string"==typeof e){return e.length<=75?e:e.substring(0,75)+"..."}if("object"!=typeof e||null===e)return e;if("length"in e){var t,n,r=[];for(t=0,n=Math.min(10,e.length);t<n;t++)r.push(a(e[t]));return t<e.length&&r.push("..."),r}var i={};for(var d in e)i[d]=a(e[d]);return i}function r(e,t,n){this.panel=e,this.breakPoint=0,this.nextBreakPoint=null,this.pageIndex=t,this.breakPoints=n,this.currentIdx=-1,this.operatorListIdx=0}return r.prototype={init:function(e){var n=this.panel,a=t("div","c=continue, s=step"),r=t("table");a.appendChild(r),r.cellSpacing=0;var i=t("tr");r.appendChild(i),i.appendChild(t("th","Break")),i.appendChild(t("th","Idx")),i.appendChild(t("th","fn")),i.appendChild(t("th","args")),n.appendChild(a),this.table=r,this.updateOperatorList(e)},updateOperatorList:function(r){var i=this;function d(){var e=+this.dataset.idx;this.checked?i.breakPoints.push(e):i.breakPoints.splice(i.breakPoints.indexOf(e),1),n.saveBreakPoints(i.pageIndex,i.breakPoints)}if(!(this.operatorListIdx>15e3)){for(var l=document.createDocumentFragment(),o=Math.min(15e3,r.fnArray.length),s=this.operatorListIdx;s<o;s++){var c=t("tr");c.className="line",c.dataset.idx=s,l.appendChild(c);var p=this.breakPoints.includes(s),u=r.argsArray[s]||[],h=t("td"),m=t("input");m.type="checkbox",m.className="points",m.checked=p,m.dataset.idx=s,m.onclick=d,h.appendChild(m),c.appendChild(h),c.appendChild(t("td",s.toString()));var v=e[r.fnArray[s]],f=u;if("showText"===v){for(var g=u[0],C=[],b=[],x=0;x<g.length;x++){var k=g[x];"object"==typeof k&&null!==k?b.push(k.fontChar):(b.length>0&&(C.push(b.join("")),b=[]),C.push(k))}b.length>0&&C.push(b.join("")),f=[C]}c.appendChild(t("td",v)),c.appendChild(t("td",JSON.stringify(a(f))))}if(o<r.fnArray.length){c=t("tr");var E=t("td","...");E.colspan=4,l.appendChild(E)}this.operatorListIdx=r.fnArray.length,this.table.appendChild(l)}},getNextBreakPoint:function(){this.breakPoints.sort((function(e,t){return e-t}));for(var e=0;e<this.breakPoints.length;e++)if(this.breakPoints[e]>this.currentIdx)return this.breakPoints[e];return null},breakIt:function(e,t){n.selectStepper(this.pageIndex,!0);var a=this,r=document;a.currentIdx=e;var i=function(e){switch(e.keyCode){case 83:r.removeEventListener("keydown",i),a.nextBreakPoint=a.currentIdx+1,a.goTo(-1),t();break;case 67:r.removeEventListener("keydown",i);var n=a.getNextBreakPoint();a.nextBreakPoint=n,a.goTo(-1),t()}};r.addEventListener("keydown",i),a.goTo(e)},goTo:function(e){for(var t=this.panel.getElementsByClassName("line"),n=0,a=t.length;n<a;++n){var r=t[n];(0|r.dataset.idx)===e?(r.style.backgroundColor="rgb(251,250,207)",r.scrollIntoView()):r.style.backgroundColor=null}}},r}(),r=function(){var e=[];function t(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}return{id:"Stats",name:"Stats",panel:null,manager:null,init(e){this.panel.setAttribute("style","padding: 5px;")},enabled:!1,active:!1,add(n,a){if(a){var r=function(t){for(var n=0,a=e.length;n<a;++n)if(e[n].pageNumber===t)return n;return!1}(n);if(!1!==r){var i=e[r];this.panel.removeChild(i.div),e.splice(r,1)}var d=document.createElement("div");d.className="stats";var l=document.createElement("div");l.className="title",l.textContent="Page: "+n;var o=document.createElement("div");o.textContent=a.toString(),d.appendChild(l),d.appendChild(o),e.push({pageNumber:n,div:d}),e.sort((function(e,t){return e.pageNumber-t.pageNumber})),t(this.panel);for(var s=0,c=e.length;s<c;++s)this.panel.appendChild(e[s].div)}},cleanup(){e=[],t(this.panel)}}}();window.PDFBug=function(){var e=[],a=null;return{tools:[t,n,r],enable(e){var t=!1,n=this.tools;1===e.length&&"all"===e[0]&&(t=!0);for(var a=0;a<n.length;++a){var r=n[a];(t||e.includes(r.id))&&(r.enabled=!0)}t||n.sort((function(t,a){var r=e.indexOf(t.id);r=r<0?n.length:r;var i=e.indexOf(a.id);return r-(i=i<0?n.length:i)}))},init(t,n){var a=document.createElement("div");a.id="PDFBug";var r=document.createElement("div");r.setAttribute("class","controls"),a.appendChild(r);var i=document.createElement("div");i.setAttribute("class","panels"),a.appendChild(i),n.appendChild(a),n.style.right="300px";for(var d=this.tools,l=this,o=0;o<d.length;++o){var s=d[o],c=document.createElement("div"),p=document.createElement("button");p.textContent=s.name,p.addEventListener("click",function(e){return function(t){t.preventDefault(),l.selectPanel(e)}}(o)),r.appendChild(p),i.appendChild(c),s.panel=c,s.manager=this,s.enabled?s.init(t):c.textContent=s.name+' is disabled. To enable add  "'+s.id+'" to the pdfBug parameter and refresh (separate multiple by commas).',e.push(p)}this.selectPanel(0)},cleanup(){for(var e=0,t=this.tools.length;e<t;e++)this.tools[e].enabled&&this.tools[e].cleanup()},selectPanel(t){if("number"!=typeof t&&(t=this.tools.indexOf(t)),t!==a){a=t;for(var n=this.tools,r=0;r<n.length;++r)r===t?(e[r].setAttribute("class","active"),n[r].active=!0,n[r].panel.removeAttribute("hidden")):(e[r].setAttribute("class",""),n[r].active=!1,n[r].panel.setAttribute("hidden","true"))}}}}();